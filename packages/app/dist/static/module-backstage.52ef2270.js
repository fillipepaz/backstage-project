(()=>{(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1556],{19589:(In,Ct,e)=>{"use strict";e.d(Ct,{E:()=>qe});var s=e(12082),l=e(11638),b=e(5124),A=e(17899),W=e(14041),r=e(64947),q=e(22968),Q=e(18690),t=e(73657),pe=e(14451),_=e(27799),de=e(94389),me=e(20947),G=e(20473),xe=e(45917),ye=e(39347),ut=e(63309),z=e(4832),ee=e(85121),D=e(17400),w=e(42226),M=e(69550),y=e(52755),v=e(89350),F=e(8911),ae=e(33602),Fe=e(48108),Ae=e(77225),X=e(55700),N=e(71865),H=e(98392),oe=e(55288),re=e(91360),_e=e(50868),tt=e(80012),Ve=e(56558),Ze=e(12285),nt=e(88714),Ge=e(14360),Je=e(58733);const Re=V=>(...he)=>{const Ee=he.length===0?[1]:he,Pt=(Nt,ln)=>typeof Nt=="string"?Nt:ln*Nt;return Ee.map(Nt=>{const ln=Pt(Nt,V);return typeof ln=="number"?`${ln}px`:ln}).join(" ")};function Le(V,he){if(!he||typeof he=="string")return;const Ee=typeof he=="function"?he(V):he;if(Ee)return{"@global":Ee}}function lt(V,he){if(!(!he||typeof he=="string")){if(typeof he=="object"){const Ee={...V},Pt=V.spacing(1);return typeof Pt=="number"&&(Ee.spacing=Re(Pt)),Object.fromEntries(Object.entries(he).map(([Nt,ln])=>typeof ln=="function"?[Nt,ln({theme:Ee})]:[Nt,ln]))}return he}}const Et=/^&.Mui-([\w-]+)$/;function wt(V){let he=V;if(!V||typeof V!="object")return he;for(const Ee of Object.keys(V)){const Pt=V[Ee];if(!(!Pt||typeof Pt!="object"))for(const Nt of Object.keys(Pt)){const ln=Nt,bn=ln.match(Et);if(bn){const[,Dn]=bn,{[ln]:Un,...Vn}=Pt;Un&&(he={...he,[Ee]:Vn,[Dn]:Un})}}}return he}function Qt(V,he={}){const Ee={},Pt={};for(const Nt of Object.keys(he)){const ln=he[Nt];ln&&("styleOverrides"in ln&&(Nt==="MuiCssBaseline"?Ee[Nt]=Le(V,ln.styleOverrides):Ee[Nt]=wt(lt(V,ln.styleOverrides))),"defaultProps"in ln&&(Pt[Nt]=ln.defaultProps))}return{overrides:Ee,props:Pt}}const yt={wave:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='1368' height='401' x='0' y='0' maskUnits='userSpaceOnUse'%3e%3cpath fill='url(%23paint0_linear)' d='M437 116C223 116 112 0 112 0h1256v400c-82 0-225-21-282-109-112-175-436-175-649-175z'/%3e%3cpath fill='url(%23paint1_linear)' d='M1368 400V282C891-29 788 40 711 161 608 324 121 372 0 361v39h1368z'/%3e%3cpath fill='url(%23paint2_linear)' d='M1368 244v156H0V94c92-24 198-46 375 0l135 41c176 51 195 109 858 109z'/%3e%3cpath fill='url(%23paint3_linear)' d='M1252 400h116c-14-7-35-14-116-16-663-14-837-128-1013-258l-85-61C98 28 46 8 0 0v400h1252z'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M-172-98h1671v601H-172z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='602' x2='1093.5' y1='-960.5' y2='272' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='482' x2='480' y1='1058.5' y2='70.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='424' x2='446.1' y1='-587.5' y2='274.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint3_linear' x1='587' x2='349' y1='-1120.5' y2='341' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e")`,wave2:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='1764' height='479' x='-229' y='-6' maskUnits='userSpaceOnUse'%3e%3cpath fill='url(%23paint0_linear)' d='M0 400h1350C1321 336 525 33 179-2c-345-34-395 236-408 402H0z'/%3e%3cpath fill='url(%23paint1_linear)' d='M1378 177v223H0V217s219 75 327 52C436 246 717-35 965 45s254 144 413 132z'/%3e%3cpath fill='url(%23paint2_linear)' d='M26 400l-78-16c-170 205-44-6-137-30l-4-1 4 1 137 30c37-45 89-110 159-201 399-514-45 238 1176-50 275-65 354-39 91 267H26z'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M0 0h1368v400H0z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='431' x2='397.3' y1='-599' y2='372.8' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='236.5' x2='446.6' y1='-586' y2='381.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='851.8' x2='640.4' y1='-867.2' y2='363.7' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e")`,round:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='2269' height='1408' x='-610' y='-509' maskUnits='userSpaceOnUse'%3e%3ccircle cx='1212.8' cy='74.8' r='317.5' fill='url(%23paint0_linear)' transform='rotate(-52 1213 75)'/%3e%3ccircle cx='737.8' cy='445.8' r='317.5' fill='url(%23paint1_linear)' transform='rotate(-116 738 446)'/%3e%3ccircle cx='601.8' cy='52.8' r='418.6' fill='url(%23paint2_linear)' transform='rotate(-117 602 53)'/%3e%3ccircle cx='999.8' cy='364' r='389.1' fill='url(%23paint3_linear)' transform='rotate(31 1000 364)'/%3e%3cellipse cx='-109.2' cy='263.5' fill='url(%23paint4_linear)' rx='429.2' ry='465.8' transform='rotate(-85 -109 264)'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M0 0h1368v400H0z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='1301.2' x2='161.4' y1='-1879.7' y2='-969.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='826.2' x2='-313.6' y1='-1508.7' y2='-598.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='718.4' x2='-784.3' y1='-2524' y2='-1324.2' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint3_linear' x1='1108.2' x2='-288.6' y1='-2031.1' y2='-915.9' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint4_linear' x1='10.4' x2='-1626.5' y1='-2603.8' y2='-1399.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e")`},ue={darkGrey:["#171717","#383838"],marineBlue:["#006D8F","#0049A1"],veryBlue:["#0027AF","#270094"],rubyRed:["#98002B","#8D1134"],toastyOrange:["#BE2200","#A41D00"],purpleSky:["#8912CA","#3E00EA"],eveningSea:["#00FFF2","#035355"],teal:["#005B4B"],pinkSea:["#C8077A","#C2297D"],greens:["#4BB8A5","#187656"]};function gt(V){var he;const{colors:Ee,shape:Pt,options:Nt}=V,bn=`linear-gradient(90deg, ${(Ee.length===1?[Ee[0],Ee[0]]:Ee).join(", ")})`,Dn=`${Pt},  ${bn}`,Un=(he=Nt==null?void 0:Nt.fontColor)!=null?he:"#FFFFFF";return{colors:Ee,shape:Pt,backgroundImage:Dn,fontColor:Un}}const xt={home:gt({colors:ue.teal,shape:yt.wave}),documentation:gt({colors:ue.pinkSea,shape:yt.wave2}),tool:gt({colors:ue.purpleSky,shape:yt.round}),service:gt({colors:ue.marineBlue,shape:yt.wave}),website:gt({colors:ue.veryBlue,shape:yt.wave}),library:gt({colors:ue.rubyRed,shape:yt.wave}),other:gt({colors:ue.darkGrey,shape:yt.wave}),app:gt({colors:ue.toastyOrange,shape:yt.wave}),apis:gt({colors:ue.teal,shape:yt.wave2}),card:gt({colors:ue.greens,shape:yt.wave})},ht=16,Ut='"Helvetica Neue", Helvetica, Roboto, Arial, sans-serif',S="home",P={htmlFontSize:ht,fontFamily:Ut,h1:{fontSize:54,fontWeight:700,marginBottom:10},h2:{fontSize:40,fontWeight:700,marginBottom:8},h3:{fontSize:32,fontWeight:700,marginBottom:6},h4:{fontWeight:700,fontSize:28,marginBottom:6},h5:{fontWeight:700,fontSize:24,marginBottom:4},h6:{fontWeight:700,fontSize:20,marginBottom:2}};function j(V){const{palette:he,htmlFontSize:Ee=ht,fontFamily:Pt=Ut,defaultPageTheme:Nt=S,pageTheme:ln=xt,typography:bn}=V;if(!ln[Nt])throw new Error(`${Nt} is not defined in pageTheme.`);return P.htmlFontSize=Ee,P.fontFamily=Pt,{palette:he,typography:bn!=null?bn:P,page:ln[Nt],getPageTheme:({themeId:Dn})=>{var Un;return(Un=ln[Dn])!=null?Un:ln[Nt]}}}const Z={MuiCssBaseline:{styleOverrides:V=>({html:{height:"100%",fontFamily:V.typography.fontFamily},body:{height:"100%",fontFamily:V.typography.fontFamily,overscrollBehaviorY:"none",fontSize:"0.875rem",lineHeight:1.43},a:{color:"inherit",textDecoration:"none"}})},MuiGrid:{defaultProps:{spacing:2}},MuiSwitch:{defaultProps:{color:"primary"}},MuiTableRow:{styleOverrides:{root:({theme:V})=>({"&:nth-of-type(odd)":{backgroundColor:V.palette.background.default}}),hover:{"&:hover":{cursor:"pointer"}},head:({theme:V})=>({"&:nth-of-type(odd)":{backgroundColor:V.palette.background.paper}})}},MuiTableCell:{styleOverrides:{root:({theme:V})=>({wordBreak:"break-word",overflow:"hidden",verticalAlign:"middle",lineHeight:"1",margin:0,padding:V.spacing(3,2,3,2.5),borderBottom:0}),sizeSmall:({theme:V})=>({padding:V.spacing(1.5,2,1.5,2.5)}),head:({theme:V})=>({wordBreak:"break-word",overflow:"hidden",color:V.palette.textSubtle,fontWeight:"normal",lineHeight:"1"})}},MuiTabs:{styleOverrides:{root:{minHeight:24}}},MuiTab:{styleOverrides:{root:({theme:V})=>({color:V.palette.link,minHeight:24,textTransform:"initial",letterSpacing:"0.07em","&:hover":{color:(0,tt.e$)(V.palette.link,.3),background:(0,tt.a)(V.palette.link,.95)},[V.breakpoints.up("md")]:{minWidth:120,fontSize:V.typography.pxToRem(14),fontWeight:500}}),textColorPrimary:({theme:V})=>({color:V.palette.link})}},MuiTableSortLabel:{styleOverrides:{root:{color:"inherit","&:hover":{color:"inherit"},"&:focus":{color:"inherit"},"&.Mui-active":{fontWeight:"bold",color:"inherit"}}}},MuiListItemText:{styleOverrides:{dense:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}},MuiButton:{styleOverrides:{text:{padding:void 0}}},MuiChip:{styleOverrides:{root:({theme:V})=>({marginRight:V.spacing(1),marginBottom:V.spacing(1)}),label:({theme:V})=>({lineHeight:V.spacing(2.5),fontWeight:V.typography.fontWeightMedium,fontSize:V.spacing(1.75)}),labelSmall:({theme:V})=>({fontSize:V.spacing(1.5)}),deleteIcon:({theme:V})=>({width:V.spacing(3),height:V.spacing(3),margin:V.spacing(0,.75,0,-.75)}),deleteIconSmall:({theme:V})=>({width:V.spacing(2),height:V.spacing(2),margin:V.spacing(0,.5,0,-.5)})}},MuiCard:{styleOverrides:{root:{display:"flex",flexDirection:"column"}}},MuiCardHeader:{styleOverrides:{root:{paddingBottom:0}}},MuiCardContent:{styleOverrides:{root:{flexGrow:1,"&:last-child":{paddingBottom:void 0}}}},MuiCardActions:{styleOverrides:{root:{justifyContent:"flex-end"}}},MuiLink:{defaultProps:{underline:"hover"}},MuiPaper:{styleOverrides:{root:{backgroundImage:"unset"}}}};var Ie=(V,he,Ee)=>{if(!he.has(V))throw TypeError("Cannot "+Ee)},ze=(V,he,Ee)=>(Ie(V,he,"read from private field"),Ee?Ee.call(V):he.get(V)),dt=(V,he,Ee)=>{if(he.has(V))throw TypeError("Cannot add the same private member more than once");he instanceof WeakSet?he.add(V):he.set(V,Ee)},Qe=(V,he,Ee,Pt)=>(Ie(V,he,"write to private field"),Pt?Pt.call(V,Ee):he.set(V,Ee),Ee),et;class $t{constructor(he,Ee){dt(this,et,new Map),Qe(this,et,new Map),he&&ze(this,et).set("v4",he),Ee&&ze(this,et).set("v5",Ee)}getTheme(he){return ze(this,et).get(he)}}et=new WeakMap;function tn(V){const he=j(V),Ee={...Z,...V.components},Pt=(0,Ve.A)({...he,components:Ee}),Nt=Qt(Pt,Ee),ln={...(0,H.A)(he),...Nt};return new $t(ln,Pt)}function It(V){const he=adaptV4Theme(V),Ee=createTheme$2(V);return new $t(Ee,createTheme$1(he))}const pt={light:{type:"light",mode:"light",background:{default:"#F8F8F8",paper:"#FFFFFF"},status:{ok:"#1DB954",warning:"#FF9800",error:"#E22134",running:"#1F5493",pending:"#FFED51",aborted:"#757575"},bursts:{fontColor:"#FEFEFE",slackChannelText:"#ddd",backgroundColor:{default:"#7C3699"},gradient:{linear:"linear-gradient(-137deg, #4BB8A5 0%, #187656 100%)"}},primary:{main:"#1F5493"},banner:{info:"#2E77D0",error:"#E22134",text:"#FFFFFF",link:"#000000",closeButtonColor:"#FFFFFF",warning:"#FF9800"},border:"#E6E6E6",textContrast:"#000000",textVerySubtle:"#DDD",textSubtle:"#6E6E6E",highlight:"#FFFBCC",errorBackground:"#FFEBEE",warningBackground:"#F59B23",infoBackground:"#ebf5ff",errorText:"#CA001B",infoText:"#004e8a",warningText:"#000000",linkHover:"#2196F3",link:"#0A6EBE",gold:"#FFD600",navigation:{background:"#171717",indicator:"#9BF0E1",color:"#b5b5b5",selectedColor:"#FFF",navItem:{hoverBackground:"#404040"},submenu:{background:"#404040"}},pinSidebarButton:{icon:"#181818",background:"#BDBDBD"},tabbar:{indicator:"#9BF0E1"}},dark:{type:"dark",mode:"dark",background:{default:"#333333",paper:"#424242"},status:{ok:"#71CF88",warning:"#FFB84D",error:"#F84C55",running:"#3488E3",pending:"#FEF071",aborted:"#9E9E9E"},bursts:{fontColor:"#FEFEFE",slackChannelText:"#ddd",backgroundColor:{default:"#7C3699"},gradient:{linear:"linear-gradient(-137deg, #4BB8A5 0%, #187656 100%)"}},primary:{main:"#9CC9FF",dark:"#82BAFD"},secondary:{main:"#FF88B2"},banner:{info:"#2E77D0",error:"#E22134",text:"#FFFFFF",link:"#000000",closeButtonColor:"#FFFFFF",warning:"#FF9800"},border:"#E6E6E6",textContrast:"#FFFFFF",textVerySubtle:"#727272",textSubtle:"#CCCCCC",highlight:"#FFFBCC",errorBackground:"#FFEBEE",warningBackground:"#F59B23",infoBackground:"#ebf5ff",errorText:"#CA001B",infoText:"#004e8a",warningText:"#000000",linkHover:"#82BAFD",link:"#9CC9FF",gold:"#FFD600",navigation:{background:"#424242",indicator:"#9BF0E1",color:"#b5b5b5",selectedColor:"#FFF",navItem:{hoverBackground:"#404040"},submenu:{background:"#404040"}},pinSidebarButton:{icon:"#404040",background:"#BDBDBD"},tabbar:{indicator:"#9BF0E1"}}},qt={light:tn({palette:pt.light}),dark:tn({palette:pt.dark})};Ge.A.configure(V=>`v5-${V}`);const sn=(0,oe.A)({productionPrefix:"jss4-"});function an(V){const{children:he,theme:Ee,noCssBaseline:Pt=!1}=V,Nt=Ee.getTheme("v4"),ln=Ee.getTheme("v5");let bn;Pt||(bn=W.createElement(Je.Ay,null));let Dn=W.createElement(W.Fragment,null,bn,he);return Nt&&(Dn=W.createElement(re.Ay,{generateClassName:sn},W.createElement(_e.A,{theme:Nt},Dn))),ln&&(Dn=W.createElement(Ze.A,{injectFirst:!0},W.createElement(nt.A,{theme:ln},Dn))),Dn}function Vt(V){var he,Ee,Pt,Nt;return{props:{MuiGrid:(Ee=(he=Z)==null?void 0:he.MuiGrid)==null?void 0:Ee.defaultProps,MuiSwitch:(Nt=(Pt=Z)==null?void 0:Pt.MuiSwitch)==null?void 0:Nt.defaultProps},...j(V)}}function Ce(V){return Qt(V,Z).overrides}function Ye(V){const he=Vt(V),Ee=(0,H.A)(he),Pt=Ce(Ee);return{...Ee,overrides:Pt}}const Kt=Ye({palette:pt.light}),jt=Ye({palette:pt.dark});var Wt=e(75962),ft=e(87145);const Ln=[(0,l.bW)({api:b.q,deps:{configApi:b.p},factory:({configApi:V})=>s.Yi.compile(`${V.getString("backend.baseUrl")}/api/{{ pluginId }}`)}),(0,l.bW)({api:b.l,deps:{},factory:()=>new s.$K}),(0,l.bW)({api:b.a,deps:{},factory:()=>new s.R8}),(0,l.bW)({api:b.r,deps:{alertApi:b.l},factory:({alertApi:V})=>{const he=new s.i3(V,new s.Fb);return s.u_.forward(he,{hidden:!1}),he}}),(0,l.bW)({api:b.y,deps:{errorApi:b.r},factory:({errorApi:V})=>s.gu.create({errorApi:V})}),(0,l.bW)({api:b.s,deps:{configApi:b.p,identityApi:b.t,discoveryApi:b.q},factory:({configApi:V,identityApi:he,discoveryApi:Ee})=>(0,s.FA)({middleware:[s.W.resolvePluginProtocol({discoveryApi:Ee}),s.W.injectIdentityAuth({identityApi:he,config:V})]})}),(0,l.bW)({api:b.x,deps:{},factory:()=>new s.aQ}),(0,l.bW)({api:b.g,deps:{discoveryApi:b.q,oauthRequestApi:b.x,configApi:b.p},factory:({discoveryApi:V,oauthRequestApi:he,configApi:Ee})=>s.kF.create({configApi:Ee,discoveryApi:V,oauthRequestApi:he,environment:Ee.getOptionalString("auth.environment")})}),(0,l.bW)({api:b.m,deps:{discoveryApi:b.q,oauthRequestApi:b.x,configApi:b.p},factory:({discoveryApi:V,oauthRequestApi:he,configApi:Ee})=>s.n5.create({configApi:Ee,discoveryApi:V,oauthRequestApi:he,environment:Ee.getOptionalString("auth.environment")})}),(0,l.bW)({api:b.d,deps:{discoveryApi:b.q,oauthRequestApi:b.x,configApi:b.p},factory:({discoveryApi:V,oauthRequestApi:he,configApi:Ee})=>s.Qf.create({configApi:Ee,discoveryApi:V,oauthRequestApi:he,defaultScopes:["read:user"],environment:Ee.getOptionalString("auth.environment")})}),(0,l.bW)({api:b.o,deps:{discoveryApi:b.q,oauthRequestApi:b.x,configApi:b.p},factory:({discoveryApi:V,oauthRequestApi:he,configApi:Ee})=>s.gE.create({configApi:Ee,discoveryApi:V,oauthRequestApi:he,environment:Ee.getOptionalString("auth.environment")})}),(0,l.bW)({api:b.e,deps:{discoveryApi:b.q,oauthRequestApi:b.x,configApi:b.p},factory:({discoveryApi:V,oauthRequestApi:he,configApi:Ee})=>s.WW.create({configApi:Ee,discoveryApi:V,oauthRequestApi:he,environment:Ee.getOptionalString("auth.environment")})}),(0,l.bW)({api:b.h,deps:{discoveryApi:b.q,oauthRequestApi:b.x,configApi:b.p},factory:({discoveryApi:V,oauthRequestApi:he,configApi:Ee})=>s.kI.create({configApi:Ee,discoveryApi:V,oauthRequestApi:he,environment:Ee.getOptionalString("auth.environment")})}),(0,l.bW)({api:b.i,deps:{discoveryApi:b.q,oauthRequestApi:b.x,configApi:b.p},factory:({discoveryApi:V,oauthRequestApi:he,configApi:Ee})=>s.Ke.create({configApi:Ee,discoveryApi:V,oauthRequestApi:he,defaultScopes:["account"],environment:Ee.getOptionalString("auth.environment")})}),(0,l.bW)({api:b.j,deps:{discoveryApi:b.q,oauthRequestApi:b.x,configApi:b.p},factory:({discoveryApi:V,oauthRequestApi:he,configApi:Ee})=>s.l9.create({configApi:Ee,discoveryApi:V,oauthRequestApi:he,defaultScopes:["REPO_READ"]})}),(0,l.bW)({api:b.k,deps:{discoveryApi:b.q,oauthRequestApi:b.x,configApi:b.p},factory:({discoveryApi:V,oauthRequestApi:he,configApi:Ee})=>s.l2.create({configApi:Ee,discoveryApi:V,oauthRequestApi:he,environment:Ee.getOptionalString("auth.environment")})}),(0,l.bW)({api:b.v,deps:{discoveryApi:b.q,oauthRequestApi:b.x,configApi:b.p},factory:({discoveryApi:V,oauthRequestApi:he,configApi:Ee})=>s.Ud.create({configApi:Ee,discoveryApi:V,oauthRequestApi:he,environment:Ee.getOptionalString("auth.environment")})}),(0,l.bW)({api:A.x9,deps:{discovery:b.q,identity:b.t,config:b.p},factory:({config:V,discovery:he,identity:Ee})=>A.ak.create({config:V,discovery:he,identity:Ee})})];function dn({children:V}){return(0,Q.Ri)()?W.createElement(W.Fragment,null,V):W.createElement(Q.fS,null,V)}const Xt=()=>W.createElement(q.M,{status:"404",statusMessage:"PAGE NOT FOUND"}),An=({step:V,error:he})=>{let Ee="";return V==="load-config"?Ee=`The configuration failed to load, someone should have a look at this error: ${he.message}`:V==="load-chunk"&&(Ee=`Lazy loaded chunk failed to load, try to reload the page: ${he.message}`),W.createElement(dn,null,W.createElement(q.M,{statusMessage:Ee,stack:he.stack}))},Xe=({error:V,resetError:he,plugin:Ee})=>W.createElement(q.bJ,{title:`Error in ${Ee==null?void 0:Ee.getId()}`,defaultExpanded:!0,error:V},W.createElement(r.A,{variant:"outlined",onClick:he},"Retry")),mt={Progress:q.ke,Router:t.Kd,NotFoundErrorPage:Xt,BootErrorPage:An,ErrorBoundaryFallback:Xe},Dt={brokenImage:_.A,catalog:F.A,scaffolder:me.A,techdocs:G.A,search:xe.A,chat:ye.A,dashboard:ut.A,docs:z.A,email:ee.A,github:w.A,group:ae.A,help:M.A,"kind:api":D.A,"kind:component":v.A,"kind:domain":pe.A,"kind:group":ae.A,"kind:location":y.A,"kind:system":de.A,"kind:user":Fe.A,"kind:resource":X.A,"kind:template":N.A,user:Fe.A,warning:Ae.A},rt=[{id:"light",title:"Light Theme",variant:"light",icon:W.createElement(ft.A,null),Provider:({children:V})=>W.createElement(an,{theme:qt.light,children:V})},{id:"dark",title:"Dark Theme",variant:"dark",icon:W.createElement(Wt.A,null),Provider:({children:V})=>W.createElement(an,{theme:qt.dark,children:V})}];function qe(V){var he,Ee,Pt,Nt;return(0,s.Z8)({...V,apis:(he=V==null?void 0:V.apis)!=null?he:[],bindRoutes:V==null?void 0:V.bindRoutes,components:{...mt,...V==null?void 0:V.components},configLoader:V==null?void 0:V.configLoader,defaultApis:Ln,icons:{...Dt,...V==null?void 0:V.icons},plugins:(Ee=V==null?void 0:V.plugins)!=null?Ee:[],featureFlags:(Pt=V==null?void 0:V.featureFlags)!=null?Pt:[],themes:(Nt=V==null?void 0:V.themes)!=null?Nt:rt})}},75757:(In,Ct,e)=>{"use strict";e.d(Ct,{K3:()=>z,cr:()=>q,dJ:()=>ut});var s=e(29835),l=e(3399),b=e(10288),A=e.n(b),W=e(94214),r=e.n(W);const q=Symbol.for("CATALOG_FILTER_EXISTS_0e15b590c0b343a2bae3e787e84c2111");function Q(ee){return!ee.cursor}const t="catalog";var pe=Object.defineProperty,_=(ee,D,w)=>D in ee?pe(ee,D,{enumerable:!0,configurable:!0,writable:!0,value:w}):ee[D]=w,de=(ee,D,w)=>(_(ee,typeof D!="symbol"?D+"":D,w),w);class me{constructor(D){de(this,"discoveryApi"),de(this,"fetchApi"),this.discoveryApi=D.discoveryApi,this.fetchApi=D.fetchApi||{fetch:A()}}async analyzeLocation(D,w){const M=await this.discoveryApi.getBaseUrl(t),v=W.parse("/analyze-location").expand({});return await this.fetchApi.fetch(`${M}${v}`,{headers:{"Content-Type":"application/json",...(w==null?void 0:w.token)&&{Authorization:`Bearer ${w==null?void 0:w.token}`}},method:"POST",body:JSON.stringify(D.body)})}async createLocation(D,w){const M=await this.discoveryApi.getBaseUrl(t),v=W.parse("/locations{?dryRun}").expand({...D.query});return await this.fetchApi.fetch(`${M}${v}`,{headers:{"Content-Type":"application/json",...(w==null?void 0:w.token)&&{Authorization:`Bearer ${w==null?void 0:w.token}`}},method:"POST",body:JSON.stringify(D.body)})}async deleteEntityByUid(D,w){const M=await this.discoveryApi.getBaseUrl(t),v=W.parse("/entities/by-uid/{uid}").expand({uid:D.path.uid});return await this.fetchApi.fetch(`${M}${v}`,{headers:{"Content-Type":"application/json",...(w==null?void 0:w.token)&&{Authorization:`Bearer ${w==null?void 0:w.token}`}},method:"DELETE"})}async deleteLocation(D,w){const M=await this.discoveryApi.getBaseUrl(t),v=W.parse("/locations/{id}").expand({id:D.path.id});return await this.fetchApi.fetch(`${M}${v}`,{headers:{"Content-Type":"application/json",...(w==null?void 0:w.token)&&{Authorization:`Bearer ${w==null?void 0:w.token}`}},method:"DELETE"})}async getEntities(D,w){const M=await this.discoveryApi.getBaseUrl(t),v=W.parse("/entities{?fields,limit,filter*,offset,after,order*}").expand({...D.query});return await this.fetchApi.fetch(`${M}${v}`,{headers:{"Content-Type":"application/json",...(w==null?void 0:w.token)&&{Authorization:`Bearer ${w==null?void 0:w.token}`}},method:"GET"})}async getEntitiesByQuery(D,w){const M=await this.discoveryApi.getBaseUrl(t),v=W.parse("/entities/by-query{?fields,limit,orderField*,cursor,filter*,fullTextFilterTerm,fullTextFilterFields}").expand({...D.query});return await this.fetchApi.fetch(`${M}${v}`,{headers:{"Content-Type":"application/json",...(w==null?void 0:w.token)&&{Authorization:`Bearer ${w==null?void 0:w.token}`}},method:"GET"})}async getEntitiesByRefs(D,w){const M=await this.discoveryApi.getBaseUrl(t),v=W.parse("/entities/by-refs/{?filter*}").expand({...D.query});return await this.fetchApi.fetch(`${M}${v}`,{headers:{"Content-Type":"application/json",...(w==null?void 0:w.token)&&{Authorization:`Bearer ${w==null?void 0:w.token}`}},method:"POST",body:JSON.stringify(D.body)})}async getEntityAncestryByName(D,w){const M=await this.discoveryApi.getBaseUrl(t),v=W.parse("/entities/by-name/{kind}/{namespace}/{name}/ancestry").expand({kind:D.path.kind,namespace:D.path.namespace,name:D.path.name});return await this.fetchApi.fetch(`${M}${v}`,{headers:{"Content-Type":"application/json",...(w==null?void 0:w.token)&&{Authorization:`Bearer ${w==null?void 0:w.token}`}},method:"GET"})}async getEntityByName(D,w){const M=await this.discoveryApi.getBaseUrl(t),v=W.parse("/entities/by-name/{kind}/{namespace}/{name}").expand({kind:D.path.kind,namespace:D.path.namespace,name:D.path.name});return await this.fetchApi.fetch(`${M}${v}`,{headers:{"Content-Type":"application/json",...(w==null?void 0:w.token)&&{Authorization:`Bearer ${w==null?void 0:w.token}`}},method:"GET"})}async getEntityByUid(D,w){const M=await this.discoveryApi.getBaseUrl(t),v=W.parse("/entities/by-uid/{uid}").expand({uid:D.path.uid});return await this.fetchApi.fetch(`${M}${v}`,{headers:{"Content-Type":"application/json",...(w==null?void 0:w.token)&&{Authorization:`Bearer ${w==null?void 0:w.token}`}},method:"GET"})}async getEntityFacets(D,w){const M=await this.discoveryApi.getBaseUrl(t),v=W.parse("/entity-facets{?facet*,filter*}").expand({...D.query});return await this.fetchApi.fetch(`${M}${v}`,{headers:{"Content-Type":"application/json",...(w==null?void 0:w.token)&&{Authorization:`Bearer ${w==null?void 0:w.token}`}},method:"GET"})}async getLocation(D,w){const M=await this.discoveryApi.getBaseUrl(t),v=W.parse("/locations/{id}").expand({id:D.path.id});return await this.fetchApi.fetch(`${M}${v}`,{headers:{"Content-Type":"application/json",...(w==null?void 0:w.token)&&{Authorization:`Bearer ${w==null?void 0:w.token}`}},method:"GET"})}async getLocationByEntity(D,w){const M=await this.discoveryApi.getBaseUrl(t),v=W.parse("/locations/by-entity/{kind}/{namespace}/{name}").expand({kind:D.path.kind,namespace:D.path.namespace,name:D.path.name});return await this.fetchApi.fetch(`${M}${v}`,{headers:{"Content-Type":"application/json",...(w==null?void 0:w.token)&&{Authorization:`Bearer ${w==null?void 0:w.token}`}},method:"GET"})}async getLocations(D,w){const M=await this.discoveryApi.getBaseUrl(t),v=W.parse("/locations").expand({});return await this.fetchApi.fetch(`${M}${v}`,{headers:{"Content-Type":"application/json",...(w==null?void 0:w.token)&&{Authorization:`Bearer ${w==null?void 0:w.token}`}},method:"GET"})}async refreshEntity(D,w){const M=await this.discoveryApi.getBaseUrl(t),v=W.parse("/refresh").expand({});return await this.fetchApi.fetch(`${M}${v}`,{headers:{"Content-Type":"application/json",...(w==null?void 0:w.token)&&{Authorization:`Bearer ${w==null?void 0:w.token}`}},method:"POST",body:JSON.stringify(D.body)})}async validateEntity(D,w){const M=await this.discoveryApi.getBaseUrl(t),v=W.parse("/validate-entity").expand({});return await this.fetchApi.fetch(`${M}${v}`,{headers:{"Content-Type":"application/json",...(w==null?void 0:w.token)&&{Authorization:`Bearer ${w==null?void 0:w.token}`}},method:"POST",body:JSON.stringify(D.body)})}}var G=Object.defineProperty,xe=(ee,D,w)=>D in ee?G(ee,D,{enumerable:!0,configurable:!0,writable:!0,value:w}):ee[D]=w,ye=(ee,D,w)=>(xe(ee,typeof D!="symbol"?D+"":D,w),w);class ut{constructor(D){ye(this,"apiClient"),this.apiClient=new me(D)}async getEntityAncestors(D,w){return await this.requestRequired(await this.apiClient.getEntityAncestryByName({path:(0,s.KU)(D.entityRef)},w))}async getLocationById(D,w){return await this.requestOptional(await this.apiClient.getLocation({path:{id:D}},w))}async getLocationByEntity(D,w){return await this.requestOptional(await this.apiClient.getLocationByEntity({path:(0,s.KU)(D)},w))}async getEntities(D,w){const{filter:M=[],fields:y=[],order:v,offset:F,limit:ae,after:Fe}=D!=null?D:{},Ae=[];if(v)for(const H of[v].flat())H&&Ae.push(`${H.order}:${H.field}`);const X=await this.requestRequired(await this.apiClient.getEntities({query:{fields:y,limit:ae,filter:this.getFilterValue(M),offset:F,after:Fe,order:v?Ae:void 0}},w));if(Ae.length)return{items:X};const N=(H,oe)=>{var re,_e;if(((re=H.metadata)==null?void 0:re.name)===void 0||H.kind===void 0||((_e=oe.metadata)==null?void 0:_e.name)===void 0||oe.kind===void 0)return 0;const tt=(0,s.U2)(H),Ve=(0,s.U2)(oe);return tt<Ve?-1:tt>Ve?1:0};return{items:X.sort(N)}}async getEntitiesByRefs(D,w){const M=await this.apiClient.getEntitiesByRefs({body:{entityRefs:D.entityRefs,fields:D.fields},query:{filter:this.getFilterValue(D.filter)}},w);if(!M.ok)throw await l.o3.fromResponse(M);const{items:y}=await M.json();return{items:y.map(v=>v!=null?v:void 0)}}async queryEntities(D={},w){var M,y;const v={};if(Q(D)){const{fields:F=[],filter:ae,limit:Fe,orderFields:Ae,fullTextFilter:X}=D;v.filter=this.getFilterValue(ae),Fe!==void 0&&(v.limit=Fe),Ae!==void 0&&(v.orderField=(Array.isArray(Ae)?Ae:[Ae]).map(({field:H,order:oe})=>`${H},${oe}`)),F.length&&(v.fields=F);const N=(M=X==null?void 0:X.term)==null?void 0:M.trim();N&&(v.fullTextFilterTerm=N),(y=X==null?void 0:X.fields)!=null&&y.length&&(v.fullTextFilterFields=X.fields)}else{const{fields:F=[],limit:ae,cursor:Fe}=D;v.cursor=Fe,ae!==void 0&&(v.limit=ae),F.length&&(v.fields=F)}return this.apiClient.getEntitiesByQuery({query:v},w).then(F=>F.json())}async getEntityByRef(D,w){return this.requestOptional(await this.apiClient.getEntityByName({path:(0,s.KU)(D)},w))}async getEntityByName(D,w){const{kind:M,namespace:y="default",name:v}=D;return this.requestOptional(await this.apiClient.getEntityByName({path:{kind:M,namespace:y,name:v}},w))}async refreshEntity(D,w){const M=await this.apiClient.refreshEntity({body:{entityRef:D}},w);if(M.status!==200)throw new Error(await M.text())}async getEntityFacets(D,w){const{filter:M=[],facets:y}=D;return await this.requestOptional(await this.apiClient.getEntityFacets({query:{facet:y,filter:this.getFilterValue(M)}},w))}async addLocation(D,w){const{type:M="url",target:y,dryRun:v}=D,F=await this.apiClient.createLocation({body:{type:M,target:y},query:{dryRun:v?"true":void 0}},w);if(F.status!==201)throw new Error(await F.text());const{location:ae,entities:Fe,exists:Ae}=await F.json();if(!ae)throw new Error(`Location wasn't added: ${y}`);return{location:ae,entities:Fe,exists:Ae}}async getLocationByRef(D,w){return(await this.requestRequired(await this.apiClient.getLocations({},w))).map(y=>y.data).find(y=>D===(0,s.KL)(y))}async removeLocationById(D,w){await this.requestIgnored(await this.apiClient.deleteLocation({path:{id:D}},w))}async removeEntityByUid(D,w){await this.requestIgnored(await this.apiClient.deleteEntityByUid({path:{uid:D}},w))}async validateEntity(D,w,M){const y=await this.apiClient.validateEntity({body:{entity:D,location:w}},M);if(y.ok)return{valid:!0};if(y.status!==400)throw await l.o3.fromResponse(y);const{errors:v=[]}=await y.json();return{valid:!1,errors:v}}async requestIgnored(D){if(!D.ok)throw await l.o3.fromResponse(D)}async requestRequired(D){if(!D.ok)throw await l.o3.fromResponse(D);return D.json()}async requestOptional(D){if(!D.ok){if(D.status===404)return;throw await l.o3.fromResponse(D)}return await D.json()}getFilterValue(D=[]){const w=[];for(const M of[D].flat()){const y=[];for(const[v,F]of Object.entries(M))for(const ae of[F].flat())ae===q?y.push(v):typeof ae=="string"&&y.push(`${v}=${ae}`);y.length&&w.push(y.join(","))}return w}}const z="backstage.io/catalog-processing"},29835:(In,Ct,e)=>{"use strict";e.d(Ct,{Cr:()=>ar,Eo:()=>or,Ey:()=>it,I4:()=>Sa,IB:()=>cn,KL:()=>ir,KU:()=>F,Kx:()=>Te,L8:()=>ke,P:()=>xe,Qz:()=>We,U2:()=>ae,ZD:()=>At,_P:()=>G,aY:()=>er,fO:()=>St,fT:()=>ie,jn:()=>zt,nC:()=>hn,oQ:()=>me,r2:()=>ur,sA:()=>_t,sM:()=>v,tj:()=>Ln,u0:()=>Ne,vv:()=>ge,yz:()=>Wt,zj:()=>He,zu:()=>Kt});var s=e(45250),l=e.n(s),b=e(11601),A=e.n(b);function W($e){return $e.kind.toLocaleUpperCase("en-US")==="API"}function r($e){return $e.kind.toLocaleUpperCase("en-US")==="COMPONENT"}function q($e){return $e.kind.toLocaleUpperCase("en-US")==="DOMAIN"}function Q($e){return $e.kind.toLocaleUpperCase("en-US")==="GROUP"}function t($e){return $e.kind.toLocaleUpperCase("en-US")==="LOCATION"}function pe($e){return $e.kind.toLocaleUpperCase("en-US")==="RESOURCE"}function _($e){return $e.kind.toLocaleUpperCase("en-US")==="SYSTEM"}function de($e){return $e.kind.toLocaleUpperCase("en-US")==="USER"}const me="default",G="backstage.io/view-url",xe="backstage.io/edit-url",ye="kubernetes.io/api-server",ut="kubernetes.io/api-server-certificate-authority",z="kubernetes.io/auth-provider";var ee=Object.defineProperty,D=($e,ce,st)=>ce in $e?ee($e,ce,{enumerable:!0,configurable:!0,writable:!0,value:st}):$e[ce]=st,w=($e,ce,st)=>(D($e,typeof ce!="symbol"?ce+"":ce,st),st);class M{constructor(ce=me){w(this,"namespace"),this.namespace=ce}async enforce(ce){return ce.metadata.namespace?ce:lodash.merge({metadata:{namespace:this.namespace}},ce)}}function y($e){let ce=$e.indexOf(":");const st=$e.indexOf("/");st!==-1&&st<ce&&(ce=-1);const Rn=ce===-1?void 0:$e.slice(0,ce),Kn=st===-1?void 0:$e.slice(ce+1,st),aa=$e.slice(Math.max(ce+1,st+1));if(Rn===""||Kn===""||aa==="")throw new TypeError(`Entity reference "${$e}" was not on the form [<kind>:][<namespace>/]<name>`);return{kind:Rn,namespace:Kn,name:aa}}function v($e){return{kind:$e.kind,namespace:$e.metadata.namespace||me,name:$e.metadata.name}}function F($e,ce){var st,Rn,Kn,aa;if(!$e)throw new Error("Entity reference must not be empty");const ra=ce==null?void 0:ce.defaultKind,va=(ce==null?void 0:ce.defaultNamespace)||me;let _a,wa,Ia;if(typeof $e=="string"){const Ka=y($e);_a=(st=Ka.kind)!=null?st:ra,wa=(Rn=Ka.namespace)!=null?Rn:va,Ia=Ka.name}else _a=(Kn=$e.kind)!=null?Kn:ra,wa=(aa=$e.namespace)!=null?aa:va,Ia=$e.name;if(_a)if(wa){if(!Ia){const Ka=JSON.stringify($e);throw new Error(`Entity reference ${Ka} had missing or empty name`)}}else{const Ka=JSON.stringify($e);throw new Error(`Entity reference ${Ka} had missing or empty namespace`)}else{const Ka=JSON.stringify($e);throw new Error(`Entity reference ${Ka} had missing or empty kind (e.g. did not start with "component:" or similar)`)}return{kind:_a,namespace:wa,name:Ia}}function ae($e){var ce,st;let Rn,Kn,aa;return"metadata"in $e?(Rn=$e.kind,Kn=(ce=$e.metadata.namespace)!=null?ce:me,aa=$e.metadata.name):(Rn=$e.kind,Kn=(st=$e.namespace)!=null?st:me,aa=$e.name),`${Rn.toLocaleLowerCase("en-US")}:${Kn.toLocaleLowerCase("en-US")}/${aa.toLocaleLowerCase("en-US")}`}var Fe=Object.defineProperty,Ae=($e,ce,st)=>ce in $e?Fe($e,ce,{enumerable:!0,configurable:!0,writable:!0,value:st}):$e[ce]=st,X=($e,ce,st)=>(Ae($e,typeof ce!="symbol"?ce+"":ce,st),st);class N{constructor(ce){X(this,"parentRef");const{kind:st,namespace:Rn,name:Kn}=F(ce,{defaultKind:"Group",defaultNamespace:me});if(st.toLocaleUpperCase("en-US")!=="GROUP")throw new TypeError("group parent must be a group");this.parentRef=ae({kind:st,namespace:Rn,name:Kn})}async enforce(ce){if(ce.kind!=="Group")return ce;const st=ce;return st.spec.parent||ae(st)!==this.parentRef&&(st.spec.parent=this.parentRef),st}}class H{static isValidPrefixAndOrSuffix(ce,st,Rn,Kn){if(typeof ce!="string")return!1;const aa=ce.split(st);return aa.length===1?Kn(aa[0]):aa.length===2?Rn(aa[0])&&Kn(aa[1]):!1}static isJsonSafe(ce){try{return l().isEqual(ce,JSON.parse(JSON.stringify(ce)))}catch{return!1}}static isValidDnsSubdomain(ce){return typeof ce=="string"&&ce.length>=1&&ce.length<=253&&ce.split(".").every(H.isValidDnsLabel)}static isValidDnsLabel(ce){return typeof ce=="string"&&ce.length>=1&&ce.length<=63&&/^[a-z0-9]+(?:\-+[a-z0-9]+)*$/.test(ce)}static isValidTag(ce){return typeof ce=="string"&&ce.length>=1&&ce.length<=63&&/^[a-z0-9+#]+(\-[a-z0-9+#]+)*$/.test(ce)}static isValidUrl(ce){if(typeof ce!="string")return!1;try{return new URL(ce),!0}catch{return!1}}static isValidString(ce){var st;return typeof ce=="string"&&((st=ce==null?void 0:ce.trim())==null?void 0:st.length)>=1}static isNonEmptyString(ce){var st;return typeof ce=="string"&&((st=ce==null?void 0:ce.trim())==null?void 0:st.length)>=1}}var oe="http://json-schema.org/draft-07/schema",re="EntityEnvelope",_e="The envelope skeleton parts of an entity - whatever is necessary to be able to give it a ref and pass to further validation / policy checking.",tt=[{apiVersion:"backstage.io/v1alpha1",kind:"Component",metadata:{name:"LoremService"}}],Ve="object",Ze=["apiVersion","kind","metadata"],nt=!0,Ge={apiVersion:{type:"string",description:"The version of specification format for this particular entity that this is written against.",minLength:1,examples:["backstage.io/v1alpha1","my-company.net/v1","1.0"]},kind:{type:"string",description:"The high level entity type being described.",minLength:1,examples:["API","Component","Domain","Group","Location","Resource","System","Template","User"]},metadata:{type:"object",required:["name"],additionalProperties:!0,properties:{name:{type:"string",description:"The name of the entity. Must be unique within the catalog at any given point in time, for any given namespace + kind pair.",examples:["metadata-proxy"],minLength:1},namespace:{type:"string",description:"The namespace that the entity belongs to.",default:"default",examples:["default","admin"],minLength:1}}}},Je={$schema:oe,$id:re,description:_e,examples:tt,type:Ve,required:Ze,additionalProperties:nt,properties:Ge},Re="http://json-schema.org/draft-07/schema",Le="Entity",lt="The parts of the format that's common to all versions/kinds of entity.",Et=[{apiVersion:"backstage.io/v1alpha1",kind:"Component",metadata:{name:"LoremService",description:"Creates Lorems like a pro.",labels:{product_name:"Random value Generator"},annotations:{docs:"https://github.com/..../tree/develop/doc"}},spec:{type:"service",lifecycle:"production",owner:"tools"}}],wt="object",Qt=["apiVersion","kind","metadata"],yt=!1,ue={apiVersion:{type:"string",description:"The version of specification format for this particular entity that this is written against.",minLength:1,examples:["backstage.io/v1alpha1","my-company.net/v1","1.0"]},kind:{type:"string",description:"The high level entity type being described.",minLength:1,examples:["API","Component","Domain","Group","Location","Resource","System","Template","User"]},metadata:{$ref:"EntityMeta"},spec:{type:"object",description:"The specification data describing the entity itself."},relations:{type:"array",description:"The relations that this entity has with other entities.",items:{$ref:"common#relation"}},status:{$ref:"common#status"}},gt={$schema:Re,$id:Le,description:lt,examples:Et,type:wt,required:Qt,additionalProperties:yt,properties:ue},xt="http://json-schema.org/draft-07/schema",ht="EntityMeta",Ut="Metadata fields common to all versions/kinds of entity.",S=[{uid:"e01199ab-08cc-44c2-8e19-5c29ded82521",etag:"lsndfkjsndfkjnsdfkjnsd==",name:"my-component-yay",namespace:"the-namespace",labels:{"backstage.io/custom":"ValueStuff"},annotations:{"example.com/bindings":"are-secret"},tags:["java","data"]}],P="object",j=["name"],Z=!0,Ie={uid:{type:"string",description:"A globally unique ID for the entity. This field can not be set by the user at creation time, and the server will reject an attempt to do so. The field will be populated in read operations. The field can (optionally) be specified when performing update or delete operations, but the server is free to reject requests that do so in such a way that it breaks semantics.",examples:["e01199ab-08cc-44c2-8e19-5c29ded82521"],minLength:1},etag:{type:"string",description:"An opaque string that changes for each update operation to any part of the entity, including metadata. This field can not be set by the user at creation time, and the server will reject an attempt to do so. The field will be populated in read operations. The field can (optionally) be specified when performing update or delete operations, and the server will then reject the operation if it does not match the current stored value.",examples:["lsndfkjsndfkjnsdfkjnsd=="],minLength:1},name:{type:"string",description:"The name of the entity. Must be unique within the catalog at any given point in time, for any given namespace + kind pair.",examples:["metadata-proxy"],minLength:1},namespace:{type:"string",description:"The namespace that the entity belongs to.",default:"default",examples:["default","admin"],minLength:1},title:{type:"string",description:"A display name of the entity, to be presented in user interfaces instead of the name property, when available.",examples:["React SSR Template"],minLength:1},description:{type:"string",description:"A short (typically relatively few words, on one line) description of the entity."},labels:{type:"object",description:"Key/value pairs of identifying information attached to the entity.",additionalProperties:!0,patternProperties:{"^.+$":{type:"string"}}},annotations:{type:"object",description:"Key/value pairs of non-identifying auxiliary information attached to the entity.",additionalProperties:!0,patternProperties:{"^.+$":{type:"string"}}},tags:{type:"array",description:"A list of single-valued strings, to for example classify catalog entities in various ways.",items:{type:"string",minLength:1}},links:{type:"array",description:"A list of external hyperlinks related to the entity. Links can provide additional contextual information that may be located outside of Backstage itself. For example, an admin dashboard or external CMS page.",items:{type:"object",required:["url"],properties:{url:{type:"string",description:"A url in a standard uri format.",examples:["https://admin.example-org.com"],minLength:1},title:{type:"string",description:"A user friendly display name for the link.",examples:["Admin Dashboard"],minLength:1},icon:{type:"string",description:"A key representing a visual icon to be displayed in the UI.",examples:["dashboard"],minLength:1},type:{type:"string",description:"An optional value to categorize links into specific groups.",examples:["runbook","documentation","logs","dashboard"],minLength:1}}}}},ze={$schema:xt,$id:ht,description:Ut,examples:S,type:P,required:j,additionalProperties:Z,properties:Ie},dt="http://json-schema.org/draft-07/schema",Qe="common",et="object",$t="Common definitions to import from other schemas",tn={reference:{$id:"#reference",type:"object",description:"A reference by name to another entity.",required:["kind","namespace","name"],additionalProperties:!1,properties:{kind:{type:"string",description:"The kind field of the entity.",minLength:1},namespace:{type:"string",description:"The metadata.namespace field of the entity.",minLength:1},name:{type:"string",description:"The metadata.name field of the entity.",minLength:1}}},relation:{$id:"#relation",type:"object",description:"A directed relation from one entity to another.",required:["type","targetRef"],additionalProperties:!1,properties:{type:{type:"string",minLength:1,pattern:"^\\w+$",description:"The type of relation."},target:{$ref:"#reference",deprecated:!0},targetRef:{type:"string",minLength:1,description:"The entity ref of the target of this relation."}}},status:{$id:"#status",type:"object",description:"The current status of the entity, as claimed by various sources.",required:[],additionalProperties:!0,properties:{items:{type:"array",items:{$ref:"#statusItem"}}}},statusItem:{$id:"#statusItem",type:"object",description:"A specific status item on a well known format.",required:["type","level","message"],additionalProperties:!0,properties:{type:{type:"string",minLength:1},level:{$ref:"#statusLevel",description:"The status level / severity of the status item."},message:{type:"string",description:"A brief message describing the status, intended for human consumption."},error:{$ref:"#error",description:"An optional serialized error object related to the status."}}},statusLevel:{$id:"#statusLevel",type:"string",description:"A status level / severity.",enum:["info","warning","error"]},error:{$id:"#error",type:"object",description:"A serialized error object.",required:["name","message"],additionalProperties:!0,properties:{name:{type:"string",examples:["Error","InputError"],description:"The type name of the error",minLength:1},message:{type:"string",description:"The message of the error"},code:{type:"string",description:"An error code associated with the error"},stack:{type:"string",description:"An error stack trace"}}}},It={$schema:dt,$id:Qe,type:et,description:$t,definitions:tn};const pt=new Map,qt=[Je,gt,ze,It];function sn($e){if(!($e!=null&&$e.length))throw new TypeError("Unknown error");const ce=$e[0];throw new TypeError(`${ce.instancePath||"<root>"} ${ce.message}${ce.params?` - ${Object.entries(ce.params).map(([st,Rn])=>`${st}: ${Rn}`).join(", ")}`:""}`)}function an($e,ce={}){var st;const Rn=(st=ce==null?void 0:ce.disableCache)!=null?st:!1,Kn=Rn?"":JSON.stringify($e);if(!Rn){const _a=pt.get(Kn);if(_a)return _a}const aa=Vt($e),ra=new(A())({allowUnionTypes:!0,allErrors:!0,validateSchema:!0});aa.length&&ra.addSchema(aa,void 0,void 0,!0);const va=ra.compile($e);return Rn||pt.set(Kn,va),va}function Vt($e){if(typeof $e!="object")return[];const ce=new Set;$e.$id&&ce.add($e.$id);const st=new Array,Rn=[$e];for(;Rn.length;){const Kn=Rn.pop();for(const aa of Ce(Kn))if(!ce.has(aa)){ce.add(aa);const ra=qt.find(va=>va.$id===aa);ra&&(st.push(ra),Rn.push(ra))}}return st}function*Ce($e){const ce=[$e];for(;ce.length;){const st=ce.pop();if(typeof st=="object"&&st)for(const[Rn,Kn]of Object.entries(st))Rn==="$ref"&&typeof Kn=="string"?yield Kn.split("#")[0]:ce.push(Kn)}}function Ye($e){const ce=an($e||Je);return st=>{if(ce(st)===!0)return st;throw sn(ce.errors)}}function Kt($e){const ce=an($e);return st=>{var Rn;if(ce(st)===!0)return st;const aa=(Rn=ce.errors)==null?void 0:Rn.filter(ra=>["/kind","/apiVersion"].includes(ra.instancePath));if(aa!=null&&aa.length&&aa.every(ra=>ra.keyword==="enum"))return!1;throw sn(ce.errors)}}function jt($e){const ce=an($e||gt);return st=>{if(ce(st)===!0)return st;throw sn(ce.errors)}}class Wt{static isValidApiVersion(ce){return H.isValidPrefixAndOrSuffix(ce,"/",H.isValidDnsSubdomain,st=>st.length>=1&&st.length<=63&&/^[a-z0-9A-Z]+$/.test(st))}static isValidKind(ce){return typeof ce=="string"&&ce.length>=1&&ce.length<=63&&/^[a-zA-Z][a-z0-9A-Z]*$/.test(ce)}static isValidObjectName(ce){return typeof ce=="string"&&ce.length>=1&&ce.length<=63&&/^([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9]$/.test(ce)}static isValidNamespace(ce){return H.isValidDnsLabel(ce)}static isValidLabelKey(ce){return H.isValidPrefixAndOrSuffix(ce,"/",H.isValidDnsSubdomain,Wt.isValidObjectName)}static isValidLabelValue(ce){return ce===""||Wt.isValidObjectName(ce)}static isValidAnnotationKey(ce){return H.isValidPrefixAndOrSuffix(ce,"/",H.isValidDnsSubdomain,Wt.isValidObjectName)}static isValidAnnotationValue(ce){return typeof ce=="string"}}const ft={isValidApiVersion:Wt.isValidApiVersion,isValidKind:Wt.isValidKind,isValidEntityName:Wt.isValidObjectName,isValidNamespace:Wt.isValidNamespace,isValidLabelKey:Wt.isValidLabelKey,isValidLabelValue:Wt.isValidLabelValue,isValidAnnotationKey:Wt.isValidAnnotationKey,isValidAnnotationValue:Wt.isValidAnnotationValue,isValidTag:$e=>typeof $e=="string"&&$e.length>=1&&$e.length<=63&&/^[a-z0-9:+#]+(\-[a-z0-9:+#]+)*$/.test($e)};function Ln($e={}){return{...ft,...$e}}var dn=Object.defineProperty,Xt=($e,ce,st)=>ce in $e?dn($e,ce,{enumerable:!0,configurable:!0,writable:!0,value:st}):$e[ce]=st,An=($e,ce,st)=>(Xt($e,typeof ce!="symbol"?ce+"":ce,st),st);class Xe{constructor(ce=Ln()){An(this,"validators"),this.validators=ce}async enforce(ce){var st,Rn,Kn,aa,ra,va,_a;function wa(ha,za,Er){if(za==null)throw new Error(`${ha} must have a value`);let sr;try{sr=Er(za)}catch($a){throw new Error(`${ha} could not be validated, ${$a}`)}if(!sr){let $a;switch(Er.name){case"isValidLabelValue":case"isValidObjectName":$a="a string that is sequences of [a-zA-Z0-9] separated by any of [-_.], at most 63 characters in total";break;case"isValidLabelKey":case"isValidApiVersion":case"isValidAnnotationKey":$a="a valid prefix and/or suffix";break;case"isValidNamespace":case"isValidDnsLabel":$a="a string that is sequences of [a-z0-9] separated by [-], at most 63 characters in total";break;case"isValidTag":$a="a string that is sequences of [a-z0-9+#] separated by [-], at most 63 characters in total";break;case"isValidAnnotationValue":$a="a string";break;case"isValidKind":$a="a string that is a sequence of [a-zA-Z][a-z0-9A-Z], at most 63 characters in total";break;case"isValidUrl":$a="a string that is a valid url";break;case"isValidString":case"isNonEmptyString":$a="a non empty string";break;default:$a=void 0;break}const Ar=$a?` expected ${$a} but found "${za}".`:"";throw new Error(`"${ha}" is not valid;${Ar} To learn more about catalog file format, visit: https://github.com/backstage/backstage/blob/master/docs/architecture-decisions/adr002-default-catalog-file-format.md`)}}function Ia(ha,za,Er){return za===void 0||wa(ha,za,Er)}wa("apiVersion",ce.apiVersion,this.validators.isValidApiVersion),wa("kind",ce.kind,this.validators.isValidKind),wa("metadata.name",ce.metadata.name,this.validators.isValidEntityName),Ia("metadata.namespace",ce.metadata.namespace,this.validators.isValidNamespace);for(const[ha,za]of Object.entries((st=ce.metadata.labels)!=null?st:[]))wa(`labels.${ha}`,ha,this.validators.isValidLabelKey),wa(`labels.${ha}`,za,this.validators.isValidLabelValue);for(const[ha,za]of Object.entries((Rn=ce.metadata.annotations)!=null?Rn:[]))wa(`annotations.${ha}`,ha,this.validators.isValidAnnotationKey),wa(`annotations.${ha}`,za,this.validators.isValidAnnotationValue);const Ka=(Kn=ce.metadata.tags)!=null?Kn:[];for(let ha=0;ha<Ka.length;++ha)wa(`tags.${ha}`,Ka[ha],this.validators.isValidTag);const dr=(aa=ce.metadata.links)!=null?aa:[];for(let ha=0;ha<dr.length;++ha)wa(`links.${ha}.url`,(ra=dr[ha])==null?void 0:ra.url,H.isValidUrl),Ia(`links.${ha}.title`,(va=dr[ha])==null?void 0:va.title,H.isNonEmptyString),Ia(`links.${ha}.icon`,(_a=dr[ha])==null?void 0:_a.icon,Wt.isValidObjectName);return ce}}var mt=Object.defineProperty,Dt=($e,ce,st)=>ce in $e?mt($e,ce,{enumerable:!0,configurable:!0,writable:!0,value:st}):$e[ce]=st,rt=($e,ce,st)=>(Dt($e,typeof ce!="symbol"?ce+"":ce,st),st);const qe=null;class V{constructor(ce=qe){rt(this,"knownFields"),this.knownFields=ce}async enforce(ce){for(const st of Object.keys(ce))if(!this.knownFields.includes(st))throw new Error(`Unknown field ${st}`);return ce}}var he=Object.defineProperty,Ee=($e,ce,st)=>ce in $e?he($e,ce,{enumerable:!0,configurable:!0,writable:!0,value:st}):$e[ce]=st,Pt=($e,ce,st)=>(Ee($e,typeof ce!="symbol"?ce+"":ce,st),st);class Nt{constructor(){Pt(this,"validate")}async enforce(ce){if(!this.validate){const Kn=new Ajv({allowUnionTypes:!0});this.validate=Kn.addSchema([It,ze],void 0,void 0,!0).compile(gt)}if(this.validate(ce)===!0)return ce;const[Rn]=this.validate.errors||[];throw Rn?new Error(`Malformed envelope, ${Rn.instancePath||"<root>"} ${Rn.message}`):new Error("Malformed envelope, Unknown error")}}class ln{constructor(ce){this.policies=ce}async enforce(ce){let st=ce;for(const Rn of this.policies){const Kn=await Rn.enforce(st);if(!Kn)throw new Error(`Policy ${Rn.constructor.name} did not return a result`);st=Kn}return st}}class bn{constructor(ce){this.policies=ce}async enforce(ce){for(const st of this.policies){const Rn=await st.enforce(ce);if(Rn)return Rn}throw new Error("The entity did not match any known policy")}}const Dn={allOf($e){return new ln($e)},oneOf($e){return new bn($e)}};var Un="http://json-schema.org/draft-07/schema",Vn="ApiV1alpha1",Pn="An API describes an interface that can be exposed by a component. The API can be defined in different formats, like OpenAPI, AsyncAPI, GraphQL, gRPC, or other formats.",Yn=[{apiVersion:"backstage.io/v1alpha1",kind:"API",metadata:{name:"artist-api",description:"Retrieve artist details",labels:{product_name:"Random value Generator"},annotations:{docs:"https://github.com/..../tree/develop/doc"}},spec:{type:"openapi",lifecycle:"production",owner:"artist-relations-team",system:"artist-engagement-portal",definition:`openapi: "3.0.0"
info:...`}}],da=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["API"]},spec:{type:"object",required:["type","lifecycle","owner","definition"],properties:{type:{type:"string",description:"The type of the API definition.",examples:["openapi","asyncapi","graphql","grpc","trpc"],minLength:1},lifecycle:{type:"string",description:"The lifecycle state of the API.",examples:["experimental","production","deprecated"],minLength:1},owner:{type:"string",description:"An entity reference to the owner of the API.",examples:["artist-relations-team","user:john.johnson"],minLength:1},system:{type:"string",description:"An entity reference to the system that the API belongs to.",minLength:1},definition:{type:"string",description:"The definition of the API, based on the format defined by the type.",minLength:1}}}}}],ct={$schema:Un,$id:Vn,description:Pn,examples:Yn,allOf:da};function m($e){let ce;return{async check(st){return ce||(ce=Kt($e)),ce(st)===st}}}const R=m(ct);var K="http://json-schema.org/draft-07/schema",le="ComponentV1alpha1",I='A Component describes a software component. It is typically intimately linked to the source code that constitutes the component, and should be what a developer may regard a "unit of software", usually with a distinct deployable or linkable artifact.',U=[{apiVersion:"backstage.io/v1alpha1",kind:"Component",metadata:{name:"LoremService",description:"Creates Lorems like a pro.",labels:{product_name:"Random value Generator"},annotations:{docs:"https://github.com/..../tree/develop/doc"}},spec:{type:"service",lifecycle:"production",owner:"tools"}}],Y=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Component"]},spec:{type:"object",required:["type","lifecycle","owner"],properties:{type:{type:"string",description:"The type of component.",examples:["service","website","library"],minLength:1},lifecycle:{type:"string",description:"The lifecycle state of the component.",examples:["experimental","production","deprecated"],minLength:1},owner:{type:"string",description:"An entity reference to the owner of the component.",examples:["artist-relations-team","user:john.johnson"],minLength:1},system:{type:"string",description:"An entity reference to the system that the component belongs to.",minLength:1},subcomponentOf:{type:"string",description:"An entity reference to another component of which the component is a part.",minLength:1},providesApis:{type:"array",description:"An array of entity references to the APIs that are provided by the component.",items:{type:"string",minLength:1}},consumesApis:{type:"array",description:"An array of entity references to the APIs that are consumed by the component.",items:{type:"string",minLength:1}},dependsOn:{type:"array",description:"An array of references to other entities that the component depends on to function.",items:{type:"string",minLength:1}}}}}}],we={$schema:K,$id:le,description:I,examples:U,allOf:Y};const Oe=m(we);var ot="http://json-schema.org/draft-07/schema",Ot="DomainV1alpha1",en="A Domain groups a collection of systems that share terminology, domain models, business purpose, or documentation, i.e. form a bounded context.",Zt=[{apiVersion:"backstage.io/v1alpha1",kind:"Domain",metadata:{name:"artists",description:"Everything about artists"},spec:{owner:"artist-relations-team"}}],pn=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Domain"]},spec:{type:"object",required:["owner"],properties:{owner:{type:"string",description:"An entity reference to the owner of the component.",examples:["artist-relations-team","user:john.johnson"],minLength:1}}}}}],mn={$schema:ot,$id:Ot,description:en,examples:Zt,allOf:pn};const kt=m(mn);var Sn="http://json-schema.org/draft-07/schema",un="GroupV1alpha1",$n="A group describes an organizational entity, such as for example a team, a business unit, or a loose collection of people in an interest group. Members of these groups are modeled in the catalog as kind User.",qn=[{apiVersion:"backstage.io/v1alpha1",kind:"Group",metadata:{name:"infrastructure",description:"The infra business unit"},spec:{type:"business-unit",profile:{displayName:"Infrastructure",email:"infrastructure@example.com",picture:"https://example.com/groups/bu-infrastructure.jpeg"},parent:"ops",children:["backstage","other"]}}],na=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Group"]},spec:{type:"object",required:["type","children"],properties:{type:{type:"string",description:"The type of group. There is currently no enforced set of values for this field, so it is left up to the adopting organization to choose a nomenclature that matches their org hierarchy.",examples:["team","business-unit","product-area","root"],minLength:1},profile:{type:"object",description:"Optional profile information about the group, mainly for display purposes. All fields of this structure are also optional. The email would be a group email of some form, that the group may wish to be used for contacting them. The picture is expected to be a URL pointing to an image that's representative of the group, and that a browser could fetch and render on a group page or similar.",properties:{displayName:{type:"string",description:"A simple display name to present to users.",examples:["Infrastructure"],minLength:1},email:{type:"string",description:"An email where this entity can be reached.",examples:["infrastructure@example.com"],minLength:1},picture:{type:"string",description:"The URL of an image that represents this entity.",examples:["https://example.com/groups/bu-infrastructure.jpeg"],minLength:1}}},parent:{type:"string",description:"The immediate parent group in the hierarchy, if any. Not all groups must have a parent; the catalog supports multi-root hierarchies. Groups may however not have more than one parent. This field is an entity reference.",examples:["ops"],minLength:1},children:{type:"array",description:"The immediate child groups of this group in the hierarchy (whose parent field points to this group). The list must be present, but may be empty if there are no child groups. The items are not guaranteed to be ordered in any particular way. The entries of this array are entity references.",items:{type:"string",examples:["backstage","other"],minLength:1}},members:{type:"array",description:"The users that are members of this group. The entries of this array are entity references.",items:{type:"string",examples:["jdoe"],minLength:1}}}}}}],kn={$schema:Sn,$id:un,description:$n,examples:qn,allOf:na};const wn=m(kn);var gn="http://json-schema.org/draft-07/schema",Jt="LocationV1alpha1",vn="A location is a marker that references other places to look for catalog data.",_n=[{apiVersion:"backstage.io/v1alpha1",kind:"Location",metadata:{name:"org-data"},spec:{type:"url",targets:["http://github.com/myorg/myproject/org-data-dump/catalog-info-staff.yaml","http://github.com/myorg/myproject/org-data-dump/catalog-info-consultants.yaml"]}}],Aa=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Location"]},spec:{type:"object",required:[],properties:{type:{type:"string",description:"The single location type, that's common to the targets specified in the spec. If it is left out, it is inherited from the location type that originally read the entity data.",examples:["url"],minLength:1},target:{type:"string",description:"A single target as a string. Can be either an absolute path/URL (depending on the type), or a relative path such as ./details/catalog-info.yaml which is resolved relative to the location of this Location entity itself.",examples:["./details/catalog-info.yaml"],minLength:1},targets:{type:"array",description:"A list of targets as strings. They can all be either absolute paths/URLs (depending on the type), or relative paths such as ./details/catalog-info.yaml which are resolved relative to the location of this Location entity itself.",items:{type:"string",examples:["./details/catalog-info.yaml","http://github.com/myorg/myproject/org-data-dump/catalog-info-staff.yaml"],minLength:1}},presence:{type:"string",description:"Whether the presence of the location target is required and it should be considered an error if it can not be found",default:"required",examples:["required"],enum:["required","optional"]}}}}}],Oa={$schema:gn,$id:Jt,description:vn,examples:_n,allOf:Aa};const J=m(Oa),ge="ownedBy",ke="ownerOf",it="consumesApi",St="apiConsumedBy",At="providesApi",cn="apiProvidedBy",hn="dependsOn",ie="dependencyOf",Te="parentOf",We="childOf",Ne="memberOf",He="hasMember",zt="partOf",_t="hasPart";var bt="http://json-schema.org/draft-07/schema",Gt="ResourceV1alpha1",fn="A resource describes the infrastructure a system needs to operate, like BigTable databases, Pub/Sub topics, S3 buckets or CDNs. Modelling them together with components and systems allows to visualize resource footprint, and create tooling around them.",rn=[{apiVersion:"backstage.io/v1alpha1",kind:"Resource",metadata:{name:"artists-db",description:"Stores artist details"},spec:{type:"database",owner:"artist-relations-team",system:"artist-engagement-portal"}}],Nn=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Resource"]},spec:{type:"object",required:["type","owner"],properties:{type:{type:"string",description:"The type of resource.",examples:["database","s3-bucket","cluster"],minLength:1},owner:{type:"string",description:"An entity reference to the owner of the resource.",examples:["artist-relations-team","user:john.johnson"],minLength:1},dependsOn:{type:"array",description:"An array of references to other entities that the resource depends on to function.",items:{type:"string",minLength:1}},system:{type:"string",description:"An entity reference to the system that the resource belongs to.",minLength:1}}}}}],Mn={$schema:bt,$id:Gt,description:fn,examples:rn,allOf:Nn};const Gn=m(Mn);var la="http://json-schema.org/draft-07/schema",Fn="SystemV1alpha1",ea="A system is a collection of resources and components. The system may expose or consume one or several APIs. It is viewed as abstraction level that provides potential consumers insights into exposed features without needing a too detailed view into the details of all components. This also gives the owning team the possibility to decide about published artifacts and APIs.",ca=[{apiVersion:"backstage.io/v1alpha1",kind:"System",metadata:{name:"artist-engagement-portal",description:"Handy tools to keep artists in the loop"},spec:{owner:"artist-relations-team",domain:"artists"}}],sa=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["System"]},spec:{type:"object",required:["owner"],properties:{owner:{type:"string",description:"An entity reference to the owner of the component.",examples:["artist-relations-team","user:john.johnson"],minLength:1},domain:{type:"string",description:"An entity reference to the domain that the system belongs to.",examples:["artists"],minLength:1}}}}}],Ea={$schema:la,$id:Fn,description:ea,examples:ca,allOf:sa};const ba=m(Ea);var Ra="http://json-schema.org/draft-07/schema",Ta="UserV1alpha1",Ha="A user describes a person, such as an employee, a contractor, or similar. Users belong to Group entities in the catalog. These catalog user entries are connected to the way that authentication within the Backstage ecosystem works. See the auth section of the docs for a discussion of these concepts.",Ja=[{apiVersion:"backstage.io/v1alpha1",kind:"User",metadata:{name:"jdoe"},spec:{profile:{displayName:"Jenny Doe",email:"jenny-doe@example.com",picture:"https://example.com/staff/jenny-with-party-hat.jpeg"},memberOf:["team-b","employees"]}}],Za=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["User"]},spec:{type:"object",required:["memberOf"],properties:{profile:{type:"object",description:"Optional profile information about the user, mainly for display purposes. All fields of this structure are also optional. The email would be a primary email of some form, that the user may wish to be used for contacting them. The picture is expected to be a URL pointing to an image that's representative of the user, and that a browser could fetch and render on a profile page or similar.",properties:{displayName:{type:"string",description:"A simple display name to present to users.",examples:["Jenny Doe"],minLength:1},email:{type:"string",description:"An email where this user can be reached.",examples:["jenny-doe@example.com"],minLength:1},picture:{type:"string",description:"The URL of an image that represents this user.",examples:["https://example.com/staff/jenny-with-party-hat.jpeg"],minLength:1}}},memberOf:{type:"array",description:"The list of groups that the user is a direct member of (i.e., no transitive memberships are listed here). The list must be present, but may be empty if the user is not member of any groups. The items are not guaranteed to be ordered in any particular way. The entries of this array are entity references.",items:{type:"string",examples:["team-b","employees"],minLength:1}}}}}}],hr={$schema:Ra,$id:Ta,description:Ha,examples:Ja,allOf:Za};const gr=m(hr),or="backstage.io/managed-by-location",ur="backstage.io/managed-by-origin-location",Sa="backstage.io/source-location",qa=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*\:/i;function er($e){if(typeof $e!="string")throw new TypeError(`Unable to parse location ref '${$e}', unexpected argument ${typeof $e}`);const ce=$e.indexOf(":");if(ce<0)throw new TypeError(`Unable to parse location ref '${$e}', expected '<type>:<target>', e.g. 'url:https://host/path'`);const st=$e.substring(0,ce).trim(),Rn=$e.substring(ce+1).trim();if(!st||!Rn)throw new TypeError(`Unable to parse location ref '${$e}', expected '<type>:<target>', e.g. 'url:https://host/path'`);if(st==="http"||st==="https")throw new TypeError(`Invalid location ref '${$e}', please prefix it with 'url:', e.g. 'url:${$e}'`);if(qa.test(Rn))throw new TypeError(`Invalid location ref '${$e}', target is a javascript: URL`);return{type:st,target:Rn}}function ir($e){const{type:ce,target:st}=$e;if(ce){if(!st)throw new TypeError("Unable to stringify location ref, empty target")}else throw new TypeError("Unable to stringify location ref, empty type");if(qa.test(st))throw new TypeError(`Invalid location ref '${ce}:${st}', target is a javascript: URL`);return`${ce}:${st}`}function ar($e){var ce,st,Rn,Kn,aa;const ra=(aa=(st=(ce=$e.metadata)==null?void 0:ce.annotations)==null?void 0:st[Sa])!=null?aa:(Kn=(Rn=$e.metadata)==null?void 0:Rn.annotations)==null?void 0:Kn[or];if(!ra)throw new Error(`Entity '${ae($e)}' is missing location`);return er(ra)}},12082:(In,Ct,e)=>{"use strict";e.d(Ct,{$K:()=>na,Lz:()=>st,l2:()=>mn,Ke:()=>Ot,l9:()=>Zt,i3:()=>ke,Fb:()=>cn,W:()=>Mn,iO:()=>yo,Qf:()=>V,WW:()=>Ee,kF:()=>ln,n5:()=>I,R8:()=>wn,aQ:()=>Ta,gE:()=>Vn,kI:()=>Oe,u_:()=>hn,Yi:()=>J,Ud:()=>Sn,gu:()=>or,FA:()=>zt,Z8:()=>Qo});var s=e(14041),l=e(39067),b=e.n(l),A=e(97388),W=e(96403),r=e.n(W),q=e(5124),Q=e(11638),t=e(46195);const pe=null;function _(d,a){let i,p=!1;const T={};try{i=a!=null&&a.key?d.getConfig(a.key):d;for(const se of pe){const Me=i.getOptionalNumber(se);Me!==void 0&&(T[se]=Me,p=!0)}}catch(se){throw new InputError(`Failed to read duration from config, ${se}`)}try{if(!p){const Me=pe.map(Ue=>`'${Ue}'`).join(", ");throw new Error(`Needs one or more of ${Me}`)}const se=i.keys().filter(Me=>!pe.includes(Me));if(se.length){const Me=se.length===1?"property":"properties",Ue=se.map(Bt=>`'${Bt}'`).join(", "),vt=pe.map(Bt=>`'${Bt}'`).join(", ");throw new Error(`Unknown ${Me} ${Ue}; expected one or more of ${vt}`)}}catch(se){let Me="Failed to read duration from config";throw a!=null&&a.key&&(Me+=` at '${a.key}'`),new InputError(`${Me}, ${se}`)}return T}var de=Object.defineProperty,me=(d,a,i)=>a in d?de(d,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[a]=i,G=(d,a,i)=>(me(d,typeof a!="symbol"?a+"":a,i),i);const xe=/^[a-z][a-z0-9]*(?:[-_][a-z][a-z0-9]*)*$/i;function ye(d){return typeof d=="object"&&d!==null&&!Array.isArray(d)}function ut(d){return typeof d!="object"||d===null?d:Array.isArray(d)?d.map(ut):Object.fromEntries(Object.entries(d).map(([a,i])=>[a,ut(i)]))}function z(d,a){if(d===null)return;if(d===void 0)return a===void 0?void 0:z(a);if(typeof d!="object"||Array.isArray(d))return d;const i=ye(a)?a:{},p={};for(const T of new Set([...Object.keys(d),...Object.keys(i)])){const se=z(d[T],i[T]);se!==void 0&&(p[T]=se)}return p}function ee(d){if(d===null)return"null";if(Array.isArray(d))return"array";const a=typeof d;return a==="number"&&isNaN(d)?"nan":a==="string"&&d===""?"empty-string":a}const D={type(d,a,i,p){return`Invalid type in config for key '${d}' in '${a}', got ${i}, wanted ${p}`},missing(d,a){return`Missing required config value at '${d}' in '${a}'`},convert(d,a,i){return`Unable to convert config value for key '${d}' in '${a}' to a ${i}`}};class w{constructor(a,i="mock-config",p,T=""){this.data=a,this.context=i,this.fallback=p,this.prefix=T,G(this,"filteredKeys"),G(this,"notifiedFilteredKeys",new Set)}static fromConfigs(a){return a.length===0?new w(void 0):a.reduce((i,{data:p,context:T,filteredKeys:se,deprecatedKeys:Me})=>{const Ue=new w(p,T,i);if(Ue.filteredKeys=se,Me)for(const{key:vt,description:Bt}of Me)console.warn(`The configuration key '${vt}' of ${T} is deprecated and may be removed soon. ${Bt||""}`);return Ue},void 0)}has(a){var i,p;const T=this.readValue(a);return T===null?!1:T!==void 0?!0:(p=(i=this.fallback)==null?void 0:i.has(a))!=null?p:!1}keys(){var a,i;const p=this.data?Object.keys(this.data):[],T=(i=(a=this.fallback)==null?void 0:a.keys())!=null?i:[];return[...new Set([...p,...T])].filter(se=>{var Me;return((Me=this.data)==null?void 0:Me[se])!==null})}get(a){const i=this.getOptional(a);if(i===void 0)throw new Error(D.missing(this.fullKey(a!=null?a:""),this.context));return i}getOptional(a){var i,p;const T=ut(this.readValue(a)),se=(i=this.fallback)==null?void 0:i.getOptional(a);if(T!==null)return T===void 0?z(se):se===void 0?z(T):z(T,se)}getConfig(a){const i=this.getOptionalConfig(a);if(i===void 0)throw new Error(D.missing(this.fullKey(a),this.context));return i}getOptionalConfig(a){var i;const p=this.readValue(a),T=(i=this.fallback)==null?void 0:i.getOptionalConfig(a);if(ye(p))return this.copy(p,a,T);if(p!==null){if(p!==void 0)throw new TypeError(D.type(this.fullKey(a),this.context,ee(p),"object"));return T}}getConfigArray(a){const i=this.getOptionalConfigArray(a);if(i===void 0)throw new Error(D.missing(this.fullKey(a),this.context));return i}getOptionalConfigArray(a){var i;const p=this.readConfigValue(a,T=>{if(!Array.isArray(T))return{expected:"object-array"};for(const[se,Me]of T.entries())if(!ye(Me))return{expected:"object-array",value:Me,key:`${a}[${se}]`};return!0});if(p)return p.map((T,se)=>this.copy(T,`${a}[${se}]`))}getNumber(a){const i=this.getOptionalNumber(a);if(i===void 0)throw new Error(D.missing(this.fullKey(a),this.context));return i}getOptionalNumber(a){const i=this.readConfigValue(a,T=>typeof T=="number"||typeof T=="string"||{expected:"number"});if(typeof i=="number"||i===void 0)return i;const p=Number(i);if(!Number.isFinite(p))throw new Error(D.convert(this.fullKey(a),this.context,"number"));return p}getBoolean(a){const i=this.getOptionalBoolean(a);if(i===void 0)throw new Error(D.missing(this.fullKey(a),this.context));return i}getOptionalBoolean(a){const i=this.readConfigValue(a,T=>typeof T=="boolean"||typeof T=="number"||typeof T=="string"||{expected:"boolean"});if(typeof i=="boolean"||i===void 0)return i;const p=String(i).trim();if(/^(?:y|yes|true|1|on)$/i.test(p))return!0;if(/^(?:n|no|false|0|off)$/i.test(p))return!1;throw new Error(D.convert(this.fullKey(a),this.context,"boolean"))}getString(a){const i=this.getOptionalString(a);if(i===void 0)throw new Error(D.missing(this.fullKey(a),this.context));return i}getOptionalString(a){return this.readConfigValue(a,i=>typeof i=="string"&&i!==""||{expected:"string"})}getStringArray(a){const i=this.getOptionalStringArray(a);if(i===void 0)throw new Error(D.missing(this.fullKey(a),this.context));return i}getOptionalStringArray(a){return this.readConfigValue(a,i=>{if(!Array.isArray(i))return{expected:"string-array"};for(const[p,T]of i.entries())if(typeof T!="string"||T==="")return{expected:"string-array",value:T,key:`${a}[${p}]`};return!0})}fullKey(a){return`${this.prefix}${this.prefix?".":""}${a}`}copy(a,i,p){const T=new w(a,this.context,p,this.fullKey(i));return T.filteredKeys=this.filteredKeys,T}readConfigValue(a,i){var p,T;const se=this.readValue(a);if(se===void 0)return(T=this.fallback)==null?void 0:T.readConfigValue(a,i);if(se===null)return;const Me=i(se);if(Me!==!0){const{key:Ue=a,value:vt=se,expected:Bt}=Me;throw new TypeError(D.type(this.fullKey(Ue),this.context,ee(vt),Bt))}return se}readValue(a){const i=a?a.split("."):[];for(const T of i)if(!xe.test(T))throw new TypeError(`Invalid config key '${a}'`);if(this.data===void 0)return;let p=this.data;for(const[T,se]of i.entries())if(ye(p))p=p[se];else if(p!=null){const Me=this.fullKey(i.slice(0,T).join("."));throw new TypeError(D.type(Me,this.context,ee(p),"object"))}return p}}var M=e(18690),y=e(21613),v=e(73466),F=e(59294),ae=e(46155),Fe=e.n(ae),Ae=e(11746),X=e(47304),N=Object.defineProperty,H=(d,a,i)=>a in d?N(d,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[a]=i,oe=(d,a,i)=>(H(d,typeof a!="symbol"?a+"":a,i),i);class re{constructor(...a){oe(this,"holders"),this.holders=a}get(a){for(const i of this.holders){const p=i.get(a);if(p)return p}}}const _e=(0,A.tK)("api-context"),tt=d=>{var a;const{apis:i,children:p}=d,T=(a=(0,s.useContext)(_e))==null?void 0:a.atVersion(1),se=T?new re(i,T):i;return s.createElement(_e.Provider,{value:(0,A.Bl)({1:se}),children:p})};tt.propTypes={apis:b().shape({get:b().func.isRequired}).isRequired,children:b().node};var Ve=Object.defineProperty,Ze=(d,a,i)=>a in d?Ve(d,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[a]=i,nt=(d,a,i)=>(Ze(d,typeof a!="symbol"?a+"":a,i),i);class Ge{constructor(a){this.factories=a,nt(this,"apis",new Map)}static validateFactories(a,i){for(const p of i){const T=[p],se=new Set;for(;T.length;){const Me=T.shift(),Ue=a.get(Me);if(Ue)for(const vt of Object.values(Ue.deps)){if(vt.id===p.id)throw new Error(`Circular dependency of api factory for ${p}`);se.has(vt)||(se.add(vt),T.push(vt))}}}}get(a){return this.load(a)}load(a,i=[]){const p=this.apis.get(a.id);if(p)return p;const T=this.factories.get(a);if(!T)return;if(i.includes(T.api))throw new Error(`Circular dependency of api factory for ${T.api}`);const se=this.loadDeps(a,T.deps,[...i,T.api]),Me=T.factory(se);return this.apis.set(a.id,Me),Me}loadDeps(a,i,p){const T={};for(const se in i)if(i.hasOwnProperty(se)){const Me=i[se],Ue=this.load(Me,p);if(!Ue)throw new Error(`No API factory available for dependency ${Me} of dependent ${a}`);T[se]=Ue}return T}}var Je=Object.defineProperty,Re=(d,a,i)=>a in d?Je(d,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[a]=i,Le=(d,a,i)=>(Re(d,typeof a!="symbol"?a+"":a,i),i),lt=(d=>(d[d.default=10]="default",d[d.app=50]="app",d[d.static=100]="static",d))(lt||{});class Et{constructor(){Le(this,"factories",new Map)}register(a,i){const p=lt[a],T=this.factories.get(i.api.id);return T&&T.priority>=p?!1:(this.factories.set(i.api.id,{priority:p,factory:i}),!0)}get(a){const i=this.factories.get(a.id);if(i)return i.factory}getAllApis(){const a=new Set;for(const{factory:i}of this.factories.values())a.add(i.api);return a}}function wt(d){return new Promise((a,i)=>{const p=d.width||500,T=d.height||700,se=window.screen.width/2-p/2,Me=window.screen.height/2-T/2,Ue=window.open(d.url,d.name,`menubar=no,location=no,resizable=no,scrollbars=no,status=no,width=${p},height=${T},top=${Me},left=${se}`);let vt="";if(!Ue||typeof Ue.closed=="undefined"||Ue.closed){const yn=new Error("Failed to open auth popup.");yn.name="PopupRejectedError",i(yn);return}const Bt=yn=>{if(yn.source!==Ue||yn.origin!==d.origin)return;const{data:oa}=yn;if(oa.type==="config_info"){vt=oa.targetOrigin;return}if(oa.type!=="authorization_response")return;const ta=oa;if("error"in ta){const ia=new Error(ta.error.message);ia.name=ta.error.name,i(ia)}else a(ta.response);Bn()},jn=setInterval(()=>{if(Ue.closed){const yn=`Login failed, ${vt&&vt!==window.location.origin?`Incorrect app origin, expected ${vt}`:"popup was closed"}`,oa=new Error(yn);oa.name="PopupClosedError",i(oa),Bn()}},100);function Bn(){window.removeEventListener("message",Bt),clearInterval(jn)}window.addEventListener("message",Bt)})}var Qt=Object.defineProperty,yt=(d,a,i)=>a in d?Qt(d,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[a]=i,ue=(d,a,i)=>(yt(d,typeof a!="symbol"?a+"":a,i),i);let gt=!1;function xt(d){return[...d].join(" ")}class ht{constructor(a){ue(this,"discoveryApi"),ue(this,"environment"),ue(this,"provider"),ue(this,"joinScopesFunc"),ue(this,"authRequester"),ue(this,"sessionTransform"),ue(this,"enableExperimentalRedirectFlow"),ue(this,"popupOptions");var i;const{configApi:p,discoveryApi:T,environment:se,provider:Me,joinScopes:Ue=xt,oauthRequestApi:vt,sessionTransform:Bt=Bn=>Bn,popupOptions:jn}=a;!gt&&!p&&(console.warn("DEPRECATION WARNING: Authentication providers require a configApi instance to configure the authentication flow. Please provide one to the authentication provider constructor."),gt=!0),this.enableExperimentalRedirectFlow=p&&(i=p.getOptionalBoolean("enableExperimentalRedirectFlow"))!=null?i:!1,this.authRequester=vt.createAuthRequester({provider:Me,onAuthRequest:async Bn=>this.enableExperimentalRedirectFlow?this.executeRedirect(Bn):this.showPopup(Bn)}),this.discoveryApi=T,this.environment=se,this.provider=Me,this.joinScopesFunc=Ue,this.sessionTransform=Bt,this.popupOptions=jn}async createSession(a){return a.instantPopup?this.enableExperimentalRedirectFlow?this.executeRedirect(a.scopes):this.showPopup(a.scopes):this.authRequester(a.scopes)}async refreshSession(a){const i=await fetch(await this.buildUrl("/refresh",{optional:!0,...a&&{scope:this.joinScopesFunc(a)}}),{headers:{"x-requested-with":"XMLHttpRequest"},credentials:"include"}).catch(T=>{throw new Error(`Auth refresh request failed, ${T}`)});if(!i.ok){const T=new Error(`Auth refresh request failed, ${i.statusText}`);throw T.status=i.status,T}const p=await i.json();if(p.error){const T=new Error(p.error.message);throw p.error.name&&(T.name=p.error.name),T}return await this.sessionTransform(p)}async removeSession(){const a=await fetch(await this.buildUrl("/logout"),{method:"POST",headers:{"x-requested-with":"XMLHttpRequest"},credentials:"include"}).catch(i=>{throw new Error(`Logout request failed, ${i}`)});if(!a.ok){const i=new Error(`Logout request failed, ${a.statusText}`);throw i.status=a.status,i}}async showPopup(a){var i,p,T,se,Me,Ue,vt,Bt;const jn=this.joinScopesFunc(a),Bn=await this.buildUrl("/start",{scope:jn,origin:window.location.origin,flow:"popup"}),yn=(p=(i=this.popupOptions)==null?void 0:i.size)!=null&&p.fullscreen?window.screen.width:((se=(T=this.popupOptions)==null?void 0:T.size)==null?void 0:se.width)||450,oa=(Ue=(Me=this.popupOptions)==null?void 0:Me.size)!=null&&Ue.fullscreen?window.screen.height:((Bt=(vt=this.popupOptions)==null?void 0:vt.size)==null?void 0:Bt.height)||730,ta=await wt({url:Bn,name:`${this.provider.title} Login`,origin:new URL(Bn).origin,width:yn,height:oa});return await this.sessionTransform(ta)}async executeRedirect(a){const i=this.joinScopesFunc(a);return window.location.href=await this.buildUrl("/start",{scope:i,origin:window.location.origin,redirectUrl:window.location.href,flow:"redirect"}),new Promise(()=>{})}async buildUrl(a,i){const p=await this.discoveryApi.getBaseUrl("auth"),T=this.buildQueryString({...i,env:this.environment});return`${p}/${this.provider.id}${a}${T}`}buildQueryString(a){if(!a)return"";const i=Object.entries(a).map(([p,T])=>{if(typeof T=="string")return`${encodeURIComponent(p)}=${encodeURIComponent(T)}`;if(T)return encodeURIComponent(p)}).filter(Boolean).join("&");return i?`?${i}`:""}}var Ut=Object.defineProperty,S=(d,a,i)=>a in d?Ut(d,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[a]=i,P=(d,a,i)=>(S(d,typeof a!="symbol"?a+"":a,i),i);class j{constructor(a){P(this,"discoveryApi"),P(this,"environment"),P(this,"provider");const{discoveryApi:i,environment:p,provider:T}=a;this.discoveryApi=i,this.environment=p,this.provider=T}async createSession(){const a=await this.buildUrl("/start"),i=await wt({url:a,name:`${this.provider.title} Login`,origin:new URL(a).origin,width:450,height:730});return{...i,id:i.profile.email}}async refreshSession(){}async removeSession(){const a=await fetch(await this.buildUrl("/logout"),{method:"POST",headers:{"x-requested-with":"XMLHttpRequest"},credentials:"include"}).catch(i=>{throw new Error(`Logout request failed, ${i}`)});if(!a.ok){const i=new Error(`Logout request failed, ${a.statusText}`);throw i.status=a.status,i}}async buildUrl(a){return`${await this.discoveryApi.getBaseUrl("auth")}/${this.provider.id}${a}?env=${this.environment}`}}function Z(d,a){for(const i of a)if(!d.has(i))return!1;return!0}class Ie{constructor(a){this.options=a}sessionExistsAndHasScope(a,i){if(!a)return!1;if(!i||this.options.sessionScopes===void 0)return!0;const p=this.options.sessionScopes(a);return Z(p,i)}getExtendedScope(a,i){const p=new Set(this.options.defaultScopes);if(a&&this.options.sessionScopes!==void 0){const T=this.options.sessionScopes(a);for(const se of T)p.add(se)}if(i)for(const T of i)p.add(T);return p}}var ze=Object.defineProperty,dt=(d,a,i)=>a in d?ze(d,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[a]=i,Qe=(d,a,i)=>(dt(d,typeof a!="symbol"?a+"":a,i),i);class et{constructor(){Qe(this,"isClosed",!1),Qe(this,"terminatingError"),Qe(this,"observable",new(r())(a=>this.isClosed?(this.terminatingError?a.error(this.terminatingError):a.complete(),()=>{}):(this.subscribers.add(a),()=>{this.subscribers.delete(a)}))),Qe(this,"subscribers",new Set)}[Symbol.observable](){return this}get closed(){return this.isClosed}next(a){if(this.isClosed)throw new Error("PublishSubject is closed");this.subscribers.forEach(i=>i.next(a))}error(a){if(this.isClosed)throw new Error("PublishSubject is closed");this.isClosed=!0,this.terminatingError=a,this.subscribers.forEach(i=>i.error(a))}complete(){if(this.isClosed)throw new Error("PublishSubject is closed");this.isClosed=!0,this.subscribers.forEach(a=>a.complete())}subscribe(a,i,p){const T=typeof a=="function"?{next:a,error:i,complete:p}:a;return this.observable.subscribe(T)}}class $t{constructor(a){Qe(this,"isClosed"),Qe(this,"currentValue"),Qe(this,"terminatingError"),Qe(this,"observable"),Qe(this,"subscribers",new Set),this.isClosed=!1,this.currentValue=a,this.terminatingError=void 0,this.observable=new(r())(i=>this.isClosed?(this.terminatingError?i.error(this.terminatingError):i.complete(),()=>{}):(i.next(this.currentValue),this.subscribers.add(i),()=>{this.subscribers.delete(i)}))}[Symbol.observable](){return this}get closed(){return this.isClosed}next(a){if(this.isClosed)throw new Error("BehaviorSubject is closed");this.currentValue=a,this.subscribers.forEach(i=>i.next(a))}error(a){if(this.isClosed)throw new Error("BehaviorSubject is closed");this.isClosed=!0,this.terminatingError=a,this.subscribers.forEach(i=>i.error(a))}complete(){if(this.isClosed)throw new Error("BehaviorSubject is closed");this.isClosed=!0,this.subscribers.forEach(a=>a.complete())}subscribe(a,i,p){const T=typeof a=="function"?{next:a,error:i,complete:p}:a;return this.observable.subscribe(T)}}var tn=Object.defineProperty,It=(d,a,i)=>a in d?tn(d,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[a]=i,pt=(d,a,i)=>(It(d,typeof a!="symbol"?a+"":a,i),i);class qt{constructor(){pt(this,"subject",new $t(q.S.SignedOut)),pt(this,"signedIn",!1)}setIsSignedIn(a){this.signedIn!==a&&(this.signedIn=a,this.subject.next(this.signedIn?q.S.SignedIn:q.S.SignedOut))}sessionState$(){return this.subject}}var sn=Object.defineProperty,an=(d,a,i)=>a in d?sn(d,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[a]=i,Vt=(d,a,i)=>(an(d,typeof a!="symbol"?a+"":a,i),i);class Ce{constructor(a){Vt(this,"connector"),Vt(this,"helper"),Vt(this,"sessionScopesFunc"),Vt(this,"sessionShouldRefreshFunc"),Vt(this,"stateTracker",new qt),Vt(this,"refreshPromise"),Vt(this,"currentSession");const{connector:i,defaultScopes:p=new Set,sessionScopes:T,sessionShouldRefresh:se}=a;this.connector=i,this.sessionScopesFunc=T,this.sessionShouldRefreshFunc=se,this.helper=new Ie({sessionScopes:T,defaultScopes:p})}async getSession(a){if(this.helper.sessionExistsAndHasScope(this.currentSession,a.scopes)){if(!this.sessionShouldRefreshFunc(this.currentSession))return this.currentSession;try{const p=await this.collapsedSessionRefresh(a.scopes),T=this.sessionScopesFunc(this.currentSession),se=this.sessionScopesFunc(p);return Z(se,T)&&(this.currentSession=p),p}catch(p){if(a.optional)return;throw p}}if(!this.currentSession&&!a.instantPopup)try{const i=await this.collapsedSessionRefresh(a.scopes);return this.currentSession=i,this.getSession(a)}catch{}if(!a.optional)return this.currentSession=await this.connector.createSession({...a,scopes:this.helper.getExtendedScope(this.currentSession,a.scopes)}),this.stateTracker.setIsSignedIn(!0),this.currentSession}async removeSession(){this.currentSession=void 0,await this.connector.removeSession(),this.stateTracker.setIsSignedIn(!1)}sessionState$(){return this.stateTracker.sessionState$()}async collapsedSessionRefresh(a){if(this.refreshPromise)return this.refreshPromise;this.refreshPromise=this.connector.refreshSession(this.helper.getExtendedScope(this.currentSession,a));try{const i=await this.refreshPromise;return this.stateTracker.setIsSignedIn(!0),i}finally{delete this.refreshPromise}}}var Ye=Object.defineProperty,Kt=(d,a,i)=>a in d?Ye(d,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[a]=i,jt=(d,a,i)=>(Kt(d,typeof a!="symbol"?a+"":a,i),i);class Wt{constructor(a){jt(this,"connector"),jt(this,"helper"),jt(this,"stateTracker",new qt),jt(this,"currentSession");const{connector:i,defaultScopes:p=new Set,sessionScopes:T}=a;this.connector=i,this.helper=new Ie({sessionScopes:T,defaultScopes:p})}setSession(a){this.currentSession=a,this.stateTracker.setIsSignedIn(!!a)}async getSession(a){if(this.helper.sessionExistsAndHasScope(this.currentSession,a.scopes))return this.currentSession;if(!a.optional)return this.currentSession=await this.connector.createSession({...a,scopes:this.helper.getExtendedScope(this.currentSession,a.scopes)}),this.stateTracker.setIsSignedIn(!0),this.currentSession}async removeSession(){this.currentSession=void 0,this.stateTracker.setIsSignedIn(!1)}sessionState$(){return this.stateTracker.sessionState$()}}var ft=Object.defineProperty,Ln=(d,a,i)=>a in d?ft(d,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[a]=i,dn=(d,a,i)=>(Ln(d,typeof a!="symbol"?a+"":a,i),i);class Xt{constructor(a){dn(this,"manager"),dn(this,"storageKey"),dn(this,"schema"),dn(this,"sessionShouldRefreshFunc"),dn(this,"helper");const{manager:i,storageKey:p,schema:T,sessionScopes:se,sessionShouldRefresh:Me=()=>!1}=a;this.manager=i,this.storageKey=p,this.schema=T,this.sessionShouldRefreshFunc=Me,this.helper=new Ie({sessionScopes:se,defaultScopes:new Set})}setSession(a){this.manager.setSession(a),this.saveSession(a)}async getSession(a){const{scopes:i}=a,p=this.loadSession();if(this.helper.sessionExistsAndHasScope(p,i)&&!this.sessionShouldRefreshFunc(p))return this.manager.setSession(p),p;const T=await this.manager.getSession(a);return this.saveSession(T),T}async removeSession(){localStorage.removeItem(this.storageKey),await this.manager.removeSession()}sessionState$(){return this.manager.sessionState$()}loadSession(){try{const a=localStorage.getItem(this.storageKey);if(a){const i=JSON.parse(a,(p,T)=>(T==null?void 0:T.__type)==="Set"?new Set(T.__value):T);try{return this.schema.parse(i)}catch(p){throw console.log(`Failed to load session from local storage because it did not conform to the expected schema, ${p}`),p}}return}catch{localStorage.removeItem(this.storageKey);return}}saveSession(a){if(a===void 0){localStorage.removeItem(this.storageKey);return}try{this.schema.parse(a)}catch(i){console.warn(`Failed to save session to local storage because it did not conform to the expected schema, ${i}`);return}localStorage.setItem(this.storageKey,JSON.stringify(a,(i,p)=>p instanceof Set?{__type:"Set",__value:Array.from(p)}:p))}}var An=Object.defineProperty,Xe=(d,a,i)=>a in d?An(d,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[a]=i,mt=(d,a,i)=>(Xe(d,typeof a!="symbol"?a+"":a,i),i);const Dt={id:"oauth2",title:"Your Identity Provider",icon:()=>null};class rt{constructor(a){mt(this,"sessionManager"),mt(this,"scopeTransform"),this.sessionManager=a.sessionManager,this.scopeTransform=a.scopeTransform}static create(a){const{configApi:i,discoveryApi:p,environment:T="development",provider:se=Dt,oauthRequestApi:Me,defaultScopes:Ue=[],scopeTransform:vt=yn=>yn,popupOptions:Bt}=a,jn=new ht({configApi:i,discoveryApi:p,environment:T,provider:se,oauthRequestApi:Me,sessionTransform({backstageIdentity:yn,...oa}){var ta;const ia={...oa,providerInfo:{idToken:oa.providerInfo.idToken,accessToken:oa.providerInfo.accessToken,scopes:rt.normalizeScopes(vt,oa.providerInfo.scope),expiresAt:oa.providerInfo.expiresInSeconds?new Date(Date.now()+oa.providerInfo.expiresInSeconds*1e3):void 0}};if(yn){const Ma=(ta=yn.expiresInSeconds)!=null?ta:oa.providerInfo.expiresInSeconds;ia.backstageIdentity={token:yn.token,identity:yn.identity,expiresAt:Ma?new Date(Date.now()+Ma*1e3):void 0}}return ia},popupOptions:Bt}),Bn=new Ce({connector:jn,defaultScopes:new Set(Ue),sessionScopes:yn=>yn.providerInfo.scopes,sessionShouldRefresh:yn=>{var oa,ta;let ia=1/0;return(oa=yn.providerInfo)!=null&&oa.expiresAt&&(ia=Math.min(ia,(yn.providerInfo.expiresAt.getTime()-Date.now())/1e3)),(ta=yn.backstageIdentity)!=null&&ta.expiresAt&&(ia=Math.min(ia,(yn.backstageIdentity.expiresAt.getTime()-Date.now())/1e3)),ia<60*5}});return new rt({sessionManager:Bn,scopeTransform:vt})}async signIn(){await this.getAccessToken()}async signOut(){await this.sessionManager.removeSession()}sessionState$(){return this.sessionManager.sessionState$()}async getAccessToken(a,i){var p;const T=rt.normalizeScopes(this.scopeTransform,a),se=await this.sessionManager.getSession({...i,scopes:T});return(p=se==null?void 0:se.providerInfo.accessToken)!=null?p:""}async getIdToken(a={}){var i;const p=await this.sessionManager.getSession({...a,scopes:new Set(["openid"])});return(i=p==null?void 0:p.providerInfo.idToken)!=null?i:""}async getBackstageIdentity(a={}){const i=await this.sessionManager.getSession(a);return i==null?void 0:i.backstageIdentity}async getProfile(a={}){const i=await this.sessionManager.getSession(a);return i==null?void 0:i.profile}static normalizeScopes(a,i){if(!i)return new Set;const p=Array.isArray(i)?i:i.split(/[\s|,]/).filter(Boolean);return new Set(a(p))}}const qe={id:"github",title:"GitHub",icon:()=>null};class V{static create(a){const{configApi:i,discoveryApi:p,environment:T="development",provider:se=qe,oauthRequestApi:Me,defaultScopes:Ue=["read:user"]}=a;return rt.create({configApi:i,discoveryApi:p,oauthRequestApi:Me,provider:se,environment:T,defaultScopes:Ue})}}const he={id:"gitlab",title:"GitLab",icon:()=>null};class Ee{static create(a){const{configApi:i,discoveryApi:p,environment:T="development",provider:se=he,oauthRequestApi:Me,defaultScopes:Ue=["read_user"]}=a;return rt.create({configApi:i,discoveryApi:p,oauthRequestApi:Me,provider:se,environment:T,defaultScopes:Ue})}}const Pt={id:"google",title:"Google",icon:()=>null},Nt="https://www.googleapis.com/auth/";class ln{static create(a){const{configApi:i,discoveryApi:p,oauthRequestApi:T,environment:se="development",provider:Me=Pt,defaultScopes:Ue=["openid",`${Nt}userinfo.email`,`${Nt}userinfo.profile`]}=a;return rt.create({configApi:i,discoveryApi:p,oauthRequestApi:T,provider:Me,environment:se,defaultScopes:Ue,scopeTransform(vt){return vt.map(Bt=>Bt==="openid"?Bt:Bt==="profile"||Bt==="email"?`${Nt}userinfo.${Bt}`:Bt.startsWith(Nt)?Bt:`${Nt}${Bt}`)}})}}const bn={id:"okta",title:"Okta",icon:()=>null},Dn=new Set(["openid","profile","email","phone","address","groups","offline_access"]),Un="okta.";class Vn{static create(a){const{configApi:i,discoveryApi:p,environment:T="development",provider:se=bn,oauthRequestApi:Me,defaultScopes:Ue=["openid","email","profile","offline_access"]}=a;return rt.create({configApi:i,discoveryApi:p,oauthRequestApi:Me,provider:se,environment:T,defaultScopes:Ue,scopeTransform(vt){return vt.map(Bt=>Dn.has(Bt)||Bt.startsWith(Un)?Bt:`${Un}${Bt}`)}})}}const Pn=t.z.object({profile:t.z.object({email:t.z.string().optional(),displayName:t.z.string().optional(),picture:t.z.string().optional()}),backstageIdentity:t.z.object({token:t.z.string(),identity:t.z.object({type:t.z.literal("user"),userEntityRef:t.z.string(),ownershipEntityRefs:t.z.array(t.z.string())})})}),Yn={id:"saml",title:"SAML",icon:()=>null};class da{constructor(a){this.sessionManager=a}static create(a){const{discoveryApi:i,environment:p="development",provider:T=Yn}=a,se=new j({discoveryApi:i,environment:p,provider:T}),Me=new Wt({connector:se}),Ue=new Xt({manager:Me,storageKey:`${T.id}Session`,schema:Pn});return new da(Ue)}sessionState$(){return this.sessionManager.sessionState$()}async signIn(){await this.getBackstageIdentity({})}async signOut(){await this.sessionManager.removeSession()}async getBackstageIdentity(a={}){const i=await this.sessionManager.getSession(a);return i==null?void 0:i.backstageIdentity}async getProfile(a={}){const i=await this.sessionManager.getSession(a);return i==null?void 0:i.profile}}var ct=Object.defineProperty,m=(d,a,i)=>a in d?ct(d,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[a]=i,R=(d,a,i)=>(m(d,typeof a!="symbol"?a+"":a,i),i);const K={id:"microsoft",title:"Microsoft",icon:()=>null},le=class Kr{constructor(a){R(this,"oauth2"),R(this,"configApi"),R(this,"environment"),R(this,"provider"),R(this,"oauthRequestApi"),R(this,"discoveryApi"),R(this,"scopeTransform");const{configApi:i,environment:p="development",provider:T=K,oauthRequestApi:se,discoveryApi:Me,defaultScopes:Ue=["openid","offline_access","profile","email","User.Read"],scopeTransform:vt=Bt=>Bt.concat("offline_access")}=a;this.configApi=i,this.environment=p,this.provider=T,this.oauthRequestApi=se,this.discoveryApi=Me,this.scopeTransform=vt,this.oauth2={[Kr.MicrosoftGraphID]:rt.create({configApi:this.configApi,discoveryApi:this.discoveryApi,oauthRequestApi:this.oauthRequestApi,provider:this.provider,environment:this.environment,scopeTransform:this.scopeTransform,defaultScopes:Ue})}}static create(a){return new Kr(a)}microsoftGraph(){return this.oauth2[Kr.MicrosoftGraphID]}static resourceForScopes(a){var i;const p=[...new Set(a.split(" ").map(Kr.resourceForScope).filter(se=>se!=="openid"))];if(p.length>1)return Promise.reject(new Error(`Requested access token with scopes from multiple Azure resources: ${p.join(", ")}. Access tokens can only have a single audience.`));const T=(i=p[0])!=null?i:Kr.MicrosoftGraphID;return Promise.resolve(T)}static resourceForScope(a){var i;const p=(i=a.match(/^(?<resourceURI>.*)\/(?<scp>[^\/]*)$/))==null?void 0:i.groups;if(p){const{resourceURI:T}=p;return T.replace(/^api:\/\//,"")}switch(a){case"email":case"openid":case"offline_access":case"profile":return"openid";default:return Kr.MicrosoftGraphID}}async getAccessToken(a,i){const p=a===void 0?Kr.MicrosoftGraphID:await Kr.resourceForScopes(Array.isArray(a)?a.join(" "):a);return p in this.oauth2||(this.oauth2[p]=rt.create({configApi:this.configApi,discoveryApi:this.discoveryApi,oauthRequestApi:this.oauthRequestApi,provider:this.provider,environment:this.environment,scopeTransform:this.scopeTransform})),this.oauth2[p].getAccessToken(a,i)}getIdToken(a){return this.microsoftGraph().getIdToken(a)}getProfile(a){return this.microsoftGraph().getProfile(a)}getBackstageIdentity(a){return this.microsoftGraph().getBackstageIdentity(a)}signIn(){return this.microsoftGraph().signIn()}signOut(){return this.microsoftGraph().signOut()}sessionState$(){return this.microsoftGraph().sessionState$()}};R(le,"MicrosoftGraphID","00000003-0000-0000-c000-000000000000");let I=le;const U={id:"onelogin",title:"onelogin",icon:()=>null},Y=new Set(["openid","profile","email","phone","address","groups","offline_access"]),we="onelogin.";class Oe{static create(a){const{configApi:i,discoveryApi:p,environment:T="development",provider:se=U,oauthRequestApi:Me}=a;return rt.create({configApi:i,discoveryApi:p,oauthRequestApi:Me,provider:se,environment:T,defaultScopes:["openid","email","profile","offline_access"],scopeTransform(Ue){return Ue.map(vt=>Y.has(vt)||vt.startsWith(we)?vt:`${we}${vt}`)}})}}const ot={id:"bitbucket",title:"Bitbucket",icon:()=>null};class Ot{static create(a){const{configApi:i,discoveryApi:p,environment:T="development",provider:se=ot,oauthRequestApi:Me,defaultScopes:Ue=["account"]}=a;return rt.create({configApi:i,discoveryApi:p,oauthRequestApi:Me,provider:se,environment:T,defaultScopes:Ue})}}const en={id:"bitbucketServer",title:"Bitbucket Server",icon:()=>null};class Zt{static create(a){const{configApi:i,discoveryApi:p,environment:T="development",provider:se=en,oauthRequestApi:Me,defaultScopes:Ue=["PROJECT_ADMIN"]}=a;return rt.create({configApi:i,discoveryApi:p,oauthRequestApi:Me,provider:se,environment:T,defaultScopes:Ue})}}const pn={id:"atlassian",title:"Atlassian",icon:()=>null};class mn{static create(a){const{configApi:i,discoveryApi:p,environment:T="development",provider:se=pn,oauthRequestApi:Me}=a;return rt.create({configApi:i,discoveryApi:p,oauthRequestApi:Me,provider:se,environment:T})}}const kt={id:"vmwareCloudServices",title:"VMware Cloud",icon:()=>null};class Sn{static create(a){const{configApi:i,discoveryApi:p,oauthRequestApi:T,environment:se="development",provider:Me=kt,defaultScopes:Ue=["openid"]}=a;return rt.create({configApi:i,discoveryApi:p,oauthRequestApi:T,provider:Me,environment:se,defaultScopes:Ue})}}var un=Object.defineProperty,$n=(d,a,i)=>a in d?un(d,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[a]=i,qn=(d,a,i)=>($n(d,typeof a!="symbol"?a+"":a,i),i);class na{constructor(){qn(this,"subject",new et)}post(a){this.subject.next(a)}alert$(){return this.subject}}class kn{constructor(a){this.actualApis=a}static fromApis(a){return new kn(a)}captureEvent(a){this.actualApis.forEach(i=>{try{i.captureEvent(a)}catch{}})}}class wn{captureEvent(a){}}var gn=Object.defineProperty,Jt=(d,a,i)=>a in d?gn(d,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[a]=i,vn=(d,a,i)=>(Jt(d,typeof a!="symbol"?a+"":a,i),i);const _n="theme";class Aa{constructor(a){this.themes=a,vn(this,"activeThemeId"),vn(this,"subject",new $t(void 0))}static createWithStorage(a){var i;const p=new Aa(a);if(!window.localStorage)return p;const T=(i=window.localStorage.getItem(_n))!=null?i:void 0;return p.setActiveThemeId(T),p.activeThemeId$().subscribe(se=>{se?window.localStorage.setItem(_n,se):window.localStorage.removeItem(_n)}),window.addEventListener("storage",se=>{var Me;if(se.key===_n){const Ue=(Me=localStorage.getItem(_n))!=null?Me:void 0;p.setActiveThemeId(Ue)}}),p}getInstalledThemes(){return this.themes.slice()}activeThemeId$(){return this.subject}getActiveThemeId(){return this.activeThemeId}setActiveThemeId(a){this.activeThemeId=a,this.subject.next(a)}}const Oa="Invalid discovery URL pattern,";class J{constructor(a){this.parts=a}static compile(a){const i=a.split(/\{\{\s*pluginId\s*\}\}/),p=i.join("pluginId");let T;try{T=new URL(p)}catch{throw new Error(`${Oa} URL '${p}' is invalid`)}if(T.hash)throw new Error(`${Oa} URL must not have a hash`);if(T.search)throw new Error(`${Oa} URL must not have a query`);if(p.endsWith("/"))throw new Error(`${Oa} URL must not end with a slash`);return new J(i)}async getBaseUrl(a){return this.parts.join(encodeURIComponent(a))}}class ge{constructor(a,i){this.endpoints=a,this.defaultEndpoint=i}static fromConfig(a,i){var p,T;const se=(p=i==null?void 0:i.pathPattern)!=null?p:"/api/{{ pluginId }}",Me=a.getString("backend.baseUrl"),Ue=(T=a.getOptionalConfigArray("discovery.endpoints"))==null?void 0:T.flatMap(vt=>{const Bt=typeof vt.get("target")=="object"?vt.getString("target.external"):vt.getString("target"),jn=J.compile(Bt);return vt.getStringArray("plugins").map(Bn=>[Bn,jn])});return new ge(new Map(Ue),J.compile(`${Me}${se}`))}async getBaseUrl(a){const i=this.endpoints.get(a);return i?i.getBaseUrl(a):this.defaultEndpoint.getBaseUrl(a)}}class ke{constructor(a,i){this.alertApi=a,this.errorApi=i}post(a,i){return i!=null&&i.hidden||this.alertApi.post({message:a.message,severity:"error"}),this.errorApi.post(a,i)}error$(){return this.errorApi.error$()}}var it=Object.defineProperty,St=(d,a,i)=>a in d?it(d,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[a]=i,At=(d,a,i)=>(St(d,typeof a!="symbol"?a+"":a,i),i);class cn{constructor(){At(this,"subject",new et)}post(a,i){this.subject.next({error:a,context:i})}error$(){return this.subject}}class hn{static forward(a,i){window.addEventListener("unhandledrejection",p=>{a.post(p.reason,i)})}}var ie=Object.defineProperty,Te=(d,a,i)=>a in d?ie(d,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[a]=i,We=(d,a,i)=>(Te(d,typeof a!="symbol"?a+"":a,i),i);function Ne(d){if(d.length<3)throw new Error(`The '${d}' feature flag must have a minimum length of three characters.`);if(d.length>150)throw new Error(`The '${d}' feature flag must not exceed 150 characters.`);if(!d.match(/^[a-z]+[a-z0-9-]+$/))throw new Error(`The '${d}' feature flag must start with a lowercase letter and only contain lowercase letters, numbers and hyphens. Examples: feature-flag-one, alpha, release-2020`)}class He{constructor(){We(this,"registeredFeatureFlags",[]),We(this,"flags")}registerFlag(a){Ne(a.name),this.registeredFeatureFlags.push(a)}getRegisteredFlags(){return this.registeredFeatureFlags.slice()}isActive(a){return this.flags||(this.flags=this.load()),this.flags.get(a)===q.F.Active}save(a){this.flags||(this.flags=this.load()),a.merge||this.flags.clear();for(const[p,T]of Object.entries(a.states))this.flags.set(p,T);const i=Array.from(this.flags.entries()).filter(([,p])=>p===q.F.Active);window.localStorage.setItem("featureFlags",JSON.stringify(Object.fromEntries(i)))}load(){try{const a=window.localStorage.getItem("featureFlags");if(!a)return new Map;const i=JSON.parse(a);if(typeof i!="object"||i===null||Array.isArray(i))return new Map;const p=Object.entries(i).filter(([T,se])=>(Ne(T),se===q.F.Active));return new Map(p)}catch{return new Map}}}function zt(d){var a;let i=d.baseImplementation||e.g.fetch;const p=[(a=d.middleware)!=null?a:[]].flat().reverse();for(const T of p)i=T.apply(i);return{fetch:i}}class _t{constructor(a,i,p,T){this.identityApi=a,this.allowUrl=i,this.headerName=p,this.headerValue=T}static create(a){var i,p;const T=bt(a),se=((i=a.header)==null?void 0:i.name)||"authorization",Me=((p=a.header)==null?void 0:p.value)||(Ue=>`Bearer ${Ue}`);return new _t(a.identityApi,T,se,Me)}apply(a){return async(i,p)=>{const T=new Request(i,p),{token:se}=await this.identityApi.getCredentials();return T.headers.get(this.headerName)||typeof se!="string"||!se||!this.allowUrl(T.url)?a(i,p):(T.headers.set(this.headerName,this.headerValue(se)),a(T))}}}function bt(d){return d.allowUrl?d.allowUrl:d.urlPrefixAllowlist?Gt(d.urlPrefixAllowlist):d.config?Gt([d.config.getString("backend.baseUrl")]):()=>!1}function Gt(d){const a=d.map(i=>i.replace(/\/$/,""));return i=>a.some(p=>i===p||i.startsWith(`${p}/`))}function fn(d,a){return!a||a==="/"?d:`${d.replace(/\/$/,"")}/${a.replace(/^\//,"")}`}class rn{constructor(a){this.discoveryApi=a}apply(a){return async(i,p)=>{const T=new Request(i,p),se="plugin://";if(!T.url.startsWith(se))return a(i,p);const{hostname:Me,pathname:Ue,search:vt,hash:Bt,username:jn,password:Bn}=new URL(`http://${T.url.substring(se.length)}`);let yn=await this.discoveryApi.getBaseUrl(Me);if(jn||Bn){const ta=new URL(yn),ia=`${jn}${Bn?`:${Bn}`:""}@`;yn=`${ta.protocol}//${ia}${ta.host}${ta.pathname}`}const oa=`${fn(yn,Ue)}${vt}${Bt}`;return a(oa,typeof i=="string"||Nn(i)?p:i)}}}function Nn(d){return typeof d=="object"&&(d==null?void 0:d.constructor)===URL}class Mn{static resolvePluginProtocol(a){return new rn(a.discoveryApi)}static injectIdentityAuth(a){return _t.create(a)}constructor(){}}var Gn=Object.defineProperty,la=(d,a,i)=>a in d?Gn(d,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[a]=i,Fn=(d,a,i)=>(la(d,typeof a!="symbol"?a+"":a,i),i);function ea(d,a){for(const i of a)if(!d.has(i))return!1;return!0}function ca(d,...a){const i=new Set(d);for(const p of a)for(const T of p)i.add(T);return i}class sa{constructor(){Fn(this,"requests",[]),Fn(this,"subject",new $t(this.getCurrentPending()))}request(a){return new Promise((i,p)=>{this.requests.push({scopes:a,resolve:i,reject:p}),this.subject.next(this.getCurrentPending())})}resolve(a,i){this.requests=this.requests.filter(p=>ea(a,p.scopes)?(p.resolve(i),!1):!0),this.subject.next(this.getCurrentPending())}reject(a){this.requests.forEach(i=>i.reject(a)),this.requests=[],this.subject.next(this.getCurrentPending())}pending(){return this.subject}getCurrentPending(){const a=this.requests.length===0?void 0:this.requests.slice(1).reduce((i,p)=>ca(i,p.scopes),this.requests[0].scopes);return{scopes:a,resolve:i=>{a&&this.resolve(a,i)},reject:i=>{a&&this.reject(i)}}}}var Ea=Object.defineProperty,ba=(d,a,i)=>a in d?Ea(d,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[a]=i,Ra=(d,a,i)=>(ba(d,typeof a!="symbol"?a+"":a,i),i);class Ta{constructor(){Ra(this,"subject",new $t([])),Ra(this,"currentRequests",[]),Ra(this,"handlerCount",0)}createAuthRequester(a){const i=new sa,p=this.handlerCount;return this.handlerCount++,i.pending().subscribe({next:T=>{const se=this.currentRequests.slice(),Me=this.makeAuthRequest(T,a);Me?se[p]=Me:delete se[p],this.currentRequests=se,this.subject.next(se.filter(Boolean))}}),T=>i.request(T)}makeAuthRequest(a,i){const{scopes:p}=a;if(p)return{provider:i.provider,trigger:async()=>{const T=await i.onAuthRequest(p);a.resolve(T)},reject:()=>{const T=new Error("Login failed, rejected by user");T.name="RejectedError",a.reject(T)}}}authRequest$(){return this.subject}}var Ha=Object.defineProperty,Ja=(d,a,i)=>a in d?Ha(d,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[a]=i,Za=(d,a,i)=>(Ja(d,typeof a!="symbol"?a+"":a,i),i);const hr=new Map,gr=class co{constructor(a,i){this.namespace=a,this.errorApi=i,Za(this,"subscribers",new Set),Za(this,"observable",new(r())(p=>(this.subscribers.add(p),()=>{this.subscribers.delete(p)})))}static create(a){var i;return new co((i=a.namespace)!=null?i:"",a.errorApi)}static addStorageEventListener(){window.addEventListener("storage",a=>{var i;for(const[p,T]of hr.entries())(i=a.key)!=null&&i.startsWith(p)&&T.handleStorageChange(a.key)})}get(a){return this.snapshot(a).value}snapshot(a){let i,p="absent";try{const T=localStorage.getItem(this.getKeyName(a));T&&(i=JSON.parse(T,(se,Me)=>(typeof Me=="object"&&Me!==null&&Object.freeze(Me),Me)),p="present")}catch{this.errorApi.post(new Error(`Error when parsing JSON config from storage for: ${a}`))}return{key:a,value:i,presence:p}}forBucket(a){const i=`${this.namespace}/${a}`;return hr.has(i)||hr.set(i,new co(i,this.errorApi)),hr.get(i)}async set(a,i){localStorage.setItem(this.getKeyName(a),JSON.stringify(i)),this.notifyChanges(a)}async remove(a){localStorage.removeItem(this.getKeyName(a)),this.notifyChanges(a)}observe$(a){return co.hasSubscribed||(co.addStorageEventListener(),co.hasSubscribed=!0),this.observable.filter(({key:i})=>i===a)}handleStorageChange(a){if(!(a!=null&&a.startsWith(this.namespace)))return;const i=a==null?void 0:a.slice(`${this.namespace}/`.length);i.includes("/")||this.notifyChanges(decodeURIComponent(i))}getKeyName(a){return`${this.namespace}/${encodeURIComponent(a)}`}notifyChanges(a){const i=this.snapshot(a);for(const p of this.subscribers)p.next(i)}};Za(gr,"hasSubscribed",!1);let or=gr;const ur=(0,s.createContext)(void 0);function Sa(){const[d]=(0,M.AV)(s.createElement(M.qh,{index:!0,element:s.createElement("div",null)}));return!d.index}const qa=(d,a)=>{try{const i=(0,y.ue)(a,{pathname:d}),p=i==null?void 0:i.filter(vt=>{var Bt;return((Bt=vt==null?void 0:vt.route.routeRefs)==null?void 0:Bt.size)>0}).pop(),T=p==null?void 0:p.route;if(!T||T.path===""&&d!=="/")return;let se;T.routeRefs.size===1&&(se=T.routeRefs.values().next().value);let Me;T.plugins.size===1&&(Me=T.plugins.values().next().value);const Ue=Object.entries((p==null?void 0:p.params)||{}).reduce((vt,[Bt,jn])=>(jn!==void 0&&Bt!=="*"&&(vt[Bt]=jn),vt),{});return{extension:"App",pluginId:(Me==null?void 0:Me.getId())||"root",...se?{routeRef:se.id}:{},_routeNodeType:T.element,params:Ue}}catch{return}},er=({pathname:d,search:a,hash:i,attributes:p})=>{const T=(0,Q.st)();return(0,s.useEffect)(()=>{T.captureEvent("navigate",`${d}${a}${i}`,{attributes:p})},[T,d,a,i,p]),null},ir=({routeObjects:d})=>{const{pathname:a,search:i,hash:p}=(0,M.zy)(),{params:T,...se}=qa(a,d)||{params:{}};return s.createElement(Q.Ig,{attributes:se},s.createElement(er,{pathname:a,search:i,hash:p,attributes:T}))};function ar(d){return Sa()?$e(d):""}function $e(d){var a;let{pathname:i}=new URL((a=d.getOptionalString("app.baseUrl"))!=null?a:"/","http://sample.dev");return i=i.replace(/\/*$/,""),i}function ce({component:d,appIdentityProxy:a,children:i}){const[p,T]=(0,s.useState)(),se=(0,q.u)(q.p),Me=$e(se);return p?(a.setTarget(p,{signOutTargetUrl:Me||"/"}),s.createElement(s.Fragment,null,i)):s.createElement(d,{onSignInSuccess:T})}function st(d){const{Router:a,SignInPage:i}=(0,Q.nm)().getComponents(),p=(0,q.u)(q.p),T=$e(p),se=`${T}/*`,Me=(0,s.useContext)(ur);if(!Me)throw new Error("AppRouter must be rendered within the AppProvider");const{routeObjects:Ue,appIdentityProxy:vt}=Me;return i?Sa()?s.createElement(a,null,s.createElement(ir,{routeObjects:Ue}),s.createElement(ce,{component:i,appIdentityProxy:vt},s.createElement(M.BV,null,s.createElement(M.qh,{path:se,element:s.createElement(s.Fragment,null,d.children)})))):s.createElement(a,{basename:T},s.createElement(ir,{routeObjects:Ue}),s.createElement(ce,{component:i,appIdentityProxy:vt},d.children)):(vt.setTarget({getUserId:()=>"guest",getIdToken:async()=>{},getProfile:()=>({email:"guest@example.com",displayName:"Guest"}),getProfileInfo:async()=>({email:"guest@example.com",displayName:"Guest"}),getBackstageIdentity:async()=>({type:"user",userEntityRef:"user:default/guest",ownershipEntityRefs:["user:default/guest"]}),getCredentials:async()=>({}),signOut:async()=>{}},{signOutTargetUrl:T||"/"}),Sa()?s.createElement(a,null,s.createElement(ir,{routeObjects:Ue}),s.createElement(M.BV,null,s.createElement(M.qh,{path:se,element:s.createElement(s.Fragment,null,d.children)}))):s.createElement(a,{basename:T},s.createElement(ir,{routeObjects:Ue}),d.children))}(0,Q.h3)(st,"core.type","AppRouter");function Rn(d){const a={};for(const p in d.collectors)d.collectors.hasOwnProperty(p)&&(a[p]=d.collectors[p]());const i=[{node:s.Children.toArray(d.root),parent:void 0,contexts:{}}];for(;i.length!==0;){const{node:p,parent:T,contexts:se}=i.shift();s.Children.forEach(p,Me=>{if(!(0,s.isValidElement)(Me))return;const Ue={};for(const vt in a)if(a.hasOwnProperty(vt)){const Bt=a[vt];Ue[vt]=Bt.visit(Bt.accumulator,Me,T,se[vt])}for(const vt of d.discoverers){const Bt=vt(Me);Bt&&i.push({node:Bt,parent:Me,contexts:Ue})}})}return Object.fromEntries(Object.entries(a).map(([p,T])=>[p,T.accumulator]))}function Kn(d,a){return()=>({accumulator:d(),visit:a})}function aa(d){var a;return(a=d.props)==null?void 0:a.children}function ra(d){var a,i,p;if((a=d.props)!=null&&a.path&&((i=d.props)!=null&&i.element))return(p=d.props)==null?void 0:p.element}const va=Kn(()=>new Set,(d,a)=>{const i=(0,Q.E0)(a,"core.plugin");i&&d.add(i)}),_a=d=>{const{children:a}=d,i=(0,q.u)(q.f),p="with"in d?i.isActive(d.with):!i.isActive(d.without);return s.createElement(s.Fragment,null,p?a:null)};(0,Q.h3)(_a,"core.featureFlagged",!0);const wa={caseSensitive:!1,path:"*",element:"match-all",routeRefs:new Set,plugins:new Set};function Ia(d){var a,i;const p=d;return p!=null&&p.type?(i=(a=p.type.displayName)!=null?a:p.type.name)!=null?i:String(p.type):String(p)}const Ka=d=>{const a=new Set;return d&&a.add(d),a};function dr(d,a=new Array){return s.Children.forEach(d,i=>{if(!(0,s.isValidElement)(i))return;const p=(0,Q.E0)(i,"core.mountPoint");if(p){const T=(0,Q.E0)(i,"core.plugin");a.push({routeRef:p,plugin:T})}dr(i.props.children,a)}),a}const ha=Kn(()=>({paths:new Map,parents:new Map,objects:new Array}),(d,a,i,p)=>{var T,se,Me,Ue,vt,Bt,jn;if(p!=null&&p.isElementAncestor)return p;if((i==null?void 0:i.props.element)===a)return{...p,isElementAncestor:!0};const Bn=(T=a.props)==null?void 0:T.path,yn=(0,Q.E0)(a,"core.mountPoint");if(yn&&Bn)throw new Error(`Path property may not be set directly on a routable extension "${Ia(a)}"`);const oa=(Me=(se=p==null?void 0:p.obj)==null?void 0:se.children)!=null?Me:d.objects;if(Bn!==void 0){if(typeof Bn!="string")throw new Error(`Element path must be a string at "${Ia(a)}"`);const ta=Bn.startsWith("/")?Bn.slice(1):Bn,ia=a.props.element;if((0,Q.E0)(a,"core.gatherMountPoints")){if(ia)throw new Error(`Mount point gatherers may not have an element prop "${Ia(a)}"`);const Ma={path:ta,element:"gathered",routeRefs:new Set,caseSensitive:!!((Ue=a.props)!=null&&Ue.caseSensitive),children:[wa],plugins:new Set};return oa.push(Ma),{obj:Ma,gatherPath:ta,routeRef:p==null?void 0:p.routeRef,gatherRouteRef:p==null?void 0:p.routeRef}}if(ia){const[Ma,...Ua]=dr(ia);if(Ua.length>0)throw new Error(`Route element with path "${Bn}" may not contain multiple routable extensions`);if(!Ma)return p;const{routeRef:Fa,plugin:mr}=Ma,Oo={path:ta,element:"mounted",routeRefs:new Set([Fa]),caseSensitive:!!((vt=a.props)!=null&&vt.caseSensitive),children:[wa],plugins:Ka(mr)};return oa.push(Oo),d.paths.set(Fa,ta),d.parents.set(Fa,p==null?void 0:p.routeRef),{obj:Oo,routeRef:Fa!=null?Fa:p==null?void 0:p.routeRef,gatherPath:ta,gatherRouteRef:p==null?void 0:p.gatherRouteRef}}}if(yn){if((p==null?void 0:p.gatherPath)===void 0)throw new Error(`Routable extension "${Ia(a)}" with mount point "${yn}" must be assigned a path`);(Bt=p==null?void 0:p.obj)==null||Bt.routeRefs.add(yn);const ta=(0,Q.E0)(a,"core.plugin");return ta&&((jn=p==null?void 0:p.obj)==null||jn.plugins.add(ta)),d.paths.set(yn,p.gatherPath),d.parents.set(yn,p==null?void 0:p.gatherRouteRef),{...p,routeRef:yn}}return p}),za=Kn(()=>({paths:new Map,parents:new Map,objects:new Array}),(d,a,i,p)=>{var T,se,Me,Ue,vt;if((i==null?void 0:i.props.element)===a)return p;let Bt=p==null?void 0:p.obj,jn=p==null?void 0:p.routeRef,Bn=p==null?void 0:p.sticky;const yn=(T=a.props)==null?void 0:T.path,oa=(se=Bt==null?void 0:Bt.children)!=null?se:d.objects,ta=!!((Me=a.props)!=null&&Me.caseSensitive);let ia=p==null?void 0:p.path;if((0,Q.E0)(a,"core.gatherMountPoints")){if(!yn)throw new Error("Mount point gatherer must have a path");ia=yn}const Ma=(Ue=a.props)==null?void 0:Ue.element;let Ua=(0,Q.E0)(a,"core.mountPoint");if(!Ua&&(0,s.isValidElement)(Ma)&&(Ua=(0,Q.E0)(Ma,"core.mountPoint")),Ua){let mr=yn;if(ia&&(mr?ia=void 0:mr=ia),!mr)throw new Error("Mounted routable extension must have a path");d.paths.set(Ua,mr),jn&&Bn?(d.parents.set(Ua,jn),yn&&(jn=Ua,Bn=!1)):(d.parents.set(Ua,jn),jn=Ua),yn?(Bt={caseSensitive:ta,path:yn,element:"mounted",routeRefs:new Set([Ua]),children:[wa],plugins:Ka((0,Q.E0)(a.props.element,"core.plugin"))},oa.push(Bt)):Bt==null||Bt.routeRefs.add(Ua)}if((0,Q.E0)(a,"core.gatherMountPoints")&&(Bn=!0),(0,Q.E0)(a,"core.gatherMountPoints")){if(!yn)throw new Error("Mount point gatherer must have a path");Ua||(Bt={caseSensitive:ta,path:yn,element:"gathered",routeRefs:new Set,children:[wa],plugins:((vt=p==null?void 0:p.obj)==null?void 0:vt.plugins)||new Set},oa.push(Bt))}return{obj:Bt,path:ia,routeRef:jn,sticky:Bn}}),Er=Kn(()=>new Set,(d,a)=>{if(a.type===_a){const i=a.props;d.add("with"in i?i.with:i.without)}}),sr=(0,A.Q6)("route-ref-type",()=>Symbol("route-ref-type"));function $a(d){return d[sr]==="absolute"}function Ar(d){return d[sr]==="sub"}function Zr(d){return d[sr]==="external"}function Lr(...d){const a=d.join("/").replace(/\/\/+/g,"/");return a!=="/"&&a.endsWith("/")?a.slice(0,-1):a}function Br(d,a,i){let p,T="";if($a(d))p=d;else if(Ar(d))p=d.parent,T=d.path;else if(Zr(d)){const Ue=i.get(d);if(!Ue)return[void 0,""];if($a(Ue))p=Ue;else if(Ar(Ue))p=Ue.parent,T=Ue.path;else throw new Error(`ExternalRouteRef was bound to invalid target, ${Ue}`)}else throw d[sr]?new Error(`Unknown or invalid route ref type, ${d[sr]}`):new Error(`Unknown object passed to useRouteRef, got ${d}`);if(!p)return[void 0,""];const se=a.get(p);if(se===void 0)return[void 0,""];const Me=Lr(se,T);return[p,Me]}function g(d,a,i,p,T){var se;const Me=(se=(0,y.ue)(T,a))!=null?se:[],Ue=Array();let vt=-1;for(let Bn=d;Bn&&(vt=Me.findIndex(yn=>yn.route.routeRefs.has(Bn)),vt===-1);Bn=p.get(Bn))Ue.unshift(Bn);Ue.length===0&&(vt-=1);const Bt=vt===-1?"":Me[vt].pathname,jn=Ue.slice(0,-1).map(Bn=>{const yn=i.get(Bn);if(yn===void 0)throw new Error(`No path for ${Bn}`);if(yn.includes(":"))throw new Error(`Cannot route to ${d} with parent ${Bn} as it has parameters`);return yn});return`${Lr(Bt,...jn)}/`}class c{constructor(a,i,p,T,se){this.routePaths=a,this.routeParents=i,this.routeObjects=p,this.routeBindings=T,this.appBasePath=se}resolve(a,i){const[p,T]=Br(a,this.routePaths,this.routeBindings);if(!p)return;let se;typeof i=="string"?se=this.trimPath(i):i.pathname?se={...i,pathname:this.trimPath(i.pathname)}:se=i;const Me=this.appBasePath+g(p,se,this.routePaths,this.routeParents,this.routeObjects);return(...[vt])=>{const Bt=vt&&Fe()(vt,jn=>typeof jn=="string"?jn.replaceAll(/[&?#;\/]/g,Bn=>encodeURIComponent(Bn)):jn);return Lr(Me,(0,y.tW)(T,Bt))}}trimPath(a){return a&&(a.startsWith(this.appBasePath)?a.slice(this.appBasePath.length):a)}}const E=(0,A.tK)("routing-context"),$=({routePaths:d,routeParents:a,routeObjects:i,routeBindings:p,basePath:T="",children:se})=>{const Me=new c(d,a,i,p,T),Ue=(0,A.Bl)({1:Me});return s.createElement(E.Provider,{value:Ue},se)};function Pe(d,a){const i=new Set(a.values());i.delete(void 0);for(const p of a.keys()){if(i.has(p))continue;let T=p,se="";for(;T;){const Ue=d.get(T);if(Ue===void 0)throw new Error(`No path for ${T}`);se=Lr(Ue,se),T=a.get(T)}const Me=se.match(/:(\w+)/g);if(Me){for(let Ue=0;Ue<Me.length;Ue++)for(let vt=Ue+1;vt<Me.length;vt++)if(Me[vt]===Me[Ue])throw new Error(`Parameter ${Me[vt]} is duplicated in path ${se}`)}}}function Be(d,a){for(const i of a)if(i.externalRoutes){for(const[p,T]of Object.entries(i.externalRoutes))if(!T.optional&&!d.has(T))throw new Error(`External route '${p}' of the '${i.getId()}' plugin must be bound to a target route. See https://backstage.io/link?bind-routes for details.`)}}const Rt=(0,A.tK)("app-context"),Ft=({appContext:d,children:a})=>{const i=(0,A.Bl)({1:d});return s.createElement(Rt.Provider,{value:i,children:a})},On="app",Wn=`${On}-auth-cookie-expires-at`,La=5*6e4,ka=5e3,Ba=2,Ca=5*6e4;function ja({discoveryApi:d,fetchApi:a,errorApi:i}){let p=!1,T,se=!0,Me=ka;const Ue="BroadcastChannel"in window?new BroadcastChannel(Wn):void 0,vt=yn=>{const oa=(1+3*Math.random())*6e4;return Math.max(yn-Date.now(),La)-oa},Bt=async()=>{try{const oa=`${await d.getBaseUrl(On)}/.backstage/auth/v1/cookie`,ta=await a.fetch(oa,{credentials:"include"});if(!ta.ok)throw new Error(`Request failed with status ${ta.status} ${ta.statusText}, see request towards ${oa} for more details`);const ia=await ta.json();if(!ia.expiresAt)throw new Error("No expiration date in response");const Ma=Date.parse(ia.expiresAt);if(Number.isNaN(Ma))throw new Error("Invalid expiration date in response");se=!0,Ue==null||Ue.postMessage({action:"COOKIE_REFRESH_SUCCESS",payload:{expiresAt:new Date(Ma).toISOString()}}),Bn(vt(Ma))}catch(yn){se?(se=!1,Me=ka):(Me=Math.min(Ca,Me*Ba),console.error("Session cookie refresh failed",yn),i.post(new Error("Session refresh failed, see developer console for details"))),Bn(Me)}},jn=yn=>{const{data:oa}=yn;if(!(oa===null||typeof oa!="object")&&"action"in oa&&oa.action==="COOKIE_REFRESH_SUCCESS"){const ta=Date.parse(oa.payload.expiresAt);if(Number.isNaN(ta)){console.warn("Received invalid expiration from session refresh channel");return}Bn(vt(ta))}};function Bn(yn){p||(T&&clearTimeout(T),T=setTimeout(Bt,yn))}return Ue==null||Ue.addEventListener("message",jn),Bt(),()=>{p=!0,T&&clearTimeout(T),Ue==null||Ue.removeEventListener("message",jn),Ue==null||Ue.close()}}var tr=Object.defineProperty,Na=(d,a,i)=>a in d?tr(d,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[a]=i,Va=(d,a,i)=>(Na(d,typeof a!="symbol"?a+"":a,i),i),wr=(d,a,i)=>{if(!a.has(d))throw TypeError("Cannot "+i)},Yr=(d,a,i)=>(wr(d,a,"read from private field"),i?i.call(d):a.get(d)),Jr=(d,a,i)=>{if(a.has(d))throw TypeError("Cannot add the same private member more than once");a instanceof WeakSet?a.add(d):a.set(d,i)},qr=(d,a,i,p)=>(wr(d,a,"write to private field"),p?p.call(d,i):a.set(d,i),i),Ur;function eo(d){return new Error(`Tried to access IdentityApi ${d} before app was loaded`)}function Or(d){console.warn(`WARNING: Call to ${d} is deprecated and will break in the future`)}class uo{constructor(){Va(this,"target"),Va(this,"waitForTarget"),Va(this,"resolveTarget",()=>{}),Va(this,"signOutTargetUrl","/"),Jr(this,Ur,void 0),this.waitForTarget=new Promise(a=>{this.resolveTarget=a})}setTarget(a,i){this.target=a,this.signOutTargetUrl=i.signOutTargetUrl,this.resolveTarget(a)}getUserId(){if(!this.target)throw eo("getUserId");if(!this.target.getUserId)throw new Error("IdentityApi does not implement getUserId");return Or("getUserId"),this.target.getUserId()}getProfile(){if(!this.target)throw eo("getProfile");if(!this.target.getProfile)throw new Error("IdentityApi does not implement getProfile");return Or("getProfile"),this.target.getProfile()}async getProfileInfo(){return this.waitForTarget.then(a=>a.getProfileInfo())}async getBackstageIdentity(){const a=await this.waitForTarget.then(i=>i.getBackstageIdentity());return a.userEntityRef.match(/^.*:.*\/.*$/)||console.warn(`WARNING: The App IdentityApi provided an invalid userEntityRef, '${a.userEntityRef}'. It must be a full Entity Reference of the form '<kind>:<namespace>/<name>'.`),a}async getCredentials(){return this.waitForTarget.then(a=>a.getCredentials())}async getIdToken(){return this.waitForTarget.then(a=>{if(!a.getIdToken)throw new Error("IdentityApi does not implement getIdToken");return Or("getIdToken"),a.getIdToken()})}async signOut(){var a;await this.waitForTarget.then(i=>i.signOut()),await((a=Yr(this,Ur))==null?void 0:a.call(this)),window.location.href=this.signOutTargetUrl}enableCookieAuth(a){if(Yr(this,Ur))return;const i=ja(a);qr(this,Ur,async()=>{i();const p=await a.discoveryApi.getBaseUrl("app");try{await a.fetchApi.fetch(`${p}/.backstage/auth/v1/cookie`,{method:"DELETE"})}catch{}})}}Ur=new WeakMap;function mo(d,a,i){if(d!==void 0){const T=i.find(se=>se.id===d);if(T)return T}if(a){const T=i.find(se=>se.variant==="dark");if(T)return T}const p=i.find(T=>T.variant==="light");return p||i[0]}const Tr=()=>{const d=(0,s.useMemo)(()=>window.matchMedia("(prefers-color-scheme: dark)"),[]),[a,i]=(0,s.useState)(d.matches);return(0,s.useEffect)(()=>{const p=T=>{i(T.matches)};return d.addListener(p),()=>{d.removeListener(p)}},[d]),a};function to({children:d}){const a=(0,q.u)(q.n),i=(0,Ae.A)(a.activeThemeId$(),a.getActiveThemeId()),p=window.matchMedia?Tr():!1,T=mo(i,p,a.getInstalledThemes());if(!T)throw new Error("App has no themes");return s.createElement(T.Provider,{children:d})}const po=async()=>ho();function ho(d="__APP_INJECTED_RUNTIME_CONFIG__"){const a=[{context:"app-config.yaml",data:{app:{title:"Platform Engineering",baseUrl:"http://localhost:3000"},organization:{name:"DevOps Days Aracaju 2024"},backend:{baseUrl:"http://localhost:7007"},integrations:{github:[{host:"github.com"}]},techdocs:{builder:"local"},auth:{providers:{guest:{}}},catalog:{import:{entityFilename:"catalog-info.yaml",pullRequestBranchName:"backstage-integration"}}}}];if(!a)throw new Error("No static configuration provided");if(!Array.isArray(a))throw new Error("Static configuration has invalid format");const i=a.slice();if(d!=="__app_injected_runtime_config__".toLocaleUpperCase("en-US"))try{const T=JSON.parse(d);Array.isArray(T)?i.push(...T):i.push({data:T,context:"env"})}catch(T){throw new Error(`Failed to load runtime configuration, ${T}`)}const p=window.__APP_CONFIG__;return p&&i.push({context:"window",data:p}),i}var go=Object.defineProperty,no=(d,a,i)=>a in d?go(d,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[a]=i,br=(d,a,i)=>(no(d,typeof a!="symbol"?a+"":a,i),i);class $r{constructor(){br(this,"apis",[])}add(a,i){return this.apis.push([a.id,i]),i}build(){return new Ir(new Map(this.apis))}}class Ir{constructor(a){this.apis=a}static builder(){return new $r}static from(a){return new Ir(new Map(a.map(([i,p])=>[i.id,p])))}static with(a,i){return new Ir(new Map([[a.id,i]]))}with(a,i){return new Ir(new Map([...this.apis,[a.id,i]]))}get(a){return this.apis.get(a.id)}}function fo(d){const a=new Map;return d&&d({bind:(p,T)=>{for(const[se,Me]of Object.entries(T)){const Ue=p[se];if(!Ue)throw new Error(`Key ${se} is not an existing external route`);if(!Me&&!Ue.optional)throw new Error(`External route ${se} is required but was undefined`);Me&&a.set(Ue,Me)}}}),a}var ao=(d,a,i)=>{if(!a.has(d))throw TypeError("Cannot "+i)},_r=(d,a,i)=>(ao(d,a,"read from private field"),i?i.call(d):a.get(d)),Qr=(d,a,i)=>{if(a.has(d))throw TypeError("Cannot add the same private member more than once");a instanceof WeakSet?a.add(d):a.set(d,i)},zr=(d,a,i,p)=>(ao(d,a,"write to private field"),p?p.call(d,i):a.set(d,i),i),Dr,Cr,Mr;const jr="language",f="en",O=class di{constructor(a,i){Qr(this,Dr,void 0),Qr(this,Cr,void 0),Qr(this,Mr,void 0),zr(this,Dr,a),zr(this,Cr,i),zr(this,Mr,new $t({language:_r(this,Cr)}))}static create(a){var i,p;const T=(i=a==null?void 0:a.availableLanguages)!=null?i:[f];if(T.length!==new Set(T).size)throw new Error(`Supported languages may not contain duplicates, got '${T.join("', '")}'`);if(!T.includes(f))throw new Error(`Supported languages must include '${f}'`);const se=(p=a==null?void 0:a.defaultLanguage)!=null?p:f;if(!T.includes(se))throw new Error(`Initial language must be one of the supported languages, got '${se}'`);return new di(T,se)}static createWithStorage(a){const i=di.create(a);if(!window.localStorage)return i;const p=window.localStorage.getItem(jr),{languages:T}=i.getAvailableLanguages();return p&&T.includes(p)&&i.setLanguage(p),i.language$().subscribe(({language:se})=>{se!==window.localStorage.getItem(jr)&&window.localStorage.setItem(jr,se)}),window.addEventListener("storage",se=>{var Me;if(se.key===jr){const Ue=(Me=localStorage.getItem(jr))!=null?Me:void 0;Ue&&i.setLanguage(Ue)}}),i}getAvailableLanguages(){return{languages:_r(this,Dr).slice()}}setLanguage(a){const i=a!=null?a:f;if(i!==_r(this,Cr)){if(i&&!_r(this,Dr).includes(i))throw new Error(`Failed to change language to '${i}', available languages are '${_r(this,Dr).join("', '")}'`);zr(this,Cr,i),_r(this,Mr).next({language:i})}}getLanguage(){return{language:_r(this,Cr)}}language$(){return _r(this,Mr)}};Dr=new WeakMap,Cr=new WeakMap,Mr=new WeakMap;let x=O;function B(d){const a=d;if(a.$$type!=="@backstage/TranslationResource")throw new Error(`Invalid translation resource, bad type '${a.$$type}'`);if(a.version!=="v1")throw new Error(`Invalid translation resource, bad version '${a.version}'`);return a}function ne(d){const a=d;if(a.$$type!=="@backstage/TranslationRef")throw new Error(`Invalid translation ref, bad type '${a.$$type}'`);if(a.version!=="v1")throw new Error(`Invalid translation ref, bad version '${a.version}'`);return a}var Se=(d,a,i)=>{if(!a.has(d))throw TypeError("Cannot "+i)},be=(d,a,i)=>(Se(d,a,"read from private field"),i?i.call(d):a.get(d)),De=(d,a,i)=>{if(a.has(d))throw TypeError("Cannot add the same private member more than once");a instanceof WeakSet?a.add(d):a.set(d,i)},at=(d,a,i,p)=>(Se(d,a,"write to private field"),p?p.call(d,i):a.set(d,i),i),Mt=(d,a,i)=>(Se(d,a,"access private method"),i),Tt,nn,En,on,Tn,zn,Cn,Xn,ga,xn,Jn,ua,Da,fa,ma,ya;function Pa(d){return Object.fromEntries(Object.entries(d).filter(a=>a[1]!==null))}class fr{constructor(a){this.onLoad=a,De(this,on),De(this,Tt,new Set),De(this,nn,new Map),De(this,En,new Map)}addTranslationResource(a){const i=B(a);for(const p of i.resources){const T=Mt(this,on,Tn).call(this,p.language,i.id);be(this,En).has(T)||be(this,En).set(T,p.loader)}}needsLoading(a,i){const p=Mt(this,on,Tn).call(this,a,i);return be(this,En).get(p)?!be(this,Tt).has(p):!1}async load(a,i){const p=Mt(this,on,Tn).call(this,a,i),T=be(this,En).get(p);if(!T||be(this,Tt).has(p))return;const se=be(this,nn).get(p);if(se){await se;return}const Me=T().then(Ue=>{this.onLoad({language:a,namespace:i,messages:Ue.messages}),be(this,Tt).add(p)},Ue=>{throw be(this,Tt).add(p),Ue});be(this,nn).set(p,Me),await Me}}Tt=new WeakMap,nn=new WeakMap,En=new WeakMap,on=new WeakSet,Tn=function(d,a){return`${d}/${a}`};const ro=class es{constructor(a,i,p){De(this,Jn),De(this,Da),De(this,ma),De(this,zn,void 0),De(this,Cn,void 0),De(this,Xn,void 0),De(this,ga,new Set),De(this,xn,new Set),at(this,zn,a),at(this,Cn,i),at(this,Xn,p)}static create(a){const{languages:i}=a.languageApi.getAvailableLanguages(),p=(0,X.Q_)({fallbackLng:f,supportedLngs:i,interpolation:{escapeValue:!1},ns:[],defaultNS:!1,fallbackNS:!1,initImmediate:!1});if(p.init(),!p.isInitialized)throw new Error("i18next was unexpectedly not initialized");const{language:T}=a.languageApi.getLanguage();T!==f&&p.changeLanguage(T);const se=new fr(vt=>{p.addResourceBundle(vt.language,vt.namespace,Pa(vt.messages),!1,!0)}),Me=(a==null?void 0:a.resources)||[];for(let vt=Me.length-1;vt>=0;vt--){const Bt=Me[vt];Bt.$$type==="@backstage/TranslationResource"?se.addTranslationResource(Bt):Bt.$$type==="@backstage/TranslationMessages"&&p.addResourceBundle(f,Bt.id,Pa(Bt.messages),!0,!1)}const Ue=new es(p,se,a.languageApi.getLanguage().language);return a.languageApi.language$().subscribe(({language:vt})=>{var Bt;Mt(Bt=Ue,Jn,ua).call(Bt,vt)}),Ue}getTranslation(a){const i=ne(a);return Mt(this,ma,ya).call(this,i),Mt(this,Da,fa).call(this,i)}translation$(a){const i=ne(a);return Mt(this,ma,ya).call(this,i),new(r())(p=>{let T={};const se=()=>{T={};const Ue=T;be(this,Cn).load(be(this,Xn),i.id).then(()=>{if(Ue===T){const vt=Mt(this,Da,fa).call(this,i);vt.ready&&p.next(vt)}},vt=>{Ue===T&&p.error(Array.isArray(vt)?vt[0]:vt)})},Me=()=>{const Ue=Mt(this,Da,fa).call(this,i);Ue.ready?p.next(Ue):se()};return be(this,Cn).needsLoading(be(this,Xn),i.id)&&se(),be(this,xn).add(Me),()=>{be(this,xn).delete(Me)}})}};zn=new WeakMap,Cn=new WeakMap,Xn=new WeakMap,ga=new WeakMap,xn=new WeakMap,Jn=new WeakSet,ua=function(d){be(this,Xn)!==d&&(at(this,Xn,d),be(this,zn).changeLanguage(d),be(this,xn).forEach(a=>a()))},Da=new WeakSet,fa=function(d){return be(this,Cn).needsLoading(be(this,Xn),d.id)?{ready:!1}:{ready:!0,t:be(this,zn).getFixedT(null,d.id)}},ma=new WeakSet,ya=function(d){if(be(this,ga).has(d.id))return;be(this,ga).add(d.id);const a=d.getDefaultMessages();be(this,zn).addResourceBundle(f,d.id,a,!0,!1);const i=d.getDefaultResource();i&&be(this,Cn).addTranslationResource(i)};let pi=ro;function Ko(d){const a=new URL(d);return a.protocol=document.location.protocol,a.hostname=document.location.hostname,a.port=document.location.port,a.toString().replace(/\/$/,"")}function zo(d){const a=w.fromConfigs(d),i=a.getOptionalString("app.baseUrl"),p=a.getOptionalString("backend.baseUrl");let T=d,se,Me;if(i&&p){const Ue=new URL(i).origin,vt=new URL(p).origin;if(Ue===vt){const Bt=Ko(p);p!==Bt&&(se=Bt)}}if(i){const Ue=Ko(i);i!==Ue&&(Me=Ue)}return(Me||se)&&(T=T.concat({data:{app:Me&&{baseUrl:Me},backend:se&&{baseUrl:se}},context:"relative-resolver"})),T}function jo(){var d;const a=document.querySelector('meta[name="backstage-app-mode"]');return((d=a==null?void 0:a.getAttribute("content"))!=null?d:"public")==="protected"}var Go=Object.defineProperty,Ho=(d,a,i)=>a in d?Go(d,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[a]=i,nr=(d,a,i)=>(Ho(d,typeof a!="symbol"?a+"":a,i),i),Po=(d,a,i)=>{if(!a.has(d))throw TypeError("Cannot "+i)},So=(d,a,i)=>(Po(d,a,"read from private field"),i?i.call(d):a.get(d)),Eo=(d,a,i)=>{if(a.has(d))throw TypeError("Cannot add the same private member more than once");a instanceof WeakSet?a.add(d):a.set(d,i)},Ro=(d,a,i,p)=>(Po(d,a,"write to private field"),p?p.call(d,i):a.set(d,i),i),vo;function Vo(d,a,i){var p;const T=!!d,se=(0,v.A)(d||(()=>Promise.resolve([])));let Me;if(T&&se.loading){const{Progress:Bt}=a;Me=s.createElement(Bt,null)}else if(se.error){const{BootErrorPage:Bt}=a;Me=s.createElement(Bt,{step:"load-config",error:se.error})}const{ThemeProvider:Ue=to}=a;return Me?{node:s.createElement(tt,{apis:Ir.with(q.n,i)},s.createElement(Ue,null,Me))}:{api:w.fromConfigs((p=se.value)!=null&&p.length?zo(se.value):[])}}class Yo{constructor(a){this.app=a}getPlugins(){return this.app.getPlugins()}getSystemIcon(a){return this.app.getSystemIcon(a)}getSystemIcons(){return this.app.getSystemIcons()}getComponents(){return this.app.getComponents()}}class Jo{constructor(a){nr(this,"apiHolder"),nr(this,"configApi"),nr(this,"apis"),nr(this,"icons"),nr(this,"plugins"),nr(this,"featureFlags"),nr(this,"components"),nr(this,"themes"),nr(this,"configLoader"),nr(this,"defaultApis"),nr(this,"bindRoutes"),nr(this,"appLanguageApi"),nr(this,"translationResources"),nr(this,"appIdentityProxy",new uo),nr(this,"apiFactoryRegistry"),Eo(this,vo,!1);var i,p,T,se,Me,Ue,vt,Bt,jn;this.apis=(i=a.apis)!=null?i:[],this.icons=a.icons,this.plugins=new Set((p=a.plugins)!=null?p:[]),this.featureFlags=(T=a.featureFlags)!=null?T:[],this.components=a.components,this.themes=a.themes,this.configLoader=(se=a.configLoader)!=null?se:po,this.defaultApis=(Me=a.defaultApis)!=null?Me:[],this.bindRoutes=a.bindRoutes,this.apiFactoryRegistry=new Et,this.appLanguageApi=x.createWithStorage({defaultLanguage:(Ue=a.__experimentalTranslations)==null?void 0:Ue.defaultLanguage,availableLanguages:(vt=a.__experimentalTranslations)==null?void 0:vt.availableLanguages}),this.translationResources=(jn=(Bt=a.__experimentalTranslations)==null?void 0:Bt.resources)!=null?jn:[]}getPlugins(){return Array.from(this.plugins)}getSystemIcon(a){return this.icons[a]}getSystemIcons(){return this.icons}getComponents(){return this.components}createRoot(a){const i=this.getProvider();return()=>s.createElement(i,null,a)}getProvider(){if(So(this,vo))throw new Error("app.getProvider() or app.createRoot() has already been called, and can only be called once");Ro(this,vo,!0);const a=new Yo(this);let i=!1;return({children:T})=>{const se=(0,s.useRef)(!0),Me=(0,s.useMemo)(()=>Aa.createWithStorage(this.themes),[]),{routing:Ue,featureFlags:vt,routeBindings:Bt}=(0,s.useMemo)(()=>{const ia=Sa();ia&&console.warn(`
DEPRECATION WARNING: React Router Beta is deprecated and support for it will be removed in a future release.
                     Please migrate to use React Router v6 stable.
                     See https://backstage.io/docs/tutorials/react-router-stable-migration
`);const Ma=Rn({root:T,discoverers:[aa,ra],collectors:{routing:ia?za:ha,collectedPlugins:va,featureFlags:Er}});return Ma.collectedPlugins.forEach(Ua=>this.plugins.add(Ua)),this.verifyPlugins(this.plugins),this.getApiHolder(),{...Ma,routeBindings:fo(this.bindRoutes)}},[T]);i||(i=!0,Pe(Ue.paths,Ue.parents),Be(Bt,this.plugins));const jn=Vo(this.configLoader,this.components,Me),Bn="api"in jn;if(Bn){const{api:ia}=jn;this.configApi=ia}if("node"in jn)return jn.node;if(Bn&&se.current){se.current=!1;const ia=this.getApiHolder().get(q.f);if(ia){for(const Fa of this.featureFlags)ia.registerFlag({...Fa,pluginId:""});for(const Fa of this.plugins.values())if("getFeatureFlags"in Fa)for(const mr of Fa.getFeatureFlags())ia.registerFlag({name:mr.name,pluginId:Fa.getId()});else for(const mr of Fa.output())mr.type==="feature-flag"&&ia.registerFlag({name:mr.name,pluginId:Fa.getId()});const Ma=ia.getRegisteredFlags(),Ua=new Set(Ma.map(Fa=>Fa.name));for(const Fa of vt)Ua.has(Fa)||ia.registerFlag({name:Fa,pluginId:""})}}const{ThemeProvider:yn=to,Progress:oa}=this.components,ta=this.getApiHolder();if(jo()){const ia=ta.get(q.r),Ma=ta.get(q.s),Ua=ta.get(q.q);if(!ia||!Ma||!Ua)throw new Error("App is running in protected mode but missing required APIs");this.appIdentityProxy.enableCookieAuth({errorApi:ia,fetchApi:Ma,discoveryApi:Ua})}return s.createElement(tt,{apis:ta},s.createElement(Ft,{appContext:a},s.createElement(yn,null,s.createElement($,{routePaths:Ue.paths,routeParents:Ue.parents,routeObjects:Ue.objects,routeBindings:Bt,basePath:ar(jn.api)},s.createElement(ur.Provider,{value:{routeObjects:Ue.objects,appIdentityProxy:this.appIdentityProxy}},s.createElement(s.Suspense,{fallback:s.createElement(oa,null)},T))))))}}getRouter(){return st}getApiHolder(){if(this.apiHolder){for(const a of this.plugins)for(const i of a.getApis())this.apiFactoryRegistry.get(i.api)||this.apiFactoryRegistry.register("default",i);return Ge.validateFactories(this.apiFactoryRegistry,this.apiFactoryRegistry.getAllApis()),this.apiHolder}this.apiFactoryRegistry.register("static",{api:q.n,deps:{},factory:()=>Aa.createWithStorage(this.themes)}),this.apiFactoryRegistry.register("static",{api:q.p,deps:{},factory:()=>{if(!this.configApi)throw new Error("Tried to access config API before config was loaded");return this.configApi}}),this.apiFactoryRegistry.register("static",{api:q.t,deps:{},factory:()=>this.appIdentityProxy}),this.apiFactoryRegistry.register("static",{api:F.pl,deps:{},factory:()=>this.appLanguageApi}),this.apiFactoryRegistry.register("default",{api:F.Jm,deps:{languageApi:F.pl},factory:({languageApi:a})=>pi.create({languageApi:a,resources:this.translationResources})}),this.apiFactoryRegistry.register("default",{api:q.f,deps:{},factory:()=>new He});for(const a of this.defaultApis)this.apiFactoryRegistry.register("default",a);for(const a of this.plugins)for(const i of a.getApis())if(!this.apiFactoryRegistry.register("default",i))throw new Error(`Plugin ${a.getId()} tried to register duplicate or forbidden API factory for ${i.api}`);for(const a of this.apis)if(!this.apiFactoryRegistry.register("app",a))throw new Error(`Duplicate or forbidden API factory for ${a.api} in app`);return Ge.validateFactories(this.apiFactoryRegistry,this.apiFactoryRegistry.getAllApis()),this.apiHolder=new Ge(this.apiFactoryRegistry),this.apiHolder}verifyPlugins(a){const i=new Set;for(const p of a){const T=p.getId();if(i.has(T))throw new Error(`Duplicate plugin found '${T}'`);i.add(T)}}}vo=new WeakMap;function Qo(d){return new Jo(d)}let wo=!1;const yo=d=>{const a=(0,Q.nm)(),{NotFoundErrorPage:i}=a.getComponents(),p=(0,s.useMemo)(()=>Sa(),[]),se=[...(0,Q.OJ)(d.children,Me=>Me.getElements().flatMap(Ue=>{var vt;let Bt=Ue.props.path;if(Bt==="")return[];Bt=(vt=Bt==null?void 0:Bt.replace(/\/\*$/,""))!=null?vt:"/";let jn=p?Ue:Ue.props.element;return!p&&!jn&&(jn=Ue,wo||(console.warn("DEPRECATION WARNING: All elements within <FlatRoutes> must be of type <Route> with an element prop. Existing usages of <Navigate key=[path] to=[to] /> should be replaced with <Route path=[path] element={<Navigate to=[to] />} />."),wo=!0)),[{path:Bt,element:jn,children:Ue.props.children?[{path:Bt==="/"?"/":"*",element:Ue.props.children}]:void 0}]}).sort((Ue,vt)=>vt.path.localeCompare(Ue.path)).map(Ue=>({...Ue,path:Ue.path==="/"?"/":`${Ue.path}/*`}))),{path:"*",element:s.createElement(i,null)}];return(0,M.Ye)(se)};(0,Q.h3)(yo,"core.type","FlatRoutes")},22968:(In,Ct,e)=>{"use strict";e.d(Ct,{Db:()=>bt,z9:()=>vr,eu:()=>ba,BI:()=>Oi,cy:()=>lc,fX:()=>ds,z7:()=>$e,UC:()=>Io,dv:()=>wi,lz:()=>ar,ly:()=>ce,wB:()=>Ar,DT:()=>st,Vf:()=>ms,pp:()=>E,M:()=>Gs,bJ:()=>Tr,Hk:()=>ps,Y9:()=>Uo,Pu:()=>Cr,ST:()=>Ml,of:()=>yi,nO:()=>fa,s3:()=>$l,f1:()=>Vi,N_:()=>Sa,Su:()=>er,rW:()=>at,h2:()=>Na,z3:()=>En,Mm:()=>Tn,YW:()=>$o,dT:()=>Nl,ke:()=>zn,_1:()=>po,kE:()=>Ai,l6:()=>So,Bx:()=>sl,Mj:()=>_l,Cn:()=>ti,uk:()=>Hi,GE:()=>ol,tW:()=>Pl,Ds:()=>bl,O6:()=>ji,hl:()=>ul,q4:()=>ac,c_:()=>vt,Xs:()=>se,So:()=>p,Ek:()=>Me,W$:()=>Ue,EV:()=>T,tA:()=>ss,md:()=>Ss,Yl:()=>ys,xO:()=>ic,XI:()=>Ri,ny:()=>hs,Bp:()=>Or,hC:()=>kr,HZ:()=>ni,FS:()=>Mo,Ut:()=>xo});var s=e(5124),l=e(11638),b=e(59294),A=e(29365),W=e(38097),r=e(72501),q=e(32881),Q=e(74219),t=e(14041);const pe=(0,b.h2)({id:"core-components",messages:{signIn:{title:"Sign In",loginFailed:"Login failed",customProvider:{title:"Custom User",subtitle:`Enter your own User ID and credentials.
 This selection will not be stored.`,userId:"User ID",tokenInvalid:"Token is not a valid OpenID Connect JWT Token",continue:"Continue",idToken:"ID Token (optional)"},guestProvider:{title:"Guest",subtitle:`Enter as a Guest User.
 You will not have a verified identity, meaning some features might be unavailable.`,enter:"Enter"}},skipToContent:"Skip to content",copyTextButton:{tooltipText:"Text copied to clipboard"},simpleStepper:{reset:"Reset",finish:"Finish",next:"Next",skip:"Skip",back:"Back"},errorPage:{subtitle:"ERROR {{status}}: {{statusMessage}}",title:"Looks like someone dropped the mic!",goBack:"Go back",showMoreDetails:"Show more details",showLessDetails:"Show less details"},emptyState:{missingAnnotation:{title:"Missing Annotation",actionTitle:"Add the annotation to your component YAML as shown in the highlighted example below:",readMore:"Read more"}},supportConfig:{default:{title:"Support Not Configured",linkTitle:"Add `app.support` config key"}},errorBoundary:{title:"Please contact {{slackChannel}} for help."},oauthRequestDialog:{title:"Login Required",authRedirectTitle:"This will trigger a http redirect to OAuth Login.",login:"Log in",rejectAll:"Reject All"},supportButton:{title:"Support",close:"Close"},table:{filter:{title:"Filters",clearAll:"Clear all"}},alertDisplay:{message_one:"({{ count }} older message)",message_other:"({{ count }} older messages)"},autoLogout:{stillTherePrompt:{title:"Logging out due to inactivity",buttonText:"Yes! Don't log me out"}},proxiedSignInPage:{title:"You do not appear to be signed in. Please try reloading the browser page."}}});var _=e(18846),de=e(64947),me=e(76891),G=e(93453),xe=e(46805),ye=e(61477),ut=e(19087),z=e(58837),ee=e(54917),D=e(268),w=e(7031),M=e(99703),y=e(60882),v=e(50868),F=e(53373),ae=e.n(F),Fe=e(49203),Ae=e(45250),X=e(18690),N=e(73657),H=e(21613),oe=e(77125),re=e(20279),_e=e(40697),tt=e(25577),Ve=e(71677),Ze=e(99594),nt=e(36338),Ge=e(5893),Je=e(25534),Re=e(1517),Le=e(67566),lt=e(41809),Et=e(67991),wt=e.n(Et),Qt=e(12784),yt=e.n(Qt),ue=e(22249),gt=e(1121),xt=e(24260),ht=e(20644),Ut=e.n(ht),S=e(11746),P=e(42899);const j=e.p+"static/missingAnnotation.67f79e98..svg",Z=e.p+"static/noInformation.4b426325..svg",Ie=e.p+"static/createComponent.975d1e1e..svg",ze=e.p+"static/noBuild.1715fa71..svg";var dt=e(58007),Qe=e(8109),et=e(5951),$t=e(8973),tn=e(29655),It=e(91567),pt=e(9181),qt=e(6924),sn=e(60767),an=e(28138),Vt=e(37197),Ce=e(43144),Ye=e(86613),Kt=e(68887),jt=e(63798),Wt=e(91467),ft=e(3399),Ln=e(62220),dn=e.n(Ln),Xt=e(85058),An=e(76842),Xe=e(88951),mt=e(40703),Dt=e(59469),rt=e(48653),qe=e(45685),V=e(52235),he=e(90147),Ee=e(69076),Pt=e(67720),Nt=e(95061),ln=e(41857),bn=e(48543),Dn=e(26343),Un=e(81215),Vn=e(10437),Pn=e(95479),Yn=e.n(Pn),da=e(61009),ct=e(13677),m=e(54801),R=e(9719),K=e(46423),le=e(28233),I=e(55197),U=e(45810),Y=e.n(U),we=e(27799),Oe=e(93285),ot=e(38605),Ot=e(31653),en=e(25301),Zt=e(83313),pn=e(89019),mn=e(62461),kt=e(64704),Sn=e(6774),un=e(75625),$n=e(65859),qn=e(5416),na=e(33494),kn=e(80113),wn=e(26229),gn=e(46802),Jt=e(78467),vn=e(16975);const _n=e.p+"static/mic-drop.fe3ef4d0..svg";var Aa=e(45634),Oa=e(1125),J=e(73845),ge=e(27326),ke=e(97388),it=e(13085),St=e(79065),At=e(55704),cn=e(94509),hn=e(16249),ie=e(62248),Te=e(46195),We=e(48472),Ne=e(80824),He=e(51253),zt=e(3514),_t=e.n(zt);function bt(n){const[o,u]=(0,t.useState)([]),h=(0,s.u)(s.l),{t:C}=(0,b.ie)(pe),{anchorOrigin:L={vertical:"top",horizontal:"center"},transientTimeoutMs:k}=n,te=k!=null?k:5e3;(0,t.useEffect)(()=>{const Ke=h.alert$().subscribe(je=>u(Lt=>Lt.concat(je)));return()=>{Ke.unsubscribe()}},[h]);const[fe]=o;if((0,t.useEffect)(()=>{if(fe&&fe.display==="transient"){const Ke=setTimeout(()=>{u(je=>{const Lt=je.filter(Ht=>Ht!==fe);return Lt.length===je.length?je:Lt})},te);return()=>clearTimeout(Ke)}},[fe,te]),o.length===0)return null;const ve=()=>{u(Ke=>Ke.filter(je=>je!==fe))};return t.createElement(W.A,{open:!0,anchorOrigin:L},t.createElement(Q.A,{action:t.createElement(A.A,{color:"inherit",size:"small",onClick:ve,"data-testid":"error-button-close"},t.createElement(q.A,null)),severity:fe.severity},t.createElement(r.A,{component:"span"},String(fe.message),o.length>1&&t.createElement("em",null,C("alertDisplay.message",{count:o.length-1})))))}const Gt="@backstage/autologout:lastSeenOnline",fn=({enableEffect:n,autologoutIsEnabled:o,idleTimeoutSeconds:u,lastSeenOnlineStore:h,identityApi:C})=>{useEffect(()=>{if(o&&n){const L=h.get();if(L){const te=Math.ceil(new Date().getTime()/1e3),fe=Math.ceil(L.getTime()/1e3);te-fe>u&&C.signOut()}h.save(new Date)}else h.delete()},[o,n,C,u,h])},rn=n=>{const{idleTimer:o,setOpen:u,open:h,promptTimeoutMillis:C,remainingTime:L,setRemainingTime:k}=n,{t:te}=useTranslationRef(coreComponentsTranslationRef);useEffect(()=>{const je=setInterval(()=>{k(Math.ceil(o.getRemainingTime()))},500);return()=>{clearInterval(je)}},[o,k]);const fe=()=>{u(!1),o.activate()},Ke=Math.max(L-C/1e3,0)>1?"seconds":"second";return React.createElement(Dialog,{open:h,"data-testid":"inactivity-prompt-dialog"},React.createElement(DialogTitle,null,te("autoLogout.stillTherePrompt.title")),React.createElement(DialogContent,null,React.createElement(DialogContentText,null,"You are about to be disconnected in"," ",React.createElement("b",null,Math.ceil(L/1e3)," ",Ke),". Are you still there?")),React.createElement(DialogActions,null,React.createElement(Button$1,{onClick:fe,color:"secondary",variant:"contained",size:"small"},te("autoLogout.stillTherePrompt.buttonText"))))};class Nn{constructor(o){this.key=o}save(o){localStorage.setItem(this.key,o.toJSON())}delete(){localStorage.removeItem(this.key)}get(){const o=localStorage.getItem(this.key);return o!==null?new Date(Date.parse(o)):null}}const Mn=({idleTimeoutMinutes:n,events:o,useWorkerTimers:u,logoutIfDisconnected:h,promptBeforeIdleSeconds:C,promptOpen:L,setPromptOpen:k,remainingTimeCountdown:te,setRemainingTimeCountdown:fe,identityApi:ve,lastSeenOnlineStore:Ke})=>{const je=C*1e3,Lt=je>0,Ht=async()=>{k(!0),fe(je)},Yt=()=>{k(!1),fe(0),ve.signOut()},Qn=()=>{k(!1),fe(0)},Hn=(Qa,lr)=>{Ke.save(new Date)},pa=useIdleTimer({timeout:n*60*1e3,events:o,crossTab:!0,name:"autologout-timer",timers:u?workerTimers:void 0,onIdle:Yt,onActive:Lt?Qn:void 0,onAction:h?Hn:void 0,onPrompt:Lt?Ht:void 0,promptBeforeIdle:Lt?je:void 0,syncTimers:1e3});return React.createElement(React.Fragment,null,Lt&&React.createElement(rn,{idleTimer:pa,open:L,setOpen:k,remainingTime:te,setRemainingTime:fe,promptTimeoutMillis:je}))},Gn={enabled:!0,idleTimeoutMinutes:.5,promptBeforeIdleSeconds:10,useWorkerTimers:!0,logoutIfDisconnected:!0},la=null,Fn=(n,o)=>{var u,h,C,L,k,te,fe,ve,Ke,je;return{enabled:(h=(u=n.getOptionalBoolean("auth.autologout.enabled"))!=null?u:o.enabled)!=null?h:Gn.enabled,idleTimeoutMinutes:(L=(C=n.getOptionalNumber("auth.autologout.idleTimeoutMinutes"))!=null?C:o.idleTimeoutMinutes)!=null?L:Gn.idleTimeoutMinutes,promptBeforeIdleSeconds:(te=(k=n.getOptionalNumber("auth.autologout.promptBeforeIdleSeconds"))!=null?k:o.promptBeforeIdleSeconds)!=null?te:Gn.promptBeforeIdleSeconds,useWorkerTimers:(ve=(fe=n.getOptionalBoolean("auth.autologout.useWorkerTimers"))!=null?fe:o.useWorkerTimers)!=null?ve:Gn.useWorkerTimers,logoutIfDisconnected:(je=(Ke=n.getOptionalBoolean("auth.autologout.logoutIfDisconnected"))!=null?Ke:o.logoutIfDisconnected)!=null?je:Gn.logoutIfDisconnected}},ea=n=>{const o=useApi(identityApiRef),u=useApi(configApiRef),[h,C]=useState(!1);useEffect(()=>{async function Qn(Hn){(await Hn.getCredentials()).token?C(!0):C(!1)}Qn(o)},[o]);const{enabled:L,idleTimeoutMinutes:k,promptBeforeIdleSeconds:te,logoutIfDisconnected:fe,useWorkerTimers:ve}=useMemo(()=>Fn(u,n),[u,n]);useEffect(()=>{if(k<.5)throw new Error("\u274C idleTimeoutMinutes property should be >= 0.5 minutes (30 seconds).");if(te<0)throw new Error("\u274C promptBeforeIdleSeconds property should be >= 0 seconds. Set to 0 to disable the prompt.");if(k*60<=te)throw new Error("\u274C promptBeforeIdleSeconds should be smaller than idleTimeoutMinutes")},[k,te]);const Ke=useMemo(()=>new Nn(Gt),[]),[je,Lt]=useState(!1),[Ht,Yt]=useState(0);return fn({enableEffect:fe,autologoutIsEnabled:L&&h,idleTimeoutSeconds:k*60,lastSeenOnlineStore:Ke,identityApi:o}),!L||!h?null:React.createElement(Mn,{idleTimeoutMinutes:k,promptBeforeIdleSeconds:te,useWorkerTimers:ve,events:la,logoutIfDisconnected:fe,promptOpen:je,setPromptOpen:Lt,remainingTimeCountdown:Ht,setRemainingTimeCountdown:Yt,identityApi:o,lastSeenOnlineStore:Ke})};function ca(n){let o=0;for(let h=0;h<n.length;h++)o=n.charCodeAt(h)+((o<<5)-o);let u="#";for(let h=0;h<3;h++){const C=o>>h*8&255;u+=`00${C.toString(16)}`.slice(-2)}return u}function sa(n){var o;const u=n.trim().split(" "),h=(o=u[0])!=null?o:"",C=u.length>1?u[u.length-1]:"";return h&&C?`${h.charAt(0)}${C.charAt(0)}`:h.charAt(0)}const Ea=(0,z.A)(n=>({avatar:{width:"4rem",height:"4rem",color:n.palette.common.white,backgroundColor:o=>o.backgroundColor},avatarText:{fontWeight:n.typography.fontWeightBold,letterSpacing:"1px",textTransform:"uppercase"}}),{name:"BackstageAvatar"});function ba(n){var o,u;const{displayName:h,picture:C,customStyles:L}=n,k={...L},te={fontFamily:k.fontFamily,fontSize:k.fontSize,fontWeight:k.fontWeight},fe=Ea(C?{}:{backgroundColor:ca(h||"")}),ve=ae()((o=n.classes)==null?void 0:o.avatar,fe.avatar),Ke=ae()((u=n.classes)==null?void 0:u.avatarText,fe.avatarText);return t.createElement(ut.A,{alt:h,src:C,className:ve,style:k},h&&t.createElement(r.A,{variant:"h6",component:"span",className:Ke,style:te},sa(h)))}function Ra(){const[n]=(0,X.AV)(t.createElement(X.qh,{index:!0,element:t.createElement("div",null)}));return!n.index}const Ta=(0,z.A)({visuallyHidden:{clip:"rect(0 0 0 0)",clipPath:"inset(50%)",overflow:"hidden",position:"absolute",userSelect:"none",whiteSpace:"nowrap",height:1,width:1},externalLink:{position:"relative"}},{name:"Link"}),Ha=n=>/^([a-z+.-]+):/.test(n),Ja=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*\:/i,Za=window.open;if(Za&&!Za.__backstage){const n=function(...u){const h=String(u[0]);if(Ja.test(h))throw new Error("Rejected window.open() with a javascript: URL as a security precaution");return Za.apply(this,u)};n.__backstage=!0,window.open=n}const hr=()=>{try{return(0,s.u)(s.p).getOptionalString("app.baseUrl")}catch{return}},gr=()=>{var n;const o="http://sample.dev",u=(n=hr())!=null?n:"/",{pathname:h}=new URL(u,o);return(0,Ae.trimEnd)(h,"/")},or=n=>{let o=String(n);const u=gr(),h=Ha(o),C=o.startsWith(u);return!h&&!C&&(o=u.concat(o)),o},ur=n=>{var o;return n instanceof Array?n.map(ur).join(" ").trim():typeof n=="object"&&n?ur((o=n==null?void 0:n.props)==null?void 0:o.children):["string","number"].includes(typeof n)?String(n):""},Sa=t.forwardRef(({onClick:n,noTrack:o,...u},h)=>{const C=Ta(),L=(0,l.st)(),k=Ra()?or(u.to):u.to,te=ur(u.children)||k,fe=Ha(k),ve=fe&&!!/^https?:/.exec(k);if(Ja.test(k))throw new Error("Link component rejected javascript: URL as a security precaution");const Ke=je=>{n==null||n(je),o||L.captureEvent("click",te,{attributes:{to:k}})};return fe?t.createElement(Fe.A,{...ve?{target:"_blank",rel:"noopener"}:{},...u,...u["aria-label"]?{"aria-label":`${u["aria-label"]}, Opens in a new window`}:{},ref:h,href:k,onClick:Ke,className:ae()(C.externalLink,u.className)},u.children,t.createElement(r.A,{component:"span",className:C.visuallyHidden},", Opens in a new window")):t.createElement(Fe.A,{...u,ref:h,component:N.N_,to:k,onClick:Ke})}),qa=t.forwardRef((n,o)=>t.createElement(Sa,{ref:o,...n,color:"initial"})),er=t.forwardRef((n,o)=>t.createElement(de.A,{ref:o,component:qa,...n})),ir=null;function ar(n){const{t:o}=(0,b.ie)(pe),{text:u,tooltipDelay:h=1e3,tooltipText:C=o("copyTextButton.tooltipText"),"aria-label":L="Copy text"}=n,k=(0,s.u)(s.r),[te,fe]=(0,t.useState)(!1),[{error:ve},Ke]=(0,nt.A)();(0,t.useEffect)(()=>{ve&&k.post(ve)},[ve,k]);const je=Lt=>{Lt.stopPropagation(),fe(!0),Ke(u)};return t.createElement(t.Fragment,null,t.createElement(Ve.Ay,{id:"copy-test-tooltip",title:C,placement:"top",leaveDelay:h,onClose:()=>fe(!1),open:te},t.createElement(A.A,{onClick:je,"aria-label":L},t.createElement(Ze.A,null))))}function $e(n){const{text:o,language:u,showLineNumbers:h=!1,highlightedNumbers:C,customStyle:L,showCopyCodeButton:k=!1}=n,te=(0,ee.A)(),fe=te.palette.type==="dark"?_e.A:tt.A,ve=te.palette.type==="dark"?"#256bf3":"#e6ffed";return t.createElement(oe.A,{position:"relative"},t.createElement(re.A,{customStyle:L,language:u,style:fe,showLineNumbers:h,wrapLines:!0,lineNumberStyle:{color:te.palette.textVerySubtle},lineProps:Ke=>C!=null&&C.includes(Ke)?{style:{backgroundColor:ve}}:{}},o),k&&t.createElement(oe.A,{position:"absolute",top:0,right:0},t.createElement(ar,{text:o})))}function ce(n){const{title:o,to:u}=n,h=(0,Ge.A)(C=>C.breakpoints.down("xs"));return u?h?t.createElement(A.A,{component:N.N_,color:"primary",title:o,size:"small",to:u},t.createElement(Je.A,null)):t.createElement(de.A,{component:N.N_,variant:"contained",color:"primary",to:u},o):null}var st;(n=>{(o=>{o.TOP_BOTTOM="TB",o.BOTTOM_TOP="BT",o.LEFT_RIGHT="LR",o.RIGHT_LEFT="RL"})(n.Direction||(n.Direction={})),(o=>{o.UP_LEFT="UL",o.UP_RIGHT="UR",o.DOWN_LEFT="DL",o.DOWN_RIGHT="DR"})(n.Alignment||(n.Alignment={})),(o=>{o.NETWORK_SIMPLEX="network-simplex",o.TIGHT_TREE="tight-tree",o.LONGEST_PATH="longest-path"})(n.Ranker||(n.Ranker={})),(o=>{o.LEFT="l",o.RIGHT="r",o.CENTER="c"})(n.LabelPosition||(n.LabelPosition={}))})(st||(st={}));const Rn=(0,z.A)(n=>({node:{fill:n.palette.primary.light,stroke:n.palette.primary.light},text:{fill:n.palette.primary.contrastText}}),{name:"BackstageDependencyGraphDefaultNode"});function Kn({node:{id:n}}){const o=Rn(),[u,h]=t.useState(0),[C,L]=t.useState(0),k=t.useRef(null);t.useLayoutEffect(()=>{if(k.current){let{height:Ke,width:je}=k.current.getBBox();Ke=Math.round(Ke),je=Math.round(je),(Ke!==C||je!==u)&&(h(je),L(Ke))}},[u,C]);const te=10,fe=u+te*2,ve=C+te*2;return t.createElement("g",null,t.createElement("rect",{className:o.node,width:fe,height:ve,rx:10}),t.createElement("text",{ref:k,className:o.text,y:ve/2,x:fe/2,textAnchor:"middle",alignmentBaseline:"middle"},n))}const aa="arrow-marker",ra="node",va="edge",_a="label",wa=(0,ue.A)(n=>({node:{transition:`${n.transitions.duration.shortest}ms`}}),{name:"BackstageDependencyGraphNode"}),Ia=n=>t.createElement(Kn,{...n});function Ka({render:n=Ia,setNode:o,node:u}){const{width:h,height:C,x:L=0,y:k=0}=u,te=u,fe=wa(),ve=t.useRef(null);return t.useLayoutEffect(()=>{if(ve.current){let{height:Ke,width:je}=ve.current.getBBox();Ke=Math.round(Ke),je=Math.round(je),(Ke!==C||je!==h)&&o(u.id,{...u,height:Ke,width:je})}},[u,h,C,o]),t.createElement("g",{ref:ve,"data-testid":ra,className:fe.node,transform:`translate(${L-h/2},${k-C/2})`},n({node:te}))}const dr=(0,ue.A)(n=>({text:{fill:n.palette.textContrast}}),{name:"BackstageDependencyGraphDefaultLabel"});function ha({edge:{label:n}}){const o=dr();return t.createElement("text",{className:o.text,textAnchor:"middle"},n)}const za=(0,ue.A)(n=>({path:{strokeWidth:1.3,stroke:n.palette.textSubtle,fill:"none",transition:`${n.transitions.duration.shortest}ms`},label:{transition:`${n.transitions.duration.shortest}ms`}}),{name:"BackstageDependencyGraphEdge"}),Er=n=>t.createElement(ha,{...n});function sr({render:n=Er,setEdge:o,id:u,edge:h,curve:C,showArrowHeads:L}){const{x:k=0,y:te=0,width:fe,height:ve,points:Ke}=h,je=h,Lt=za(),Ht=t.useRef(null);t.useLayoutEffect(()=>{if(Ht.current){let{height:Hn,width:pa}=Ht.current.getBBox();Hn=Math.round(Hn),pa=Math.round(pa),(Hn!==ve||pa!==fe)&&o(u,{...h,height:Hn,width:pa})}},[h,ve,fe,o,u]);let Yt="";const Qn=t.useMemo(()=>gt.A().x(Hn=>Hn.x).y(Hn=>Hn.y).curve(xt[C]),[C]);if(Ke){const Hn=Ke.filter(pa=>Ut()(pa.x)&&Ut()(pa.y));Yt=Qn(Hn)||""}return t.createElement(t.Fragment,null,Yt&&t.createElement("path",{"data-testid":va,className:Lt.path,markerEnd:L?`url(#${aa})`:void 0,d:Yt}),je.label?t.createElement("g",{ref:Ht,"data-testid":_a,className:Lt.label,transform:`translate(${k},${te})`},n({edge:je})):null)}const $a="workspace";function Ar(n){var o,u;const{edges:h,nodes:C,renderNode:L,direction:k=st.Direction.TOP_BOTTOM,align:te,nodeMargin:fe=50,edgeMargin:ve=10,rankMargin:Ke=50,paddingX:je=0,paddingY:Lt=0,acyclicer:Ht,ranker:Yt=st.Ranker.NETWORK_SIMPLEX,labelPosition:Qn=st.LabelPosition.RIGHT,labelOffset:Hn=10,edgeRanks:pa=1,edgeWeight:Qa=1,renderLabel:lr,defs:Zn,zoom:Wa="enabled",curve:Xa="curveMonotoneX",showArrowHeads:cr=!1,fit:xr="grow",...so}=n,Nr=(0,lt.A)(),[Gr,ci]=t.useState(100),[Xr,Fo]=t.useState(100),xa=t.useRef(new(wt()).graphlib.Graph),[pr,Ao]=t.useState(((o=xa.current.graph())==null?void 0:o.width)||0),[Fr,bo]=t.useState(((u=xa.current.graph())==null?void 0:u.height)||0),[Hr,Vr]=t.useState([]),[ui,cc]=t.useState([]),_o=Math.max(pr,Gr),lo=Math.max(Fr,Xr),uc=Math.min(Fr,Xr),dc=xr==="grow"?lo:uc,mc=t.useMemo(()=>yt()(Ya=>{if(!Ya)return;const rr=Le.A(Ya),Ga=Le.A(Ya.getElementById($a));function Pr(){rr.call(Re.s_().scaleExtent([1,1/0]).on("zoom",Wr=>{Wr.transform.x=Math.min(0,Math.max(Wr.transform.x,_o-_o*Wr.transform.k)),Wr.transform.y=Math.min(0,Math.max(Wr.transform.y,lo-lo*Wr.transform.k)),Ga.attr("transform",Wr.transform)}))}Wa==="enabled"?Pr():Wa==="enable-on-click"&&rr.on("click",()=>Pr());const{width:Sr,height:Wo}=Ya.getBoundingClientRect();Gr!==Sr&&ci(Sr),Xr!==Wo&&Fo(Wo)},100),[Xr,Gr,_o,lo,Wa]),qi=t.useCallback(()=>{const Ya=xa.current.nodes(),rr=xa.current.edges();Ya.forEach(Ga=>{C.some(Sr=>Sr.id===Ga)||xa.current.removeNode(Ga)}),rr.forEach(Ga=>{h.some(Sr=>Sr.from===Ga.v&&Sr.to===Ga.w)||xa.current.removeEdge(Ga.v,Ga.w)}),C.forEach(Ga=>{const Pr=xa.current.nodes().find(Sr=>Ga.id===Sr);if(Pr&&xa.current.node(Pr)){const{width:Sr,height:Wo,x:Wr,y:gc}=xa.current.node(Pr);xa.current.setNode(Pr,{...Ga,width:Sr,height:Wo,x:Wr,y:gc})}else xa.current.setNode(Ga.id,{...Ga,width:0,height:0})}),h.forEach(Ga=>{xa.current.setEdge(Ga.from,Ga.to,{...Ga,label:Ga.label,width:0,height:0,labelpos:Qn,labeloffset:Hn,weight:Qa,minlen:pa})})},[h,C,Qn,Hn,Qa,pa]),Co=t.useMemo(()=>yt()(()=>{wt().layout(xa.current);const{height:Ya,width:rr}=xa.current.graph(),Ga=Math.max(0,Ya||0),Pr=Math.max(0,rr||0);Ao(Pr),bo(Ga),Vr(xa.current.nodes()),cc(xa.current.edges())},250,{leading:!0}),[]);t.useEffect(()=>(xa.current.setGraph({rankdir:k,align:te,nodesep:fe,edgesep:ve,ranksep:Ke,marginx:je,marginy:Lt,acyclicer:Ht,ranker:Yt}),qi(),Co(),Co.cancel),[Ht,te,k,ve,je,Lt,fe,Ke,Yt,qi,Co]);function pc(Ya,rr){return xa.current.setNode(Ya,rr),Co(),xa.current}function hc(Ya,rr){return xa.current.setEdge(Ya,rr),Co(),xa.current}return t.createElement("svg",{ref:mc,...so,width:"100%",height:dc,viewBox:`0 0 ${_o} ${lo}`},t.createElement("defs",null,t.createElement("marker",{id:aa,viewBox:"0 0 24 24",markerWidth:"14",markerHeight:"14",refX:"16",refY:"12",orient:"auto",markerUnits:"strokeWidth"},t.createElement("path",{fill:Nr.palette.textSubtle,d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"})),Zn),t.createElement("g",{id:$a},t.createElement("svg",{width:pr,height:Fr,y:lo/2-Fr/2,x:_o/2-pr/2,viewBox:`0 0 ${pr} ${Fr}`},ui.map(Ya=>{const rr=xa.current.edge(Ya);return rr?t.createElement(sr,{key:`${Ya.v}-${Ya.w}`,id:Ya,setEdge:hc,render:lr,edge:rr,curve:Xa,showArrowHeads:cr}):null}),Hr.map(Ya=>{const rr=xa.current.node(Ya);return rr?t.createElement(Ka,{key:Ya,setNode:pc,render:L,node:rr}):null}))))}const Zr=(0,z.A)(n=>{var o,u;return{root:{padding:n.spacing(0),marginBottom:n.spacing(0),marginTop:n.spacing(0),display:"flex",flexFlow:"row nowrap"},topPosition:{position:"relative",marginBottom:n.spacing(6),marginTop:-n.spacing(3),zIndex:"unset"},icon:{fontSize:n.typography.h6.fontSize},content:{width:"100%",maxWidth:"inherit",flexWrap:"nowrap",color:n.palette.banner.text},message:{display:"flex",alignItems:"center","& a":{color:n.palette.banner.link}},button:{color:(o=n.palette.banner.closeButtonColor)!=null?o:"inherit"},info:{backgroundColor:n.palette.banner.info},error:{backgroundColor:n.palette.banner.error},warning:{backgroundColor:(u=n.palette.banner.warning)!=null?u:n.palette.banner.error}}},{name:"BackstageDismissableBanner"}),Lr=n=>{var o;const{variant:u,message:h,id:C,fixed:L=!1}=n,k=Zr(),fe=useApi(storageApiRef).forBucket("notifications"),ve=(o=fe.snapshot("dismissedBanners").value)!=null?o:[],[Ke,je]=useState(new Set(ve)),Lt=useObservable(fe.observe$("dismissedBanners"));useEffect(()=>{var Yt;if(Lt!=null&&Lt.value){const Qn=(Yt=Lt==null?void 0:Lt.value)!=null?Yt:[];je(new Set(Qn))}},[Lt==null?void 0:Lt.value]);const Ht=()=>{fe.set("dismissedBanners",[...Ke,C])};return React.createElement(Snackbar,{anchorOrigin:L?{vertical:"bottom",horizontal:"center"}:{vertical:"top",horizontal:"center"},open:!Ke.has(C),classes:{root:classNames(k.root,!L&&k.topPosition)}},React.createElement(SnackbarContent,{classes:{root:classNames(k.content,k[u]),message:k.message},message:h,action:[React.createElement(IconButton,{key:"dismiss",title:"Permanently dismiss this message",className:k.button,onClick:Ht},React.createElement(CloseIcon,{className:k.icon}))]}))},Br=(0,z.A)({generalImg:{width:"95%",zIndex:2,position:"relative",left:"50%",top:"50%",transform:"translate(-50%, 15%)"}},{name:"BackstageEmptyStateImage"}),g=({missing:n})=>{const o=Br();switch(n){case"field":return t.createElement("img",{src:j,className:o.generalImg,alt:"annotation is missing"});case"info":return t.createElement("img",{src:Z,alt:"no Information",className:o.generalImg});case"content":return t.createElement("img",{src:Ie,alt:"create Component",className:o.generalImg});case"data":return t.createElement("img",{src:ze,alt:"no Build",className:o.generalImg});default:return null}},c=(0,z.A)(n=>({root:{backgroundColor:n.palette.background.default,padding:n.spacing(2,0,0,0)},action:{marginTop:n.spacing(2)},imageContainer:{position:"relative"}}),{name:"BackstageEmptyState"});function E(n){const{title:o,description:u,missing:h,action:C}=n,L=c();return t.createElement(P.A,{container:!0,direction:"row",justifyContent:"space-around",alignItems:"flex-start",className:L.root,spacing:2},t.createElement(P.A,{item:!0,xs:12,md:6},t.createElement(P.A,{container:!0,direction:"column"},t.createElement(P.A,{item:!0,xs:!0},t.createElement(r.A,{variant:"h5"},o)),t.createElement(P.A,{item:!0,xs:!0},t.createElement(r.A,{variant:"body1"},u)),t.createElement(P.A,{item:!0,xs:!0,className:L.action},C))),t.createElement(P.A,{item:!0,xs:12,md:6,className:L.imageContainer},typeof h=="string"?t.createElement(g,{missing:h}):h.customImage))}const $=`apiVersion: backstage.io/v1alpha1
kind: Component
metadata:
  name: example
  description: example.com
  annotations:
    ANNOTATION: value
spec:
  type: website
  lifecycle: production
  owner: user:guest`,Pe=/^.*ANNOTATION.*$/m,Be=$.match(Pe)[0],Rt=$.split(`
`).findIndex(n=>Pe.test(n)),Ft=(0,z.A)(n=>({code:{borderRadius:6,margin:n.spacing(2,0),background:n.palette.type==="dark"?"#444":n.palette.common.white}}),{name:"BackstageMissingAnnotationEmptyState"});function On(n){return Array.from(Array(n+1).keys(),o=>o+Rt)}function Wn(n){const o=n.map(u=>Be.replace("ANNOTATION",u)).join(`
`);return $.replace(Be,o)}function La(n){const o=n.length<=1;return React.createElement(React.Fragment,null,"The ",o?"annotation":"annotations"," ",n.map(u=>React.createElement("code",null,u)).reduce((u,h)=>React.createElement(React.Fragment,null,u,", ",h))," ",o?"is":"are"," missing. You need to add the"," ",o?"annotation":"annotations"," to your component if you want to enable this tool.")}function ka(n){const{annotation:o,readMoreUrl:u}=n,h=Array.isArray(o)?o:[o],C=u||"https://backstage.io/docs/features/software-catalog/well-known-annotations",L=Ft(),{t:k}=useTranslationRef(coreComponentsTranslationRef);return React.createElement(E,{missing:"field",title:k("emptyState.missingAnnotation.title"),description:La(h),action:React.createElement(React.Fragment,null,React.createElement(Typography,{variant:"body1"},k("emptyState.missingAnnotation.actionTitle")),React.createElement(Box,{className:L.code},React.createElement($e,{text:Wn(h),language:"yaml",showLineNumbers:!0,highlightedNumbers:On(h.length),customStyle:{background:"inherit",fontSize:"115%"}})),React.createElement(Button$1,{color:"primary",component:Sa,to:C},k("emptyState.missingAnnotation.readMore")))})}const Ba=(0,z.A)(n=>({markdown:{"& table":{borderCollapse:"collapse",border:`1px solid ${n.palette.border}`},"& th, & td":{border:`1px solid ${n.palette.border}`,padding:n.spacing(1)},"& td":{wordBreak:"break-word",overflow:"hidden",verticalAlign:"middle",lineHeight:"1",margin:0,padding:n.spacing(3,2,3,2.5),borderBottom:0},"& th":{backgroundColor:n.palette.background.paper},"& tr":{backgroundColor:n.palette.background.paper},"& tr:nth-child(odd)":{backgroundColor:n.palette.background.default},"& a":{color:n.palette.link},"& img":{maxWidth:"100%"}}}),{name:"BackstageMarkdownContent"}),Ca=(n,o)=>o?typeof o=="string"?n+o:t.Children.toArray(o.props.children).reduce(Ca,n):n,ja=({level:n,children:o})=>{const C=t.Children.toArray(o).reduce(Ca,"").toLocaleLowerCase("en-US").replace(/\W/g,"-");return t.createElement(`h${n}`,{id:C},o)},tr={code:({inline:n,className:o,children:u,...h})=>{const C=String(u).replace(/\n+$/,""),L=/language-(\w+)/.exec(o||"");return!n&&L?t.createElement($e,{language:L[1],text:C}):t.createElement("code",{className:o,...h},u)},h1:ja,h2:ja,h3:ja,h4:ja,h5:ja,h6:ja};function Na(n){const{content:o,dialect:u="gfm",linkTarget:h,transformLinkUri:C,transformImageUri:L,className:k}=n,te=Ba();return t.createElement(sn.$,{remarkPlugins:u==="gfm"?[an.A]:[],className:`${te.markdown} ${k!=null?k:""}`.trim(),children:o,components:tr,linkTarget:h,transformLinkUri:C,transformImageUri:L})}const Va=(n,o)=>(o.palette.type==="light"?D.e$:D.a)(o.palette[n].light,.6),wr=(n,o)=>(o.palette.type==="light"?D.a:D.e$)(o.palette[n].light,.9),Yr=(0,z.A)(n=>({root:{marginRight:n.spacing(1),fill:({severity:o})=>Va(o,n)}})),Jr=({severity:n})=>{const o=Yr({severity:n});return t.createElement(pt.A,{classes:o})},qr=({severity:n})=>{const o=Yr({severity:n});return t.createElement(qt.A,{classes:o})},Ur=(0,z.A)(n=>({panel:{backgroundColor:({severity:o})=>wr(o,n),color:({severity:o})=>Va(o,n),verticalAlign:"middle"},summary:{display:"flex",flexDirection:"row"},summaryText:{color:({severity:o})=>Va(o,n),fontWeight:n.typography.fontWeightBold},markdownContent:{"& p":{display:"inline"}},message:{width:"100%",display:"block",color:({severity:o})=>Va(o,n),backgroundColor:({severity:o})=>wr(o,n)},details:{width:"100%",display:"block",color:n.palette.textContrast,backgroundColor:n.palette.background.default,border:`1px solid ${n.palette.border}`,padding:n.spacing(2),fontFamily:"sans-serif"}}),{name:"BackstageWarningPanel"}),eo=n=>n.charAt(0).toLocaleUpperCase("en-US")+n.slice(1);function Or(n){const{severity:o="warning",title:u,titleFormat:h,message:C,children:L,defaultExpanded:k}=n,te=Ur({severity:o}),fe=eo(o)+(u?`: ${u}`:"");return t.createElement($t.A,{defaultExpanded:k!=null?k:!1,className:te.panel,role:"alert"},t.createElement(tn.A,{expandIcon:t.createElement(qr,{severity:o}),className:te.summary},t.createElement(Jr,{severity:o}),t.createElement(r.A,{className:te.summaryText,variant:"subtitle1"},h==="markdown"?t.createElement(Na,{content:fe,className:te.markdownContent}):fe)),(C||L)&&t.createElement(It.A,null,t.createElement(P.A,{container:!0},C&&t.createElement(P.A,{item:!0,xs:12},t.createElement(r.A,{className:te.message,variant:"body1"},C)),L&&t.createElement(P.A,{item:!0,xs:12,className:te.details},L))))}const uo=(0,z.A)(n=>({text:{fontFamily:"monospace",whiteSpace:"pre",overflowX:"auto",marginRight:n.spacing(2)},divider:{margin:n.spacing(2)}}),{name:"BackstageErrorPanel"}),mo=({error:n,message:o,stack:u,children:h})=>{const C=uo();return t.createElement(dt.A,{dense:!0},t.createElement(Qe.A,{alignItems:"flex-start"},t.createElement(et.A,{classes:{secondary:C.text},primary:"Error",secondary:n}),t.createElement(ar,{text:n})),t.createElement(Qe.A,{alignItems:"flex-start"},t.createElement(et.A,{classes:{secondary:C.text},primary:"Message",secondary:o}),t.createElement(ar,{text:o})),u&&t.createElement(Qe.A,{alignItems:"flex-start"},t.createElement(et.A,{classes:{secondary:C.text},primary:"Stack Trace",secondary:u}),t.createElement(ar,{text:u})),h)};function Tr(n){const{title:o,error:u,defaultExpanded:h,titleFormat:C,children:L}=n;return t.createElement(Or,{severity:"error",title:o!=null?o:u.message,defaultExpanded:h,titleFormat:C},t.createElement(mo,{error:u.name,message:u.message,stack:u.stack,children:L}))}const to=(0,z.A)(n=>({text:{fontFamily:"monospace",whiteSpace:"pre",overflowX:"auto",marginRight:n.spacing(2)},divider:{margin:n.spacing(2)}}),{name:"BackstageResponseErrorPanel"});function po(n){var o;const{title:u,error:h,defaultExpanded:C}=n,L=to();if(h.name!=="ResponseError")return t.createElement(Tr,{title:u!=null?u:h.message,defaultExpanded:C,error:h});const{body:k,cause:te}=h,{request:fe,response:ve}=k,Ke=`${ve.statusCode}: ${te.name}`,je=fe&&`${fe.method} ${fe.url}`,Lt=te.message.replace(/\\n/g,`
`),Ht=(o=te.stack)==null?void 0:o.replace(/\\n/g,`
`),Yt=JSON.stringify(k,void 0,2);return t.createElement(Tr,{title:u!=null?u:h.message,defaultExpanded:C,error:{name:Ke,message:Lt,stack:Ht}},je&&t.createElement(Qe.A,{alignItems:"flex-start"},t.createElement(et.A,{classes:{secondary:L.text},primary:"Request",secondary:fe?`${je}`:void 0}),t.createElement(ar,{text:je})),t.createElement(t.Fragment,null,t.createElement(Vt.A,{component:"li",className:L.divider}),t.createElement(Qe.A,{alignItems:"flex-start"},t.createElement(et.A,{classes:{secondary:L.text},primary:"Full Error as JSON"})),t.createElement($e,{language:"json",text:Yt,showCopyCodeButton:!0})))}function ho(n){const o=document.createElement("div");return o.setAttribute("id",n),o}function go(n){document.body.insertBefore(n,document.body.lastElementChild.nextElementSibling)}function no(n){const o=useRef(null);useEffect(function(){const C=document.querySelector(`#${n}`),L=C||ho(n);return C||go(L),L.appendChild(o.current),function(){o.current.remove(),L.childNodes.length===-1&&L.remove()}},[n]);function u(){return o.current||(o.current=document.createElement("div")),o.current}return u()}const br="core.calloutSeen";function $r(){const[n,o]=useState(()=>{const h=localStorage.getItem(br);return h?JSON.parse(h):{}}),u=useCallback((h,C)=>{const L=localStorage.getItem(br),te={...L?JSON.parse(L):{},[h]:C};o(te),localStorage.setItem(br,JSON.stringify(te))},[]);return{states:n,setState:u}}function Ir(n){const{states:o,setState:u}=$r(),h=useCallback(()=>{u(n,!0)},[u,n]);return{seen:o[n]===!0,markSeen:h}}function fo(n){const{seen:o,markSeen:u}=Ir(n);return{show:o===!1,hide:u}}const ao=(0,z.A)(n=>({"@keyframes pulsateSlightly":{"0%":{transform:"scale(1.0)"},"100%":{transform:"scale(1.1)"}},"@keyframes pulsateAndFade":{"0%":{transform:"scale(1.0)",opacity:.9},"100%":{transform:"scale(1.5)",opacity:0}},featureWrapper:{position:"relative"},backdrop:{zIndex:2e3,position:"fixed",overflow:"hidden",left:0,right:0,top:0,bottom:0},dot:{position:"absolute",backgroundColor:"transparent",borderRadius:"100%",border:"1px solid rgba(103, 146, 180, 0.98)",boxShadow:"0px 0px 0px 20000px rgba(0, 0, 0, 0.5)",zIndex:2001,transformOrigin:"center center",animation:"$pulsateSlightly 1744ms 1.2s cubic-bezier(0.4, 0, 0.2, 1) alternate infinite"},pulseCircle:{width:"100%",height:"100%",backgroundColor:"transparent",borderRadius:"100%",border:`2px solid ${n.palette.common.white}`,zIndex:2001,transformOrigin:"center center",animation:"$pulsateAndFade 872ms 1.2s cubic-bezier(0.4, 0, 0.2, 1) infinite"},text:{position:"absolute",color:n.palette.common.white,zIndex:2003}}),{name:"BackstageFeatureCalloutCircular"});function _r(n){const{featureId:o,title:u,description:h,children:C}=n,{show:L,hide:k}=fo(o),te=no("core.callout"),fe=useRef(null),[ve,Ke]=useState(),je=ao(),Lt=useCallback(()=>{if(fe.current){const Ht=fe.current.getBoundingClientRect(),Yt=Math.max(Ht.width,Ht.height),Qn=800,Hn=Ht.x-(Yt-Ht.width)/2-Qn,pa=Ht.y-(Yt-Ht.height)/2-Qn,Qa=Yt+2*Qn,lr=450,Zn=Ht.x+Ht.width/2-lr,Wa=Ht.y-(Yt-Ht.height)/2+Yt+20;Ke({dotLeft:Hn,dotTop:pa,dotSize:Qa,borderWidth:Qn,textTop:Wa,textLeft:Zn,textWidth:lr})}},[]);return useEffect(()=>(window.addEventListener("resize",Lt),window.addEventListener("scroll",Lt),()=>{window.removeEventListener("resize",Lt),window.removeEventListener("scroll",Lt)}),[Lt]),useLayoutEffect(Lt,[fe.current,Lt]),L?React.createElement(React.Fragment,null,React.createElement(Box,{className:je.featureWrapper,ref:fe},C),createPortal(React.createElement(Box,{className:je.backdrop},React.createElement(ClickAwayListener,{onClickAway:k},React.createElement(React.Fragment,null,React.createElement(Box,{className:je.dot,"data-testid":"dot",style:{left:ve==null?void 0:ve.dotLeft,top:ve==null?void 0:ve.dotTop,width:ve==null?void 0:ve.dotSize,height:ve==null?void 0:ve.dotSize,borderWidth:ve==null?void 0:ve.borderWidth},onClick:k,onKeyDown:k,role:"button",tabIndex:0},React.createElement(Box,{className:je.pulseCircle})),React.createElement(Box,{className:je.text,"data-testid":"text",style:{left:ve==null?void 0:ve.textLeft,top:ve==null?void 0:ve.textTop,width:ve==null?void 0:ve.textWidth}},React.createElement(Typography,{variant:"h2",paragraph:!0},u),React.createElement(Typography,null,h))))),te)):React.createElement(React.Fragment,null,C)}const Qr=(0,z.A)(n=>({link:{display:"grid",justifyItems:"center",gridGap:4,textAlign:"center"},disabled:{color:n.palette.text.secondary,cursor:"default"},primary:{color:n.palette.primary.main},secondary:{color:n.palette.secondary.main},label:{textTransform:"uppercase",fontWeight:n.typography.fontWeightBold,letterSpacing:1.2}}),{name:"BackstageIconLinkVertical"});function zr({color:n="primary",disabled:o=!1,href:u="#",icon:h=t.createElement(Ye.A,null),label:C,onClick:L,title:k}){const te=Qr();return o?t.createElement(oe.A,{title:k,className:ae()(te.link,te.disabled)},h,t.createElement(r.A,{variant:"caption",component:"span",className:te.label},C)):t.createElement(Sa,{title:k,className:ae()(te.link,te[n]),to:u,onClick:L},h,t.createElement(r.A,{variant:"caption",component:"span",className:te.label},C))}const Dr=(0,z.A)(n=>({links:{margin:n.spacing(2,0),display:"grid",gridAutoFlow:"column",gridAutoColumns:"min-content",gridGap:n.spacing(3)}}),{name:"BackstageHeaderIconLinkRow"});function Cr(n){const{links:o}=n,u=Dr();return t.createElement("nav",{className:u.links},o.map((h,C)=>t.createElement(zr,{key:C+1,...h})))}const Mr=n=>{const o=n==="dark"?"16%":"97%";return`
    hsl(0, 0%, ${o}) 0%,
    hsla(0, 0%, ${o}, 0.987) 8.1%,
    hsla(0, 0%, ${o}, 0.951) 15.5%,
    hsla(0, 0%, ${o}, 0.896) 22.5%,
    hsla(0, 0%, ${o}, 0.825) 29%,
    hsla(0, 0%, ${o}, 0.741) 35.3%,
    hsla(0, 0%, ${o}, 0.648) 41.2%,
    hsla(0, 0%, ${o}, 0.55) 47.1%,
    hsla(0, 0%, ${o}, 0.45) 52.9%,
    hsla(0, 0%, ${o}, 0.352) 58.8%,
    hsla(0, 0%, ${o}, 0.259) 64.7%,
    hsla(0, 0%, ${o}, 0.175) 71%,
    hsla(0, 0%, ${o}, 0.104) 77.5%,
    hsla(0, 0%, ${o}, 0.049) 84.5%,
    hsla(0, 0%, ${o}, 0.013) 91.9%,
    hsla(0, 0%, ${o}, 0) 100%
  `},jr=100,f=10,O=(0,z.A)(n=>({root:{position:"relative",display:"flex",flexFlow:"row nowrap",alignItems:"center"},container:{overflow:"auto",scrollbarWidth:0,"&::-webkit-scrollbar":{display:"none"}},fade:{position:"absolute",width:jr,height:`calc(100% + ${f}px)`,transition:"opacity 300ms",pointerEvents:"none"},fadeLeft:{left:-f,background:`linear-gradient(90deg, ${Mr(n.palette.type)})`},fadeRight:{right:-f,background:`linear-gradient(270deg, ${Mr(n.palette.type)})`},fadeHidden:{opacity:0},button:{position:"absolute"},buttonLeft:{left:-n.spacing(2)},buttonRight:{right:-n.spacing(2)}}),{name:"BackstageHorizontalScrollGrid"});function x(n){const[[o,u],h]=React.useState([0,0]);return React.useLayoutEffect(()=>{const C=n.current;if(!C){h([0,0]);return}const L=()=>{const k=C.scrollLeft,te=C.scrollWidth-C.offsetWidth-C.scrollLeft;h([k,te])};return L(),C.addEventListener("scroll",L),window.addEventListener("resize",L),()=>{C.removeEventListener("scroll",L),window.removeEventListener("resize",L)}},[n]),[o,u]}function B(n,o,u){const[h,C]=React.useState(0);return React.useLayoutEffect(()=>{if(h===0)return;const L=window.performance.now(),k=requestAnimationFrame(te=>{if(!n.current)return;const fe=te-L,ve=Math.abs(h)*fe/o,je=Math.max(u,ve)*Math.sign(h);n.current.scrollBy({left:je});const Lt=h-je;Math.sign(h)!==Math.sign(Lt)?C(0):C(Lt)});return()=>cancelAnimationFrame(k)},[n,h,o,u]),C}function ne(n){const{scrollStep:o=100,scrollSpeed:u=50,minScrollDistance:h=5,children:C,...L}=n,k=O(n),te=React.useRef(),[fe,ve]=x(te),Ke=B(te,u,h),je=Lt=>{te.current&&Ke(Lt?o:-o)};return React.createElement(Box,{...L,className:k.root},React.createElement(Grid,{container:!0,direction:"row",wrap:"nowrap",className:k.container,ref:te},C),React.createElement(Box,{className:classNames(k.fade,k.fadeLeft,{[k.fadeHidden]:fe===0})}),React.createElement(Box,{className:classNames(k.fade,k.fadeRight,{[k.fadeHidden]:ve===0})}),fe>0&&React.createElement(IconButton,{title:"Scroll Left",onClick:()=>je(!1),className:classNames(k.button,k.buttonLeft,{})},React.createElement(ChevronLeftIcon,null)),ve>0&&React.createElement(IconButton,{title:"Scroll Right",onClick:()=>je(!0),className:classNames(k.button,k.buttonRight,{})},React.createElement(ChevronRight,null)))}const Se=(0,z.A)(n=>({alpha:{color:n.palette.common.white,fontFamily:"serif",fontWeight:"normal",fontStyle:"italic"},beta:{color:"#4d65cc",fontFamily:"serif",fontWeight:"normal",fontStyle:"italic"}}),{name:"BackstageLifecycle"});function be(n){const o=Se(n),{shorthand:u,alpha:h}=n;return u?React.createElement(Typography,{component:"span",className:o[h?"alpha":"beta"],style:{fontSize:"120%"}},h?React.createElement(React.Fragment,null,"\u03B1"):React.createElement(React.Fragment,null,"\u03B2")):React.createElement(Typography,{component:"span",className:o[h?"alpha":"beta"]},h?"Alpha":"Beta")}const De=(0,t.lazy)(()=>e.e(6935).then(e.bind(e,36935)).then(n=>({default:n.RealLogViewer})));function at(n){const{Progress:o}=(0,l.nm)().getComponents();return t.createElement(t.Suspense,{fallback:t.createElement(o,null)},t.createElement(De,{...n}))}const Mt=(0,z.A)(n=>({root:{paddingLeft:n.spacing(3)}}),{name:"BackstageLoginRequestListItem"}),Tt=({request:n,busy:o,setBusy:u})=>{const h=Mt(),[C,L]=(0,t.useState)(),{t:k}=(0,b.ie)(pe),te=async()=>{u(!0);try{await n.trigger()}catch(ve){L((0,ft.bJ)(ve)?ve.message:"An unspecified error occurred")}finally{u(!1)}},fe=n.provider.icon;return t.createElement(Qe.A,{disabled:o,classes:{root:h.root}},t.createElement(Wt.A,null,t.createElement(fe,{fontSize:"large"})),t.createElement(et.A,{primary:n.provider.title,secondary:C&&t.createElement(r.A,{color:"error"},C)}),t.createElement(de.A,{color:"primary",variant:"contained",onClick:te},k("oauthRequestDialog.login")))},nn=(0,z.A)(n=>({dialog:{paddingTop:n.spacing(1)},title:{minWidth:0},titleHeading:{fontSize:n.typography.h6.fontSize},contentList:{padding:0},actionButtons:{padding:n.spacing(2,0)}}),{name:"OAuthRequestDialog"});function En(n){var o;const u=nn(),[h,C]=(0,t.useState)(!1),L=(0,s.u)(s.x),k=(0,s.u)(s.p),{t:te}=(0,b.ie)(pe),fe=(o=k.getOptionalBoolean("enableExperimentalRedirectFlow"))!=null?o:!1,ve=(0,S.A)((0,t.useMemo)(()=>L.authRequest$(),[L]),[]),Ke=()=>{ve.forEach(je=>je.reject())};return t.createElement(me.A,{open:!!ve.length,fullWidth:!0,maxWidth:"xs",classes:{paper:u.dialog},"aria-labelledby":"oauth-req-dialog-title"},t.createElement("main",null,t.createElement(ye.A,{classes:{root:u.title},id:"oauth-req-dialog-title"},t.createElement(r.A,{className:u.titleHeading,variant:"h1",variantMapping:{h1:"span"}},te("oauthRequestDialog.title")),fe?t.createElement(r.A,null,te("oauthRequestDialog.authRedirectTitle")):null),t.createElement(xe.A,{dividers:!0,classes:{root:u.contentList}},t.createElement(dt.A,null,ve.map(je=>t.createElement(Tt,{key:je.provider.title,request:je,busy:h,setBusy:C}))))),t.createElement(G.A,{classes:{root:u.actionButtons}},t.createElement(de.A,{onClick:Ke},te("oauthRequestDialog.rejectAll"))))}const on=(0,z.A)({container:{overflow:"visible !important"}},{name:"BackstageOverflowTooltip"});function Tn(n){var o;const[u,h]=(0,t.useState)(!1),C=(0,Xt.a)(),L=on(),k=te=>{C()&&h(te)};return t.createElement(Ve.Ay,{title:(o=n.title)!=null?o:n.text||"",placement:n.placement,disableHoverListener:!u},t.createElement(dn(),{text:n.text,line:n.line,onToggled:k,containerClassName:L.container}))}function zn(n){const o=(0,ee.A)(),[u,h]=(0,t.useState)(!1);return(0,t.useEffect)(()=>{const C=setTimeout(()=>h(!0),o.transitions.duration.short);return()=>clearTimeout(C)},[o.transitions.duration.short]),u?t.createElement(Xe.A,{...n,"data-testid":"progress"}):t.createElement(oe.A,{display:"none"})}const Cn=(0,z.A)(n=>({root:{maxWidth:"fit-content",padding:n.spacing(2,2,2,2.5)},boxTitle:{margin:0,color:n.palette.textSubtle},arrow:{color:n.palette.textSubtle}}),{name:"BackstageBottomLink"});function Xn(n){const{link:o,title:u,onClick:h}=n,C=Cn();return t.createElement(oe.A,null,t.createElement(Vt.A,null),t.createElement(Sa,{to:o,onClick:h,underline:"none"},t.createElement(oe.A,{display:"flex",alignItems:"center",className:C.root},t.createElement(oe.A,{className:C.boxTitle,fontWeight:"fontWeightBold",m:1},t.createElement(r.A,null,t.createElement("strong",null,u))),t.createElement(V.A,{className:C.arrow}))))}const ga=n=>{const{slackChannel:o}=n,{t:u}=(0,b.ie)(pe);if(o){if(typeof o=="string")return t.createElement(r.A,null,u("errorBoundary.title",{slackChannel:o}));if(!o.href)return t.createElement(r.A,null,u("errorBoundary.title",{slackChannel:o.name}))}else return null;return t.createElement(er,{to:o.href,variant:"contained"},o.name)},xn=class extends t.Component{constructor(o){super(o),this.state={error:void 0,errorInfo:void 0}}componentDidCatch(o,u){console.error(`ErrorBoundary, error: ${o}, info: ${u}`),this.setState({error:o,errorInfo:u})}render(){const{slackChannel:o,children:u}=this.props,{error:h}=this.state;return h?t.createElement(Tr,{title:"Something Went Wrong",error:h},t.createElement(ga,{slackChannel:o})):u}},Jn=(0,z.A)(n=>({noPadding:{padding:0,"&:last-child":{paddingBottom:0}},header:{padding:n.spacing(2,2,2,2.5)},headerTitle:{fontWeight:n.typography.fontWeightBold},headerSubheader:{paddingTop:n.spacing(1)},headerAvatar:{},headerAction:{},headerContent:{},subheader:{display:"flex"}}),{name:"BackstageInfoCard"}),ua=(0,w.A)(n=>({root:{display:"inline-block",padding:n.spacing(8,8,0,0),float:"right"}}),{name:"BackstageInfoCardCardActionsTopRight"})(Dt.A),Da={card:{flex:{display:"flex",flexDirection:"column"},fullHeight:{display:"flex",flexDirection:"column",height:"100%"},gridItem:{display:"flex",flexDirection:"column",height:"calc(100% - 10px)",marginBottom:"10px",breakInside:"avoid-page","@media print":{height:"auto"}}},cardContent:{fullHeight:{flex:1},gridItem:{flex:1}}};function fa(n){const{title:o,subheader:u,divider:h=!0,deepLink:C,slackChannel:L,errorBoundaryProps:k,variant:te,children:fe,headerStyle:ve,headerProps:Ke,icon:je,action:Lt,actionsClassName:Ht,actions:Yt,cardClassName:Qn,actionsTopRight:Hn,className:pa,noPadding:Qa,titleTypographyProps:lr}=n,Zn=Jn();let Wa={},Xa={};te&&te.split(/[\s]+/g).forEach(Nr=>{Wa={...Wa,...Da.card[Nr]},Xa={...Xa,...Da.cardContent[Nr]}});const cr=()=>!u&&!je?null:t.createElement("div",{className:Zn.headerSubheader,"data-testid":"info-card-subheader"},u&&t.createElement("div",{className:Zn.subheader},u),je),xr=k||(L?{slackChannel:L}:{});return t.createElement(mt.A,{style:Wa,className:pa},t.createElement(xn,{...xr},o&&t.createElement(qe.A,{classes:{root:Zn.header,title:Zn.headerTitle,subheader:Zn.headerSubheader,avatar:Zn.headerAvatar,action:Zn.headerAction,content:Zn.headerContent},title:o,subheader:cr(),action:Lt,style:{...ve},titleTypographyProps:lr,...Ke}),Hn&&t.createElement(ua,null,Hn),h&&t.createElement(Vt.A,null),t.createElement(rt.A,{className:ae()(Qn,{[Zn.noPadding]:Qa}),style:Xa},fe),Yt&&t.createElement(Dt.A,{className:Ht},Yt),C&&t.createElement(Xn,{...C})))}const ma=(0,z.A)(n=>({root:{position:"relative",lineHeight:0},overlay:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -60%)",fontSize:n.typography.pxToRem(45),fontWeight:n.typography.fontWeightBold,color:n.palette.textContrast},description:{fontSize:"100%",top:"50%",left:"50%",transform:"translate(-50%, -50%)",position:"absolute",wordBreak:"break-all",display:"inline-block"},circle:{width:"80%",transform:"translate(10%, 0)"},colorUnknown:{}}),{name:"BackstageGauge"}),ya={fractional:!0,inverse:!1,unit:"%",max:100},Pa=({palette:n,value:o,inverse:u,max:h})=>{if(isNaN(o))return"#ddd";const C=h||ya.max,L=u?C-o:o;return L<C/3?n.status.error:L<C*(2/3)?n.status.warning:n.status.ok};function fr(n){const[o,u]=useState(null),{getColor:h=Pa}=n,C=ma(n),{palette:L}=useTheme(),{value:k,fractional:te,inverse:fe,unit:ve,max:Ke,description:je}={...ya,...n},Lt=te?Math.round(k*Ke):k,Ht=Ke!==100?Math.round(k):Lt,[Yt,Qn]=useState(!1);return useEffect(()=>{const Hn=o,pa=()=>Qn(!0),Qa=()=>Qn(!1);return Hn&&je?(Hn.addEventListener("mouseenter",pa),Hn.addEventListener("mouseleave",Qa),()=>{Hn.removeEventListener("mouseenter",pa),Hn.removeEventListener("mouseleave",Qa)}):()=>{Qn(!1)}},[je,o]),React.createElement(Box,{ref:u,className:C.root},React.createElement(Circle,{strokeLinecap:"butt",percent:Lt,strokeWidth:12,trailWidth:12,strokeColor:h({palette:L,value:Ht,inverse:fe,max:Ke}),className:C.circle}),je&&Yt?React.createElement(Box,{className:C.description},je):React.createElement(Box,{className:C.overlay},isNaN(k)?"N/A":`${Ht}${ve}`))}const ro=(0,z.A)({root:{height:"100%",width:250}},{name:"BackstageGaugeCard"});function pi(n){const o=ro(n),{title:u,subheader:h,progress:C,inverse:L,deepLink:k,description:te,icon:fe,variant:ve,getColor:Ke}=n,je={inverse:L,description:te,getColor:Ke,value:C};return React.createElement(Box,{className:o.root},React.createElement(fa,{title:u,subheader:h,deepLink:k,variant:ve,icon:fe},React.createElement(fr,{...je})))}function Ko(n){const{value:o,getColor:u=Pa,width:h="thick"}=n,{palette:C}=useTheme();if(isNaN(o))return null;let L=Math.round(o*100*100)/100;L>100&&(L=100);const k=h==="thick"?4:1,te=u({palette:C,value:L,inverse:!1,max:100});return React.createElement(Tooltip,{title:`${L}%`},React.createElement(Typography,{component:"span"},React.createElement(Line,{percent:L,strokeWidth:k,trailWidth:k,strokeColor:te})))}const zo=(0,z.A)(n=>(0,M.A)({icon:{position:"absolute",right:n.spacing(.5),pointerEvents:"none",color:"#616161"}}),{name:"BackstageClosedDropdown"}),jo=()=>{const n=zo();return t.createElement(Vn.A,{className:n.icon,fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.createElement("path",{d:"M7.5 8L6 9.5L12.0703 15.5703L18.1406 9.5L16.6406 8L12.0703 12.5703L7.5 8Z",fill:"currentColor"}))},Go=(0,z.A)(n=>(0,M.A)({icon:{position:"absolute",right:n.spacing(.5),pointerEvents:"none",color:"#616161"}}),{name:"BackstageOpenedDropdown"}),Ho=()=>{const n=Go();return t.createElement(Vn.A,{className:n.icon,fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.createElement("path",{d:"M16.5 16L18 14.5L11.9297 8.42969L5.85938 14.5L7.35938 16L11.9297 11.4297L16.5 16Z",fill:"currentColor"}))},nr=(0,w.A)(n=>(0,M.A)({root:{"label + &":{marginTop:n.spacing(3)},"&.Mui-focused > div[role=button]":{borderColor:n.palette.primary.main}},input:{borderRadius:n.shape.borderRadius,position:"relative",backgroundColor:n.palette.background.paper,border:"1px solid #ced4da",fontSize:n.typography.body1.fontSize,padding:n.spacing(1.25,3.25,1.25,1.5),transition:n.transitions.create(["border-color","box-shadow"]),"&:focus":{background:n.palette.background.paper,borderRadius:n.shape.borderRadius}}}),{name:"BackstageSelectInputBase"})(ln.A),Po=(0,z.A)(n=>(0,M.A)({formControl:{margin:n.spacing(1,0),maxWidth:300},label:{transform:"initial",fontWeight:"bold",fontSize:n.typography.body2.fontSize,fontFamily:n.typography.fontFamily,color:n.palette.text.primary,"&.Mui-focused":{color:n.palette.text.primary}},formLabel:{transform:"initial",fontWeight:"bold",fontSize:n.typography.body2.fontSize,fontFamily:n.typography.fontFamily,color:n.palette.text.primary,"&.Mui-focused":{color:n.palette.text.primary}},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2},checkbox:{},root:{display:"flex",flexDirection:"column"}}),{name:"BackstageSelect"});function So(n){const{multiple:o,items:u,label:h,placeholder:C,selected:L,onChange:k,triggerReset:te,native:fe=!1,disabled:ve=!1,margin:Ke}=n,je=Po(),[Lt,Ht]=(0,t.useState)(L||(o?[]:"")),[Yt,Qn]=(0,t.useState)(!1);(0,t.useEffect)(()=>{Ht(o?[]:"")},[te,o]),(0,t.useEffect)(()=>{Ht(L||(o?[]:""))},[L,o]);const Hn=Zn=>{Ht(Zn.target.value),k(Zn.target.value)},pa=Zn=>{if(ve){Zn.preventDefault();return}Qn(Wa=>o&&!(Zn.target instanceof HTMLElement)?!0:!Wa)},Qa=()=>{Qn(!1)},lr=Zn=>()=>{const Wa=Lt.filter(Xa=>Xa!==Zn);Ht(Wa),k(Wa)};return t.createElement(oe.A,{className:je.root},t.createElement(Nt.A,{className:je.formControl},t.createElement(bn.A,{className:je.formLabel},h),t.createElement(Un.A,{"aria-label":h,value:Lt,native:fe,disabled:ve,"data-testid":"select",displayEmpty:!0,multiple:o,margin:Ke,onChange:Hn,open:Yt,onOpen:pa,onClose:Qa,input:t.createElement(nr,null),label:h,renderValue:Zn=>{var Wa;return o&&Lt.length!==0?t.createElement(oe.A,{className:je.chips},Zn.map(Xa=>{const cr=u.find(xr=>xr.value===Xa);return cr?t.createElement(Pt.A,{key:cr==null?void 0:cr.value,label:cr==null?void 0:cr.label,clickable:!0,onDelete:lr(Xa),className:je.chip}):!1})):t.createElement(r.A,null,Lt.length===0?C||"":(Wa=u.find(Xa=>Xa.value===Zn))==null?void 0:Wa.label)},IconComponent:()=>Yt?t.createElement(Ho,null):t.createElement(jo,null),MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},getContentAnchorEl:null}},C&&!o&&t.createElement(Dn.A,{value:[]},C),fe?u&&u.map(Zn=>t.createElement("option",{value:Zn.value,key:Zn.value},Zn.label)):u&&u.map(Zn=>t.createElement(Dn.A,{key:Zn.value,value:Zn.value},o&&t.createElement(Ee.A,{color:"primary",checked:Lt.includes(Zn.value)||!1,className:je.checkbox}),Zn.label)))))}const Eo=()=>{},Ro=t.createContext({stepperLength:0,stepIndex:0,setStepIndex:Eo,stepHistory:[],setStepHistory:Eo,onStepChange:Eo});function vo(n){const{children:o,elevated:u,onStepChange:h,activeStep:C=0}=n,[L,k]=useState(C),[te,fe]=useState([0]);useEffect(()=>{k(C)},[C]);const ve=[];let Ke;return Children.forEach(o,je=>{isValidElement(je)&&(je.props.end?Ke=je:ve.push(je))}),React.createElement(React.Fragment,null,React.createElement(Ro.Provider,{value:{stepIndex:L,setStepIndex:k,stepHistory:te,setStepHistory:fe,onStepChange:h,stepperLength:Children.count(o)}},React.createElement(MuiStepper,{activeStep:L,orientation:"vertical",elevation:u?2:0},ve)),L>=Children.count(o)-1&&Ke)}const Vo=(0,z.A)(n=>({root:{marginTop:n.spacing(3),"& button":{marginRight:n.spacing(1)}}}),{name:"BackstageSimpleStepperFooter"}),Yo=({text:n,handleClick:o})=>{const{t:u}=useTranslationRef(coreComponentsTranslationRef);return React.createElement(Button$1,{onClick:o},n||u("simpleStepper.reset"))},Jo=({text:n,handleClick:o,disabled:u,last:h,stepIndex:C})=>{const{t:L}=useTranslationRef(coreComponentsTranslationRef);return React.createElement(Button$1,{variant:"contained",color:"primary",disabled:u,"data-testid":`nextButton-${C}`,onClick:o},n||L(h?"simpleStepper.finish":"simpleStepper.next"))},Qo=({text:n,handleClick:o,disabled:u,stepIndex:h})=>{const{t:C}=useTranslationRef(coreComponentsTranslationRef);return React.createElement(Button$1,{variant:"outlined",color:"primary",disabled:u,"data-testid":`skipButton-${h}`,onClick:o},n||C("simpleStepper.skip"))},wo=({text:n,handleClick:o,disabled:u,stepIndex:h})=>{const{t:C}=useTranslationRef(coreComponentsTranslationRef);return React.createElement(Button$1,{onClick:o,"data-testid":`backButton-${h}`,disabled:u},n||C("simpleStepper.back"))},yo=({actions:n={},children:o})=>{const u=Vo(),{stepperLength:h,stepIndex:C,setStepIndex:L,stepHistory:k,setStepHistory:te,onStepChange:fe}=useContext(Ro),ve=(Ht,Yt)=>{Yt&&Yt(),fe&&fe(C,Ht),L(Ht)},Ke=()=>{const Ht=n.nextStep?n.nextStep(C,h-1):C+1;ve(Ht,n.onNext),te([...k,Ht])},je=()=>{k.pop(),ve(k[k.length-1],n.onBack),te([...k])},Lt=()=>{ve(0,n.onRestart),te([0])};return React.createElement(Box,{className:u.root},[void 0,!0].includes(n.showBack)&&C!==0&&React.createElement(wo,{text:n.backText,handleClick:je,disabled:C===0,stepIndex:C}),n.showSkip&&React.createElement(Qo,{text:n.skipText,handleClick:Ke,disabled:!!h&&C>=h||!!n.canSkip&&!n.canSkip(),stepIndex:C}),[void 0,!0].includes(n.showNext)&&React.createElement(Jo,{text:n.nextText,handleClick:Ke,disabled:!!h&&C>=h||!!n.canNext&&!n.canNext(),stepIndex:C}),n.showRestart&&C!==0&&React.createElement(Yo,{text:n.restartText,handleClick:Lt,stepIndex:C}),o)},d=(0,z.A)(n=>({end:{padding:n.spacing(3)}}),{name:"SimpleStepperStep"});function a(n){const{title:o,children:u,end:h,actions:C,...L}=n,k=d();return h?React.createElement(Box,{className:k.end},React.createElement(Typography,{variant:"h6"},o),u,React.createElement(yo,{actions:{...C||{},showNext:!1}})):React.createElement(MuiStep,{...L},React.createElement(StepLabel,null,React.createElement(Typography,{variant:"h6"},o)),React.createElement(StepContent,null,u,React.createElement(yo,{actions:C})))}const i=(0,z.A)(n=>({status:{fontWeight:n.typography.fontWeightMedium,"&::before":{width:"0.7em",height:"0.7em",display:"inline-block",marginRight:n.spacing(1),borderRadius:"50%",content:'""'}},ok:{"&::before":{backgroundColor:n.palette.status.ok}},warning:{"&::before":{backgroundColor:n.palette.status.warning}},error:{"&::before":{backgroundColor:n.palette.status.error}},pending:{"&::before":{backgroundColor:n.palette.status.pending}},running:{"&::before":{backgroundColor:n.palette.status.running}},aborted:{"&::before":{backgroundColor:n.palette.status.aborted}}}),{name:"BackstageStatus"});function p(n){const o=i(n);return t.createElement(r.A,{component:"span",className:ae()(o.status,o.ok),"aria-label":"Status ok","aria-hidden":"true",...n})}function T(n){const o=i(n);return t.createElement(r.A,{component:"span",className:ae()(o.status,o.warning),"aria-label":"Status warning","aria-hidden":"true",...n})}function se(n){const o=i(n);return t.createElement(r.A,{component:"span",className:ae()(o.status,o.error),"aria-label":"Status error","aria-hidden":"true",...n})}function Me(n){const o=i(n);return t.createElement(r.A,{component:"span",className:ae()(o.status,o.pending),"aria-label":"Status pending","aria-hidden":"true",...n})}function Ue(n){const o=i(n);return t.createElement(r.A,{component:"span",className:ae()(o.status,o.running),"aria-label":"Status running","aria-hidden":"true",...n})}function vt(n){const o=i(n);return t.createElement(r.A,{component:"span",className:ae()(o.status,o.aborted),"aria-label":"Status aborted","aria-hidden":"true",...n})}const Bt=n=>(0,M.A)({root:{fontWeight:n.typography.fontWeightBold,whiteSpace:"nowrap",paddingRight:n.spacing(4),border:"0",verticalAlign:"top"}}),jn={root:{border:"0",verticalAlign:"top"}},Bn=n=>(0,M.A)({root:{margin:n.spacing(0,0,-1,0)}}),yn=n=>(0,M.A)({root:{padding:n.spacing(0,0,1,0)},random:{}}),oa=(0,w.A)(Bt,{name:"BackstageMetadataTableTitleCell"})(m.A),ta=(0,w.A)(jn,{name:"BackstageMetadataTableCell"})(m.A),ia=({dense:n,children:o})=>t.createElement(da.A,{size:n?"small":"medium"},t.createElement(ct.A,null,o)),Ma=({title:n,children:o,...u})=>t.createElement(R.A,null,n&&t.createElement(oa,null,n),t.createElement(ta,{colSpan:n?1:2,...u},o)),Ua=(0,w.A)(Bn,{name:"BackstageMetadataTableList"})(({classes:n,children:o})=>t.createElement(dt.A,{disablePadding:!0,className:n.root},o)),Fa=(0,w.A)(yn,{name:"BackstageMetadataTableListItem"})(({classes:n,children:o})=>t.createElement(Qe.A,{className:n.root},o)),mr=(0,M.A)({root:{margin:"0 0",listStyleType:"none"}}),Oo=n=>(0,M.A)({root:{...mr.root,paddingLeft:n.spacing(1)}}),hi=(0,w.A)(mr,{name:"BackstageStructuredMetadataTableList"})(({classes:n,children:o})=>t.createElement(Ua,{classes:n},o)),gi=(0,w.A)(Oo,{name:"BackstageStructuredMetadataTableNestedList"})(({classes:n,children:o})=>t.createElement(Ua,{classes:n},o));function ns(n,o,u){const h=n.map((C,L)=>t.createElement(Fa,{key:L},Xo(C,o,u)));return u?t.createElement(gi,null,h):t.createElement(hi,null,h)}function as(n,o,u){const h=Object.keys(n).map(C=>{const L=Xo(n[C],o,!0);return t.createElement(Fa,{key:C},t.createElement(r.A,{variant:"body2",component:"span"},`${o.titleFormat(C)}: `),L)});return u?t.createElement(gi,null,h):t.createElement(hi,null,h)}function Xo(n,o,u){return t.isValidElement(n)?t.createElement(t.Fragment,null,n):n!==null&&typeof n=="object"&&!Array.isArray(n)?as(n,o,u):Array.isArray(n)?ns(n,o,u):typeof n=="boolean"?t.createElement(t.Fragment,null,n?"\u2705":"\u274C"):t.createElement(r.A,{variant:"body2",component:"span"},n)}const rs=({value:n,options:o})=>t.createElement(t.Fragment,null,Xo(n,o,!1)),os=({title:n,value:o,options:u})=>t.createElement(Ma,{title:u.titleFormat(n)},t.createElement(rs,{value:o,options:u}));function is(n,o){return Object.keys(n).map(u=>t.createElement(os,{key:u,title:u,value:n[u],options:o}))}function ss(n){const{metadata:o,dense:u=!0,options:h={}}=n,C=is(o,{titleFormat:Yn(),...h});return t.createElement(ia,{dense:u},C)}function ls(n){return qs.stringify(n,{strictNullHandling:!0})}function fi(n){return qs.parse(n,{ignoreQueryPrefix:!0,strictNullHandling:!0})}function Ei(n,o){return fi(n)[o]}function cs(n,o,u){const h={...fi(n),[o]:u};return ls(h)}function fc(n,o=250){const[u,h]=useSearchParams(),C=u.toString(),[L,k]=useState(Ei(C,n));return useEffect(()=>{const te=Ei(C,n);k(fe=>isEqual(te,fe)?fe:te)},[C,k,n]),useDebouncedEffect(()=>{const te=cs(C,n,L);C!==te&&h(te,{replace:!0})},[h,L,C,n],o),[L,k]}const us=()=>{const{t:n}=(0,b.ie)(pe);return{url:"https://github.com/backstage/backstage/issues",items:[{title:n("supportConfig.default.title"),icon:"warning",links:[{title:n("supportConfig.default.linkTitle"),url:"https://github.com/backstage/backstage/blob/master/app-config.yaml"}]}]}};function vi(){const o=(0,s.b)().get(s.p),u=o==null?void 0:o.getOptionalConfig("app.support"),h=us();return u?{url:u.getString("url"),items:u.getConfigArray("items").flatMap(C=>{var L;return{title:C.getString("title"),icon:C.getOptionalString("icon"),links:((L=C.getOptionalConfigArray("links"))!=null?L:[]).flatMap(k=>({url:k.getString("url"),title:k.getString("title")}))}})}:h}function vr(n){var o;const{id:u,Fallback:h=we.A,...C}=n,k=(o=(0,l.nm)().getSystemIcon(u))!=null?o:h;return t.createElement(k,{...C})}function Ec(n){return React.createElement(vr,{id:"brokenImage",...n})}function ds(n){return t.createElement(vr,{id:"catalog",...n})}function vc(n){return React.createElement(vr,{id:"chat",...n})}function yc(n){return React.createElement(vr,{id:"dashboard",...n})}function ms(n){return t.createElement(vr,{id:"docs",...n})}function Ac(n){return React.createElement(vr,{id:"email",...n})}function ps(n){return t.createElement(vr,{id:"github",...n})}function bc(n){return React.createElement(vr,{id:"group",...n})}function To(n){return t.createElement(vr,{id:"help",...n})}function hs(n){return t.createElement(vr,{id:"user",...n})}function _c(n){return React.createElement(vr,{id:"warning",...n})}const gs=(0,z.A)({popoverList:{minWidth:260,maxWidth:400},menuItem:{whiteSpace:"normal"}},{name:"BackstageSupportButton"}),fs=({icon:n})=>{var o;const u=(0,l.nm)(),h=n&&(o=u.getSystemIcon(n))!=null?o:To;return t.createElement(h,null)},Es=({link:n})=>{var o;return t.createElement(Sa,{to:n.url},(o=n.title)!=null?o:n.url)},vs=({item:n})=>{var o;return t.createElement(Dn.A,null,t.createElement(K.A,null,t.createElement(fs,{icon:n.icon})),t.createElement(et.A,{primary:n.title,secondary:(o=n.links)==null?void 0:o.reduce((u,h,C)=>[...u,C>0&&t.createElement("br",{key:C}),t.createElement(Es,{link:h,key:h.url})],[])}))};function ys(n){const{t:o}=(0,b.ie)(pe),{title:u,items:h,children:C}=n,{items:L}=vi(),[k,te]=(0,t.useState)(!1),[fe,ve]=(0,t.useState)(null),Ke=gs(),je=(0,Ge.A)(Yt=>Yt.breakpoints.down("sm")),Lt=Yt=>{ve(Yt.currentTarget),te(!0)},Ht=()=>{te(!1)};return t.createElement(t.Fragment,null,t.createElement(oe.A,{display:"flex",ml:1},je?t.createElement(A.A,{color:"primary",size:"small",onClick:Lt,"data-testid":"support-button","aria-label":"Support"},t.createElement(To,null)):t.createElement(de.A,{"data-testid":"support-button","aria-label":"Support",color:"primary",onClick:Lt,startIcon:t.createElement(To,null)},o("supportButton.title"))),t.createElement(I.Ay,{"data-testid":"support-button-popover",open:k,anchorEl:fe,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},onClose:Ht},t.createElement(le.A,{className:Ke.popoverList,autoFocusItem:!!fe},u&&t.createElement(Dn.A,{alignItems:"flex-start",className:Ke.menuItem},t.createElement(r.A,{variant:"subtitle1"},u)),t.Children.map(C,(Yt,Qn)=>t.createElement(Dn.A,{alignItems:"flex-start",key:`child-${Qn}`,className:Ke.menuItem},Yt)),(h!=null?h:L).map((Yt,Qn)=>t.createElement(vs,{item:Yt,key:`item-${Qn}`}))),t.createElement(G.A,null,t.createElement(de.A,{color:"primary",onClick:Ht,"aria-label":"Close"},o("supportButton.close")))))}const As=(0,z.A)(n=>({root:{gridArea:"pageContent",minWidth:0,paddingTop:n.spacing(3),paddingBottom:n.spacing(3),paddingLeft:n.spacing(2),paddingRight:n.spacing(2),[n.breakpoints.up("sm")]:{paddingLeft:n.spacing(3),paddingRight:n.spacing(3)}},stretch:{display:"flex",flexDirection:"column",flexGrow:1},noPadding:{padding:0}}),{name:"BackstageContent"});function Io(n){const{className:o,stretch:u,noPadding:h,children:C,...L}=n,k=As();return t.createElement("article",{...L,className:ae()(k.root,o,{[k.stretch]:u,[k.noPadding]:h})},C)}const bs=(0,z.A)(n=>({tabsWrapper:{gridArea:"pageSubheader",backgroundColor:n.palette.background.paper,paddingLeft:n.spacing(3),minWidth:0},defaultTab:{...n.typography.caption,padding:n.spacing(3,3),textTransform:"uppercase",fontWeight:n.typography.fontWeightBold,color:n.palette.text.secondary},selected:{color:n.palette.text.primary},tabRoot:{"&:hover":{backgroundColor:n.palette.background.default,color:n.palette.text.primary}}}),{name:"BackstageHeaderTabs"});function yi(n){const{tabs:o,onChange:u,selectedIndex:h}=n,[C,L]=(0,t.useState)(h!=null?h:0),k=bs(),te=(0,t.useCallback)((ve,Ke)=>{h===void 0&&L(Ke),u&&u(Ke)},[h,u]);(0,t.useEffect)(()=>{h!==void 0&&L(h)},[h]);function fe(ve){return ve.replace(/^\//,"")}return t.createElement(oe.A,{className:k.tabsWrapper},t.createElement(Ot.A,{indicatorColor:"primary",textColor:"inherit",variant:"scrollable",scrollButtons:"auto","aria-label":"tabs",onChange:te,value:C},o.map((ve,Ke)=>t.createElement(ot.A,{"data-testid":`header-tab-${Ke}`,label:ve.label,key:ve.id,component:Sa,to:fe(ve.id),value:Ke,className:k.defaultTab,classes:{selected:k.selected,root:k.tabRoot},...ve.tabProps}))))}function _s(n){var o,u,h,C,L;const k=(0,X.g)(),fe=n.map(({path:Ht,children:Yt})=>({caseSensitive:!1,path:`${Ht}/*`,element:Yt})).sort((Ht,Yt)=>Yt.path.replace(/\/\*$/,"").localeCompare(Ht.path.replace(/\/\*$/,""))),ve=(u=(0,X.Ye)(fe))!=null?u:(o=n[0])==null?void 0:o.children;let Ke=(h=k["*"])!=null?h:"";Ke.startsWith("/")||(Ke=`/${Ke}`);const[je]=(C=(0,H.ue)(fe,Ke))!=null?C:[],Lt=je?n.findIndex(Ht=>`${Ht.path}/*`===je.route.path):0;return{index:Lt===-1?0:Lt,element:ve,route:(L=n[Lt])!=null?L:n[0]}}function Ai(n){const{routes:o}=n,u=(0,X.Zp)(),{index:h,route:C,element:L}=_s(o),k=(0,t.useMemo)(()=>o.map(fe=>({id:fe.path,label:fe.title,tabProps:fe.tabProps})),[o]),te=fe=>{let{path:ve}=o[fe];ve=ve.replace(/\/\*$/,""),ve=ve.replace(/^\//,""),u(ve)};return t.createElement(t.Fragment,null,t.createElement(yi,{tabs:k,selectedIndex:h,onChange:te}),t.createElement(Io,null,t.createElement(Oe.m,{title:C==null?void 0:C.title}),L))}const Zo=()=>null;(0,l.h3)(Zo,"core.gatherMountPoints",!0);function bi(n){const o=t.createElement(Zo,{path:"",title:""},t.createElement("div",null)).type;return t.Children.toArray(n).flatMap(u=>{if(!(0,t.isValidElement)(u))return[];if(u.type===t.Fragment)return bi(u.props.children);if(u.type!==o)throw new Error("Child of TabbedLayout must be an TabbedLayout.Route");const{path:h,title:C,children:L,tabProps:k}=u.props;return[{path:h,title:C,children:L,tabProps:k}]})}function Cs(n){const o=bi(n.children);return t.createElement(Ai,{routes:o})}Cs.Route=Zo;const Ps=(0,z.A)(n=>({value:{marginBottom:n.spacing(.75)},subvalue:{color:n.palette.textSubtle,fontWeight:"normal"}}),{name:"BackstageSubvalueCell"});function Ss(n){const{value:o,subvalue:u}=n,h=Ps();return t.createElement(t.Fragment,null,t.createElement(oe.A,{className:h.value},o),t.createElement(oe.A,{className:h.subvalue},u))}const Rs=(0,z.A)(n=>({root:{height:"100%",width:"315px",display:"flex",flexDirection:"column",marginRight:n.spacing(3)},value:{fontWeight:"bold",fontSize:18},header:{display:"flex",alignItems:"center",height:n.spacing(7.5),justifyContent:"space-between",borderBottom:`1px solid ${n.palette.grey[500]}`},filters:{display:"flex",flexDirection:"column","& > *":{marginTop:n.spacing(2)}}}),{name:"BackstageTableFilters"}),ws=n=>{var o;const u=Rs(),{onChangeFilters:h}=n,{t:C}=(0,b.ie)(pe),[L,k]=(0,t.useState)({...n.selectedFilters}),[te,fe]=(0,t.useState)(!1),ve=()=>{k({}),fe(Ke=>!Ke)};return(0,t.useEffect)(()=>{h(L)},[L,h]),t.createElement(oe.A,{className:u.root},t.createElement(oe.A,{className:u.header},t.createElement(oe.A,{className:u.value},C("table.filter.title")),t.createElement(de.A,{color:"primary",onClick:ve},C("table.filter.clearAll"))),t.createElement(oe.A,{className:u.filters},((o=n.filters)==null?void 0:o.length)&&n.filters.map(Ke=>t.createElement(So,{triggerReset:te,key:Ke.element.label,...Ke.element,selected:L[Ke.element.label],onChange:je=>k({...L,[Ke.element.label]:je})}))))};function Os(n){return t.createElement("tbody",{"data-testid":"loading-indicator"},t.createElement("tr",null,t.createElement("td",{colSpan:n.colSpan},t.createElement(oe.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",minHeight:"15rem"}},t.createElement(Jt.A,{size:"5rem"})))))}const _i={Add:(0,t.forwardRef)((n,o)=>t.createElement(Zt.A,{...n,ref:o})),Check:(0,t.forwardRef)((n,o)=>t.createElement(mn.A,{...n,ref:o})),Clear:(0,t.forwardRef)((n,o)=>t.createElement(kt.A,{...n,ref:o})),Delete:(0,t.forwardRef)((n,o)=>t.createElement(Sn.A,{...n,ref:o})),DetailPanel:(0,t.forwardRef)((n,o)=>t.createElement(jt.A,{...n,ref:o})),Edit:(0,t.forwardRef)((n,o)=>t.createElement(un.A,{...n,ref:o})),Export:(0,t.forwardRef)((n,o)=>t.createElement(wn.A,{...n,ref:o})),Filter:(0,t.forwardRef)((n,o)=>t.createElement($n.A,{...n,ref:o})),FirstPage:(0,t.forwardRef)((n,o)=>t.createElement(qn.A,{...n,ref:o})),LastPage:(0,t.forwardRef)((n,o)=>t.createElement(na.A,{...n,ref:o})),NextPage:(0,t.forwardRef)((n,o)=>t.createElement(jt.A,{...n,ref:o})),PreviousPage:(0,t.forwardRef)((n,o)=>t.createElement(Kt.A,{...n,ref:o})),ResetSearch:(0,t.forwardRef)((n,o)=>t.createElement(kt.A,{...n,ref:o})),Search:(0,t.forwardRef)((n,o)=>t.createElement($n.A,{...n,ref:o})),SortArrow:(0,t.forwardRef)((n,o)=>t.createElement(pn.A,{...n,ref:o})),ThirdStateCheck:(0,t.forwardRef)((n,o)=>t.createElement(kn.A,{...n,ref:o})),ViewColumn:(0,t.forwardRef)((n,o)=>t.createElement(gn.A,{...n,ref:o}))};function Ci(n,o){const u=o.split(".");let h=n[u[0]];for(let C=1;C<u.length;++C){if(h===void 0)return h;const L=u[C];h=h[L]}return h}const Ts=(0,w.A)(n=>({header:{padding:n.spacing(1,2,1,2.5),borderTop:`1px solid ${n.palette.grey.A100}`,borderBottom:`1px solid ${n.palette.grey.A100}`,fontWeight:n.typography.fontWeightBold,position:"static",wordBreak:"normal",textTransform:"uppercase"}}),{name:"BackstageTableHeader"})(en.rV),Pi=(0,w.A)(n=>({root:{padding:n.spacing(3,0,2.5,2.5)},title:{"& > h6":{fontWeight:n.typography.fontWeightBold}},searchField:{paddingRight:n.spacing(2)}}),{name:"BackstageTableToolbar"})(en.Nb),Is=(0,z.A)(n=>({root:{display:"flex",alignItems:"center",justifyContent:"space-between"},title:{fontWeight:n.typography.fontWeightBold,fontSize:18,whiteSpace:"nowrap"}}),{name:"BackstageTableFiltersContainer"}),Ds=(0,z.A)(()=>({root:{display:"flex",alignItems:"start"}}),{name:"BackstageTable"});function Ms(n,o){return n.map(u=>{var h;const C=(h=u.headerStyle)!=null?h:{};let L=u.cellStyle||{};if(u.highlight)if(C.color=o.palette.textContrast,typeof L=="object")L.fontWeight=o.typography.fontWeightBold;else{const k=L;L=(te,fe,ve)=>({...k(te,fe,ve),fontWeight:o.typography.fontWeightBold})}return{...u,headerStyle:C,cellStyle:L}})}function xs(n,o){return(0,Ae.transform)(n,(u,h,C)=>{(0,Ae.isEqual)(h,o[C])||(u[C]=h)})}const Si={search:"",filtersOpen:!1,filters:{}};function Ls(n){const{toolbarRef:o,setSearch:u,hasFilters:h,selectedFiltersLength:C,toggleFilters:L}=n,k=Is(),te=(0,t.useCallback)(fe=>{n.onSearchChanged(fe),u(fe)},[n,u]);return h?t.createElement(oe.A,{className:k.root},t.createElement(oe.A,{className:k.root},t.createElement(A.A,{onClick:L,"aria-label":"filter list"},t.createElement($n.A,null)),t.createElement(r.A,{className:k.title},"Filters (",C,")")),t.createElement(Pi,{...n,ref:o,onSearchChanged:te})):t.createElement(Pi,{...n,ref:o,onSearchChanged:te})}function Ri(n){const{data:o,columns:u,emptyContent:h,options:C,title:L,subtitle:k,localization:te,filters:fe,initialState:ve,onStateChange:Ke,components:je,isLoading:Lt,...Ht}=n,Yt=Ds(),Qn=(0,ee.A)(),Hn={...Si,...ve},[pa,Qa]=(0,t.useState)(Hn.filtersOpen),lr=(0,t.useCallback)(()=>Qa(pr=>!pr),[Qa]),[Zn,Wa]=(0,t.useState)(Hn.filters),[Xa,cr]=(0,t.useState)(Hn.search);(0,t.useEffect)(()=>{if(Ke){const pr=xs({search:Xa,filtersOpen:pa,filters:Zn},Si);Ke(pr)}},[Xa,pa,Zn,Ke]);const xr=(0,t.useCallback)(pr=>{var Ao;return(Ao=u.find(Fr=>Fr.title===pr))==null?void 0:Ao.field},[u]),so=(0,t.useMemo)(()=>{if(typeof o=="function"||!Zn)return o;const pr=Object.values(Zn);return o&&pr.flat().length?o.filter(Fr=>!!Object.entries(Zn).filter(([,bo])=>!!bo.length).every(([bo,Hr])=>{const Vr=Ci(Fr,xr(bo));return Array.isArray(Vr)&&Array.isArray(Hr)?Vr.some(ui=>Hr.includes(ui)):Array.isArray(Vr)?Vr.includes(Hr):Array.isArray(Hr)?Hr.includes(Vr):Vr===Hr})):o},[o,Zn,xr]),Nr=Object.values(Zn).flat().length,Gr=!!(fe!=null&&fe.length),ci=(0,t.useCallback)(pr=>t.createElement(Ls,{setSearch:cr,hasFilters:Gr,selectedFiltersLength:Nr,toggleFilters:lr,...pr}),[lr,Gr,Nr,cr]),Xr=typeof o!="function"&&o.length===0,Fo=u.length,xa=(0,t.useMemo)(()=>Bs({hasNoRows:Xr,emptyContent:h,columnCount:Fo,loading:Lt}),[Xr,h,Fo,Lt]);return t.createElement(oe.A,{className:Yt.root},pa&&o&&typeof o!="function"&&(fe==null?void 0:fe.length)&&t.createElement(ws,{filters:Us(fe,o,u),selectedFilters:Zn,onChangeFilters:Wa}),t.createElement(en.Ay,{components:{Header:Ts,Body:xa,Toolbar:ci,...je},options:C,columns:Ms(u,Qn),icons:_i,title:t.createElement(t.Fragment,null,t.createElement(r.A,{variant:"h5",component:"h2"},L),k&&t.createElement(r.A,{color:"textSecondary",variant:"body1"},k)),data:so,style:{width:"100%"},localization:{toolbar:{searchPlaceholder:"Filter",searchTooltip:"Filter"},...te},...Ht}))}Ri.icons=Object.freeze(_i);function Bs({columnCount:n,emptyContent:o,hasNoRows:u,loading:h}){return C=>h?t.createElement(Os,{colSpan:n}):o&&u?t.createElement("tbody",null,t.createElement("tr",null,t.createElement("td",{colSpan:n},o))):t.createElement(en.C6,{...C})}function Us(n,o,u){const h=L=>{const k=new Set,te=fe=>{fe!=null&&k.add(fe)};return o&&o.forEach(fe=>{var ve;const Ke=Ci(fe,(ve=u.find(je=>je.title===L))==null?void 0:ve.field);Array.isArray(Ke)?Ke.forEach(te):te(Ke)}),k},C=L=>({placeholder:"All results",label:L.column,multiple:L.type==="multiple-select",items:[...h(L.column)].sort().map(k=>({label:k,value:k}))});return n.map(L=>({type:L.type,element:C(L)}))}function $s(n,o){const u=n[n.length-1];if(u)return u>=.9?o.palette.status.ok:u>=.5?o.palette.status.warning:o.palette.status.error}function Cc(n){var o;const u=useTheme();return n.data?React.createElement(Sparklines,{width:120,height:30,min:0,max:1,...n},n.title&&React.createElement("title",null,n.title),React.createElement(SparklinesLine,{color:(o=n.color)!=null?o:$s(n.data,u)})):null}const ks=n=>(0,z.A)(o=>({container:{width:"100%",display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"flex-end",alignItems:"center",marginBottom:o.spacing(2),textAlign:n.textAlign},leftItemsBox:{flex:"1 1 auto",minWidth:0,overflow:"visible"},rightItemsBox:{flex:"0 1 auto",display:"flex",flexDirection:"row",flexWrap:"wrap",alignItems:"center",marginLeft:o.spacing(1),minWidth:0,overflow:"visible"},description:{},title:{display:"inline-flex",marginBottom:0}}),{name:"BackstageContentHeader"}),Ns=({title:n="Unknown page",className:o})=>t.createElement(r.A,{variant:"h4",component:"h2",className:o,"data-testid":"header-title"},n);function wi(n){const{description:o,title:u,titleComponent:h=void 0,children:C,textAlign:L="left"}=n,k=ks({textAlign:L})(),te=h||t.createElement(Ns,{title:u,className:k.title});return t.createElement(t.Fragment,null,t.createElement(Oe.m,{title:u}),t.createElement(oe.A,{className:k.container},t.createElement(oe.A,{className:k.leftItemsBox},te,o&&t.createElement(r.A,{className:k.description,variant:"body2"},o)),t.createElement(oe.A,{className:k.rightItemsBox},C)))}const Fs=(0,z.A)(n=>({micDrop:{maxWidth:"60%",bottom:n.spacing(2),right:n.spacing(2),[n.breakpoints.down("xs")]:{maxWidth:"96%",bottom:"unset",right:"unset",margin:n.spacing(10,"auto",4)}}}),{name:"BackstageErrorPageMicDrop"}),Ws=()=>{const n=Fs();return t.createElement("img",{src:_n,className:n.micDrop,alt:"Girl dropping mic from her hands"})},Ks=(0,z.A)(n=>({title:{paddingBottom:n.spacing(5),[n.breakpoints.down("xs")]:{paddingBottom:n.spacing(4),fontSize:n.typography.h3.fontSize}}}),{name:"BackstageErrorPageStackDetails"});function zs(n){const{stack:o}=n,u=Ks(),{t:h}=(0,b.ie)(pe),[C,L]=(0,t.useState)(!1);return C?t.createElement(t.Fragment,null,t.createElement(r.A,{variant:"h6",className:u.title},t.createElement(Sa,{to:"#",onClick:()=>L(!1)},h("errorPage.showLessDetails"))),t.createElement($e,{text:o,language:"text",showCopyCodeButton:!0,showLineNumbers:!0})):t.createElement(r.A,{variant:"h6",className:u.title},t.createElement(Sa,{to:"#",onClick:()=>L(!0)},h("errorPage.showMoreDetails")))}const js=(0,z.A)(n=>({container:{padding:n.spacing(8),[n.breakpoints.down("xs")]:{padding:n.spacing(2)}},title:{paddingBottom:n.spacing(5),[n.breakpoints.down("xs")]:{paddingBottom:n.spacing(4),fontSize:n.typography.h3.fontSize}},subtitle:{color:n.palette.textSubtle}}),{name:"BackstageErrorPage"});function Gs(n){const{status:o="",statusMessage:u,additionalInfo:h,supportUrl:C,stack:L}=n,k=js(),te=(0,X.Zp)(),fe=vi(),{t:ve}=(0,b.ie)(pe);return t.createElement(P.A,{container:!0,className:k.container},t.createElement(P.A,{item:!0,xs:12,sm:8,md:4},t.createElement(r.A,{"data-testid":"error",variant:"body1",className:k.subtitle},ve("errorPage.subtitle",{status:o,statusMessage:u})),t.createElement(r.A,{variant:"body1",className:k.subtitle},h),t.createElement(r.A,{variant:"h2",className:k.title},ve("errorPage.title")),t.createElement(r.A,{variant:"h6",className:k.title},t.createElement(Sa,{to:"#","data-testid":"go-back-link",onClick:()=>te(-1)},ve("errorPage.goBack")),"... or please"," ",t.createElement(Sa,{to:C||fe.url},"contact support")," if you think this is a bug."),L&&t.createElement(zs,{stack:L})),t.createElement(Ws,null))}const Hs=(0,w.A)({root:{textDecoration:"underline",cursor:"pointer"}},{name:"BackstageBreadcrumbsClickableText"})(r.A),qo=(0,w.A)({root:{textDecoration:"underline",color:"inherit"}},{name:"BackstageBreadcrumbsStyledBox"})(oe.A),Vs=(0,w.A)({root:{fontStyle:"italic"}},{name:"BreadcrumbsCurrentPage"})(oe.A);function Oi(n){const{children:o,...u}=n,[h,C]=t.useState(null),L=t.Children.toArray(o),[k,te,...fe]=L,ve=fe.length?fe.pop():L[L.length-1],Ke=L.length>3,je=Yt=>{C(Yt.currentTarget)},Lt=()=>{C(null)},Ht=!!h;return t.createElement(t.Fragment,null,t.createElement(Aa.A,{"aria-label":"breadcrumb",...u},L.length>1&&t.createElement(qo,{clone:!0},k),L.length>2&&t.createElement(qo,{clone:!0},te),Ke&&t.createElement(Hs,{onClick:je},"..."),t.createElement(Vs,null,ve)),t.createElement(I.Ay,{open:Ht,anchorEl:h,onClose:Lt,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}},t.createElement(dt.A,null,fe.map((Yt,Qn)=>t.createElement(Qe.A,{key:Qn,button:!0},t.createElement(qo,{clone:!0},Yt))))))}const Do=72,Ti=24,Ii=18,kr={drawerWidthClosed:Do,drawerWidthOpen:224,defaultOpenDelayMs:100,defaultCloseDelayMs:0,defaultFadeDuration:200,logoHeight:32,iconContainerWidth:Do,iconSize:Do-Ti*2,iconPadding:Ti,selectedIndicatorWidth:3,userBadgePadding:Ii,userBadgeDiameter:Do-Ii*2,mobileSidebarHeight:56},Ys=n=>({...kr,...n,iconContainerWidth:kr.drawerWidthClosed,iconSize:kr.drawerWidthClosed-kr.iconPadding*2,userBadgeDiameter:kr.drawerWidthClosed-kr.userBadgePadding*2}),Di={drawerWidthClosed:0,drawerWidthOpen:202,defaultOpenDelayMs:kr.defaultOpenDelayMs+200},Js=n=>({...Di,...n}),Pc="@backstage/core/sidebar-intro-dismissed",yr=(0,t.createContext)({sidebarConfig:kr,submenuConfig:Di}),ei=(0,t.createContext)({isHoveredOn:!1,setIsHoveredOn:()=>{}}),Mi={isOpen:!1,setOpen:()=>{}},xi=(0,t.createContext)(Mi),Li=(0,ke.tK)("sidebar-open-state-context");function Bi(n){const{children:o,value:u}=n;return t.createElement(xi.Provider,{value:u},t.createElement(Li.Provider,{value:(0,ke.Bl)({1:u})},o))}const Mo=()=>{const n=(0,t.useContext)(Li),o=(0,t.useContext)(xi);if(n===void 0)return o||Mi;const u=n.atVersion(1);if(u===void 0)throw new Error("No context found for version 1.");return u},Ui=(0,t.createContext)({selectedMenuItemIndex:-1,setSelectedMenuItemIndex:()=>{}}),$i={isPinned:!0,toggleSidebarPinState:()=>{},isMobile:!1},ki=(0,t.createContext)($i),Ni=(0,ke.tK)("sidebar-pin-state-context");function Qs(n){const{children:o,value:u}=n;return t.createElement(ki.Provider,{value:u},t.createElement(Ni.Provider,{value:(0,ke.Bl)({1:u})},o))}const xo=()=>{const n=(0,t.useContext)(Ni),o=(0,t.useContext)(ki);if(n===void 0)return o||$i;const u=n.atVersion(1);if(u===void 0)throw new Error("No context found for version 1.");return u},Xs=(0,z.A)(n=>({root:{flexGrow:0,margin:n.spacing(0,2),color:n.palette.navigation.color},selected:o=>({color:`${n.palette.navigation.selectedColor}!important`,borderTop:`solid ${o.sidebarConfig.selectedIndicatorWidth}px ${n.palette.navigation.indicator}`,marginTop:"-1px"}),label:{display:"none"}})),Zs=n=>{const{to:o,label:u,icon:h,value:C}=n,{sidebarConfig:L}=(0,t.useContext)(yr),k=Xs({sidebarConfig:L}),te=(0,X.zy)(),{selectedMenuItemIndex:fe,setSelectedMenuItemIndex:ve}=(0,t.useContext)(Ui),Ke=(Lt,Ht)=>{ve(Ht===fe?-1:Ht)},je=C===fe&&fe>=0||C!==fe&&!(fe>=0)&&o===te.pathname;return t.createElement(it.A,{"aria-label":u,label:u,icon:h,component:Sa,to:o||te.pathname,onChange:Ke,value:C,selected:je,classes:k})},ti=n=>{const{children:o,to:u,label:h,icon:C,value:L}=n,{isMobile:k}=xo();return k?t.createElement(Zs,{to:u,label:h,icon:C,value:L}):t.createElement(t.Fragment,null,o)},Fi=(0,z.A)(n=>({root:{position:"fixed",backgroundColor:n.palette.navigation.background,color:n.palette.navigation.color,bottom:0,left:0,right:0,zIndex:n.zIndex.snackbar,borderTop:"1px solid #383838","@media print":{display:"none"}},overlay:o=>({background:n.palette.navigation.background,width:"100%",bottom:`${o.sidebarConfig.mobileSidebarHeight}px`,height:`calc(100% - ${o.sidebarConfig.mobileSidebarHeight}px)`,flex:"0 1 auto",overflow:"auto"}),overlayHeader:{display:"flex",color:n.palette.navigation.color,alignItems:"center",justifyContent:"space-between",padding:n.spacing(2,3)},overlayHeaderClose:{color:n.palette.navigation.color},marginMobileSidebar:o=>({marginBottom:`${o.sidebarConfig.mobileSidebarHeight}px`})})),el=n=>(0,Ae.orderBy)(n,({props:{priority:o}})=>Number.isInteger(o)?o:-1,"desc"),tl=t.createElement(ti).type,nl=({children:n,label:o="Menu",open:u,onClose:h})=>{const{sidebarConfig:C}=(0,t.useContext)(yr),L=Fi({sidebarConfig:C});return t.createElement(J.Ay,{anchor:"bottom",open:u,onClose:h,ModalProps:{BackdropProps:{classes:{root:L.marginMobileSidebar}}},classes:{root:L.marginMobileSidebar,paperAnchorBottom:L.overlay}},t.createElement(oe.A,{className:L.overlayHeader},t.createElement(r.A,{variant:"h3"},o),t.createElement(A.A,{onClick:h,classes:{root:L.overlayHeaderClose}},t.createElement(q.A,null))),t.createElement(oe.A,{component:"nav"},n))},al=n=>{const{sidebarConfig:o}=(0,t.useContext)(yr),{children:u}=n,h=Fi({sidebarConfig:o}),C=(0,X.zy)(),[L,k]=(0,t.useState)(-1);(0,t.useEffect)(()=>{k(-1)},[C.pathname]);let te=(0,l.OJ)(u,ve=>ve.getElements().filter(Ke=>Ke.type===tl));if(u)te.length?te=el(te):te.push(t.createElement(ti,{key:"default_menu",icon:t.createElement(ge.A,null)},u));else return null;const fe=L>=0&&!te[L].props.to;return t.createElement(Bi,{value:{isOpen:!0,setOpen:()=>{}}},t.createElement(Ui.Provider,{value:{selectedMenuItemIndex:L,setSelectedMenuItemIndex:k}},t.createElement(nl,{label:te[L]&&te[L].props.label,open:fe,onClose:()=>k(-1)},te[L]&&te[L].props.children),t.createElement(Oa.A,{className:h.root,"data-testid":"mobile-sidebar-root",component:"nav"},te)))},Wi={getSidebarPinState(){let n;try{n=JSON.parse(window.localStorage.getItem("sidebarPinState")||"true")}catch{return!0}return!!n},setSidebarPinState(n){return window.localStorage.setItem("sidebarPinState",JSON.stringify(n))}},rl=(0,z.A)(n=>({root:{width:"100%",transition:"padding-left 0.1s ease-out",isolation:"isolate",[n.breakpoints.up("sm")]:{paddingLeft:o=>o.isPinned?o.sidebarConfig.drawerWidthOpen:o.sidebarConfig.drawerWidthClosed},[n.breakpoints.down("xs")]:{paddingBottom:o=>o.sidebarConfig.mobileSidebarHeight},"@media print":{padding:"0px !important"}},content:{zIndex:0,isolation:"isolate","&:focus":{outline:0}}}),{name:"BackstageSidebarPage"}),Ki=(0,t.createContext)({content:{contentRef:void 0}});function ol(n){const[o,u]=(0,t.useState)(()=>Wi.getSidebarPinState()),{sidebarConfig:h}=(0,t.useContext)(yr),C=(0,t.useRef)(null),L=(0,t.useMemo)(()=>({content:{contentRef:C}}),[C]);(0,t.useEffect)(()=>{Wi.setSidebarPinState(o)},[o]);const k=(0,Ge.A)(ve=>ve.breakpoints.down("xs"),{noSsr:!0}),te=()=>u(!o),fe=rl({isPinned:o,sidebarConfig:h});return t.createElement(Qs,{value:{isPinned:o,toggleSidebarPinState:te,isMobile:k}},t.createElement(Ki.Provider,{value:L},t.createElement(oe.A,{className:fe.root},n.children)))}function ni(){const{content:n}=(0,t.useContext)(Ki);return{focusContent:(0,t.useCallback)(()=>{var u,h;(h=(u=n==null?void 0:n.contentRef)==null?void 0:u.current)==null||h.focus()},[n]),contentRef:n==null?void 0:n.contentRef}}const zi=(0,z.A)(n=>({drawer:{display:"flex",flexFlow:"column nowrap",alignItems:"flex-start",position:"fixed",left:0,top:0,bottom:0,zIndex:n.zIndex.appBar,background:n.palette.navigation.background,overflowX:"hidden",msOverflowStyle:"none",scrollbarWidth:"none",transition:n.transitions.create("width",{easing:n.transitions.easing.sharp,duration:n.transitions.duration.shortest}),"& > *":{flexShrink:0},"&::-webkit-scrollbar":{display:"none"},"@media print":{display:"none"}},drawerWidth:o=>({width:o.sidebarConfig.drawerWidthClosed}),drawerOpen:o=>({width:o.sidebarConfig.drawerWidthOpen,transition:n.transitions.create("width",{easing:n.transitions.easing.sharp,duration:n.transitions.duration.shorter})}),visuallyHidden:{top:0,position:"absolute",zIndex:1e3,transform:"translateY(-200%)","&:focus":{transform:"translateY(5px)"}}}),{name:"BackstageSidebar"}),il=n=>{const{sidebarConfig:o}=(0,t.useContext)(yr),{openDelayMs:u=o.defaultOpenDelayMs,closeDelayMs:h=o.defaultCloseDelayMs,disableExpandOnHover:C,children:L}=n,k=zi({sidebarConfig:o}),te=(0,Ge.A)(pa=>pa.breakpoints.down("md"),{noSsr:!0}),[fe,ve]=(0,t.useState)(0),Ke=(0,t.useRef)(),{isPinned:je,toggleSidebarPinState:Lt}=xo(),Ht=()=>{je||C||(Ke.current&&(clearTimeout(Ke.current),Ke.current=void 0),fe!==2&&!te&&(Ke.current=window.setTimeout(()=>{Ke.current=void 0,ve(2)},u),ve(1)))},Yt=()=>{je||C||(Ke.current&&(clearTimeout(Ke.current),Ke.current=void 0),fe===1?ve(0):fe===2&&(Ke.current=window.setTimeout(()=>{Ke.current=void 0,ve(0)},h)))},Qn=fe===2&&!te||je,Hn=pa=>{pa?(ve(2),Lt()):(ve(0),Lt())};return t.createElement("nav",{style:{},"aria-label":"sidebar nav"},t.createElement(ll,null),t.createElement(Bi,{value:{isOpen:Qn,setOpen:Hn}},t.createElement(oe.A,{className:k.root,"data-testid":"sidebar-root",onMouseEnter:C?()=>{}:Ht,onFocus:C?()=>{}:Ht,onMouseLeave:C?()=>{}:Yt,onBlur:C?()=>{}:Yt},t.createElement(oe.A,{className:ae()(k.drawer,k.drawerWidth,{[k.drawerOpen]:Qn})},L))))},sl=n=>{var o,u;const h=Ys((o=n.sidebarOptions)!=null?o:{}),C=Js((u=n.submenuOptions)!=null?u:{}),{children:L,disableExpandOnHover:k,openDelayMs:te,closeDelayMs:fe}=n,{isMobile:ve}=xo();return ve?t.createElement(al,null,L):t.createElement(yr.Provider,{value:{sidebarConfig:h,submenuConfig:C}},t.createElement(il,{openDelayMs:te,closeDelayMs:fe,disableExpandOnHover:k},L))};function ll(){const{sidebarConfig:n}=(0,t.useContext)(yr),{focusContent:o,contentRef:u}=ni(),h=zi({sidebarConfig:n}),{t:C}=(0,b.ie)(pe);return u!=null&&u.current?t.createElement(de.A,{onClick:o,variant:"contained",className:ae()(h.visuallyHidden)},C("skipToContent")):null}function Lo(n,o,u=!1){const h=new URLSearchParams(o.search).toString(),C=Y().parse(h),L=new URLSearchParams(n.search).toString(),k=Y().parse(L),te=u?Ae.isEqual:Ae.isMatch;return(0,Ae.isEqual)(o.pathname,n.pathname)&&te(k,C)}const cl=(0,z.A)(n=>{var o,u;return{item:{height:48,width:"100%","&:hover":{background:((o=n.palette.navigation.navItem)==null?void 0:o.hoverBackground)||"#6f6f6f",color:n.palette.navigation.selectedColor},display:"flex",alignItems:"center",color:n.palette.navigation.color,padding:n.spacing(2.5),cursor:"pointer",position:"relative",background:"none",border:"none"},itemContainer:{width:"100%"},selected:{background:"#6f6f6f",color:n.palette.common.white},label:{margin:n.spacing(1.75),marginLeft:n.spacing(1),fontSize:n.typography.body2.fontSize,whiteSpace:"nowrap",overflow:"hidden","text-overflow":"ellipsis",lineHeight:1},subtitle:{fontSize:10,whiteSpace:"nowrap",overflow:"hidden","text-overflow":"ellipsis"},dropdownArrow:{position:"absolute",right:21},dropdown:{display:"flex",flexDirection:"column",alignItems:"end"},dropdownItem:{width:"100%",padding:"10px 0 10px 0","&:hover":{background:((u=n.palette.navigation.navItem)==null?void 0:u.hoverBackground)||"#6f6f6f",color:n.palette.navigation.selectedColor}},textContent:{color:n.palette.navigation.color,paddingLeft:n.spacing(4),paddingRight:n.spacing(1),fontSize:n.typography.body2.fontSize,whiteSpace:"nowrap",overflow:"hidden","text-overflow":"ellipsis"}}},{name:"BackstageSidebarSubmenuItem"}),ul=n=>{const{title:o,subtitle:u,to:h,icon:C,dropdownItems:L,exact:k}=n,te=cl(),{setIsHoveredOn:fe}=(0,t.useContext)(ei),ve=()=>{fe(!1)},Ke=(0,X.x$)(h!=null?h:""),je=(0,X.zy)();let Lt=Lo(je,Ke,k);const[Ht,Yt]=(0,t.useState)(!1),Qn=()=>{Yt(!Ht)};return L!==void 0?(L.some(Hn=>{const pa=(0,H.o1)(Hn.to);return Lt=Lo(je,pa,k),Lt}),t.createElement(oe.A,{className:te.itemContainer},t.createElement(Ve.Ay,{title:o,enterDelay:500,enterNextDelay:500},t.createElement(de.A,{role:"button",onClick:Qn,onTouchStart:Hn=>Hn.stopPropagation(),className:ae()(te.item,Lt?te.selected:void 0)},C&&t.createElement(C,{fontSize:"small"}),t.createElement(r.A,{variant:"subtitle1",component:"span",className:te.label},o,t.createElement("br",null),u&&t.createElement(r.A,{variant:"caption",component:"span",className:te.subtitle},u)),Ht?t.createElement(At.A,{className:te.dropdownArrow}):t.createElement(St.A,{className:te.dropdownArrow}))),L&&Ht&&t.createElement(oe.A,{className:te.dropdown},L.map((Hn,pa)=>t.createElement(Ve.Ay,{key:pa,title:Hn.title,enterDelay:500,enterNextDelay:500},t.createElement(Sa,{to:Hn.to,underline:"none",className:te.dropdownItem,onClick:ve,onTouchStart:Qa=>Qa.stopPropagation()},t.createElement(r.A,{component:"span",className:te.textContent},Hn.title))))))):t.createElement(oe.A,{className:te.itemContainer},t.createElement(Ve.Ay,{title:o,enterDelay:500,enterNextDelay:500},t.createElement(Sa,{to:h,underline:"none",className:ae()(te.item,Lt?te.selected:void 0),onClick:ve,onTouchStart:Hn=>Hn.stopPropagation()},C&&t.createElement(C,{fontSize:"small"}),t.createElement(r.A,{variant:"subtitle1",component:"span",className:te.label},o,t.createElement("br",null),u&&t.createElement(r.A,{variant:"caption",component:"span",className:te.subtitle},u)))))},dl=(0,z.A)(n=>({root:{zIndex:1e3,position:"relative",overflow:"visible",width:n.spacing(7)+1},drawer:o=>{var u,h;return{display:"flex",flexFlow:"column nowrap",alignItems:"flex-start",position:"fixed",[n.breakpoints.up("sm")]:{marginLeft:o.left,transition:n.transitions.create("margin-left",{easing:n.transitions.easing.sharp,duration:n.transitions.duration.shortest})},top:0,bottom:0,padding:0,background:(h=(u=n.palette.navigation.submenu)==null?void 0:u.background)!=null?h:"#404040",overflowX:"hidden",msOverflowStyle:"none",scrollbarWidth:"none",cursor:"default",width:o.submenuConfig.drawerWidthClosed,transitionDelay:`${o.submenuConfig.defaultOpenDelayMs}ms`,"& > *":{flexShrink:0},"&::-webkit-scrollbar":{display:"none"}}},drawerOpen:o=>({width:o.submenuConfig.drawerWidthOpen,[n.breakpoints.down("xs")]:{width:"100%",position:"relative",paddingLeft:n.spacing(3),left:0,top:0}}),title:{fontSize:n.typography.h5.fontSize,fontWeight:n.typography.fontWeightMedium,color:n.palette.common.white,padding:n.spacing(2.5),[n.breakpoints.down("xs")]:{display:"none"}}}),{name:"BackstageSidebarSubmenu"}),ji=n=>{const{isOpen:o}=Mo(),{sidebarConfig:u,submenuConfig:h}=(0,t.useContext)(yr),C=o?u.drawerWidthOpen:u.drawerWidthClosed,L=dl({left:C,submenuConfig:h}),{isHoveredOn:k}=(0,t.useContext)(ei),[te,fe]=(0,t.useState)(!1);return(0,t.useEffect)(()=>{fe(k)},[k]),t.createElement(oe.A,{className:ae()(L.drawer,{[L.drawerOpen]:te})},t.createElement(r.A,{variant:"h5",component:"span",className:L.title},n.title),n.children)},ml=(0,z.A)({iconContainer:{display:"flex",position:"relative",width:"100%"},arrow1:{right:"6px",position:"absolute"}}),pl=()=>{const n=ml();return React.createElement(Box,{className:n.iconContainer},React.createElement(Box,{className:n.arrow1},React.createElement(ArrowBackIosIcon,{style:{fontSize:"12px"}})),React.createElement(Box,null,React.createElement(ArrowBackIosIcon,{style:{fontSize:"12px"}})))},hl=(0,z.A)({iconContainer:{display:"flex",position:"relative",width:"100%"},arrow1:{right:"6px",position:"absolute"}}),gl=()=>{const n=hl();return React.createElement(Box,{className:n.iconContainer},React.createElement(Box,{className:n.arrow1},React.createElement(ArrowForwardIosIcon,{style:{fontSize:"12px"}})),React.createElement(Box,null,React.createElement(ArrowForwardIosIcon,{style:{fontSize:"12px"}})))},fl=n=>(0,z.A)(o=>{var u,h,C,L;return{root:{color:o.palette.navigation.color,display:"flex",flexFlow:"row nowrap",alignItems:"center",height:48,cursor:"pointer"},buttonItem:{background:"none",border:"none",width:"100%",margin:0,padding:0,textAlign:"inherit",font:"inherit",textTransform:"none"},closed:{width:n.drawerWidthClosed,justifyContent:"center"},open:{[o.breakpoints.up("sm")]:{width:n.drawerWidthOpen}},highlightable:{"&:hover":{background:(h=(u=o.palette.navigation.navItem)==null?void 0:u.hoverBackground)!=null?h:"#404040"}},highlighted:{background:(L=(C=o.palette.navigation.navItem)==null?void 0:C.hoverBackground)!=null?L:"#404040"},label:{fontWeight:"bold",whiteSpace:"nowrap",lineHeight:"auto",flex:"3 1 auto",width:"110px",overflow:"hidden","text-overflow":"ellipsis"},iconContainer:{boxSizing:"border-box",height:"100%",width:n.iconContainerWidth,marginRight:-o.spacing(2),display:"flex",alignItems:"center",justifyContent:"center",lineHeight:"0"},searchRoot:{marginBottom:12},searchField:{color:"#b5b5b5",fontWeight:o.typography.fontWeightBold,fontSize:o.typography.fontSize},searchFieldHTMLInput:{padding:o.spacing(2,0,2)},searchContainer:{width:n.drawerWidthOpen-n.iconContainerWidth},secondaryAction:{width:o.spacing(6),textAlign:"center",marginRight:o.spacing(1)},closedItemIcon:{width:"100%",justifyContent:"center"},submenuArrow:{display:"flex"},expandButton:{background:"none",border:"none",color:o.palette.navigation.color,width:"100%",cursor:"pointer",position:"relative",height:48},arrows:{position:"absolute",right:10},selected:{"&$root":{borderLeft:`solid ${n.selectedIndicatorWidth}px ${o.palette.navigation.indicator}`,color:o.palette.navigation.selectedColor},"&$closed":{width:n.drawerWidthClosed},"& $closedItemIcon":{paddingRight:n.selectedIndicatorWidth},"& $iconContainer":{marginLeft:-n.selectedIndicatorWidth}}}},{name:"BackstageSidebarItem"});function Bo(n){return(0,t.useMemo)(()=>fl(n),[n])()}const El=(n,o)=>(0,l.OJ)(n.props.children,u=>{let h=!1;return u.getElements().forEach(({props:{to:C,dropdownItems:L}})=>{if(!h){if(L!=null&&L.length){L.forEach(({to:k})=>h=h||Lo(o,(0,H.o1)(k)));return}C&&(h=Lo(o,(0,H.o1)(C)))}}),h},[o.pathname]);function ai(n){return n.to===void 0}const vl=t.createElement(ji).type,yl=t.forwardRef(function({to:o,end:u,style:h,className:C,activeStyle:L,caseSensitive:k,activeClassName:te="active","aria-current":fe="page",...ve},Ke){let{pathname:je}=(0,X.zy)(),{pathname:Lt}=(0,X.x$)(o);k||(je=je.toLocaleLowerCase("en-US"),Lt=Lt.toLocaleLowerCase("en-US"));let Ht=je===Lt;!Ht&&!u&&(Ht=je.startsWith(`${Lt}/`));const Yt=Ht?fe:void 0;return t.createElement(N.N_,{...ve,to:o,ref:Ke,"aria-current":Yt,style:{...h,...Ht?L:void 0},className:ae()([typeof C!="function"?C:void 0,Ht?te:void 0])})}),Gi=(0,t.forwardRef)((n,o)=>{const{icon:u,text:h,hasNotifications:C=!1,hasSubmenu:L=!1,disableHighlight:k=!1,onClick:te,noTrack:fe,children:ve,className:Ke,...je}=n,{sidebarConfig:Lt}=(0,t.useContext)(yr),Ht=Bo(Lt),{isOpen:Yt}=Mo(),Qn=!Yt&&L?{display:"flex",marginLeft:"20px"}:{lineHeight:"0"},Hn=t.createElement(oe.A,{style:Qn},t.createElement(u,{fontSize:"small"}),!Yt&&L?t.createElement(ie.A,{fontSize:"small"}):t.createElement(t.Fragment,null)),pa=t.createElement(cn.A,{color:"secondary",variant:"dot",overlap:"circular",invisible:!C,className:ae()({[Ht.closedItemIcon]:!Yt})},Hn),Qa=t.createElement(t.Fragment,null,t.createElement(oe.A,{"data-testid":"login-button",className:Ht.iconContainer},pa),h&&t.createElement(r.A,{variant:"subtitle2",component:"span",className:Ht.label},h),t.createElement("div",{className:Ht.secondaryAction},ve)),lr=Yt?Qa:pa,Zn={onClick:te,className:ae()(Ke,Ht.root,Yt?Ht.open:Ht.closed,ai(n)&&Ht.buttonItem,{[Ht.highlightable]:!k})},Wa=(0,l.st)(),{pathname:Xa}=(0,X.x$)(!ai(n)&&n.to?n.to:""),cr=(0,t.useCallback)(xr=>{if(!fe){const so="click",Nr=h!=null?h:"Sidebar Item",Gr=Xa?{attributes:{to:Xa}}:void 0;Wa.captureEvent(so,Nr,Gr)}te==null||te(xr)},[Wa,h,Xa,fe,te]);return ai(n)?t.createElement(de.A,{role:"button","aria-label":h,...Zn,ref:o,onClick:cr},lr):t.createElement(yl,{...Zn,activeClassName:Ht.selected,to:n.to?n.to:"",ref:o,"aria-label":h||n.to,...je,onClick:cr},lr)}),Al=({children:n,...o})=>{const{sidebarConfig:u}=(0,t.useContext)(yr),h=Bo(u),[C,L]=(0,t.useState)(!1),k=(0,X.zy)(),te=El(n,k),fe=(0,Ge.A)(Lt=>Lt.breakpoints.down("sm")),ve=()=>{L(!0)},Ke=()=>{L(!1)},je=()=>fe?C?t.createElement(At.A,{fontSize:"small",className:h.submenuArrow}):t.createElement(St.A,{fontSize:"small",className:h.submenuArrow}):!C&&t.createElement(ie.A,{fontSize:"small",className:h.submenuArrow});return t.createElement(ei.Provider,{value:{isHoveredOn:C,setIsHoveredOn:L}},t.createElement("div",{"data-testid":"item-with-submenu",onMouseLeave:Ke,onTouchStart:C?Ke:ve,onMouseEnter:ve,className:ae()(C&&h.highlighted)},t.createElement(Gi,{hasSubmenu:!0,className:te?h.selected:"",...o},je()),C&&n))},Hi=(0,t.forwardRef)((n,o)=>{const[u]=(0,l.OJ)(n.children,h=>h.getElements().filter(C=>C.type===vl));return u?t.createElement(Al,{...n},u):t.createElement(Gi,{...n,ref:o})});function Sc(n){const{sidebarConfig:o}=useContext(yr),[u,h]=useState(""),C=Bo(o),L=n.icon?n.icon:SearchIcon,k=()=>{n.onSearch(u),h("")},te=je=>{je.key==="Enter"&&(je.preventDefault(),k())},fe=je=>{h(je.target.value)},ve=je=>{je.preventDefault(),je.stopPropagation()},Ke=je=>{k(),je.preventDefault()};return React.createElement(Box,{className:C.searchRoot},React.createElement(Hi,{icon:L,to:n.to,onClick:Ke,disableHighlight:!0},React.createElement(TextField,{placeholder:"Search",value:u,onClick:ve,onChange:fe,onKeyDown:te,className:C.searchContainer,InputProps:{disableUnderline:!0,className:C.searchField},inputProps:{className:C.searchFieldHTMLInput}})))}const bl=(0,y.A)("div")({flex:1},{name:"BackstageSidebarSpace"}),Rc=(0,y.A)("div")({height:8},{name:"BackstageSidebarSpacer"}),_l=(0,y.A)("hr")(({theme:n})=>({height:1,width:"100%",background:"#383838",border:"none",margin:n.spacing(1.2,0)}),{name:"BackstageSidebarDivider"}),Cl=n=>({overflowY:"auto","&::-webkit-scrollbar":{backgroundColor:n.palette.background.default,width:"5px",borderRadius:"5px"},"&::-webkit-scrollbar-thumb":{backgroundColor:n.palette.text.secondary,borderRadius:"5px"}}),Pl=(0,y.A)("div")(({theme:n})=>{const o=Cl(n);return{flex:"0 1 auto",overflowX:"hidden",width:"100%",minHeight:"48px",overflowY:"hidden","@media (hover: none)":o,"&:hover":o}}),wc=()=>{const{sidebarConfig:n}=useContext(yr),o=Bo(n),{isOpen:u,setOpen:h}=Mo();if(useMediaQuery(k=>k.breakpoints.down("md"),{noSsr:!0}))return null;const L=()=>{h(!u)};return React.createElement(Button$1,{role:"button",onClick:L,className:o.expandButton,"aria-label":"Expand Sidebar","data-testid":"sidebar-expand-button"},React.createElement(Box,{className:o.arrows},u?React.createElement(pl,null):React.createElement(gl,null)))},Sl=(0,z.A)(n=>({header:{gridArea:"pageHeader",padding:n.spacing(3),width:"100%",boxShadow:n.shadows[4],position:"relative",zIndex:100,display:"flex",flexDirection:"row",alignItems:"center",backgroundImage:n.page.backgroundImage,backgroundPosition:"center",backgroundSize:"cover",[n.breakpoints.down("sm")]:{flexWrap:"wrap"}},leftItemsBox:{maxWidth:"100%",flexGrow:1},rightItemsBox:{width:"auto",alignItems:"center"},title:{color:n.page.fontColor,wordBreak:"break-word",fontSize:n.typography.h3.fontSize,marginBottom:0},subtitle:{color:n.page.fontColor,opacity:.8,display:"inline-block",marginTop:n.spacing(1),maxWidth:"75ch"},type:{textTransform:"uppercase",fontSize:11,opacity:.8,marginBottom:n.spacing(1),color:n.page.fontColor},breadcrumb:{color:n.page.fontColor},breadcrumbType:{fontSize:"inherit",opacity:.7,marginRight:-n.spacing(.3),marginBottom:n.spacing(.3)},breadcrumbTitle:{fontSize:"inherit",marginLeft:-n.spacing(.3),marginBottom:n.spacing(.3)}}),{name:"BackstageHeader"}),Rl=({type:n,typeLink:o,classes:u,pageTitle:h})=>n?o?t.createElement(Oi,{className:u.breadcrumb},t.createElement(Sa,{to:o},n),t.createElement(r.A,null,h)):t.createElement(r.A,{className:u.type},n):null,wl=({pageTitle:n,classes:o,tooltip:u})=>{const{contentRef:h}=ni(),C=t.createElement(r.A,{ref:h,tabIndex:-1,className:o.title,variant:"h1"},n);return u?t.createElement(Ve.Ay,{title:u,placement:"top-start"},C):C},Ol=({classes:n,subtitle:o})=>o?typeof o!="string"?t.createElement(t.Fragment,null,o):t.createElement(r.A,{className:n.subtitle,variant:"subtitle2",component:"span"},o):null;function Uo(n){const{children:o,pageTitleOverride:u,style:h,subtitle:C,title:L,tooltip:k,type:te,typeLink:fe}=n,ve=Sl(),je=(0,s.u)(s.p).getOptionalString("app.title")||"Backstage",Lt=u||L,Ht=L||u,Yt=`${Lt} | %s | ${je}`,Qn=`${Lt} | ${je}`;return t.createElement(t.Fragment,null,t.createElement(Oe.m,{titleTemplate:Yt,defaultTitle:Qn}),t.createElement("header",{style:h,className:ve.header},t.createElement(oe.A,{className:ve.leftItemsBox},t.createElement(Rl,{classes:ve,type:te,typeLink:fe,pageTitle:Ht}),t.createElement(wl,{classes:ve,pageTitle:Ht,tooltip:k}),t.createElement(Ol,{classes:ve,subtitle:C})),t.createElement(P.A,{container:!0,className:ve.rightItemsBox,spacing:4},o)))}const Tl=({label:n,secondaryLabel:o,icon:u,disabled:h=!1,onClick:C})=>React.createElement(Fragment,null,React.createElement(ListItem,{"data-testid":"header-action-item",disabled:h,button:!0,onClick:L=>{C&&C(L)}},u&&React.createElement(ListItemIcon,null,u),React.createElement(ListItemText,{primary:n,secondary:o})));function Oc(n){const{palette:{common:{white:o}}}=useTheme(),{actionItems:u}=n,[h,C]=React.useState(!1),L=React.useRef(null);return React.createElement(Fragment,null,React.createElement(IconButton,{onClick:()=>C(!0),"data-testid":"header-action-menu",ref:L,style:{color:o,height:56,width:56,marginRight:-4,padding:0}},React.createElement(MoreVert,null)),React.createElement(Popover,{open:h,anchorEl:L.current,anchorOrigin:{horizontal:"right",vertical:"bottom"},transformOrigin:{horizontal:"right",vertical:"top"},onClose:()=>C(!1)},React.createElement(List,null,u.map((k,te)=>React.createElement(Tl,{key:`header-action-menu-${te}`,...k})))))}const Il=(0,z.A)(n=>({root:{textAlign:"left"},label:{color:n.page.fontColor,fontWeight:n.typography.fontWeightBold,letterSpacing:0,fontSize:n.typography.fontSize,marginBottom:n.spacing(1)/2,lineHeight:1},value:{color:(0,D.X4)(n.page.fontColor,.8),fontSize:n.typography.fontSize,lineHeight:1}}),{name:"BackstageHeaderLabel"}),Dl=({value:n,className:o,typographyRootComponent:u})=>t.createElement(r.A,{component:u!=null?u:typeof n=="string"?"p":"span",className:o},n);function Ml(n){const{label:o,value:u,url:h,contentTypograpyRootComponent:C}=n,L=Il(),k=t.createElement(Dl,{className:L.value,value:u||"<Unknown>",typographyRootComponent:C});return t.createElement(P.A,{item:!0},t.createElement(r.A,{component:"span",className:L.root},t.createElement(r.A,{className:L.label},o),h?t.createElement(Sa,{to:h},k):k))}const xl=n=>(0,M.A)({root:{color:n.palette.common.white,padding:n.spacing(2,2,3),backgroundImage:n.getPageTheme({themeId:"card"}).backgroundImage,backgroundPosition:0,backgroundSize:"inherit"}}),Ll=(0,z.A)(xl,{name:"BackstageItemCardHeader"});function Vi(n){const{title:o,subtitle:u,children:h}=n,C=Ll(n);return t.createElement(oe.A,{className:C.root},u&&t.createElement(r.A,{variant:"subtitle2",component:"h3"},u),o&&t.createElement(r.A,{variant:"h6",component:"h4"},o),h)}function Tc(n){const{description:o,tags:u,title:h,type:C,subtitle:L,label:k,onClick:te,href:fe}=n;return React.createElement(Card,null,React.createElement(CardMedia,null,React.createElement(Vi,{title:h,subtitle:L||C})),React.createElement(CardContent,null,u!=null&&u.length?React.createElement(Box,null,u.map((ve,Ke)=>React.createElement(Chip,{size:"small",label:ve,key:Ke}))):null,o),React.createElement(CardActions,null,!fe&&React.createElement(er,{to:"#",onClick:te,color:"primary"},k),fe&&React.createElement(er,{to:fe,color:"primary"},k)))}const Bl=n=>(0,M.A)({root:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(22em, 1fr))",gridAutoRows:"1fr",gridGap:n.spacing(2)}}),Ul=(0,z.A)(Bl,{name:"BackstageItemCardGrid"});function $l(n){const{children:o,...u}=n,h=Ul(u);return t.createElement(oe.A,{className:h.root,...u},o)}const kl=(0,z.A)(n=>({root:{display:"grid",gridTemplateAreas:"'pageHeader pageHeader pageHeader' 'pageSubheader pageSubheader pageSubheader' 'pageNav pageContent pageSidebar'",gridTemplateRows:"max-content auto 1fr",gridTemplateColumns:"auto 1fr auto",overflowY:"auto",height:"100vh",[n.breakpoints.down("xs")]:{height:"100%"},"@media print":{display:"block",height:"auto",overflowY:"inherit"}}}),{name:"BackstagePage"});function $o(n){const{themeId:o,children:u}=n,h=kl();return t.createElement(v.A,{theme:C=>({...C,page:C.getPageTheme({themeId:o})})},t.createElement("main",{className:h.root},u))}function Nl(n){const{themeId:o,children:u,...h}=n;return t.createElement($o,{themeId:o},t.createElement(Uo,{...h}),u)}const Fl=Te.z.object({providerInfo:Te.z.object({}).catchall(Te.z.unknown()).optional(),profile:Te.z.object({email:Te.z.string().optional(),displayName:Te.z.string().optional(),picture:Te.z.string().optional()}),backstageIdentity:Te.z.object({token:Te.z.string(),identity:Te.z.object({type:Te.z.literal("user"),userEntityRef:Te.z.string(),ownershipEntityRefs:Te.z.array(Te.z.string())})})});var Wl=Object.defineProperty,Kl=(n,o,u)=>o in n?Wl(n,o,{enumerable:!0,configurable:!0,writable:!0,value:u}):n[o]=u,ri=(n,o,u)=>(Kl(n,typeof o!="symbol"?o+"":o,u),u);const Yi={defaultTokenExpiryMillis:5*60*1e3,tokenExpiryMarginMillis:5*60*1e3};function zl(n){const o=new Date(Date.now()+Yi.defaultTokenExpiryMillis);if(!n)return o;const[u,h,C]=n.split("."),L=JSON.parse(window.atob(h));return typeof L.exp!="number"?o:new Date(L.exp*1e3-Yi.tokenExpiryMarginMillis)}class oi{constructor(o){ri(this,"options"),ri(this,"abortController"),ri(this,"state"),this.options=o,this.abortController=new AbortController,this.state={type:"empty"}}async start(){await this.getSessionAsync()}getUserId(){const{backstageIdentity:o}=this.getSessionSync(),u=o.identity.userEntityRef,h=/^([^:/]+:)?([^:/]+\/)?([^:/]+)$/.exec(u);if(!h)throw new TypeError(`Invalid user entity reference "${u}"`);return h[3]}async getIdToken(){return(await this.getSessionAsync()).backstageIdentity.token}getProfile(){return this.getSessionSync().profile}async getProfileInfo(){return(await this.getSessionAsync()).profile}async getBackstageIdentity(){return(await this.getSessionAsync()).backstageIdentity.identity}async getCredentials(){return{token:(await this.getSessionAsync()).backstageIdentity.token}}async signOut(){this.abortController.abort()}getSessionSync(){if(this.state.type==="active")return this.state.session;if(this.state.type==="fetching"&&this.state.previous)return this.state.previous;throw new Error("No session available. Try reloading your browser page.")}async getSessionAsync(){if(this.state.type==="fetching")return this.state.promise;if(this.state.type==="active"&&new Date<this.state.expiresAt)return this.state.session;const o=this.state.type==="active"?this.state.session:void 0,u=this.fetchSession().then(h=>(this.state={type:"active",session:h,expiresAt:zl(h.backstageIdentity.token)},h),h=>{throw this.state={type:"failed",error:h},h});return this.state={type:"fetching",promise:u,previous:o},u}async fetchSession(){const o=await this.options.discoveryApi.getBaseUrl("auth"),u=typeof this.options.headers=="function"?await this.options.headers():this.options.headers,h=new Headers(u);h.set("X-Requested-With","XMLHttpRequest");const C=await fetch(`${o}/${this.options.provider}/refresh`,{signal:this.abortController.signal,headers:h,credentials:"include"});if(!C.ok)throw await ft.o3.fromResponse(C);return Fl.parse(await C.json())}}const Ic=n=>{const o=useApi(discoveryApiRef),{t:u}=useTranslationRef(coreComponentsTranslationRef),[{status:h,error:C},{execute:L}]=useAsync(async()=>{const k=new oi({provider:n.provider,discoveryApi:o,headers:n.headers});await k.start(),n.onSignInSuccess(k)});return useMountEffect(L),h==="loading"?React.createElement(zn,null):C?React.createElement(Tr,{title:u("proxiedSignInPage.title"),error:C}):null};class ko{getUserId(){return"guest"}async getIdToken(){}getProfile(){return{email:"guest@example.com",displayName:"Guest"}}async getProfileInfo(){return{email:"guest@example.com",displayName:"Guest"}}async getBackstageIdentity(){const o="user:default/guest";return{type:"user",userEntityRef:o,ownershipEntityRefs:[o]}}async getCredentials(){return{}}async signOut(){}}function jl(n){const[o,u,h]=n.split(".");return JSON.parse(window.atob(u))}class ii{constructor(o){this.result=o}getUserId(){return this.result.userId}static fromResult(o){return new ii(o)}async getIdToken(){var o,u;return(u=(o=this.result).getIdToken)==null?void 0:u.call(o)}getProfile(){return this.result.profile}async getProfileInfo(){return this.result.profile}async getBackstageIdentity(){const o=await this.getIdToken();if(!o){const C=`user:default/${this.getUserId()}`;return{type:"user",userEntityRef:C,ownershipEntityRefs:[C]}}const{sub:u,ent:h}=jl(o);return{type:"user",userEntityRef:u,ownershipEntityRefs:h!=null?h:[]}}async getCredentials(){var o,u;return{token:await((u=(o=this.result).getIdToken)==null?void 0:u.call(o))}}async signOut(){var o,u;return(u=(o=this.result).signOut)==null?void 0:u.call(o)}}var Gl=Object.defineProperty,Hl=(n,o,u)=>o in n?Gl(n,o,{enumerable:!0,configurable:!0,writable:!0,value:u}):n[o]=u,Vl=(n,o,u)=>(Hl(n,typeof o!="symbol"?o+"":o,u),u);class oo{constructor(o,u,h){this.identity=o,this.authApi=u,this.profile=h,Vl(this,"profilePromise")}static createGuest(){return new ko}static fromLegacy(o){return ii.fromResult(o)}static create(o){return new oo(o.identity,o.authApi,o.profile)}getUserId(){const o=this.identity.userEntityRef,u=/^([^:/]+:)?([^:/]+\/)?([^:/]+)$/.exec(o);if(!u)throw new TypeError(`Invalid user entity reference "${o}"`);return u[3]}async getIdToken(){return(await this.authApi.getBackstageIdentity()).token}getProfile(){if(!this.profile)throw new Error("The identity API does not implement synchronous profile fetching, use getProfileInfo() instead");return this.profile}async getProfileInfo(){if(this.profilePromise)return await this.profilePromise;try{return this.profilePromise=this.authApi.getProfile(),await this.profilePromise}catch(o){throw this.profilePromise=void 0,o}}async getBackstageIdentity(){return this.identity}async getCredentials(){return{token:(await this.authApi.getBackstageIdentity()).token}}async signOut(){return this.authApi.signOut()}}const si=(0,z.A)({container:{padding:0,listStyle:"none"},item:{display:"flex",flexDirection:"column",width:"100%",maxWidth:"400px",margin:0,padding:0}},{name:"BackstageSignInPage"}),No=({children:n})=>{const o=si();return t.createElement(P.A,{component:"li",item:!0,classes:o},n)},Yl={Component:({config:n,onSignInStarted:o,onSignInSuccess:u,onSignInFailure:h})=>{const{apiRef:C,title:L,message:k}=n,te=(0,s.u)(C),fe=(0,s.u)(s.r),{t:ve}=(0,b.ie)(pe),Ke=async()=>{try{o();const je=await te.getBackstageIdentity({instantPopup:!0});if(!je)throw h(),new Error(`The ${L} provider is not configured to support sign-in`);const Lt=await te.getProfile();u(oo.create({identity:je.identity,profile:Lt,authApi:te}))}catch(je){h(),fe.post(new ft.HK(ve("signIn.loginFailed"),je))}};return t.createElement(No,null,t.createElement(fa,{variant:"fullHeight",title:L,actions:t.createElement(de.A,{color:"primary",variant:"outlined",onClick:Ke},ve("signIn.title"))},t.createElement(r.A,{variant:"body1"},k)))},loader:async(n,o)=>{const u=n.get(o),h=await u.getBackstageIdentity({optional:!0});if(!h)return;const C=await u.getProfile();return oo.create({identity:h.identity,profile:C,authApi:u})}},Ji=async n=>{try{return await n.getBackstageIdentity()}catch(o){if(o.name==="ResponseError"&&o.cause.name==="NotFoundError")return;throw o}},Jl={Component:({onSignInStarted:n,onSignInSuccess:o,onSignInFailure:u})=>{const h=(0,s.u)(s.q),[C,L]=(0,We.A)("enableLegacyGuestToken"),{t:k}=(0,b.ie)(pe),te=async()=>{n();const fe=new oi({provider:"guest",discoveryApi:h});if(!await Ji(fe)){if(confirm("Failed to sign in as a guest using the auth backend. Do you want to fallback to the legacy guest token?")){L(!0),o(new ko);return}throw u(),new Error("You cannot sign in as a guest, you must either enable the legacy guest token or configure the auth backend to support guest sign in.")}o(fe)};return t.createElement(No,null,t.createElement(fa,{title:"Guest",variant:"fullHeight",actions:t.createElement(de.A,{color:"primary",variant:"outlined",onClick:te},k("signIn.guestProvider.enter"))},t.createElement(r.A,{variant:"body1",style:{whiteSpace:"pre-line"}},k("signIn.guestProvider.subtitle"))))},loader:async n=>{const o=localStorage.getItem("enableLegacyGuestToken")==="true",u=new oi({provider:"guest",discoveryApi:n.get(s.q)}),h=await Ji(u);if(!(!h&&!o)){if(h&&o)if(confirm("You are currently using the legacy guest token, but you have the new guest backend module installed. Do you want to use the new module?"))localStorage.removeItem("enableLegacyGuestToken");else return new ko;else if(o)return new ko;return u}}},Ql=/^[a-z0-9_\-]+\.[a-z0-9_\-]+\.[a-z0-9_\-]+$/i,Xl=(0,z.A)(n=>({form:{display:"flex",flexFlow:"column nowrap"},button:{alignSelf:"center",marginTop:n.spacing(2)},subTitle:{whiteSpace:"pre-line"}}),{name:"BackstageCustomProvider"}),Qi=n=>{const{ref:o,...u}=n;return{inputRef:o,...u}},Zl={Component:({onSignInStarted:n,onSignInSuccess:o})=>{const u=Xl(),{t:h}=(0,b.ie)(pe),{register:C,handleSubmit:L,formState:k}=(0,Ne.mN)({mode:"onChange"}),{errors:te}=k,fe=({userId:ve,idToken:Ke})=>{n(),o(oo.fromLegacy({userId:ve,getIdToken:Ke!==void 0?async()=>Ke:void 0,profile:{email:`${ve}@example.com`}}))};return t.createElement(No,null,t.createElement(fa,{title:h("signIn.customProvider.title"),variant:"fullHeight"},t.createElement(r.A,{variant:"body1",className:u.subTitle},h("signIn.customProvider.subtitle")),t.createElement("form",{className:u.form,onSubmit:L(fe)},t.createElement(Nt.A,null,t.createElement(hn.A,{...Qi(C("userId",{required:!0})),label:h("signIn.customProvider.userId"),margin:"normal",error:!!te.userId}),te.userId&&t.createElement(He.A,{error:!0},te.userId.message)),t.createElement(Nt.A,null,t.createElement(hn.A,{...Qi(C("idToken",{required:!1,validate:ve=>!ve||Ql.test(ve)||h("signIn.customProvider.tokenInvalid")})),label:h("signIn.customProvider.idToken"),margin:"normal",autoComplete:"off",error:!!te.idToken}),te.idToken&&t.createElement(He.A,{error:!0},te.idToken.message)),t.createElement(de.A,{type:"submit",color:"primary",variant:"outlined",className:u.button,disabled:!(k!=null&&k.isDirty)||!_t()(te)},h("signIn.customProvider.continue")))))},loader:async()=>{}};class li{constructor(o){this.config=o}static from(o){return new li(o)}getUserId(){if(!this.config.identityApi.getUserId)throw new Error("SignOutProxy IdentityApi.getUserId is not implemented");return this.config.identityApi.getUserId()}getIdToken(){if(!this.config.identityApi.getIdToken)throw new Error("SignOutProxy IdentityApi.getIdToken is not implemented");return this.config.identityApi.getIdToken()}getProfile(){if(!this.config.identityApi.getProfile)throw new Error("SignOutProxy IdentityApi.getProfile is not implemented");return this.config.identityApi.getProfile()}getProfileInfo(){return this.config.identityApi.getProfileInfo()}getBackstageIdentity(){return this.config.identityApi.getBackstageIdentity()}getCredentials(){return this.config.identityApi.getCredentials()}signOut(){return this.config.signOut()}}const io="@backstage/core:SignInPage:provider",Xi={guest:Jl,custom:Zl,common:Yl};function Zi(n,o){if(n in o)throw new Error(`"${n}" ID is duplicated. IDs of identity providers have to be unique.`)}function ql(n){return n.reduce((u,h)=>{if(typeof h=="string")return Zi(h,u),u[h]={components:Xi[h],id:h},u;const{id:C}=h;return Zi(C,u),u[C]={components:Xi.common,id:C,config:h},u},{})}const ec=(n,o)=>{const u=(0,s.u)(s.r),h=(0,s.b)(),[C,L]=(0,t.useState)(!0),k=(0,t.useCallback)(fe=>{o(li.from({identityApi:fe,signOut:async()=>{var ve;localStorage.removeItem(io),await((ve=fe.signOut)==null?void 0:ve.call(fe))}}))},[o]);(0,t.useLayoutEffect)(()=>{var fe;if(!C)return;const ve=localStorage.getItem(io);if(ve===null){L(!1);return}const Ke=n[ve];if(!Ke){L(!1);return}let je=!1;return Ke.components.loader(h,(fe=Ke.config)==null?void 0:fe.apiRef).then(Lt=>{if(je){localStorage.removeItem(io);return}Lt?k(Lt):L(!1)}).catch(Lt=>{localStorage.removeItem(io),!je&&(u.post(Lt),L(!1))}),()=>{je=!0}},[C,u,o,h,n,k]);const te=(0,t.useMemo)(()=>Object.keys(n).map(fe=>{const ve=n[fe],{Component:Ke}=ve.components,je=Yt=>{k(Yt)},Lt=()=>{var Yt;localStorage.setItem(io,((Yt=ve==null?void 0:ve.config)==null?void 0:Yt.id)||ve.id)},Ht=()=>{localStorage.removeItem(io)};return t.createElement(Ke,{key:ve.id,config:ve.config,onSignInStarted:Lt,onSignInSuccess:je,onSignInFailure:Ht})}),[n,k]);return[C,te]},tc=({onSignInSuccess:n,providers:o=[],title:u,align:h="left"})=>{const C=(0,s.u)(s.p),L=si(),k=ql(o),[te,fe]=ec(k,n);return te?t.createElement(zn,null):t.createElement($o,{themeId:"home"},t.createElement(Uo,{title:C.getString("app.title")}),t.createElement(Io,null,u&&t.createElement(wi,{title:u,textAlign:h}),t.createElement(P.A,{container:!0,justifyContent:h==="center"?h:"flex-start",spacing:2,component:"ul",classes:L},fe)))},nc=({provider:n,auto:o,onSignInSuccess:u})=>{const h=si(),C=(0,s.u)(n.apiRef),L=(0,s.u)(s.p),{t:k}=(0,b.ie)(pe),[te,fe]=(0,t.useState)(),[ve,Ke]=(0,t.useState)(!1),je=async({checkExisting:Lt,showPopup:Ht})=>{try{let Yt;if(Lt&&(Yt=await C.getBackstageIdentity({optional:!0})),!Yt&&(Ht||o)&&(Ke(!0),Yt=await C.getBackstageIdentity({instantPopup:!0}),!Yt))throw new Error(`The ${n.title} provider is not configured to support sign-in`);if(!Yt){Ke(!0);return}const Qn=await C.getProfile();u(oo.create({identity:Yt.identity,authApi:C,profile:Qn}))}catch(Yt){fe(Yt),Ke(!0)}};return(0,An.u)(()=>je({checkExisting:!0})),ve?t.createElement($o,{themeId:"home"},t.createElement(Uo,{title:L.getString("app.title")}),t.createElement(Io,null,t.createElement(P.A,{container:!0,justifyContent:"center",spacing:2,component:"ul",classes:h},t.createElement(No,null,t.createElement(fa,{variant:"fullHeight",title:n.title,actions:t.createElement(de.A,{color:"primary",variant:"outlined",onClick:()=>{je({showPopup:!0})}},k("signIn.title"))},t.createElement(r.A,{variant:"body1"},n.message),te&&te.name!=="PopupRejectedError"&&t.createElement(r.A,{variant:"body1",color:"error"},te.message)))))):t.createElement(zn,null)};function ac(n){return"provider"in n?t.createElement(nc,{...n}):t.createElement(tc,{...n})}const rc=(0,z.A)(n=>({root:{padding:n.spacing(0,2,0,2.5),minHeight:n.spacing(3)},indicator:{backgroundColor:n.palette.info.main,height:n.spacing(.3)}}),{name:"BackstageTabbedCard"}),oc=(0,w.A)(n=>({root:{padding:n.spacing(2,2,2,2.5),display:"inline-block"},title:{fontWeight:700},subheader:{paddingTop:n.spacing(1)}}),{name:"BackstageTabbedCardBoldHeader"})(qe.A);function ic(n){const{slackChannel:o,errorBoundaryProps:u,children:h,title:C,deepLink:L,value:k,onChange:te}=n,fe=rc(),[ve,Ke]=(0,t.useState)(0),je=te||((Yt,Qn)=>Ke(Qn));let Lt;k?t.Children.map(h,Yt=>{t.isValidElement(Yt)&&(Yt==null?void 0:Yt.props.value)===k&&(Lt=Yt==null?void 0:Yt.props.children)}):t.Children.map(h,(Yt,Qn)=>{t.isValidElement(Yt)&&Qn===ve&&(Lt=Yt==null?void 0:Yt.props.children)});const Ht=u||(o?{slackChannel:o}:{});return t.createElement(mt.A,null,t.createElement(xn,{...Ht},C&&t.createElement(oc,{title:C}),t.createElement(Ot.A,{classes:fe,value:k||ve,onChange:je},h),t.createElement(Vt.A,null),t.createElement(rt.A,null,Lt),L&&t.createElement(Xn,{...L})))}const sc=(0,z.A)(n=>({root:{minWidth:n.spacing(6),minHeight:n.spacing(3),margin:n.spacing(0,2,0,0),padding:n.spacing(.5,0,.5,0),textTransform:"none","&:hover":{opacity:1,backgroundColor:"transparent",color:n.palette.text.primary}},selected:{fontWeight:n.typography.fontWeightBold}}),{name:"BackstageCardTab"});function lc(n){const{children:o,...u}=n,h=sc();return t.createElement(ot.A,{disableRipple:!0,classes:h,...u})}},59294:(In,Ct,e)=>{"use strict";e.d(Ct,{Jm:()=>z,h2:()=>ut,ie:()=>w,pl:()=>ee});var s=e(14041),l=e(5124);function b(M){return{$$type:"@backstage/TranslationMessages",id:M.ref.id,full:!!M.full,messages:M.messages}}function A(M){return{$$type:"@backstage/TranslationResource",version:"v1",id:M.ref.id,resources:Object.entries(M.translations).map(([y,v])=>({language:y,loader:()=>v().then(F=>{const ae=F.default;return{messages:(ae==null?void 0:ae.$$type)==="@backstage/TranslationMessages"?ae.messages:ae}})}))}}var W=Object.defineProperty,r=(M,y,v)=>y in M?W(M,y,{enumerable:!0,configurable:!0,writable:!0,value:v}):M[y]=v,q=(M,y,v)=>(r(M,typeof y!="symbol"?y+"":y,v),v),Q=(M,y,v)=>{if(!y.has(M))throw TypeError("Cannot "+v)},t=(M,y,v)=>(Q(M,y,"read from private field"),v?v.call(M):y.get(M)),pe=(M,y,v)=>{if(y.has(M))throw TypeError("Cannot add the same private member more than once");y instanceof WeakSet?y.add(M):y.set(M,v)},_=(M,y,v,F)=>(Q(M,y,"write to private field"),F?F.call(M,v):y.set(M,v),v),de,me,G;function xe(M){const y=new Array;function v(F,ae){for(const[Fe,Ae]of Object.entries(F))typeof Ae=="string"?y.push([ae+Fe,Ae]):v(Ae,`${ae}${Fe}.`)}return v(M,""),Object.fromEntries(y)}class ye{constructor(y){pe(this,de,void 0),pe(this,me,void 0),pe(this,G,void 0),q(this,"$$type","@backstage/TranslationRef"),q(this,"version","v1"),_(this,de,y.id),_(this,me,xe(y.messages))}get id(){return t(this,de)}get T(){throw new Error("Not implemented")}getDefaultMessages(){return t(this,me)}setDefaultResource(y){_(this,G,y)}getDefaultResource(){return t(this,G)}toString(){return`TranslationRef{id=${this.id}}`}}de=new WeakMap,me=new WeakMap,G=new WeakMap;function ut(M){const y=new ye(M);return M.translations&&y.setDefaultResource(A({ref:y,translations:M.translations})),y}const z=(0,l.c)({id:"core.translation"}),ee=(0,l.c)({id:"core.applanguage"}),D=new WeakSet,w=M=>{const y=(0,l.u)(l.r),v=(0,l.u)(z),[F,ae]=(0,s.useState)(()=>v.getTranslation(M)),Fe=(0,s.useMemo)(()=>v.translation$(M),[v,M]),Ae=(0,s.useCallback)(N=>{if(!D.has(M)){const H=`Failed to load translation resource '${M.id}'; caused by ${N}`;console.error(H),y.post(new Error(H)),D.add(M)}},[y,M]);(0,s.useEffect)(()=>{const N=Fe.subscribe({next(H){H.ready&&ae(H)},error(H){Ae(H)}});return()=>{N.unsubscribe()}},[Fe,Ae]);const X=(0,s.useRef)(!0);if((0,s.useEffect)(()=>{X.current?X.current=!1:ae(v.getTranslation(M))},[v,M]),!F.ready)throw new Promise(N=>{const H=Fe.subscribe({next(oe){oe.ready&&(H.unsubscribe(),N())},error(oe){H.unsubscribe(),Ae(oe),N()}})});return{t:F.t}}},5124:(In,Ct,e)=>{"use strict";e.d(Ct,{F:()=>ae,S:()=>t,a:()=>w,b:()=>A,c:()=>Q,d:()=>_,e:()=>me,f:()=>Fe,g:()=>pe,h:()=>xe,i:()=>ye,j:()=>ut,k:()=>z,l:()=>D,m:()=>G,n:()=>M,o:()=>de,p:()=>y,q:()=>v,r:()=>F,s:()=>Ae,t:()=>X,u:()=>W,v:()=>ee,x:()=>N,y:()=>H});var s=e(14041),l=e(97388),b=e(3399);function A(){const oe=(0,l.qO)("api-context");if(!oe)throw new b.EH("API context is not available");const re=oe.atVersion(1);if(!re)throw new b.EH("ApiContext v1 not available");return re}function W(oe){const _e=A().get(oe);if(!_e)throw new b.EH(`No implementation available for ${oe}`);return _e}function r(oe){return function(_e){const tt=Ze=>{const nt=A(),Ge={};for(const Je in oe)if(oe.hasOwnProperty(Je)){const Re=oe[Je],Le=nt.get(Re);if(!Le)throw new NotImplementedError(`No implementation available for ${Re}`);Ge[Je]=Le}return React.createElement(_e,{...Ze,...Ge})},Ve=_e.displayName||_e.name||"Component";return tt.displayName=`withApis(${Ve})`,tt}}class q{constructor(re){if(this.config=re,!re.id.split(".").flatMap(tt=>tt.split("-")).every(tt=>tt.match(/^[a-z][a-z0-9]*$/)))throw new Error(`API id must only contain period separated lowercase alphanum tokens with dashes, got '${re.id}'`)}get id(){return this.config.id}get T(){throw new Error(`tried to read ApiRef.T of ${this}`)}toString(){return`apiRef{${this.config.id}}`}}function Q(oe){return new q(oe)}var t=(oe=>(oe.SignedIn="SignedIn",oe.SignedOut="SignedOut",oe))(t||{});const pe=Q({id:"core.auth.google"}),_=Q({id:"core.auth.github"}),de=Q({id:"core.auth.okta"}),me=Q({id:"core.auth.gitlab"}),G=Q({id:"core.auth.microsoft"}),xe=Q({id:"core.auth.onelogin"}),ye=Q({id:"core.auth.bitbucket"}),ut=Q({id:"core.auth.bitbucket-server"}),z=Q({id:"core.auth.atlassian"}),ee=Q({id:"core.auth.vmware-cloud"}),D=Q({id:"core.alert"}),w=Q({id:"core.analytics"}),M=Q({id:"core.apptheme"}),y=Q({id:"core.config"}),v=Q({id:"core.discovery"}),F=Q({id:"core.error"});var ae=(oe=>(oe[oe.None=0]="None",oe[oe.Active=1]="Active",oe))(ae||{});const Fe=Q({id:"core.featureflags"}),Ae=Q({id:"core.fetch"}),X=Q({id:"core.identity"}),N=Q({id:"core.oauthrequest"}),H=Q({id:"core.storage"})},11638:(In,Ct,e)=>{"use strict";e.d(Ct,{E0:()=>z,HM:()=>F,Ig:()=>q,Il:()=>nt,KS:()=>Je,NC:()=>Qt,OJ:()=>xt,QJ:()=>wt,Sf:()=>Ge,Vb:()=>oe,bW:()=>Q,h3:()=>ut,i1:()=>Ut,nm:()=>G,st:()=>me,zZ:()=>yt});var s=e(97388),l=e(14041),b=e(5124),A=e(18690);const W=(0,s.tK)("analytics-context"),r=()=>{const S=(0,l.useContext)(W);if(S===void 0)return{routeRef:"unknown",pluginId:"root",extension:"App"};const P=S.atVersion(1);if(P===void 0)throw new Error("No context found for version 1.");return P},q=S=>{const{attributes:P,children:j}=S,Ie={...r(),...P},ze=(0,s.Bl)({1:Ie});return l.createElement(W.Provider,{value:ze},j)};function Q(S,P){return"id"in S?{api:S,deps:{},factory:()=>P}:S}const t=(0,s.Q6)("core-plugin-api:analytics-tracker-events",()=>({mostRecentGatheredNavigation:void 0,mostRecentRoutableExtensionRender:void 0,beforeUnloadRegistered:!1})),pe="_ROUTABLE-EXTENSION-RENDERED";class _{constructor(P,j={routeRef:"unknown",pluginId:"root",extension:"App"}){this.analyticsApi=P,this.context=j,t.beforeUnloadRegistered||(addEventListener("beforeunload",()=>{t.mostRecentGatheredNavigation&&(this.analyticsApi.captureEvent({...t.mostRecentGatheredNavigation,...t.mostRecentRoutableExtensionRender}),t.mostRecentGatheredNavigation=void 0,t.mostRecentRoutableExtensionRender=void 0)},{once:!0,passive:!0}),t.beforeUnloadRegistered=!0)}setContext(P){this.context=P}captureEvent(P,j,{value:Z,attributes:Ie}={}){const{_routeNodeType:ze,...dt}=this.context;if(P===pe){t.mostRecentGatheredNavigation&&(t.mostRecentRoutableExtensionRender={context:{...dt,extension:"App"}});return}if(t.mostRecentGatheredNavigation){try{this.analyticsApi.captureEvent({...t.mostRecentGatheredNavigation,...t.mostRecentRoutableExtensionRender})}catch(Qe){console.warn("Error during analytics event capture. %o",Qe)}t.mostRecentGatheredNavigation=void 0,t.mostRecentRoutableExtensionRender=void 0}if(P==="navigate"&&ze==="gathered"&&dt.pluginId==="root"){t.mostRecentGatheredNavigation={action:P,subject:j,value:Z,attributes:Ie,context:dt};return}try{this.analyticsApi.captureEvent({action:P,subject:j,value:Z,attributes:Ie,context:dt})}catch(Qe){console.warn("Error during analytics event capture. %o",Qe)}}}function de(){try{return(0,b.u)(b.a)}catch{return{captureEvent:()=>{}}}}function me(){const S=(0,l.useRef)(null),P=r(),j=de();function Z(){return S.current===null&&(S.current=new _(j)),S.current}const Ie=Z();return Ie.setContext(P),Ie}const G=()=>{const S=(0,s.qO)("app-context");if(!S)throw new Error("App context is not available");const P=S.atVersion(1);if(!P)throw new Error("AppContext v1 not available");return P},xe=(0,s.Q6)("component-data-store",()=>new WeakMap),ye="__backstage_data";function ut(S,P,j){var Z;const Ie=S;let ze=(Z=Ie[ye])!=null?Z:xe.get(S);if(ze||(ze={map:new Map},Object.defineProperty(Ie,ye,{enumerable:!1,configurable:!0,writable:!1,value:ze}),xe.set(S,ze)),ze.map.has(P)){const dt=S.displayName||S.name;throw new Error(`Attempted to attach duplicate data "${P}" to component "${dt}"`)}ze.map.set(P,j)}function z(S,P){var j;if(!S)return;const Z=S.type;if(!Z)return;const Ie=(j=Z[ye])!=null?j:xe.get(Z);if(Ie)return Ie.map.get(P)}const ee=(0,s.Q6)("route-ref-type",()=>Symbol("route-ref-type"));var D=Object.defineProperty,w=(S,P,j)=>P in S?D(S,P,{enumerable:!0,configurable:!0,writable:!0,value:j}):S[P]=j,M=(S,P,j)=>(w(S,typeof P!="symbol"?P+"":P,j),j),y;class v{constructor(P,j){this.id=P,this.params=j,M(this,y,"absolute")}get title(){return this.id}toString(){return`routeRef{type=absolute,id=${this.id}}`}}y=ee;function F(S){var P;return new v(S.id,(P=S.params)!=null?P:[])}var ae=Object.defineProperty,Fe=(S,P,j)=>P in S?ae(S,P,{enumerable:!0,configurable:!0,writable:!0,value:j}):S[P]=j,Ae=(S,P,j)=>(Fe(S,typeof P!="symbol"?P+"":P,j),j),X;const N=/^\w+$/;class H{constructor(P,j,Z,Ie){this.id=P,this.path=j,this.parent=Z,this.params=Ie,Ae(this,X,"sub")}toString(){return`routeRef{type=sub,id=${this.id}}`}}X=ee;function oe(S){const{id:P,path:j,parent:Z}=S,Ie=j.split("/").filter(Qe=>Qe.startsWith(":")).map(Qe=>Qe.substring(1)),ze=[...Z.params,...Ie];if(Z.params.some(Qe=>Ie.includes(Qe)))throw new Error("SubRouteRef may not have params that overlap with its parent");if(!j.startsWith("/"))throw new Error(`SubRouteRef path must start with '/', got '${j}'`);if(j.endsWith("/"))throw new Error(`SubRouteRef path must not end with '/', got '${j}'`);for(const Qe of Ie)if(!N.test(Qe))throw new Error(`SubRouteRef path has invalid param, got '${Qe}'`);return new H(P,j,Z,ze)}var re=Object.defineProperty,_e=(S,P,j)=>P in S?re(S,P,{enumerable:!0,configurable:!0,writable:!0,value:j}):S[P]=j,tt=(S,P,j)=>(_e(S,typeof P!="symbol"?P+"":P,j),j),Ve;class Ze{constructor(P,j,Z){this.id=P,this.params=j,this.optional=Z,tt(this,Ve,"external")}toString(){return`routeRef{type=external,id=${this.id}}`}}Ve=ee;function nt(S){var P;return new Ze(S.id,(P=S.params)!=null?P:[],!!S.optional)}function Ge(S){const{pathname:P}=(0,A.zy)(),j=(0,s.qO)("routing-context");if(!j)throw new Error("Routing context is not available");const Z=j.atVersion(1),Ie=(0,l.useMemo)(()=>Z&&Z.resolve(S,{pathname:P}),[Z,S,P]);if(!j)throw new Error("useRouteRef used outside of routing context");if(!Z)throw new Error("RoutingContext v1 not available");const ze="optional"in S&&S.optional;if(!Ie&&!ze)throw new Error(`No path for ${S}`);return Ie}function Je(S){return(0,A.g)()}var Re=Object.defineProperty,Le=(S,P,j)=>P in S?Re(S,P,{enumerable:!0,configurable:!0,writable:!0,value:j}):S[P]=j,lt=(S,P,j)=>(Le(S,typeof P!="symbol"?P+"":P,j),j);class Et extends l.Component{constructor(){super(...arguments),lt(this,"state",{error:void 0}),lt(this,"handleErrorReset",()=>{this.setState({error:void 0})})}static getDerivedStateFromError(P){return{error:P}}render(){const{error:P}=this.state,{app:j,plugin:Z}=this.props,{ErrorBoundaryFallback:Ie}=j.getComponents();return P?l.createElement(Ie,{error:P,resetError:this.handleErrorReset,plugin:Z}):this.props.children}}function wt(S){const{component:P,mountPoint:j,name:Z}=S;return yt({component:{lazy:()=>P().then(Ie=>{const ze=Qe=>{const et=me();try{Ge(j)}catch($t){if(typeof $t=="object"&&$t!==null){const{message:tn}=$t;if(typeof tn=="string"&&tn.startsWith("No path for "))throw new Error(`Routable extension component with mount point ${j} was not discovered in the app element tree. Routable extension components may not be rendered by other components and must be directly available as an element within the App provider component.`)}throw $t}return(0,l.useEffect)(()=>{et.captureEvent(pe,"")},[et]),l.createElement(Ie,{...Qe})},dt=Z||Ie.displayName||Ie.name||"LazyComponent";return ze.displayName=`RoutableExtension(${dt})`,ze},Ie=>dt=>{const Qe=G(),{BootErrorPage:et}=Qe.getComponents();return l.createElement(et,{step:"load-chunk",error:Ie})})},data:{"core.mountPoint":j},name:Z})}function Qt(S){const{component:P,name:j}=S;return yt({component:P,name:j})}function yt(S){const{data:P={},name:j}=S;j||console.warn("Declaring extensions without name is DEPRECATED. Make sure that all usages of createReactExtension, createComponentExtension and createRoutableExtension provide a name.");let Z;if("lazy"in S.component){const ze=S.component.lazy;Z=(0,l.lazy)(()=>ze().then(dt=>({default:dt})))}else Z=S.component.sync;const Ie=j||Z.displayName||Z.name||"Component";return{expose(ze){const dt=Qe=>{const et=G(),{Progress:$t}=et.getComponents(),tn=P==null?void 0:P["core.mountPoint"];return l.createElement(l.Suspense,{fallback:l.createElement($t,null)},l.createElement(Et,{app:et,plugin:ze},l.createElement(q,{attributes:{pluginId:ze.getId(),...j&&{extension:j},...tn&&{routeRef:tn.id}}},l.createElement(Z,{...Qe}))))};ut(dt,"core.plugin",ze),ut(dt,"core.extensionName",j);for(const[Qe,et]of Object.entries(P))ut(dt,Qe,et);return dt.displayName=`Extension(${Ie})`,dt}}}function ue(S,P,j,Z){return l.Children.toArray(S).flatMap(Ie=>{if(!(0,l.isValidElement)(Ie))return[];if(Ie.type===l.Fragment)return ue(Ie.props.children,P,j,Z);if(z(Ie,"core.featureFlagged")){const ze=Ie.props;return("with"in ze?P.isActive(ze.with):!P.isActive(ze.without))?ue(Ie.props.children,P,j,Z):[]}if(j===void 0||j(Ie))return[Ie];if(Z)throw new Error(Z);return ue(Ie.props.children,P,j,Z)})}class gt{constructor(P,j){this.node=P,this.featureFlagsApi=j}selectByComponentData(P){const j=ue(this.node,this.featureFlagsApi,Z=>z(Z,P.key)!==void 0,P.withStrictError);return new gt(j,this.featureFlagsApi)}findComponentData(P){return ue(this.node,this.featureFlagsApi,Z=>z(Z,P.key)!==void 0).map(Z=>z(Z,P.key)).filter(Z=>Z!==void 0)}getElements(){return ue(this.node,this.featureFlagsApi)}}function xt(S,P,j=[]){const Z=(0,b.u)(b.f),Ie=new gt(S,Z);return(0,l.useMemo)(()=>P(Ie),[S,...j])}class ht{constructor(P){this.config=P}getId(){return this.config.id}getApis(){var P;return(P=this.config.apis)!=null?P:[]}getFeatureFlags(){var P,j;return(j=(P=this.config.featureFlags)==null?void 0:P.slice())!=null?j:[]}get routes(){var P;return(P=this.config.routes)!=null?P:{}}get externalRoutes(){var P;return(P=this.config.externalRoutes)!=null?P:{}}provide(P){return P.expose(this)}toString(){return`plugin{${this.config.id}}`}}function Ut(S){return new ht(S)}},3399:(In,Ct,e)=>{"use strict";e.d(Ct,{EH:()=>w,HK:()=>y,bJ:()=>b,m_:()=>z,o3:()=>Ae,tX:()=>A});var s=e(69655),l=e.n(s);function b(X){if(typeof X!="object"||X===null||Array.isArray(X))return!1;const N=X;return!(typeof N.name!="string"||N.name===""||typeof N.message!="string")}function A(X){if(typeof X!="object"||X===null||Array.isArray(X))throw new Error(`Encountered invalid error, not an object, got '${X}'`);const N=X;if(typeof N.name!="string"||N.name==="")throw new Error(`Encountered error object without a name, got '${X}'`);if(typeof N.message!="string")throw new Error(`Encountered error object without a message, got '${X}'`)}function W(X,N){const oe={name:"Unknown",message:"<no reason given>",...serializeError$1(X)};return N!=null&&N.includeStack||delete oe.stack,oe}function r(X){const N=(0,s.deserializeError)(X);return X.stack||(N.stack=void 0),N}function q(X){if(b(X)){const N=String(X);return N!=="[object Object]"?N:`${X.name}: ${X.message}`}return`unknown error '${X}'`}var Q=Object.defineProperty,t=(X,N,H)=>N in X?Q(X,N,{enumerable:!0,configurable:!0,writable:!0,value:H}):X[N]=H,pe=(X,N,H)=>(t(X,typeof N!="symbol"?N+"":N,H),H);class _ extends Error{constructor(N,H){var oe;let re=N;if(H!==void 0){const _e=q(H);re?re+=`; caused by ${_e}`:re=`caused by ${_e}`}super(re),pe(this,"cause"),(oe=Error.captureStackTrace)==null||oe.call(Error,this,this.constructor),(!this.name||this.name==="Error")&&this.constructor.name!=="Error"&&(this.name=this.constructor.name),this.cause=b(H)?H:void 0}}var de=Object.defineProperty,me=(X,N,H)=>N in X?de(X,N,{enumerable:!0,configurable:!0,writable:!0,value:H}):X[N]=H,G=(X,N,H)=>(me(X,typeof N!="symbol"?N+"":N,H),H);class xe extends _{constructor(){super(...arguments),G(this,"name","InputError")}}class ye extends _{constructor(){super(...arguments),G(this,"name","AuthenticationError")}}class ut extends _{constructor(){super(...arguments),G(this,"name","NotAllowedError")}}class z extends _{constructor(){super(...arguments),G(this,"name","NotFoundError")}}class ee extends _{constructor(){super(...arguments),G(this,"name","ConflictError")}}class D extends _{constructor(){super(...arguments),G(this,"name","NotModifiedError")}}class w extends _{constructor(){super(...arguments),G(this,"name","NotImplementedError")}}class M extends null{}class y extends _{constructor(N,H){super(N,H),this.name=b(H)?H.name:"Error"}}async function v(X){var N;try{const H=await X.text();if(H){if((N=X.headers.get("content-type"))!=null&&N.startsWith("application/json"))try{const oe=JSON.parse(H);if(oe.error&&oe.response)return oe}catch{}return{error:{name:"Error",message:`Request failed with status ${X.status} ${X.statusText}, ${H}`},response:{statusCode:X.status}}}}catch{}return{error:{name:"Error",message:`Request failed with status ${X.status} ${X.statusText}`},response:{statusCode:X.status}}}var F=Object.defineProperty,ae=(X,N,H)=>N in X?F(X,N,{enumerable:!0,configurable:!0,writable:!0,value:H}):X[N]=H,Fe=(X,N,H)=>(ae(X,typeof N!="symbol"?N+"":N,H),H);class Ae extends Error{constructor(N){super(N.message),Fe(this,"response"),Fe(this,"body"),Fe(this,"cause"),Fe(this,"statusCode"),Fe(this,"statusText"),this.name="ResponseError",this.response=N.response,this.body=N.data,this.cause=N.cause,this.statusCode=N.statusCode,this.statusText=N.statusText}static async fromResponse(N){const H=await v(N),oe=H.response.statusCode||N.status,re=N.statusText,_e=`Request failed with ${oe} ${re}`,tt=r(H.error);return new Ae({message:_e,response:N,data:H,cause:tt,statusCode:oe,statusText:re})}}},33478:(In,Ct,e)=>{"use strict";e.d(Ct,{$J:()=>r,L7:()=>w,LS:()=>ee,YT:()=>D,gh:()=>z});var s=e(5124),l=e(11638),b=e(63188),A=e(13660),W=e(14041);const r=(0,s.c)({id:"core.scmauth"});var q=(M,y,v)=>{if(!y.has(M))throw TypeError("Cannot "+v)},Q=(M,y,v)=>(q(M,y,"read from private field"),v?v.call(M):y.get(M)),t=(M,y,v)=>{if(y.has(M))throw TypeError("Cannot add the same private member more than once");y instanceof WeakSet?y.add(M):y.set(M,v)},pe=(M,y,v,F)=>(q(M,y,"write to private field"),F?F.call(M,v):y.set(M,v),v),_,de,me,G,xe;class ye{constructor(y){t(this,_,void 0),pe(this,_,y)}async getCredentials(y){const v=new URL(y.url),F=Q(this,_).find(ae=>ae.isUrlSupported(v));if(!F)throw new Error(`No auth provider available for '${y.url}', see https://backstage.io/link?scm-auth`);return F.getCredentials(y)}}_=new WeakMap;const ut=class Rr{constructor(y,v,F,ae){t(this,de,void 0),t(this,me,void 0),t(this,G,void 0),t(this,xe,void 0),pe(this,de,v),pe(this,me,F),pe(this,G,ae),pe(this,xe,y)}static createDefaultApiFactory(){return(0,l.bW)({api:r,deps:{github:s.d,gitlab:s.e,azure:s.m,bitbucket:s.i},factory:({github:y,gitlab:v,azure:F,bitbucket:ae})=>Rr.merge(Rr.forGithub(y),Rr.forGitlab(v),Rr.forAzure(F),Rr.forBitbucket(ae))})}static forAuthApi(y,v){return new Rr("generic",y,v.host,v.scopeMapping)}static forGithub(y,v){var F;const ae=(F=v==null?void 0:v.host)!=null?F:"github.com";return new Rr("github",y,ae,{default:["repo","read:org","read:user"],repoWrite:["gist"]})}static forGitlab(y,v){var F;const ae=(F=v==null?void 0:v.host)!=null?F:"gitlab.com";return new Rr("gitlab",y,ae,{default:["read_user","read_api","read_repository"],repoWrite:["write_repository","api"]})}static forAzure(y,v){var F;const ae=(F=v==null?void 0:v.host)!=null?F:"dev.azure.com";return new Rr("azure",y,ae,{default:["499b84ac-1321-427f-aa17-267ca6975798/vso.build","499b84ac-1321-427f-aa17-267ca6975798/vso.code","499b84ac-1321-427f-aa17-267ca6975798/vso.graph","499b84ac-1321-427f-aa17-267ca6975798/vso.project","499b84ac-1321-427f-aa17-267ca6975798/vso.profile"],repoWrite:["499b84ac-1321-427f-aa17-267ca6975798/vso.code_manage"]})}static forBitbucket(y,v){var F;const ae=(F=v==null?void 0:v.host)!=null?F:"bitbucket.org";return new Rr("bitbucket",y,ae,{default:["account","team","pullrequest","snippet","issue"],repoWrite:["pullrequest:write","snippet:write","issue:write"]})}static merge(...y){return new ye(y)}isUrlSupported(y){return y.host===Q(this,me)}getAdditionalScopesForProvider(y){var v,F;return!(y!=null&&y.customScopes)||Q(this,xe)==="generic"?[]:(F=(v=y.customScopes)==null?void 0:v[Q(this,xe)])!=null?F:[]}async getCredentials(y){const{url:v,additionalScope:F,...ae}=y,Fe=Q(this,G).default.slice();F!=null&&F.repoWrite&&Fe.push(...Q(this,G).repoWrite);const Ae=this.getAdditionalScopesForProvider(F);Ae.length&&Fe.push(...Ae);const X=[...new Set(Fe)],N=await Q(this,de).getAccessToken(X,ae);return{token:N,headers:{Authorization:`Bearer ${N}`}}}};de=new WeakMap,me=new WeakMap,G=new WeakMap,xe=new WeakMap;let z=ut;class ee{static fromConfig(y){return b.b5.fromConfig(y)}}const D=(0,s.c)({id:"integration.scmintegrations"}),w=M=>{var y;const{type:v}=M,F=(0,l.nm)(),ae=A.A,Fe=v&&(y=F.getSystemIcon(v))!=null?y:ae;return W.createElement(Fe,null)}},63188:(In,Ct,e)=>{"use strict";e.d(Ct,{B:()=>Ia,Fw:()=>Ta,b5:()=>Br,bm:()=>Ne});var s=e(52536),l=e.n(s),b=e(45250),A=e.n(b),W=e(10288),r=e.n(W),q=e(36142),Q=e(49863),t=e(52950),pe=e(1048).Buffer;function _(g){const c=new URL("http://example.com");return c.host=g,c.host===g}function de(g){try{return new URL(g),!0}catch{return!1}}function me(g,c){return{list(){return g},byUrl(E){try{const $=typeof E=="string"?new URL(E):E;return g.find(Pe=>c(Pe)===$.host)}catch{return}},byHost(E){return g.find($=>c($)===E)}}}function G(g){const{url:c,base:E,lineNumber:$}=g;try{return new URL(c),c}catch{}let Pe;if(c.startsWith("/")){const{href:Be,filepath:Rt}=l()(E);Pe=new URL(Be);const Ft=(0,b.trimEnd)(Pe.pathname.substring(0,Pe.pathname.length-Rt.length),"/");Pe.pathname=`${Ft}${c}`}else Pe=new URL(c,E);return Pe.search=new URL(E).search,$&&(Pe.hash=`L${$}`),Pe.toString()}const xe="amazonaws.com";function ye(g){var c,E;const $=g.getOptionalString("endpoint"),Pe=(c=g.getOptionalBoolean("s3ForcePathStyle"))!=null?c:!1;let Be,Rt;if($){try{const ka=new URL($);Be=ka.host,Rt=ka.pathname}catch{throw new Error(`invalid awsS3 integration config, endpoint '${$}' is not a valid URL`)}if(Rt!=="/")throw new Error(`invalid awsS3 integration config, endpoints cannot contain path, got '${$}'`)}else Be=xe;const Ft=g.getOptionalString("accessKeyId"),On=(E=g.getOptionalString("secretAccessKey"))==null?void 0:E.trim(),Wn=g.getOptionalString("roleArn"),La=g.getOptionalString("externalId");return{host:Be,endpoint:$,s3ForcePathStyle:Pe,accessKeyId:Ft,secretAccessKey:On,roleArn:Wn,externalId:La}}function ut(g){const c=g.map(ye);return c.some(E=>E.host===xe)||c.push({host:xe}),c}var z=Object.defineProperty,ee=(g,c,E)=>c in g?z(g,c,{enumerable:!0,configurable:!0,writable:!0,value:E}):g[c]=E,D=(g,c,E)=>(ee(g,typeof c!="symbol"?c+"":c,E),E);const w=class{constructor(c){this.integrationConfig=c}get type(){return"awsS3"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(c){return G(c)}resolveEditUrl(c){return c}};D(w,"factory",({config:g})=>{var c;const E=ut((c=g.getOptionalConfigArray("integrations.awsS3"))!=null?c:[]);return me(E.map($=>new w($)),$=>$.config.host)});let M=w;const y="console.aws.amazon.com";function v(g){var c;const E=g.getOptionalString("accessKeyId"),$=(c=g.getOptionalString("secretAccessKey"))==null?void 0:c.trim(),Pe=g.getOptionalString("roleArn"),Be=g.getOptionalString("externalId");return{host:y,accessKeyId:E,secretAccessKey:$,roleArn:Pe,externalId:Be}}function F(g){const c=g.map(v);return c.some(E=>E.host===y)||c.push({host:y}),c}var ae=Object.defineProperty,Fe=(g,c,E)=>c in g?ae(g,c,{enumerable:!0,configurable:!0,writable:!0,value:E}):g[c]=E,Ae=(g,c,E)=>(Fe(g,typeof c!="symbol"?c+"":c,E),E);const X=class{constructor(c){this.integrationConfig=c}get type(){return"awsCodeCommit"}get config(){return this.integrationConfig}get title(){return this.integrationConfig.host}resolveUrl(c){return G(c)}resolveEditUrl(c){const $=new URL(c).pathname.match(/^\/codesuite\/codecommit\/repositories\/([^\/]+)\//);if(!$)throw new Error("");const[,Pe]=$;return H(c,Pe,"edit")}};Ae(X,"factory",({config:g})=>{var c;const E=F((c=g.getOptionalConfigArray("integrations.awsCodeCommit"))!=null?c:[]);return me(E.map($=>new X($)),$=>$.config.host)});let N=X;function H(g,c,E){const $=E==="edit"?"files/edit":E;return g.replace(new RegExp(`/codesuite/codecommit/repositories/${c}/(browse|files/edit)/`),`/codesuite/codecommit/repositories/${c}/${$}/`)}var oe=(g,c,E)=>{if(!c.has(g))throw TypeError("Cannot "+E)},re=(g,c,E)=>(oe(g,c,"read from private field"),E?E.call(g):c.get(g)),_e=(g,c,E)=>{if(c.has(g))throw TypeError("Cannot add the same private member more than once");c instanceof WeakSet?c.add(g):c.set(g,E)},tt=(g,c,E,$)=>(oe(g,c,"write to private field"),$?$.call(g,E):c.set(g,E),E),Ve,Ze,nt,Ge,Je,Re,Le;const lt="GB",Et=class ts{constructor(c,E,$,Pe,Be,Rt){_e(this,Ve,void 0),_e(this,Ze,void 0),_e(this,nt,void 0),_e(this,Ge,void 0),_e(this,Je,void 0),_e(this,Re,void 0),_e(this,Le,(...Ft)=>{const On=new URL(re(this,Ve));return On.pathname=Ft.map(Wn=>encodeURIComponent(Wn)).join("/"),On}),tt(this,Ve,c),tt(this,Ze,E),tt(this,nt,$),tt(this,Ge,Pe),tt(this,Je,Be),tt(this,Re,Rt)}static fromRepoUrl(c){var E;const $=new URL(c);let Pe,Be,Rt;const Ft=$.pathname.split("/").map(ka=>decodeURIComponent(ka));if(Ft[2]==="_git"?(Pe=Ft[1],Be=Rt=Ft[3]):Ft[3]==="_git"?(Pe=Ft[1],Be=Ft[2],Rt=Ft[4]):Ft[4]==="_git"&&(Pe=`${Ft[1]}/${Ft[2]}`,Be=Ft[3],Rt=Ft[5]),!Pe||!Be||!Rt)throw new Error("Azure URL must point to a git repository");const On=(E=$.searchParams.get("path"))!=null?E:void 0;let Wn;const La=$.searchParams.get("version");if(La){if(La.slice(0,2)!=="GB")throw new Error("Azure URL version must point to a git branch");Wn=La.slice(2)}return new ts($.origin,Pe,Be,Rt,On,Wn)}toRepoUrl(){let c;return re(this,nt)===re(this,Ge)?c=re(this,Le).call(this,re(this,Ze),"_git",re(this,Ge)):c=re(this,Le).call(this,re(this,Ze),re(this,nt),"_git",re(this,Ge)),re(this,Je)&&c.searchParams.set("path",re(this,Je)),re(this,Re)&&c.searchParams.set("version",lt+re(this,Re)),c.toString()}toFileUrl(){if(!re(this,Je))throw new Error("Azure URL must point to a specific path to be able to download a file");const c=re(this,Le).call(this,re(this,Ze),re(this,nt),"_apis","git","repositories",re(this,Ge),"items");return c.searchParams.set("api-version","6.0"),c.searchParams.set("path",re(this,Je)),re(this,Re)&&c.searchParams.set("version",re(this,Re)),c.toString()}toArchiveUrl(){const c=re(this,Le).call(this,re(this,Ze),re(this,nt),"_apis","git","repositories",re(this,Ge),"items");return c.searchParams.set("recursionLevel","full"),c.searchParams.set("download","true"),c.searchParams.set("api-version","6.0"),re(this,Je)&&c.searchParams.set("scopePath",re(this,Je)),re(this,Re)&&c.searchParams.set("version",re(this,Re)),c.toString()}toCommitsUrl(){const c=re(this,Le).call(this,re(this,Ze),re(this,nt),"_apis","git","repositories",re(this,Ge),"commits");return c.searchParams.set("api-version","6.0"),re(this,Re)&&c.searchParams.set("searchCriteria.itemVersion.version",re(this,Re)),c.toString()}getOwner(){return re(this,Ze)}getProject(){return re(this,nt)}getRepo(){return re(this,Ge)}getPath(){return re(this,Je)}getRef(){return re(this,Re)}};Ve=new WeakMap,Ze=new WeakMap,nt=new WeakMap,Ge=new WeakMap,Je=new WeakMap,Re=new WeakMap,Le=new WeakMap;let wt=Et;const Qt="dev.azure.com",yt=["clientId","clientSecret","tenantId","personalAccessToken"],ue=new Map([["ClientSecret",["clientId","clientSecret","tenantId"]],["ManagedIdentity",["clientId"]],["PersonalAccessToken",["personalAccessToken"]]]);function gt(g){for(const c of ue.entries()){const[E,$]=c,Pe=yt.filter(Be=>!$.includes(Be));if($.every(Be=>g[Be]!==void 0)&&Pe.every(Be=>g[Be]===void 0))return{kind:E,organizations:g.organizations,...$.reduce((Be,Rt)=>(Be[Rt]=g[Rt],Be),{})}}throw new Error("is not a valid credential")}function xt(g){var c,E,$,Pe,Be,Rt,Ft;const On=(c=g.getOptionalString("host"))!=null?c:Qt;let Wn=(E=g.getOptionalConfigArray("credentials"))==null?void 0:E.map(Ba=>{var Ca,ja;return{organizations:Ba.getOptionalStringArray("organizations"),personalAccessToken:(Ca=Ba.getOptionalString("personalAccessToken"))==null?void 0:Ca.trim(),tenantId:Ba.getOptionalString("tenantId"),clientId:Ba.getOptionalString("clientId"),clientSecret:(ja=Ba.getOptionalString("clientSecret"))==null?void 0:ja.trim()}});const La=($=g.getOptionalString("token"))==null?void 0:$.trim();if(g.getOptional("credential")!==void 0&&g.getOptional("credentials")!==void 0)throw new Error("Invalid Azure integration config, 'credential' and 'credentials' cannot be used together. Use 'credentials' instead.");if(g.getOptional("token")!==void 0&&g.getOptional("credentials")!==void 0)throw new Error("Invalid Azure integration config, 'token' and 'credentials' cannot be used together. Use 'credentials' instead.");if(La!==void 0){const Ba=[{personalAccessToken:La}];Wn=(Pe=Wn==null?void 0:Wn.concat(Ba))!=null?Pe:Ba}if(g.getOptional("credential")!==void 0){const Ba=[{organizations:g.getOptionalStringArray("credential.organizations"),token:(Be=g.getOptionalString("credential.token"))==null?void 0:Be.trim(),tenantId:g.getOptionalString("credential.tenantId"),clientId:g.getOptionalString("credential.clientId"),clientSecret:(Rt=g.getOptionalString("credential.clientSecret"))==null?void 0:Rt.trim()}];Wn=(Ft=Wn==null?void 0:Wn.concat(Ba))!=null?Ft:Ba}if(!_(On))throw new Error(`Invalid Azure integration config, '${On}' is not a valid host`);let ka;if(Wn!==void 0){const Ba=Wn==null?void 0:Wn.reduce((Ca,ja,tr)=>{let Na;try{gt(ja)}catch(Va){Na=Va.message}return Na!==void 0&&Ca.push(`credential at position ${tr+1} ${Na}`),Ca},Array.of()).concat(Object.entries(Wn.filter(Ca=>Ca.organizations!==void 0&&Ca.organizations.length>0).reduce((Ca,ja,tr)=>{var Na;return(Na=ja.organizations)==null||Na.forEach(Va=>{Ca[Va]||(Ca[Va]=[]),Ca[Va].push(tr+1)}),Ca},{})).filter(([Ca,ja])=>ja.length>1).reduce((Ca,[ja,tr])=>(Ca.push(`organization ${ja} is specified multiple times in credentials at positions ${tr.slice(0,tr.length-1).join(", ")} and ${tr[tr.length-1]}`),Ca),Array.of()));if((Ba==null?void 0:Ba.length)>0)throw new Error(`Invalid Azure integration config for ${On}: ${Ba.join("; ")}`);if(ka=Wn.map(Ca=>gt(Ca)),ka.some(Ca=>Ca.kind!=="PersonalAccessToken")&&On!==Qt)throw new Error(`Invalid Azure integration config for ${On}, only personal access tokens can be used with hosts other than ${Qt}`);if(ka.filter(Ca=>Ca.organizations===void 0||Ca.organizations.length===0).length>1)throw new Error(`Invalid Azure integration config for ${On}, you cannot specify multiple credentials without organizations`)}return{host:On,credentials:ka}}function ht(g){const c=g.map(xt);return c.some(E=>E.host===Qt)||c.push({host:Qt}),c}var Ut=Object.defineProperty,S=(g,c,E)=>c in g?Ut(g,c,{enumerable:!0,configurable:!0,writable:!0,value:E}):g[c]=E,P=(g,c,E)=>(S(g,typeof c!="symbol"?c+"":c,E),E);const j=class{constructor(c){this.integrationConfig=c}get type(){return"azure"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(c){var E;const{url:$,base:Pe}=c;if(de($))return $;try{const Be=wt.fromRepoUrl(Pe),Rt=new URL(Pe),Ft=new URL(`https://a.com${(E=Be.getPath())!=null?E:""}`),On=new URL($,Ft).pathname;return Rt.searchParams.set("path",On),c.lineNumber&&(Rt.searchParams.set("line",String(c.lineNumber)),Rt.searchParams.set("lineEnd",String(c.lineNumber+1)),Rt.searchParams.set("lineStartColumn","1"),Rt.searchParams.set("lineEndColumn","1")),Rt.toString()}catch{return new URL($,Pe).toString()}}resolveEditUrl(c){return c}};P(j,"factory",({config:g})=>{var c;const E=ht((c=g.getOptionalConfigArray("integrations.azure"))!=null?c:[]);return me(E.map($=>new j($)),$=>$.config.host)});let Z=j;function Ie(g){return wt.fromRepoUrl(g).toFileUrl()}function ze(g){return wt.fromRepoUrl(g).toArchiveUrl()}function dt(g){return wt.fromRepoUrl(g).toCommitsUrl()}var Qe=Object.defineProperty,et=(g,c,E)=>c in g?Qe(g,c,{enumerable:!0,configurable:!0,writable:!0,value:E}):g[c]=E,$t=(g,c,E)=>(et(g,typeof c!="symbol"?c+"":c,E),E);const tn=null;class It{constructor(c){this.credential=c,$t(this,"azureDevOpsScope","499b84ac-1321-427f-aa17-267ca6975798/.default"),$t(this,"cached")}static fromAzureDevOpsCredential(c){switch(c.kind){case"PersonalAccessToken":return It.fromPersonalAccessTokenCredential(c);case"ClientSecret":return It.fromTokenCredential(new ClientSecretCredential(c.tenantId,c.clientId,c.clientSecret));case"ManagedIdentity":return It.fromTokenCredential(new ManagedIdentityCredential(c.clientId));default:throw new Error(`Credential kind '${c.kind}' not supported`)}}static fromTokenCredential(c){return new It(c)}static fromPersonalAccessTokenCredential(c){return new It(c.personalAccessToken)}async getCredentials(){if(this.cached===void 0||this.cached.expiresAt!==void 0&&Date.now()>this.cached.expiresAt)if(typeof this.credential=="string")this.cached={headers:{Authorization:`Basic ${btoa(`:${this.credential}`)}`},type:"pat",token:this.credential};else{const c=await this.credential.getToken(this.azureDevOpsScope);if(!c)throw new Error("Failed to retrieve access token");this.cached={expiresAt:c.expiresOnTimestamp-tn,headers:{Authorization:`Bearer ${c.token}`},type:"bearer",token:c.token}}return this.cached}}class pt{constructor(c){this.providers=c}static fromIntegrations(c){const E=c.azure.list().reduce(($,Pe)=>{var Be;return(Be=Pe.config.credentials)==null||Be.forEach(Rt=>{var Ft;if(Rt.organizations===void 0||Rt.organizations.length===0)$.get(Pe.config.host)===void 0&&$.set(Pe.config.host,It.fromAzureDevOpsCredential(Rt));else{const On=It.fromAzureDevOpsCredential(Rt);(Ft=Rt.organizations)==null||Ft.forEach(Wn=>{$.set(`${Pe.config.host}/${Wn}`,On)})}}),Pe.config.host==="dev.azure.com"&&$.get(Pe.config.host)===void 0&&$.set(Pe.config.host,It.fromTokenCredential(new DefaultAzureCredential)),$},new Map);return new pt(E)}forAzureDevOpsServerOrganization(c){const E=c.pathname.split("/").filter($=>$!=="");if(c.host!=="dev.azure.com"&&E.length>0){if(E[0]!=="tfs")return this.providers.get(`${c.host}/${E[0]}`);if(E[0]==="tfs"&&E.length>1)return this.providers.get(`${c.host}/${E[1]}`)}}forAzureDevOpsOrganization(c){const E=c.pathname.split("/").filter($=>$!=="");if(c.host==="dev.azure.com"&&E.length>0)return this.providers.get(`${c.host}/${E[0]}`)}forHost(c){return this.providers.get(c.host)}async getCredentials(c){var E,$;const Pe=new URL(c.url),Be=($=(E=this.forAzureDevOpsOrganization(Pe))!=null?E:this.forAzureDevOpsServerOrganization(Pe))!=null?$:this.forHost(Pe);if(Be!==void 0)return Be.getCredentials(c)}}async function qt(g,c){var E;const $=c?{...c}:{},Pe=(E=g.credentials)==null?void 0:E.filter(Be=>Be.organizations===void 0||Be.organizations.length===0)[0];if(Pe){const Rt=await It.fromAzureDevOpsCredential(Pe).getCredentials();return{headers:{...Rt==null?void 0:Rt.headers,...$}}}return{headers:$}}const sn="bitbucket.org",an="https://api.bitbucket.org/2.0";function Vt(g){var c,E,$;const Pe=(c=g.getOptionalString("host"))!=null?c:sn;let Be=g.getOptionalString("apiBaseUrl");const Rt=(E=g.getOptionalString("token"))==null?void 0:E.trim(),Ft=g.getOptionalString("username"),On=($=g.getOptionalString("appPassword"))==null?void 0:$.trim();if(!_(Pe))throw new Error(`Invalid Bitbucket integration config, '${Pe}' is not a valid host`);return Be?Be=(0,b.trimEnd)(Be,"/"):Pe===sn?Be=an:Be=`https://${Pe}/rest/api/1.0`,{host:Pe,apiBaseUrl:Be,token:Rt,username:Ft,appPassword:On}}function Ce(g){const c=g.map(Vt);return c.some(E=>E.host===sn)||c.push({host:sn,apiBaseUrl:an}),c}var Ye=Object.defineProperty,Kt=(g,c,E)=>c in g?Ye(g,c,{enumerable:!0,configurable:!0,writable:!0,value:E}):g[c]=E,jt=(g,c,E)=>(Kt(g,typeof c!="symbol"?c+"":c,E),E);const Wt=class{constructor(c){this.integrationConfig=c}get type(){return"bitbucket"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(c){const E=G(c);if(!c.lineNumber)return E;const $=new URL(E);return this.integrationConfig.host==="bitbucket.org"?$.hash=`lines-${c.lineNumber}`:$.hash=`${c.lineNumber}`,$.toString()}resolveEditUrl(c){const E=l()(c),$=new URL(c);return $.searchParams.set("mode","edit"),$.searchParams.set("spa","0"),$.searchParams.set("at",E.ref),$.toString()}};jt(Wt,"factory",({config:g})=>{var c,E,$;const Pe=Ce(($=g.getOptionalConfigArray("integrations.bitbucket"))!=null?$:[...(c=g.getOptionalConfigArray("integrations.bitbucketCloud"))!=null?c:[],...(E=g.getOptionalConfigArray("integrations.bitbucketServer"))!=null?E:[]]);return me(Pe.map(Be=>new Wt(Be)),Be=>Be.config.host)});let ft=Wt;async function Ln(g,c){const{name:E,owner:$,resource:Pe}=parseGitUrl(g),Be=Pe==="bitbucket.org";let Rt=Be?`${c.apiBaseUrl}/repositories/${$}/${E}`:`${c.apiBaseUrl}/projects/${$}/repos/${E}/default-branch`,Ft=await fetch(Rt,An(c));if(Ft.status===404&&!Be&&(Rt=`${c.apiBaseUrl}/projects/${$}/repos/${E}/branches/default`,Ft=await fetch(Rt,An(c))),!Ft.ok){const Wn=`Failed to retrieve default branch from ${Rt}, ${Ft.status} ${Ft.statusText}`;throw new Error(Wn)}let On;if(Be)On=(await Ft.json()).mainbranch.name;else{const{displayId:Wn}=await Ft.json();On=Wn}if(!On)throw new Error(`Failed to read default branch from ${Rt}. Response ${Ft.status} ${Ft.json()}`);return On}async function dn(g,c){const{name:E,owner:$,ref:Pe,protocol:Be,resource:Rt,filepath:Ft}=parseGitUrl(g),On=Rt==="bitbucket.org";let Wn=Pe;Wn||(Wn=await Ln(g,c));const La=Ft?`&path=${encodeURIComponent(decodeURIComponent(Ft))}`:"";return On?`${Be}://${Rt}/${$}/${E}/get/${Wn}.tar.gz`:`${c.apiBaseUrl}/projects/${$}/repos/${E}/archive?format=tgz&at=${Wn}&prefix=${$}-${E}${La}`}function Xt(g,c){try{const{owner:E,name:$,ref:Pe,filepathtype:Be,filepath:Rt}=parseGitUrl(g);if(!E||!$||Be!=="browse"&&Be!=="raw"&&Be!=="src")throw new Error("Invalid Bitbucket URL or file path");const Ft=Rt.replace(/^\//,"");if(c.host==="bitbucket.org"){if(!Pe)throw new Error("Invalid Bitbucket URL or file path");return`${c.apiBaseUrl}/repositories/${E}/${$}/src/${Pe}/${Ft}`}return`${c.apiBaseUrl}/projects/${E}/repos/${$}/raw/${Ft}?at=${Pe}`}catch(E){throw new Error(`Incorrect URL: ${g}, ${E}`)}}function An(g){const c={};if(g.token)c.Authorization=`Bearer ${g.token}`;else if(g.username&&g.appPassword){const E=pe.from(`${g.username}:${g.appPassword}`,"utf8");c.Authorization=`Basic ${E.toString("base64")}`}return{headers:c}}const Xe="bitbucket.org",mt="https://api.bitbucket.org/2.0";function Dt(g){var c;const E=Xe,$=mt,Pe=g.getString("username"),Be=(c=g.getString("appPassword"))==null?void 0:c.trim();return{host:E,apiBaseUrl:$,username:Pe,appPassword:Be}}function rt(g){const c=g.map(Dt);return c.length===0&&c.push({host:Xe,apiBaseUrl:mt}),c}var qe=Object.defineProperty,V=(g,c,E)=>c in g?qe(g,c,{enumerable:!0,configurable:!0,writable:!0,value:E}):g[c]=E,he=(g,c,E)=>(V(g,typeof c!="symbol"?c+"":c,E),E);const Ee=class{constructor(c){this.integrationConfig=c}get type(){return"bitbucketCloud"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(c){const E=G(c);if(c.lineNumber){const $=new URL(E);return $.hash=`lines-${c.lineNumber}`,$.toString()}return E}resolveEditUrl(c){const E=l()(c),$=new URL(c);return $.searchParams.set("mode","edit"),$.searchParams.set("at",E.ref),$.toString()}};he(Ee,"factory",({config:g})=>{var c;const E=rt((c=g.getOptionalConfigArray("integrations.bitbucketCloud"))!=null?c:[]);return me(E.map($=>new Ee($)),$=>$.config.host)});let Pt=Ee;async function Nt(g,c){const{name:E,owner:$}=parseGitUrl(g),Pe=`${c.apiBaseUrl}/repositories/${$}/${E}`,Be=await fetch(Pe,Dn(c));if(!Be.ok){const On=`Failed to retrieve default branch from ${Pe}, ${Be.status} ${Be.statusText}`;throw new Error(On)}const Ft=(await Be.json()).mainbranch.name;if(!Ft)throw new Error(`Failed to read default branch from ${Pe}. Response ${Be.status} ${Be.json()}`);return Ft}async function ln(g,c){const{name:E,owner:$,ref:Pe,protocol:Be,resource:Rt}=parseGitUrl(g);let Ft=Pe;return Ft||(Ft=await Nt(g,c)),`${Be}://${Rt}/${$}/${E}/get/${Ft}.tar.gz`}function bn(g,c){try{const{owner:E,name:$,ref:Pe,filepathtype:Be,filepath:Rt}=parseGitUrl(g);if(!E||!$||Be!=="src"&&Be!=="raw")throw new Error("Invalid Bitbucket Cloud URL or file path");const Ft=Rt.replace(/^\//,"");if(!Pe)throw new Error("Invalid Bitbucket Cloud URL or file path");return`${c.apiBaseUrl}/repositories/${E}/${$}/src/${Pe}/${Ft}`}catch(E){throw new Error(`Incorrect URL: ${g}, ${E}`)}}function Dn(g){const c={};if(g.username&&g.appPassword){const E=pe.from(`${g.username}:${g.appPassword}`,"utf8");c.Authorization=`Basic ${E.toString("base64")}`}return{headers:c}}function Un(g){var c;const E=g.getString("host");let $=g.getOptionalString("apiBaseUrl");const Pe=(c=g.getOptionalString("token"))==null?void 0:c.trim(),Be=g.getOptionalString("username"),Rt=g.getOptionalString("password");if(!_(E))throw new Error(`Invalid Bitbucket Server integration config, '${E}' is not a valid host`);return $?$=(0,b.trimEnd)($,"/"):$=`https://${E}/rest/api/1.0`,{host:E,apiBaseUrl:$,token:Pe,username:Be,password:Rt}}function Vn(g){return g.map(Un)}var Pn=Object.defineProperty,Yn=(g,c,E)=>c in g?Pn(g,c,{enumerable:!0,configurable:!0,writable:!0,value:E}):g[c]=E,da=(g,c,E)=>(Yn(g,typeof c!="symbol"?c+"":c,E),E);const ct=class{constructor(c){this.integrationConfig=c}get type(){return"bitbucketServer"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(c){const E=G(c);if(c.lineNumber){const $=new URL(E);return $.hash=c.lineNumber.toString(),$.toString()}return E}resolveEditUrl(c){return c.includes("?")?c.substring(0,c.indexOf("?")):c}};da(ct,"factory",({config:g})=>{var c;const E=Vn((c=g.getOptionalConfigArray("integrations.bitbucketServer"))!=null?c:[]);return me(E.map($=>new ct($)),$=>$.config.host)});let m=ct;async function R(g,c){const{name:E,owner:$}=parseGitUrl(g);let Pe=`${c.apiBaseUrl}/projects/${$}/repos/${E}/default-branch`,Be=await fetch(Pe,I(c));if(Be.status===404&&(Pe=`${c.apiBaseUrl}/projects/${$}/repos/${E}/branches/default`,Be=await fetch(Pe,I(c))),!Be.ok){const On=`Failed to retrieve default branch from ${Pe}, ${Be.status} ${Be.statusText}`;throw new Error(On)}const{displayId:Rt}=await Be.json(),Ft=Rt;if(!Ft)throw new Error(`Failed to read default branch from ${Pe}. Response ${Be.status} ${Be.json()}`);return Ft}async function K(g,c){const{name:E,owner:$,ref:Pe,filepath:Be}=parseGitUrl(g);let Rt=Pe;Rt||(Rt=await R(g,c));const Ft=Be?`&path=${encodeURIComponent(decodeURIComponent(Be))}`:"";return`${c.apiBaseUrl}/projects/${$}/repos/${E}/archive?format=tgz&at=${Rt}&prefix=${$}-${E}${Ft}`}function le(g,c){try{const{owner:E,name:$,ref:Pe,filepathtype:Be,filepath:Rt}=parseGitUrl(g);if(!E||!$||Be!=="browse"&&Be!=="raw"&&Be!=="src")throw new Error("Invalid Bitbucket Server URL or file path");const Ft=Rt.replace(/^\//,"");return`${c.apiBaseUrl}/projects/${E}/repos/${$}/raw/${Ft}?at=${Pe}`}catch(E){throw new Error(`Incorrect URL: ${g}, ${E}`)}}function I(g){const c={};if(g.token)c.Authorization=`Bearer ${g.token}`;else if(g.username&&g.password){const E=pe.from(`${g.username}:${g.password}`,"utf8");c.Authorization=`Basic ${E.toString("base64")}`}return{headers:c}}function U(g){var c;const E=g.getString("host");let $=g.getOptionalString("baseUrl"),Pe=g.getOptionalString("cloneUrl"),Be=g.getOptionalString("gitilesBaseUrl");const Rt=g.getOptionalString("username"),Ft=(c=g.getOptionalString("password"))==null?void 0:c.trim();if(_(E)){if($&&!de($))throw new Error(`Invalid Gerrit integration config, '${$}' is not a valid baseUrl`);if(Pe&&!de(Pe))throw new Error(`Invalid Gerrit integration config, '${Pe}' is not a valid cloneUrl`);if(Be&&!de(Be))throw new Error(`Invalid Gerrit integration config, '${Be}' is not a valid gitilesBaseUrl`)}else throw new Error(`Invalid Gerrit integration config, '${E}' is not a valid host`);return $?$=(0,b.trimEnd)($,"/"):$=`https://${E}`,Be?Be=(0,b.trimEnd)(Be,"/"):Be=`https://${E}`,Pe?Pe=(0,b.trimEnd)(Pe,"/"):Pe=$,{host:E,baseUrl:$,cloneUrl:Pe,gitilesBaseUrl:Be,username:Rt,password:Ft}}function Y(g){return g.map(U)}const we=")]}'";function Oe(g,c){const E=new URL(g.gitilesBaseUrl),$=new URL(c),Be=$.pathname.substring($.pathname.startsWith("/a/")?2:0).replace(E.pathname,"").split("/").filter(ka=>!!ka),Rt=Be.indexOf("+");if(Rt<=0)throw new Error(`Unable to parse project from url: ${c}`);const Ft=(0,b.trimStart)(Be.slice(0,Rt).join("/"),"/"),On=Be.indexOf("heads");if(On<=0)throw new Error(`Unable to parse branch from url: ${c}`);const Wn=Be[On+1],La=Be.slice(On+2).join("/");return{branch:Wn,filePath:La===""?"/":La,project:Ft}}function ot(g,c,E,$){return`${g.gitilesBaseUrl}/${c}/+/refs/heads/${E}/${(0,b.trimStart)($,"/")}`}function Ot(g,c,E,$){const Pe=$==="/"||$===""?".tar.gz":`/${$}.tar.gz`;return`${Zt(g)}/${c}/+archive/refs/heads/${E}${Pe}`}function en(g){return g.password?"/a/":"/"}function Zt(g){if(!g.baseUrl||!g.gitilesBaseUrl)throw new Error("Unexpected Gerrit config values. baseUrl or gitilesBaseUrl not set.");if(g.gitilesBaseUrl.startsWith(g.baseUrl))return g.gitilesBaseUrl.replace(g.baseUrl.concat("/"),g.baseUrl.concat(en(g)));if(g.password)throw new Error("Since the baseUrl (Gerrit) is not part of the gitilesBaseUrl, an authentication URL could not be constructed.");return g.gitilesBaseUrl}function pn(g,c){const{branch:E,project:$}=Oe(g,c);return`${g.baseUrl}${en(g)}projects/${encodeURIComponent($)}/branches/${E}`}function mn(g,c){const{project:E}=Oe(g,c);return`${g.cloneUrl}${en(g)}${E}`}function kt(g,c){const{branch:E,filePath:$,project:Pe}=Oe(g,c);return`${g.baseUrl}${en(g)}projects/${encodeURIComponent(Pe)}/branches/${E}/files/${encodeURIComponent($)}/content`}function Sn(g){return`${g.baseUrl}${en(g)}projects/`}function un(g){const c={};if(!g.password)return c;const E=pe.from(`${g.username}:${g.password}`,"utf8");return c.Authorization=`Basic ${E.toString("base64")}`,{headers:c}}async function $n(g){const c=await g.text();if(c.startsWith(we))try{return JSON.parse(c.slice(we.length))}catch(E){throw new Error(`Invalid response from Gerrit: ${c.slice(0,10)} - ${E}`)}throw new Error(`Gerrit JSON body prefix missing. Found: ${c.slice(0,10)}`)}var qn=Object.defineProperty,na=(g,c,E)=>c in g?qn(g,c,{enumerable:!0,configurable:!0,writable:!0,value:E}):g[c]=E,kn=(g,c,E)=>(na(g,typeof c!="symbol"?c+"":c,E),E);const wn=class{constructor(c){this.integrationConfig=c}get type(){return"gerrit"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(c){const{url:E,base:$,lineNumber:Pe}=c;let Be;if(E.startsWith("/")){const{branch:Rt,project:Ft}=Oe(this.config,$);return ot(this.config,Ft,Rt,E)}return E?Be=new URL(E,$):Be=new URL($),Pe&&(Be.hash=Pe.toString()),Be.toString()}resolveEditUrl(c){return c}};kn(wn,"factory",({config:g})=>{var c;const E=Y((c=g.getOptionalConfigArray("integrations.gerrit"))!=null?c:[]);return me(E.map($=>new wn($)),$=>$.config.host)});let gn=wn;function Jt(g){var c;const E=g.getString("host");let $=g.getOptionalString("baseUrl");const Pe=g.getOptionalString("username"),Be=(c=g.getOptionalString("password"))==null?void 0:c.trim();if(_(E)){if($&&!de($))throw new Error(`Invalid Gitea integration config, '${$}' is not a valid baseUrl`)}else throw new Error(`Invalid Gitea integration config, '${E}' is not a valid host`);return $?$=(0,b.trimEnd)($,"/"):$=`https://${E}`,{host:E,baseUrl:$,username:Pe,password:Be}}function vn(g,c){const E=ge(g,c);return`${E.url}/${E.owner}/${E.name}/_edit/${E.ref}/${E.path}`}function _n(g,c){const E=ge(g,c);return`${E.url}/api/v1/repos/${E.owner}/${E.name}/contents/${E.path}?ref=${E.ref}`}function Aa(g,c){const E=ge(g,c);return`${E.url}/api/v1/repos/${E.owner}/${E.name}/archive/${E.ref}.tar.gz`}function Oa(g,c){const E=ge(g,c);return`${E.url}/api/v1/repos/${E.owner}/${E.name}/git/commits/${E.ref}`}function J(g){const c={},{username:E,password:$}=g;return $?(E?c.Authorization=`basic ${pe.from(`${E}:${$}`).toString("base64")}`:c.Authorization=`token ${$}`,{headers:c}):c}function ge(g,c){var E;const $=(E=g.baseUrl)!=null?E:`https://${g.host}`;try{const[Pe,Be,Rt,Ft,On,Wn,...La]=c.replace($,"").split("/"),ka=La.join("/").replace(/^\//,"");return{url:$,owner:Be,name:Rt,ref:Wn,path:ka}}catch(Pe){throw new Error(`Incorrect URL: ${c}, ${Pe}`)}}var ke=Object.defineProperty,it=(g,c,E)=>c in g?ke(g,c,{enumerable:!0,configurable:!0,writable:!0,value:E}):g[c]=E,St=(g,c,E)=>(it(g,typeof c!="symbol"?c+"":c,E),E);const At=class{constructor(c){this.config=c}get type(){return"gitea"}get title(){return this.config.host}resolveUrl(c){return G(c)}resolveEditUrl(c){return vn(this.config,c)}};St(At,"factory",({config:g})=>{var c;const $=((c=g.getOptionalConfigArray("integrations.gitea"))!=null?c:[]).map(Pe=>Jt(Pe));return me($.map(Pe=>new At(Pe)),Pe=>Pe.config.host)});let cn=At;const hn="github.com",ie="https://api.github.com",Te="https://raw.githubusercontent.com";function We(g){var c,E,$;const Pe=(c=g.getOptionalString("host"))!=null?c:hn;let Be=g.getOptionalString("apiBaseUrl"),Rt=g.getOptionalString("rawBaseUrl");const Ft=(E=g.getOptionalString("token"))==null?void 0:E.trim(),On=($=g.getOptionalConfigArray("apps"))==null?void 0:$.map(Wn=>({appId:Wn.getNumber("appId"),clientId:Wn.getString("clientId"),clientSecret:Wn.getString("clientSecret"),webhookSecret:Wn.getString("webhookSecret"),privateKey:Wn.getString("privateKey"),allowedInstallationOwners:Wn.getOptionalStringArray("allowedInstallationOwners")}));if(!_(Pe))throw new Error(`Invalid GitHub integration config, '${Pe}' is not a valid host`);return Be?Be=(0,b.trimEnd)(Be,"/"):Pe===hn&&(Be=ie),Rt?Rt=(0,b.trimEnd)(Rt,"/"):Pe===hn&&(Rt=Te),{host:Pe,apiBaseUrl:Be,rawBaseUrl:Rt,token:Ft,apps:On}}function Ne(g){const c=g.map(We);return c.some(E=>E.host===hn)||c.push({host:hn,apiBaseUrl:ie,rawBaseUrl:Te}),c}function He(g,c,E){try{const{owner:$,name:Pe,ref:Be,filepathtype:Rt,filepath:Ft}=parseGitUrl(g);if(!$||!Pe||!Be||Rt!=="blob"&&Rt!=="raw"&&Rt!=="tree")throw new Error("Invalid GitHub URL or file path");const On=Ft.replace(/^\//,"");return _t(c,E)==="api"?`${c.apiBaseUrl}/repos/${$}/${Pe}/contents/${On}?ref=${Be}`:`${c.rawBaseUrl}/${$}/${Pe}/${Be}/${On}`}catch($){throw new Error(`Incorrect URL: ${g}, ${$}`)}}function zt(g,c){const E={};return _t(g,c)==="api"&&(E.Accept="application/vnd.github.v3.raw"),c.token&&(E.Authorization=`token ${c.token}`),{headers:E}}function _t(g,c){return g.apiBaseUrl&&(c.token||!g.rawBaseUrl)?"api":"raw"}var bt=Object.defineProperty,Gt=(g,c,E)=>c in g?bt(g,c,{enumerable:!0,configurable:!0,writable:!0,value:E}):g[c]=E,fn=(g,c,E)=>(Gt(g,typeof c!="symbol"?c+"":c,E),E);class rn{constructor(){fn(this,"tokenCache",new Map),fn(this,"isExpired",c=>t.c9.local()>c)}async getOrCreateToken(c,E,$){let Pe=this.tokenCache.get(c);if((!Pe||this.isExpired(Pe.expiresAt))&&(Pe=await $(),Pe.expiresAt=Pe.expiresAt.minus({minutes:10}),this.tokenCache.set(c,Pe)),!this.appliesToRepo(Pe,E))throw new Error(`The Backstage GitHub application used in the ${c} organization does not have access to a repository with the name ${E}`);return{accessToken:Pe.token}}appliesToRepo(c,E){return E===void 0?!0:c.repositories!==void 0?c.repositories.includes(E):!0}}const Nn={Accept:"application/vnd.github.machine-man-preview+json"};class Mn{constructor(c,E){fn(this,"appClient"),fn(this,"baseUrl"),fn(this,"baseAuthConfig"),fn(this,"cache",new rn),fn(this,"allowedInstallationOwners"),this.allowedInstallationOwners=c.allowedInstallationOwners,this.baseUrl=E,this.baseAuthConfig={appId:c.appId,privateKey:c.privateKey.replace(/\\n/gm,`
`)},this.appClient=new Q.E({baseUrl:E,headers:Nn,authStrategy:q.K,auth:this.baseAuthConfig})}async getInstallationCredentials(c,E){var $;return this.allowedInstallationOwners&&!(($=this.allowedInstallationOwners)!=null&&$.includes(c))?{accessToken:void 0}:this.cache.getOrCreateToken(c,E,async()=>{var Pe;const{installationId:Be,suspended:Rt}=await this.getInstallationData(c);if(Rt)throw new Error(`The GitHub application for ${c} is suspended`);const Ft=await this.appClient.apps.createInstallationAccessToken({installation_id:Be,headers:Nn});let On;if(Ft.data.repository_selection==="selected"){const Wn=new Q.E({baseUrl:this.baseUrl,auth:Ft.data.token}),La=await Wn.paginate(Wn.apps.listReposAccessibleToInstallation);On=((Pe=La.repositories)!=null?Pe:La).map(Ba=>Ba.name)}return{token:Ft.data.token,expiresAt:t.c9.fromISO(Ft.data.expires_at),repositories:On}})}getInstallations(){return this.appClient.paginate(this.appClient.apps.listInstallations)}async getInstallationData(c){const $=(await this.getInstallations()).find(Be=>{var Rt;return Be.account&&"login"in Be.account&&((Rt=Be.account.login)==null?void 0:Rt.toLocaleLowerCase("en-US"))===c.toLocaleLowerCase("en-US")});if($)return{installationId:$.id,suspended:!!$.suspended_by};const Pe=new Error(`No app installation found for ${c} in ${this.baseAuthConfig.appId}`);throw Pe.name="NotFoundError",Pe}}class Gn{constructor(c){fn(this,"apps");var E,$;this.apps=($=(E=c.apps)==null?void 0:E.map(Pe=>new Mn(Pe,c.apiBaseUrl)))!=null?$:[]}async getAllInstallations(){return this.apps.length?(await Promise.all(this.apps.map(E=>E.getInstallations()))).flat():[]}async getAppToken(c,E){if(this.apps.length===0)return;const $=await Promise.all(this.apps.map(Ft=>Ft.getInstallationCredentials(c,E).then(On=>({credentials:On,error:void 0}),On=>({credentials:void 0,error:On})))),Pe=$.find(Ft=>{var On;return(On=Ft.credentials)==null?void 0:On.accessToken});if(Pe)return Pe.credentials.accessToken;const Rt=$.map(Ft=>Ft.error).find(Ft=>(Ft==null?void 0:Ft.name)!=="NotFoundError");if(Rt)throw Rt}}const la=class{constructor(c,E){this.githubAppCredentialsMux=c,this.token=E}async getCredentials(c){const E=l()(c.url),$=E.owner||E.name,Pe=E.owner?E.name:void 0;let Be="app",Rt=await this.githubAppCredentialsMux.getAppToken($,Pe);return Rt||(Be="token",Rt=this.token),{headers:Rt?{Authorization:`Bearer ${Rt}`}:void 0,token:Rt,type:Be}}};fn(la,"create",g=>new la(new Gn(g),g.token));let Fn=null;class ea{constructor(c){this.providers=c}static fromIntegrations(c){const E=new Map;return c.github.list().forEach($=>{const Pe=Fn.create($.config);E.set($.config.host,Pe)}),new ea(E)}async getCredentials(c){const E=new URL(c.url),$=this.providers.get(E.host);if(!$)throw new Error(`There is no GitHub integration that matches ${c.url}. Please add a configuration for an integration.`);return $.getCredentials(c)}}var ca=Object.defineProperty,sa=(g,c,E)=>c in g?ca(g,c,{enumerable:!0,configurable:!0,writable:!0,value:E}):g[c]=E,Ea=(g,c,E)=>(sa(g,typeof c!="symbol"?c+"":c,E),E);const ba=class{constructor(c){this.integrationConfig=c}get type(){return"github"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(c){return Ta(G(c),"tree")}resolveEditUrl(c){return Ta(c,"edit")}parseRateLimitInfo(c){return{isRateLimited:c.status===429||c.status===403&&c.headers.get("x-ratelimit-remaining")==="0"}}};Ea(ba,"factory",({config:g})=>{var c;const E=Ne((c=g.getOptionalConfigArray("integrations.github"))!=null?c:[]);return me(E.map($=>new ba($)),$=>$.config.host)});let Ra=ba;function Ta(g,c){return g.replace(/\/\/([^/]+)\/([^/]+)\/([^/]+)\/(blob|tree|edit)\//,(E,$,Pe,Be)=>`//${$}/${Pe}/${Be}/${c}/`)}var Ha=Object.defineProperty,Ja=(g,c,E)=>c in g?Ha(g,c,{enumerable:!0,configurable:!0,writable:!0,value:E}):g[c]=E,Za=(g,c,E)=>(Ja(g,typeof c!="symbol"?c+"":c,E),E);const hr=null;class gr extends Ra{constructor(c){super(c)}get config(){return super.config}}Za(gr,"factory",Ra.factory);const or=null,ur=null,Sa=null,qa="gitlab.com",er="https://gitlab.com/api/v4";function ir(g){var c;const E=g.getString("host");let $=g.getOptionalString("apiBaseUrl");const Pe=(c=g.getOptionalString("token"))==null?void 0:c.trim();let Be=g.getOptionalString("baseUrl");if($?$=(0,b.trimEnd)($,"/"):E===qa&&($=er),Be?Be=(0,b.trimEnd)(Be,"/"):Be=`https://${E}`,_(E)){if(!$||!de($))throw new Error(`Invalid GitLab integration config, '${$}' is not a valid apiBaseUrl`);if(!de(Be))throw new Error(`Invalid GitLab integration config, '${Be}' is not a valid baseUrl`)}else throw new Error(`Invalid GitLab integration config, '${E}' is not a valid host`);return{host:E,token:Pe,apiBaseUrl:$,baseUrl:Be}}function ar(g){const c=g.map(ir);return c.some(E=>E.host===qa)||c.push({host:qa,apiBaseUrl:er,baseUrl:`https://${qa}`}),c}function $e(g){let c="";return g.host!==qa&&(c=new URL(g.baseUrl).pathname),trimEnd(c,"/")}async function ce(g,c){const E=await Kn(g,c);return Rn(g,E,c).toString()}function st(g){const{token:c=""}=g;return{headers:{"PRIVATE-TOKEN":c}}}function Rn(g,c,E){try{const $=new URL(g),Pe=$.pathname.split("/blob/").slice(1).join("/blob/"),[Be,...Rt]=Pe.split("/"),Ft=$e(E);return $.pathname=[...Ft?[Ft]:[],"api/v4/projects",c,"repository/files",encodeURIComponent(decodeURIComponent(Rt.join("/"))),"raw"].join("/"),$.search=`?ref=${Be}`,$}catch($){throw new Error(`Incorrect url: ${g}, ${$}`)}}async function Kn(g,c){const E=new URL(g);if(!E.pathname.includes("/blob/"))throw new Error("Please provide full path to yaml file from GitLab");try{let $=E.pathname.split("/-/blob/")[0].split("/blob/")[0];const Pe=$e(c);Pe&&($=$.replace(Pe,""));const Be=new URL(`${E.origin}${Pe}/api/v4/projects/${encodeURIComponent($.replace(/^\//,""))}`),Rt=await fetch(Be.toString(),st(c)),Ft=await Rt.json();if(!Rt.ok)throw new Error(`GitLab Error '${Ft.error}', ${Ft.error_description}`);return Number(Ft.id)}catch($){throw new Error(`Could not get GitLab project ID for: ${g}, ${$}`)}}var aa=Object.defineProperty,ra=(g,c,E)=>c in g?aa(g,c,{enumerable:!0,configurable:!0,writable:!0,value:E}):g[c]=E,va=(g,c,E)=>(ra(g,typeof c!="symbol"?c+"":c,E),E);const _a=class{constructor(c){this.integrationConfig=c}get type(){return"gitlab"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(c){return G(c)}resolveEditUrl(c){return Ia(c,"edit")}};va(_a,"factory",({config:g})=>{var c;const E=ar((c=g.getOptionalConfigArray("integrations.gitlab"))!=null?c:[]);return me(E.map($=>new _a($)),$=>$.config.host)});let wa=_a;function Ia(g,c){return g.replace(/\/\-\/(blob|tree|edit)\//,`/-/${c}/`)}var Ka=Object.defineProperty,dr=(g,c,E)=>c in g?Ka(g,c,{enumerable:!0,configurable:!0,writable:!0,value:E}):g[c]=E,ha=(g,c,E)=>(dr(g,typeof c!="symbol"?c+"":c,E),E);const za=class{constructor(c){this.token=c}async getCredentials(c){return this.token?{headers:{Authorization:`Bearer ${this.token}`},token:this.token}:{}}};ha(za,"create",g=>new za(g.token));let Er=null;class sr{constructor(c){this.providers=c}static fromIntegrations(c){const E=new Map;return c.gitlab.list().forEach($=>{const Pe=Er.create($.config);E.set($.config.host,Pe)}),new sr(E)}async getCredentials(c){const E=new URL(c.url),$=this.providers.get(E.host);if(!$)throw new Error(`There is no GitLab integration that matches ${c.url}. Please add a configuration for an integration.`);return $.getCredentials(c)}}function $a(g){if(!g)return{};if(!g.has("clientEmail")&&!g.has("privateKey"))return{};const c=g.getString("privateKey").split("\\n").join(`
`);return{clientEmail:g.getString("clientEmail"),privateKey:c}}var Ar=Object.defineProperty,Zr=(g,c,E)=>c in g?Ar(g,c,{enumerable:!0,configurable:!0,writable:!0,value:E}):g[c]=E,Lr=(g,c,E)=>(Zr(g,typeof c!="symbol"?c+"":c,E),E);class Br{constructor(c){Lr(this,"byType"),this.byType=c}static fromConfig(c){return new Br({awsS3:M.factory({config:c}),awsCodeCommit:N.factory({config:c}),azure:Z.factory({config:c}),bitbucket:ft.factory({config:c}),bitbucketCloud:Pt.factory({config:c}),bitbucketServer:m.factory({config:c}),gerrit:gn.factory({config:c}),github:Ra.factory({config:c}),gitlab:wa.factory({config:c}),gitea:cn.factory({config:c})})}get awsS3(){return this.byType.awsS3}get awsCodeCommit(){return this.byType.awsCodeCommit}get azure(){return this.byType.azure}get bitbucket(){return this.byType.bitbucket}get bitbucketCloud(){return this.byType.bitbucketCloud}get bitbucketServer(){return this.byType.bitbucketServer}get gerrit(){return this.byType.gerrit}get github(){return this.byType.github}get gitlab(){return this.byType.gitlab}get gitea(){return this.byType.gitea}list(){return Object.values(this.byType).flatMap(c=>c.list())}byUrl(c){let E=Object.values(this.byType).map($=>$.byUrl(c)).filter(Boolean);if(E.length>1){const $=E.filter(Pe=>!(Pe instanceof ft));$.length!==0&&(E=$)}return E[0]}byHost(c){return Object.values(this.byType).map(E=>E.byHost(c)).find(Boolean)}resolveUrl(c){const E=this.byUrl(c.base);return E?E.resolveUrl(c):G(c)}resolveEditUrl(c){const E=this.byUrl(c);return E?E.resolveEditUrl(c):c}}},33861:(In,Ct,e)=>{"use strict";e.d(Ct,{a:()=>Q,b:()=>q,d:()=>ut,r:()=>r});var s=e(11638),l=e(5124),b=e(14041),A=e(22968),W=e(54917);const r=(0,s.HM)({id:"api-docs"}),q=(0,s.Il)({id:"register-component",optional:!0}),Q=(0,l.c)({id:"plugin.api-docs.config"}),t=b.lazy(()=>Promise.all([e.e(1072),e.e(7576),e.e(2589),e.e(6463)]).then(e.bind(e,86463)).then(z=>({default:z.AsyncApiDefinition}))),pe=z=>b.createElement(b.Suspense,{fallback:b.createElement(A.ke,null)},b.createElement(t,{...z})),_=b.lazy(()=>e.e(1346).then(e.bind(e,71346)).then(z=>({default:z.GraphQlDefinition}))),de=z=>b.createElement(b.Suspense,{fallback:b.createElement(A.ke,null)},b.createElement(_,{...z})),me=b.lazy(()=>Promise.all([e.e(1072),e.e(7576),e.e(4150)]).then(e.bind(e,64150)).then(z=>({default:z.OpenApiDefinition}))),G=z=>{var ee;const D=(ee=z.supportedSubmitMethods)==null?void 0:ee.map(w=>w.toLocaleLowerCase());return b.createElement(b.Suspense,{fallback:b.createElement(A.ke,null)},b.createElement(me,{...z,supportedSubmitMethods:D}))},xe=z=>{const ee=(0,W.A)();return b.createElement(A.z7,{customStyle:{backgroundColor:ee.palette.background.default},text:z.definition,language:"protobuf",showCopyCodeButton:!0})},ye=z=>{const{definition:ee}=z,D=(0,W.A)();return b.createElement(A.z7,{customStyle:{backgroundColor:D.palette.background.default},text:ee,language:"typescript",showCopyCodeButton:!0})};function ut(){return[{type:"openapi",title:"OpenAPI",rawLanguage:"yaml",component:z=>b.createElement(G,{definition:z})},{type:"asyncapi",title:"AsyncAPI",rawLanguage:"yaml",component:z=>b.createElement(pe,{definition:z})},{type:"graphql",title:"GraphQL",rawLanguage:"graphql",component:z=>b.createElement(de,{definition:z})},{type:"grpc",title:"gRPC",component:z=>b.createElement(xe,{definition:z})},{type:"trpc",title:"tRPC",component:z=>b.createElement(ye,{definition:z})}]}},20440:(In,Ct,e)=>{"use strict";e.d(Ct,{Br:()=>q,Io:()=>pe,Rf:()=>W,Vw:()=>r,aR:()=>t,hR:()=>A,l:()=>_,pW:()=>Q});var s=e(33861),l=e(14041),b=e(11638);const A=(0,b.i1)({id:"api-docs",routes:{root:s.r},apis:[(0,b.bW)({api:s.a,deps:{},factory:()=>{const de=(0,s.d)();return{getApiDefinitionWidget:me=>de.find(G=>G.type===me.spec.type)}}})],externalRoutes:{registerApi:s.b}}),W=A.provide((0,b.QJ)({name:"ApiExplorerPage",component:()=>e.e(6017).then(e.bind(e,16017)).then(de=>de.ApiExplorerIndexPage),mountPoint:s.r})),r=A.provide((0,b.NC)({name:"EntityApiDefinitionCard",component:{lazy:()=>e.e(8108).then(e.bind(e,98108)).then(de=>de.ApiDefinitionCard)}})),q=A.provide((0,b.NC)({name:"EntityConsumedApisCard",component:{lazy:()=>e.e(9721).then(e.bind(e,29721)).then(de=>de.ConsumedApisCard)}})),Q=A.provide((0,b.NC)({name:"EntityConsumingComponentsCard",component:{lazy:()=>e.e(8589).then(e.bind(e,8589)).then(de=>de.ConsumingComponentsCard)}})),t=A.provide((0,b.NC)({name:"EntityProvidedApisCard",component:{lazy:()=>e.e(9721).then(e.bind(e,29721)).then(de=>de.ProvidedApisCard)}})),pe=A.provide((0,b.NC)({name:"EntityProvidingComponentsCard",component:{lazy:()=>e.e(8589).then(e.bind(e,8589)).then(de=>de.ProvidingComponentsCard)}})),_=A.provide((0,b.NC)({name:"EntityHasApisCard",component:{lazy:()=>e.e(9721).then(e.bind(e,29721)).then(de=>de.HasApisCard)}}))},99993:(In,Ct,e)=>{"use strict";e.d(Ct,{C4:()=>A,Nf:()=>W,tS:()=>r});var s=e(50585);const l="catalog-entity",b=(0,s.iP)({name:"catalog.entity.read",attributes:{action:"read"},resourceType:l}),A=(0,s.iP)({name:"catalog.entity.create",attributes:{action:"create"}}),W=(0,s.iP)({name:"catalog.entity.delete",attributes:{action:"delete"},resourceType:l}),r=(0,s.iP)({name:"catalog.entity.refresh",attributes:{action:"update"},resourceType:l}),q=(0,s.iP)({name:"catalog.location.read",attributes:{action:"read"}}),Q=(0,s.iP)({name:"catalog.location.create",attributes:{action:"create"}}),t=(0,s.iP)({name:"catalog.location.delete",attributes:{action:"delete"}}),pe=[b,A,W,r,q,Q,t]},6906:(In,Ct,e)=>{"use strict";e.d(Ct,{A:()=>w,D:()=>M,E:()=>Fe,a:()=>X,c:()=>Ae});var s=e(29835),l=e(22968),b=e(11638),A=e(5124),W=e(78467),r=e(58837),q=e(54917),Q=e(53373),t=e.n(Q),pe=e(14041),_=e(22249),de=e(92651),me=e(10437),G=e(22771),xe=e(87290);const ye=(0,_.A)(N=>({text:{fill:N.palette.textContrast},secondary:{fill:N.palette.textSubtle}}),{name:"PluginCatalogGraphCustomLabel"});function ut({edge:{relations:N}}){const H=ye();return pe.createElement("text",{className:H.text,textAnchor:"middle"},N.map((oe,re)=>pe.createElement("tspan",{key:oe,className:t()(re>0&&H.secondary)},re>0&&pe.createElement("tspan",null," / "),oe)))}function z({kind:N,...H}){var oe;const _e=(oe=(0,b.nm)().getSystemIcon(`kind:${N.toLocaleLowerCase("en-US")}`))!=null?oe:me.A;return pe.createElement(_e,{...H})}const ee=(0,r.A)(N=>({node:{fill:N.palette.grey[300],stroke:N.palette.grey[300],"&.primary":{fill:N.palette.primary.light,stroke:N.palette.primary.light},"&.secondary":{fill:N.palette.secondary.light,stroke:N.palette.secondary.light}},text:{fill:N.palette.getContrastText(N.palette.grey[300]),"&.primary":{fill:N.palette.primary.contrastText},"&.secondary":{fill:N.palette.secondary.contrastText},"&.focused":{fontWeight:"bold"}},clickable:{cursor:"pointer"}}),{name:"PluginCatalogGraphCustomNode"});function D({node:{id:N,entity:H,color:oe="default",focused:re,onClick:_e}}){const tt=ee(),[Ve,Ze]=(0,pe.useState)(0),[nt,Ge]=(0,pe.useState)(0),Je=(0,b.nm)(),Re=(0,pe.useRef)(null);(0,pe.useLayoutEffect)(()=>{if(Re.current){let{height:S,width:P}=Re.current.getBBox();S=Math.round(S),P=Math.round(P),(S!==nt||P!==Ve)&&(Ze(P),Ge(S))}},[Ve,nt]);const{kind:Le,metadata:{name:lt,namespace:Et=s.oQ,title:wt}}=H,Qt=Je.getSystemIcon(`kind:${Le.toLocaleLowerCase("en-US")}`),yt=10,ue=nt,gt=Qt?ue+yt:0,xt=gt+Ve+yt*2,ht=nt+yt*2,Ut=wt!=null?wt:Le&&lt&&Et?(0,de.SE)({kind:Le,name:lt,namespace:Et}):N;return pe.createElement("g",{onClick:_e,className:t()(_e&&tt.clickable)},pe.createElement("rect",{className:t()(tt.node,oe==="primary"&&"primary",oe==="secondary"&&"secondary"),width:xt,height:ht,rx:10}),Qt&&pe.createElement(z,{kind:Le,y:yt,x:yt,width:ue,height:ue,className:t()(tt.text,re&&"focused",oe==="primary"&&"primary",oe==="secondary"&&"secondary")}),pe.createElement("text",{ref:Re,className:t()(tt.text,re&&"focused",oe==="primary"&&"primary",oe==="secondary"&&"secondary"),y:ht/2,x:gt+(Ve+yt*2)/2,textAnchor:"middle",alignmentBaseline:"middle"},Ut))}const w=[[s.L8,s.vv],[s.Ey,s.fO],[s.IB,s.ZD],[s.sA,s.jn],[s.Kx,s.Qz],[s.zj,s.u0],[s.nC,s.fT]];var M=(N=>(N.TOP_BOTTOM="TB",N.BOTTOM_TOP="BT",N.LEFT_RIGHT="LR",N.RIGHT_LEFT="RL",N))(M||{});function y(){const N=(0,A.u)(de.vp),H=(0,pe.useRef)({requestedEntities:new Set,outstandingEntities:new Map,cachedEntities:new Map}),[oe,re]=(0,pe.useState)({}),_e=(0,pe.useCallback)(()=>{const{cachedEntities:Je,requestedEntities:Re}=H.current,Le={};Re.forEach(lt=>{const Et=Je.get(lt);Et&&(Le[lt]=Et)}),re(Le)},[H,re]),[tt,Ve]=(0,xe.A)(async()=>{const{requestedEntities:Je,cachedEntities:Re}=H.current,Le=Array.from(Je).filter(Et=>!Re.has(Et));if(Le.length===0){_e();return}const{items:lt}=await N.getEntitiesByRefs({entityRefs:Le});lt.forEach(Et=>{if(Et){const wt=(0,s.U2)(Et);Re.set(wt,Et)}}),_e()},[H,_e]),{loading:Ze,error:nt}=tt,Ge=(0,pe.useCallback)(Je=>{const Re=new Set(Je),{requestedEntities:Le}=H.current;(Re.size!==Le.size||Array.from(Re).some(lt=>!Le.has(lt)))&&(H.current.requestedEntities=Re,Ve(),_e())},[H,Ve,_e]);return{entities:oe,loading:Ze,error:nt,requestEntities:Ge}}function v({rootEntityRefs:N,filter:{maxDepth:H=Number.POSITIVE_INFINITY,relations:oe,kinds:re}={}}){const{entities:_e,loading:tt,error:Ve,requestEntities:Ze}=y();return(0,pe.useEffect)(()=>{const nt=new Set([...N]),Ge=new Set;let Je=[...N],Re=0;for(;Je.length>0&&(!isFinite(H)||Re<H);){const Le=Je;for(Je=[];Le.length>0;){const lt=Le.shift(),Et=_e[lt];if(Ge.add(lt),Et&&Et.relations)for(const wt of Et.relations)(!oe||oe.includes(wt.type))&&(!re||re.some(Qt=>wt.targetRef.startsWith(`${Qt.toLocaleLowerCase("en-US")}:`)))&&(Ge.has(wt.targetRef)||(Je.push(wt.targetRef),nt.add(wt.targetRef)))}++Re}Ze([...nt])},[_e,N,H,oe,re,Ze]),{entities:_e,loading:tt,error:Ve}}function F({rootEntityRefs:N,maxDepth:H=Number.POSITIVE_INFINITY,unidirectional:oe=!0,mergeRelations:re=!0,kinds:_e,relations:tt,onNodeClick:Ve,relationPairs:Ze=w}){const[nt,Ge]=(0,pe.useState)({}),{entities:Je,loading:Re,error:Le}=v({rootEntityRefs:N,filter:{maxDepth:H,kinds:_e,relations:tt}});return(0,G.A)(()=>{var lt;if(!Je||Object.keys(Je).length===0){Ge({});return}const Et=Object.entries(Je).map(([ue,gt])=>{const xt=N.includes(ue),ht={id:ue,entity:gt,focused:xt,color:xt?"secondary":"primary",kind:gt.kind,name:gt.metadata.name,namespace:gt.metadata.namespace||s.oQ,title:gt.metadata.title,spec:gt.spec};return Ve&&(ht.onClick=Ut=>Ve(ht,Ut)),ht}),wt=[],Qt=new Set,yt=[...N];for(;yt.length>0;){const ue=yt.pop(),gt=Je[ue];Qt.add(ue),gt&&((lt=gt==null?void 0:gt.relations)==null||lt.forEach(xt=>{var ht;if(Je[xt.targetRef]&&!(tt&&!tt.includes(xt.type))&&!(_e&&!_e.some(Ut=>xt.targetRef.startsWith(`${Ut.toLocaleLowerCase("en-US")}:`)))){if(!oe||!Qt.has(xt.targetRef))if(re){const Ut=(ht=Ze.find(([P,j])=>P===xt.type||j===xt.type))!=null?ht:[xt.type],[S]=Ut;wt.push({from:S===xt.type?ue:xt.targetRef,to:S===xt.type?xt.targetRef:ue,relations:Ut,label:"visible"})}else wt.push({from:ue,to:xt.targetRef,relations:[xt.type],label:"visible"});Qt.has(xt.targetRef)||(yt.push(xt.targetRef),Qt.add(xt.targetRef))}}))}Ge({nodes:Et,edges:wt})},100,[Je,N,_e,tt,oe,re,Ve,Ze]),{loading:Re,error:Le,...nt}}const ae=(0,r.A)(N=>({progress:{position:"absolute",left:"50%",top:"50%",marginLeft:"-20px",marginTop:"-20px"},container:{position:"relative",width:"100%",display:"flex",flexDirection:"column"},graph:{width:"100%",flex:1,"& path[marker-end]":{transition:"filter 0.1s ease-in-out"},"& path[marker-end]:hover":{filter:`drop-shadow(2px 2px 4px ${N.palette.primary.dark});`},"& g[data-testid=label]":{transition:"transform 0s"}}}),{name:"PluginCatalogGraphEntityRelationsGraph"}),Fe=N=>{const{rootEntityNames:H,maxDepth:oe=2,unidirectional:re=!0,mergeRelations:_e=!0,kinds:tt,relations:Ve,direction:Ze=M.LEFT_RIGHT,onNodeClick:nt,relationPairs:Ge=w,className:Je,zoom:Re="enabled",renderNode:Le,renderLabel:lt,curve:Et,showArrowHeads:wt}=N,Qt=(0,q.A)(),yt=ae(),ue=(0,pe.useMemo)(()=>(Array.isArray(H)?H:[H]).map(P=>(0,s.U2)(P)),[H]),gt=(0,A.u)(A.r),{loading:xt,error:ht,nodes:Ut,edges:S}=F({rootEntityRefs:ue,maxDepth:oe,unidirectional:re,mergeRelations:_e,kinds:tt,relations:Ve,onNodeClick:nt,relationPairs:Ge});return(0,pe.useEffect)(()=>{ht&&gt.post(ht)},[gt,ht]),pe.createElement("div",{className:t()(yt.container,Je)},xt&&pe.createElement(W.A,{className:yt.progress}),Ut&&S&&pe.createElement(l.wB,{nodes:Ut,edges:S,renderNode:Le||D,renderLabel:lt||ut,direction:Ze,className:yt.graph,paddingX:Qt.spacing(4),paddingY:Qt.spacing(4),labelPosition:l.DT.LabelPosition.RIGHT,labelOffset:Qt.spacing(1),zoom:Re,curve:Et,showArrowHeads:wt}))},Ae=(0,b.HM)({id:"catalog-graph"}),X=(0,b.Il)({id:"catalog-entity",params:["namespace","kind","name"],optional:!0})},18638:(In,Ct,e)=>{"use strict";e.d(Ct,{N9:()=>Q,NW:()=>q});var s=e(6906),l=e(11638),b=e(53373),A=e.n(b),W=e(14041);const r=(0,l.i1)({id:"catalog-graph",routes:{catalogGraph:s.c},externalRoutes:{catalogEntity:s.a}}),q=r.provide((0,l.NC)({name:"EntityCatalogGraphCard",component:{lazy:()=>e.e(9957).then(e.bind(e,49957)).then(t=>t.CatalogGraphCard)}})),Q=r.provide((0,l.QJ)({name:"CatalogGraphPage",component:()=>e.e(6605).then(e.bind(e,6605)).then(t=>t.CatalogGraphPage),mountPoint:s.c}))},39327:(In,Ct,e)=>{"use strict";e.d(Ct,{C:()=>M,a:()=>pe,c:()=>w,d:()=>de,g:()=>me});var s=e(5124),l=e(11638),b=e(33478),A=e(92651),W=e(49863),r=e(93584),q=e(51419),Q=e(52536),t=e.n(Q);const pe=(0,s.c)({id:"plugin.catalog-import.service"}),_=(y,v)=>{const F=y.github.byUrl(v);if(!F)return;const{name:ae,owner:Fe}=t()(v);return{repo:ae,owner:Fe,githubIntegrationConfig:F.config}};function de(y){const{ref:v,...F}=y;return{inputRef:v,...F}}function me(y){var v;return(v=y.getOptionalString("catalog.import.entityFilename"))!=null?v:"catalog-info.yaml"}function G(y){var v;return(v=y.getOptionalString("catalog.import.pullRequestBranchName"))!=null?v:"backstage-integration"}var xe=Object.defineProperty,ye=(y,v,F)=>v in y?xe(y,v,{enumerable:!0,configurable:!0,writable:!0,value:F}):y[v]=F,ut=(y,v,F)=>(ye(y,typeof v!="symbol"?v+"":v,F),F);class z{constructor(v){ut(this,"discoveryApi"),ut(this,"identityApi"),ut(this,"scmAuthApi"),ut(this,"scmIntegrationsApi"),ut(this,"catalogApi"),ut(this,"configApi"),this.discoveryApi=v.discoveryApi,this.scmAuthApi=v.scmAuthApi,this.identityApi=v.identityApi,this.scmIntegrationsApi=v.scmIntegrationsApi,this.catalogApi=v.catalogApi,this.configApi=v.configApi}async analyzeUrl(v){var F;if(new URL(v).pathname.match(/\.ya?ml$/)||(F=new URL(v).searchParams.get("path"))!=null&&F.match(/.ya?ml$/)){const Ae=await this.catalogApi.addLocation({type:"url",target:v,dryRun:!0});return{type:"locations",locations:[{exists:Ae.exists,target:Ae.location.target,entities:Ae.entities.map(X=>{var N;return{kind:X.kind,namespace:(N=X.metadata.namespace)!=null?N:"default",name:X.metadata.name}})}]}}if(!_(this.scmIntegrationsApi,v)){const Ae=this.scmIntegrationsApi.byUrl(v),X=me(this.configApi);throw Ae?new Error(`The ${Ae.title} integration only supports full URLs to ${X} files. Did you try to pass in the URL of a directory instead?`):new Error(`This URL was not recognized as a valid GitHub URL because there was no configured integration that matched the given host name. You could try to paste the full URL to a ${X} file instead.`)}const Fe=await this.analyzeLocation({repo:v});if(Fe.existingEntityFiles.length>0){const Ae=Fe.existingEntityFiles.reduce((X,N)=>{var H;return X[N.location.target]={target:N.location.target,exists:N.isRegistered,entities:[...N.location.target in X?X[N.location.target].entities:[],{name:N.entity.metadata.name,namespace:(H=N.entity.metadata.namespace)!=null?H:"default",kind:N.entity.kind}]},X},{});return{type:"locations",locations:Object.values(Ae)}}return{type:"repository",integrationType:"github",url:v,generatedEntities:Fe.generateEntities.map(Ae=>Ae.entity)}}async preparePullRequest(){var v;const F=(v=this.configApi.getOptionalString("app.title"))!=null?v:"Backstage",ae=this.configApi.getString("app.baseUrl");return{title:`Add ${me(this.configApi)} config file`,body:`This pull request adds a **Backstage entity metadata file** to this repository so that the component can be added to the [${F} software catalog](${ae}).

After this pull request is merged, the component will become available.

For more information, read an [overview of the Backstage software catalog](https://backstage.io/docs/features/software-catalog/).`}}async submitPullRequest(v){const{repositoryUrl:F,fileContent:ae,title:Fe,body:Ae}=v,X=q.Ay.parse(ae),N=await this.catalogApi.validateEntity(X,`url:${F}`);if(!N.valid)throw new Error(N.errors[0].message);const H=_(this.scmIntegrationsApi,F);if(H)return await this.submitGitHubPrToRepo({...H,repositoryUrl:F,fileContent:ae,title:Fe,body:Ae});throw new Error("unimplemented!")}async analyzeLocation(v){const{token:F}=await this.identityApi.getCredentials(),ae=await fetch(`${await this.discoveryApi.getBaseUrl("catalog")}/analyze-location`,{headers:{"Content-Type":"application/json",...F&&{Authorization:`Bearer ${F}`}},method:"POST",body:JSON.stringify({location:{type:"url",target:v.repo},...this.configApi.getOptionalString("catalog.import.entityFilename")&&{catalogFilename:this.configApi.getOptionalString("catalog.import.entityFilename")}})}).catch(Ae=>{throw new Error(`Failed to generate entity definitions, ${Ae.message}`)});if(!ae.ok)throw new Error(`Failed to generate entity definitions. Received http response ${ae.status}: ${ae.statusText}`);return await ae.json()}async submitGitHubPrToRepo(v){const{owner:F,repo:ae,title:Fe,body:Ae,fileContent:X,repositoryUrl:N,githubIntegrationConfig:H}=v,{token:oe}=await this.scmAuthApi.getCredentials({url:N,additionalScope:{repoWrite:!0}}),re=new W.E({auth:oe,baseUrl:H.apiBaseUrl}),_e=G(this.configApi),tt=me(this.configApi),Ve=await re.repos.get({owner:F,repo:ae}).catch(Ge=>{throw new Error(ee("Couldn't fetch repo data",Ge))}),Ze=await re.git.getRef({owner:F,repo:ae,ref:`heads/${Ve.data.default_branch}`}).catch(Ge=>{throw new Error(ee("Couldn't fetch default branch data",Ge))});return await re.git.createRef({owner:F,repo:ae,ref:`refs/heads/${_e}`,sha:Ze.data.object.sha}).catch(Ge=>{throw new Error(ee(`Couldn't create a new branch with name '${_e}'`,Ge))}),await re.repos.createOrUpdateFileContents({owner:F,repo:ae,path:tt,message:Fe,content:r.o4.encode(X),branch:_e}).catch(Ge=>{throw new Error(ee(`Couldn't create a commit with ${tt} file added`,Ge))}),{link:(await re.pulls.create({owner:F,repo:ae,title:Fe,head:_e,body:Ae,base:Ve.data.default_branch}).catch(Ge=>{throw new Error(ee(`Couldn't create a pull request for ${_e} branch`,Ge))})).data.html_url,location:`https://${H.host}/${F}/${ae}/blob/${Ve.data.default_branch}/${tt}`}}}function ee(y,v){return`${y}, received http response status code ${v.status}: ${v.message}`}const D=(0,l.HM)({id:"catalog-import"}),w=(0,l.i1)({id:"catalog-import",apis:[(0,l.bW)({api:pe,deps:{discoveryApi:s.q,scmAuthApi:b.$J,identityApi:s.t,scmIntegrationsApi:b.YT,catalogApi:A.vp,configApi:s.p},factory:({discoveryApi:y,scmAuthApi:v,identityApi:F,scmIntegrationsApi:ae,catalogApi:Fe,configApi:Ae})=>new z({discoveryApi:y,scmAuthApi:v,scmIntegrationsApi:ae,identityApi:F,catalogApi:Fe,configApi:Ae})})],routes:{importPage:D}}),M=w.provide((0,l.QJ)({name:"CatalogImportPage",component:()=>e.e(5383).then(e.bind(e,35383)).then(y=>y.ImportPage),mountPoint:D}))},90749:(In,Ct,e)=>{"use strict";e.d(Ct,{Az:()=>Vn});var s=e(97388),l=e(14041),b=e(5124),A=e(11638),W=e(46195),r=e(63177);const q=(0,s.tK)("analytics-context"),Q=()=>{const m=useContext(q);if(m===void 0)return{pluginId:"app",extensionId:"app"};const R=m.atVersion(1);if(R===void 0)throw new Error("No context found for version 1.");return R},t=m=>{const{attributes:R,children:K}=m,I={...Q(),...R},U=createVersionedValueMap({1:I});return React.createElement(q.Provider,{value:U},K)},pe=(0,b.c)({id:"core.app-tree"}),_=(0,b.c)({id:"core.components"});function de(m){return(0,b.u)(_).getComponent(m)}const me=(0,b.c)({id:"core.icons"}),G=(0,b.c)({id:"core.route-resolution"}),xe=(0,b.c)({id:"core.analytics"}),ye=(0,s.Q6)("core-plugin-api:analytics-tracker-events",()=>({mostRecentGatheredNavigation:void 0,mostRecentRoutableExtensionRender:void 0,beforeUnloadRegistered:!1})),ut="_ROUTABLE-EXTENSION-RENDERED";class z{constructor(R,K={pluginId:"root",extensionId:"App"}){this.analyticsApi=R,this.context=K,ye.beforeUnloadRegistered||(addEventListener("beforeunload",()=>{ye.mostRecentGatheredNavigation&&(this.analyticsApi.captureEvent({...ye.mostRecentGatheredNavigation,...ye.mostRecentRoutableExtensionRender}),ye.mostRecentGatheredNavigation=void 0,ye.mostRecentRoutableExtensionRender=void 0)},{once:!0,passive:!0}),ye.beforeUnloadRegistered=!0)}setContext(R){this.context=R}captureEvent(R,K,{value:le,attributes:I}={}){const U=this.context;if(R===ut){ye.mostRecentGatheredNavigation&&(ye.mostRecentRoutableExtensionRender={context:{...U,extensionId:"App"}});return}if(ye.mostRecentGatheredNavigation){try{this.analyticsApi.captureEvent({...ye.mostRecentGatheredNavigation,...ye.mostRecentRoutableExtensionRender})}catch(Y){console.warn("Error during analytics event capture. %o",Y)}ye.mostRecentGatheredNavigation=void 0,ye.mostRecentRoutableExtensionRender=void 0}if(R==="navigate"&&U.pluginId==="root"){ye.mostRecentGatheredNavigation={action:R,subject:K,value:le,attributes:I,context:U};return}try{this.analyticsApi.captureEvent({action:R,subject:K,value:le,attributes:I,context:U})}catch(Y){console.warn("Error during analytics event capture. %o",Y)}}}function ee(){try{return useApi(xe)}catch(m){if(m.name==="NotImplementedError")return{captureEvent:()=>{}};throw m}}function D(){const m=useRef(null),R=Q(),K=ee();function le(){return m.current===null&&(m.current=new z(K)),m.current}const I=le();return I.setContext(R),I}var w=Object.defineProperty,M=(m,R,K)=>R in m?w(m,R,{enumerable:!0,configurable:!0,writable:!0,value:K}):m[R]=K,y=(m,R,K)=>(M(m,typeof R!="symbol"?R+"":R,K),K);class v extends l.Component{constructor(){super(...arguments),y(this,"state",{error:void 0}),y(this,"handleErrorReset",()=>{this.setState({error:void 0})})}static getDerivedStateFromError(R){return{error:R}}render(){const{error:R}=this.state,{plugin:K,children:le,Fallback:I}=this.props;return R?l.createElement(I,{plugin:K,error:R,resetError:this.handleErrorReset}):le}}(0,s.Q6)("core-plugin-api:analytics-tracker-events",()=>({mostRecentGatheredNavigation:void 0,mostRecentRoutableExtensionRender:void 0,beforeUnloadRegistered:!1}));const F="_ROUTABLE-EXTENSION-RENDERED";function ae(m){const{id:R}=m;return{id:R,toString(){return`ComponentRef{id=${R}}`}}}const Fe=ae({id:"core.components.progress"}),Ae=ae({id:"core.components.notFoundErrorPage"}),X=ae({id:"core.components.errorBoundaryFallback"}),N={progress:Fe,notFoundErrorPage:Ae,errorBoundaryFallback:X},H=m=>{const{disableTracking:R,children:K}=m,le=(0,A.st)();return(0,l.useEffect)(()=>{R||le.captureEvent(F,"")},[le,R]),l.createElement(l.Fragment,null,K)};function oe(m){var R,K;const{node:le,routable:I,children:U}=m,Y=le.spec.source,we=de(N.progress),Oe=de(N.errorBoundaryFallback),ot={extensionId:le.spec.id,pluginId:(K=(R=le.spec.source)==null?void 0:R.id)!=null?K:"app"};return l.createElement(l.Suspense,{fallback:l.createElement(we,null)},l.createElement(v,{plugin:Y,Fallback:Oe},l.createElement(A.Ig,{attributes:ot},l.createElement(H,{disableTracking:!I},U))))}function re(m){return{id:m,$$type:"@backstage/ExtensionDataRef",config:{},optional(){return{...this,config:{...this.config,optional:!0}}},toString(){const R=!!this.config.optional;return`ExtensionDataRef{id=${m},optional=${R}}`}}}const _e={reactElement:re("core.reactElement"),routePath:re("core.routing.path"),routeRef:re("core.routing.ref")};function tt(m){const R=m;if(R.$$type!=="@backstage/ExtensionDefinition")throw new Error(`Invalid extension definition instance, bad type '${R.$$type}'`);if(R.version!=="v1")throw new Error(`Invalid extension definition instance, bad version '${R.version}'`);return R}function Ve(m){var R,K;return{$$type:"@backstage/ExtensionDefinition",version:"v1",kind:m.kind,namespace:m.namespace,name:m.name,attachTo:m.attachTo,disabled:(R=m.disabled)!=null?R:!1,inputs:(K=m.inputs)!=null?K:{},output:m.output,configSchema:m.configSchema,factory({inputs:le,...I}){return m.factory({inputs:le,...I})},toString(){const le=[];return m.kind&&le.push(`kind=${m.kind}`),m.namespace&&le.push(`namespace=${m.namespace}`),m.name&&le.push(`name=${m.name}`),le.push(`attachTo=${m.attachTo.id}@${m.attachTo.input}`),`ExtensionDefinition{${le.join(",")}}`}}}function Ze(m,R){return{$$type:"@backstage/ExtensionInput",extensionData:m,config:{singleton:!!(R!=null&&R.singleton),optional:!!(R!=null&&R.optional)}}}function nt(m,R){var K;const le=tt(m),{name:I,kind:U,namespace:Y,...we}=le,Oe=(K=le.namespace)!=null?K:R==null?void 0:R.namespace,ot=I&&Oe?`${Oe}/${I}`:Oe||I;if(!ot)throw new Error(`Extension must declare an explicit namespace or name as it could not be resolved from context, kind=${U} namespace=${Oe} name=${I}`);const Ot=U?`${U}:${ot}`:ot;return{...we,$$type:"@backstage/Extension",version:"v1",id:Ot,toString(){return`Extension{id=${Ot}}`}}}function Ge(m){var R,K,le,I;const U=((R=m.extensions)!=null?R:[]).map(we=>nt(we,{namespace:m.id})),Y=U.map(we=>we.id);if(Y.length!==new Set(Y).size){const we=Array.from(new Set(Y.filter((Oe,ot)=>Y.indexOf(Oe)!==ot)));throw new Error(`Plugin '${m.id}' provided duplicate extensions: ${we.join(", ")}`)}return{$$type:"@backstage/BackstagePlugin",version:"v1",id:m.id,routes:(K=m.routes)!=null?K:{},externalRoutes:(le=m.externalRoutes)!=null?le:{},featureFlags:(I=m.featureFlags)!=null?I:[],extensions:U,toString(){return`Plugin{id=${m.id}}`}}}function Je(m){var R;const K=m.extensions.map(I=>nt(I)),le=(R=m.featureFlags)!=null?R:[];return{$$type:"@backstage/ExtensionOverrides",version:"v1",extensions:K,featureFlags:le,toString(){const I=K.map(String).join(","),U=le.map(Y=>Y.name).join(",");return`ExtensionOverrides{extensions=[${I}],featureFlags=[${U}]}`}}}function Re(m){const{factory:R,configSchema:K,inputs:le}=m,I="api"in m?m.api:R.api;return Ve({kind:"api",namespace:I.id,attachTo:{id:"app",input:"apis"},inputs:le,configSchema:K,output:{api:Re.factoryDataRef},factory({config:U,inputs:Y}){return typeof R=="function"?{api:R({config:U,inputs:Y})}:{api:R}}})}(m=>{m.factoryDataRef=re("core.api.factory")})(Re||(Re={}));function Le(m){var R;return Ve({kind:"app-root-element",namespace:m.namespace,name:m.name,attachTo:(R=m.attachTo)!=null?R:{id:"app/root",input:"elements"},configSchema:m.configSchema,disabled:m.disabled,inputs:m.inputs,output:{element:_e.reactElement},factory({inputs:K,config:le}){return{element:typeof m.element=="function"?m.element({inputs:K,config:le}):m.element}}})}function lt(m){var R;return Ve({kind:"app-root-wrapper",namespace:m.namespace,name:m.name,attachTo:(R=m.attachTo)!=null?R:{id:"app/root",input:"wrappers"},configSchema:m.configSchema,disabled:m.disabled,inputs:m.inputs,output:{component:lt.componentDataRef},factory({inputs:K,config:le}){return{component:U=>l.createElement(m.Component,{inputs:K,config:le},U.children)}}})}(m=>{m.componentDataRef=re("app.root.wrapper")})(lt||(lt={}));function Et(m){var R;return Ve({kind:"app-router-component",namespace:m.namespace,name:m.name,attachTo:(R=m.attachTo)!=null?R:{id:"app/root",input:"router"},configSchema:m.configSchema,disabled:m.disabled,inputs:m.inputs,output:{component:Et.componentDataRef},factory({inputs:K,config:le}){return{component:U=>l.createElement(m.Component,{inputs:K,config:le},U.children)}}})}(m=>{m.componentDataRef=re("app.router.wrapper")})(Et||(Et={}));function wt(m){const R=m(W.z);return{parse:K=>{const le=R.safeParse(K);if(le.success)return le.data;throw new Error(le.error.issues.map(Qt).join("; "))},schema:(0,r.Ay)(R)}}function Qt(m){if(m.code==="invalid_union")return Qt(m.unionErrors[0].issues[0]);let R=m.message;return R==="Required"&&(R="Missing required value"),m.path.length&&(R+=` at '${m.path.join(".")}'`),R}function yt(m){var R;const K="configSchema"in m?m.configSchema:wt(le=>le.object({path:le.string().default(m.defaultPath)}));return Ve({kind:"page",namespace:m.namespace,name:m.name,attachTo:(R=m.attachTo)!=null?R:{id:"app/routes",input:"routes"},configSchema:K,inputs:m.inputs,disabled:m.disabled,output:{element:_e.reactElement,path:_e.routePath,routeRef:_e.routeRef.optional()},factory({config:le,inputs:I,node:U}){const Y=lazy(()=>m.loader({config:le,inputs:I}).then(we=>({default:()=>we})));return{path:le.path,routeRef:m.routeRef,element:React.createElement(oe,{node:U,routable:!0},React.createElement(Y,null))}}})}function ue(m){const{routeRef:R,title:K,icon:le,namespace:I,name:U}=m;return Ve({namespace:I,name:U,kind:"nav-item",attachTo:{id:"app/nav",input:"items"},configSchema:wt(Y=>Y.object({title:Y.string().default(K)})),output:{navTarget:ue.targetDataRef},factory:({config:Y})=>({navTarget:{title:Y.title,icon:le,routeRef:R}})})}(m=>{m.targetDataRef=re("core.nav-item.target")})(ue||(ue={}));function gt(m){const{logoIcon:R,logoFull:K}=m;return Ve({kind:"nav-logo",name:m==null?void 0:m.name,namespace:m==null?void 0:m.namespace,attachTo:{id:"app/nav",input:"logos"},output:{logos:gt.logoElementsDataRef},factory:()=>({logos:{logoIcon:R,logoFull:K}})})}(m=>{m.logoElementsDataRef=re("core.nav-logo.logo-elements")})(gt||(gt={}));function xt(m){var R;return Ve({kind:"sign-in-page",namespace:m==null?void 0:m.namespace,name:m==null?void 0:m.name,attachTo:(R=m.attachTo)!=null?R:{id:"app/root",input:"signInPage"},configSchema:m.configSchema,inputs:m.inputs,disabled:m.disabled,output:{component:xt.componentDataRef},factory({config:K,inputs:le,node:I}){const U=(0,l.lazy)(()=>m.loader({config:K,inputs:le}).then(Y=>({default:Y})));return{component:Y=>l.createElement(oe,{node:I,routable:!0},l.createElement(U,{...Y}))}}})}(m=>{m.componentDataRef=re("core.sign-in-page.component")})(xt||(xt={}));function ht(m){return Ve({kind:"theme",namespace:"app",name:m.id,attachTo:{id:"app",input:"themes"},output:{theme:ht.themeDataRef},factory:()=>({theme:m})})}(m=>{m.themeDataRef=re("core.theme.theme")})(ht||(ht={}));function Ut(m){return Ve({kind:"component",namespace:m.ref.id,name:m.name,attachTo:{id:"app",input:"components"},inputs:m.inputs,disabled:m.disabled,configSchema:m.configSchema,output:{component:Ut.componentDataRef},factory({config:R,inputs:K}){if("sync"in m.loader)return{component:{ref:m.ref,impl:m.loader.sync({config:R,inputs:K})}};const le=m.loader.lazy,I=(0,l.lazy)(()=>le({config:R,inputs:K}).then(U=>({default:U})));return{component:{ref:m.ref,impl:I}}}})}(m=>{m.componentDataRef=re("core.component.component")})(Ut||(Ut={}));function S(m){return Ve({kind:"translation",namespace:m.resource.id,name:m.name,attachTo:{id:"app",input:"translations"},output:{resource:S.translationDataRef},factory:()=>({resource:m.resource})})}(m=>{m.translationDataRef=re("core.translation.translation")})(S||(S={}));const P="eHgtF5hmbrXyiEvo";function j(m=Error){const{stack:R}=new m(P);if(!R)return"<unknown>";const K=R.includes(P)?R.indexOf(`
`)+1:0,le=R.indexOf(`
`,R.indexOf(`
`,K)+1)+1,I=R.indexOf(`
`,le),U=R.substring(le,I).trim();return U?U.includes("(")?U.substring(U.indexOf("(")+1,U.indexOf(")")):U.includes("@")?U.substring(U.indexOf("@")+1):U:"unknown"}var Z=Object.defineProperty,Ie=(m,R,K)=>R in m?Z(m,R,{enumerable:!0,configurable:!0,writable:!0,value:K}):m[R]=K,ze=(m,R,K)=>(Ie(m,typeof R!="symbol"?R+"":R,K),K),dt=(m,R,K)=>{if(!R.has(m))throw TypeError("Cannot "+K)},Qe=(m,R,K)=>(dt(m,R,"read from private field"),K?K.call(m):R.get(m)),et=(m,R,K)=>{if(R.has(m))throw TypeError("Cannot add the same private member more than once");R instanceof WeakSet?R.add(m):R.set(m,K)},$t=(m,R,K,le)=>(dt(m,R,"write to private field"),le?le.call(m,K):R.set(m,K),K),tn,It,pt,qt,sn;function an(m){const R=m;if(R.$$type!=="@backstage/RouteRef")throw new Error(`Invalid RouteRef, bad type '${R.$$type}'`);return R}class Vt{constructor(R=[],K){this.params=R,et(this,qt),ze(this,"$$type","@backstage/RouteRef"),ze(this,"version","v1"),et(this,tn,void 0),et(this,It,void 0),et(this,pt,void 0),$t(this,It,R),$t(this,pt,K)}getParams(){return Qe(this,It)}getDescription(){return Qe(this,tn)?Qe(this,tn):`created at '${Qe(this,pt)}'`}setId(R){if(!R)throw new Error(`${Qe(this,qt,sn)} id must be a non-empty string`);if(Qe(this,tn))throw new Error(`${Qe(this,qt,sn)} was referenced twice as both '${Qe(this,tn)}' and '${R}'`);$t(this,tn,R)}toString(){return`${Qe(this,qt,sn)}{${this.getDescription()}}`}}tn=new WeakMap,It=new WeakMap,pt=new WeakMap,qt=new WeakSet,sn=function(){return this.$$type.slice(11)};function Ce(m){return new Vt(m==null?void 0:m.params,j())}var Ye=Object.defineProperty,Kt=(m,R,K)=>R in m?Ye(m,R,{enumerable:!0,configurable:!0,writable:!0,value:K}):m[R]=K,jt=(m,R,K)=>(Kt(m,typeof R!="symbol"?R+"":R,K),K),Wt=(m,R,K)=>{if(!R.has(m))throw TypeError("Cannot "+K)},ft=(m,R,K)=>(Wt(m,R,"read from private field"),K?K.call(m):R.get(m)),Ln=(m,R,K)=>{if(R.has(m))throw TypeError("Cannot add the same private member more than once");R instanceof WeakSet?R.add(m):R.set(m,K)},dn=(m,R,K,le)=>(Wt(m,R,"write to private field"),le?le.call(m,K):R.set(m,K),K),Xt,An;const Xe=/^\w+$/;class mt{constructor(R,K,le){this.path=R,jt(this,"$$type","@backstage/SubRouteRef"),jt(this,"version","v1"),Ln(this,Xt,void 0),Ln(this,An,void 0),dn(this,Xt,K),dn(this,An,le)}getParams(){return ft(this,Xt)}getParent(){return ft(this,An)}getDescription(){const R=an(ft(this,An));return`at ${this.path} with parent ${R.getDescription()}`}toString(){return`SubRouteRef{${this.getDescription()}}`}}Xt=new WeakMap,An=new WeakMap;function Dt(m){const{path:R,parent:K}=m,I=an(K).getParams(),U=R.split("/").filter(Oe=>Oe.startsWith(":")).map(Oe=>Oe.substring(1)),Y=[...I,...U];if(I.some(Oe=>U.includes(Oe)))throw new Error("SubRouteRef may not have params that overlap with its parent");if(!R.startsWith("/"))throw new Error(`SubRouteRef path must start with '/', got '${R}'`);if(R.endsWith("/"))throw new Error(`SubRouteRef path must not end with '/', got '${R}'`);for(const Oe of U)if(!Xe.test(Oe))throw new Error(`SubRouteRef path has invalid param, got '${Oe}'`);return new mt(R,Y,K)}var rt=Object.defineProperty,qe=(m,R,K)=>R in m?rt(m,R,{enumerable:!0,configurable:!0,writable:!0,value:K}):m[R]=K,V=(m,R,K)=>(qe(m,typeof R!="symbol"?R+"":R,K),K);class he extends Vt{constructor(R,K=[],le,I){super(K,I),this.optional=R,this.params=K,this.defaultTarget=le,V(this,"$$type","@backstage/ExternalRouteRef")}getDefaultTarget(){return this.defaultTarget}}function Ee(m){return new he(!!(m!=null&&m.optional),m==null?void 0:m.params,m==null?void 0:m.defaultTarget,j())}function Pt(m){const{pathname:R}=useLocation(),K=useApi(G),le=useMemo(()=>K.resolve(m,{sourcePath:R}),[K,m,R]),I="optional"in m&&m.optional;if(!le&&!I)throw new Error(`No path for ${m}`);return le}function Nt(m){return useParams()}var ln=e(29835),bn=e(17899),Dn=e(2069);function Un(m,R){const K=new Set([...getEntityRelations(m,RELATION_MEMBER_OF,{kind:"group"}),...m?[getCompoundEntityRef(m)]:[]].map(stringifyEntityRef)),le=getEntityRelations(R,RELATION_OWNED_BY).map(stringifyEntityRef);for(const I of le)if(K.has(I))return!0;return!1}function Vn(m){const{entity:R,loading:K,error:le}=(0,Dn.a)(),{allowed:I,loading:U,error:Y}=(0,bn.JT)({permission:m,resourceRef:R?(0,ln.U2)(R):void 0});return K||U?{loading:!0,allowed:!1}:le?{loading:!1,allowed:!1,error:le}:{loading:!1,allowed:I,error:Y}}const Pn={entityContentTitle:re("catalog.entity-content-title"),entityFilterFunction:re("catalog.entity-filter-function"),entityFilterExpression:re("catalog.entity-filter-expression")};function Yn(m){var R,K;const le="configSchema"in m?m.configSchema:createSchemaFromZod(I=>I.object({filter:I.string().optional()}));return createExtension({kind:"entity-card",namespace:m.namespace,name:m.name,attachTo:(R=m.attachTo)!=null?R:{id:"entity-content:catalog/overview",input:"cards"},disabled:(K=m.disabled)!=null?K:!0,output:{element:coreExtensionData.reactElement,filterFunction:Pn.entityFilterFunction.optional(),filterExpression:Pn.entityFilterExpression.optional()},inputs:m.inputs,configSchema:le,factory({config:I,inputs:U,node:Y}){const we=lazy(()=>m.loader({inputs:U,config:I}).then(Oe=>({default:()=>Oe})));return{element:React.createElement(ExtensionBoundary,{node:Y},React.createElement(we,null)),...ct({config:I,options:m})}}})}function da(m){var R,K;return createExtension({kind:"entity-content",namespace:m.namespace,name:m.name,attachTo:(R=m.attachTo)!=null?R:{id:"page:catalog/entity",input:"contents"},disabled:(K=m.disabled)!=null?K:!0,output:{element:coreExtensionData.reactElement,path:coreExtensionData.routePath,routeRef:coreExtensionData.routeRef.optional(),title:Pn.entityContentTitle,filterFunction:Pn.entityFilterFunction.optional(),filterExpression:Pn.entityFilterExpression.optional()},inputs:m.inputs,configSchema:createSchemaFromZod(le=>le.object({path:le.string().default(m.defaultPath),title:le.string().default(m.defaultTitle),filter:le.string().optional()})),factory({config:le,inputs:I,node:U}){const Y=lazy(()=>m.loader({inputs:I}).then(we=>({default:()=>we})));return{path:le.path,title:le.title,routeRef:m.routeRef,element:React.createElement(ExtensionBoundary,{node:U,routable:!0},React.createElement(Y,null)),...ct({config:le,options:m})}}})}function ct(m){const{options:R,config:K}=m;return K.filter?{filterExpression:K.filter}:typeof R.filter=="string"?{filterExpression:R.filter}:typeof R.filter=="function"?{filterFunction:R.filter}:{}}},2069:(In,Ct,e)=>{"use strict";e.d(Ct,{A:()=>q,a:()=>pe,g:()=>W,u:()=>t});var s=e(29835),l=e(11638),b=e(97388),A=e(14041);function W(_,de,me){var G;let xe=((G=_==null?void 0:_.relations)==null?void 0:G.filter(ye=>ye.type===de).map(ye=>(0,s.KU)(ye.targetRef)))||[];return me!=null&&me.kind&&(xe=xe.filter(ye=>ye.kind.toLocaleLowerCase("en-US")===me.kind.toLocaleLowerCase("en-US"))),xe}const r=(0,b.tK)("entity-context"),q=_=>{const{children:de,entity:me,loading:G,error:xe,refresh:ye}=_,ut={entity:me,loading:G,error:xe,refresh:ye};return A.createElement(r.Provider,{value:(0,b.Bl)({1:ut})},A.createElement(l.Ig,{attributes:{...me?{entityRef:(0,s.U2)(me)}:void 0}},de))},Q=_=>React.createElement(q,{entity:_.entity,loading:!_.entity,error:void 0,refresh:void 0,children:_.children});function t(){const _=(0,b.qO)("entity-context");if(!_)throw new Error("Entity context is not available");const de=_.atVersion(1);if(!de)throw new Error("EntityContext v1 not available");if(!de.entity)throw new Error("useEntity hook is being called outside of an EntityLayout where the entity has not been loaded. If this is intentional, please use useAsyncEntity instead.");return{entity:de.entity}}function pe(){const _=(0,b.qO)("entity-context");if(!_)throw new Error("Entity context is not available");const de=_.atVersion(1);if(!de)throw new Error("EntityContext v1 not available");const{entity:me,loading:G,error:xe,refresh:ye}=de;return{entity:me,loading:G,error:xe,refresh:ye}}},92651:(In,Ct,e)=>{"use strict";e.d(Ct,{B9:()=>wn,Cr:()=>Y,EH:()=>vn,GI:()=>R,IT:()=>Aa,Id:()=>Qr,QD:()=>er,SE:()=>rn,Tj:()=>Pt,WI:()=>bt,ah:()=>Un,d5:()=>va,iI:()=>dr,jF:()=>Jt,lD:()=>Br,mM:()=>ge,mb:()=>At,mo:()=>qa,nK:()=>gn,nQ:()=>Ee,o9:()=>Mr,qq:()=>Ir,rd:()=>aa,s8:()=>Pe,sF:()=>_a,t3:()=>Za,uR:()=>Rt,vp:()=>he,y2:()=>Kn,zI:()=>Ia});var s=e(5124),l=e(11638),b=e(29835),A=e(46123),W=e.n(A),r=e(14041),q=e(96403),Q=e.n(q),t=e(77125),pe=e(64947),_=e(73845),de=e(42899),me=e(72501),G=e(5893),xe=e(54917),ye=e(58837),ut=e(7031),z=e(65859),ee=e(22968),D=e(2069),w=e(45250),M=e.n(w),y=e(45810),v=e.n(y),F=e(18690),ae=e(87290),Fe=e(22771),Ae=e(71581),X=e(73466),N=e(46343),H=e.n(N),oe=e(40074),re=e.n(oe),_e=e(11746),tt=e(6924),Ve=e(20577),Ze=e(69076),nt=e(86901),Ge=e(44148),Je=e(41260),Re=e(16249),Le=e(53373),lt=e.n(Le),Et=e(71677),wt=e(76842),Qt=e(92367),yt=e(48108),ue=e(47966),gt=e(40703),xt=e(58007),ht=e(46423),Ut=e(65569),S=e(5951),P=e(26343),j=e(9684),Z=e(80109),Ie=e(48899),ze=e(97388),dt=e(48653),Qe=e(29365),et=e(95061),$t=e(63301),tn=e(34839),It=e(75173),pt=e(64704),qt=e(45917),sn=e(16983),an=e(15303),Vt=e(76891),Ce=e(93453),Ye=e(46805),Kt=e(61477),jt=e(38605),Wt=e(31653),ft=e(59461),Ln=e(10437),dn=e(8109),Xt=e(74219),An=e(62261),Xe=e(97262),mt=e(87809),Dt=e.n(mt),rt=e(51419),qe=e(37197),V=e(3399);const he=(0,s.c)({id:"plugin.catalog.service"}),Ee=(0,s.c)({id:"plugin.catalog.entity-presentation"});function Pt(f,O){const{kind:x,namespace:B,name:ne,title:Se,description:be,displayName:De,type:at}=Nt(f),Mt=(0,b.U2)({kind:x||"unknown",namespace:B||b.oQ,name:ne||"unknown"}),Tt=ln({kind:x,namespace:B,name:ne,context:O}),nn=[De,Se,Tt].find(on=>on&&typeof on=="string"),En=[nn!==Mt?Mt:void 0,at,be].filter(on=>on&&typeof on=="string").join(" | ");return{entityRef:Mt,primaryTitle:nn,secondaryTitle:En||void 0,Icon:void 0}}function Nt(f){if(typeof f=="string"){let O=f.indexOf(":");const x=f.indexOf("/");x!==-1&&x<O&&(O=-1);const B=O===-1?void 0:f.slice(0,O),ne=x===-1?void 0:f.slice(O+1,x),Se=f.slice(Math.max(O+1,x+1));return{kind:B,namespace:ne,name:Se}}if(typeof f=="object"&&f!==null){const O=[W()(f,"kind")].find(at=>at&&typeof at=="string"),x=[W()(f,"metadata.namespace"),W()(f,"namespace")].find(at=>at&&typeof at=="string"),B=[W()(f,"metadata.name"),W()(f,"name")].find(at=>at&&typeof at=="string"),ne=[W()(f,"metadata.title")].find(at=>at&&typeof at=="string"),Se=[W()(f,"metadata.description")].find(at=>at&&typeof at=="string"),be=[W()(f,"spec.profile.displayName")].find(at=>at&&typeof at=="string"),De=[W()(f,"spec.type")].find(at=>at&&typeof at=="string");return{kind:O,namespace:x,name:B,title:ne,description:Se,displayName:be,type:De}}return{}}function ln(f){var O,x,B,ne,Se;const be=((O=f.kind)==null?void 0:O.toLocaleLowerCase("en-US"))||"unknown",De=f.namespace||b.oQ,at=f.name||"unknown",Mt=(B=(x=f.context)==null?void 0:x.defaultKind)==null?void 0:B.toLocaleLowerCase("en-US"),Tt=(Se=(ne=f.context)==null?void 0:ne.defaultNamespace)==null?void 0:Se.toLocaleLowerCase("en-US");let nn=at;return(Tt&&De.toLocaleLowerCase("en-US")!==Tt||De!==b.oQ)&&(nn=`${De}/${nn}`),Mt&&be.toLocaleLowerCase("en-US")!==Mt&&(nn=`${be}:${nn}`),nn}function bn(f,O,x){const[B,ne]=(0,r.useState)(f);return(0,r.useEffect)(()=>{ne(f);const Se=O==null?void 0:O.subscribe({next:be=>{ne(be)},complete:()=>{Se==null||Se.unsubscribe()}});return()=>{Se==null||Se.unsubscribe()}},x),B}function Dn(f,O){const B=(0,s.b)().get(Ee),ne=[B,JSON.stringify(f),JSON.stringify(O||null)],Se=(0,r.useMemo)(()=>B?B.forEntity(typeof f=="string"||"metadata"in f?f:(0,b.U2)(f),O):{snapshot:Pt(f,O)},ne);return bn(Se.snapshot,Se.update$,[Se])}const Un=(0,s.c)({id:"catalog-react.starred-entities"});var Vn=Object.defineProperty,Pn=(f,O,x)=>O in f?Vn(f,O,{enumerable:!0,configurable:!0,writable:!0,value:x}):f[O]=x,Yn=(f,O,x)=>(Pn(f,typeof O!="symbol"?O+"":O,x),x);class da{constructor(){Yn(this,"starredEntities",new Set),Yn(this,"subscribers",new Set),Yn(this,"observable",new ObservableImpl(O=>(O.next(new Set(this.starredEntities)),this.subscribers.add(O),()=>{this.subscribers.delete(O)})))}async toggleStarred(O){this.starredEntities.delete(O)||this.starredEntities.add(O);for(const x of this.subscribers)x.next(new Set(this.starredEntities))}starredEntitie$(){return this.observable}}const ct=f=>{var O,x;const B=(0,G.A)(De=>{var at,Mt;return De.breakpoints.down((Mt=(at=f.options)==null?void 0:at.drawerBreakpoint)!=null?Mt:"md")}),ne=(0,xe.A)(),[Se,be]=(0,r.useState)(!1);return B?r.createElement(r.Fragment,null,r.createElement(pe.A,{style:{marginTop:ne.spacing(1),marginLeft:ne.spacing(1)},onClick:()=>be(!0),startIcon:r.createElement(z.A,null)},"Filters"),r.createElement(_.Ay,{open:Se,onClose:()=>be(!1),anchor:(x=(O=f.options)==null?void 0:O.drawerAnchor)!=null?x:"left",disableAutoFocus:!0,keepMounted:!0,variant:"temporary"},r.createElement(t.A,{m:2},r.createElement(me.A,{variant:"h6",component:"h2",style:{marginBottom:ne.spacing(1)}},"Filters"),f.children))):r.createElement(de.A,{item:!0,lg:2},f.children)},m=f=>r.createElement(de.A,{item:!0,xs:12,lg:10},f.children),R=f=>r.createElement(de.A,{container:!0,style:{position:"relative"}},f.children);R.Filters=ct,R.Content=m;function K(f){return!!f.getFullTextFilters}function le(f){var O;const x=f.reduce((ne,Se)=>({...ne,...Se.getCatalogFilters?Se.getCatalogFilters():{}}),{}),B=(O=f.find(K))==null?void 0:O.getFullTextFilters();return{filter:x,fullTextFilter:B}}function I(f){const O={};return f.forEach(x=>{var B;x instanceof Zt||x instanceof mn||x instanceof kt||x instanceof Sn||x instanceof un||x instanceof qn||x instanceof pn||x instanceof $n||Object.assign(O,((B=x.getCatalogFilters)==null?void 0:B.call(x))||{})}),O}function U(f){return O=>f.every(x=>!x.filterEntity||x.filterEntity(O))}function Y(f,O){var x;const B=(x=f.metadata.annotations)==null?void 0:x[b.I4];if(B)try{const ne=(0,b.aY)(B),Se=O.byUrl(ne.target);return{locationTargetUrl:ne.target,integrationType:Se==null?void 0:Se.type}}catch{return}}var we=Object.defineProperty,Oe=(f,O,x)=>O in f?we(f,O,{enumerable:!0,configurable:!0,writable:!0,value:x}):f[O]=x,ot=(f,O,x)=>(Oe(f,typeof O!="symbol"?O+"":O,x),x);class Ot{constructor(O){this.value=O}getCatalogFilters(){return{kind:this.value}}toQueryValue(){return this.value}}class en{constructor(O){this.value=O}getTypes(){return Array.isArray(this.value)?this.value:[this.value]}getCatalogFilters(){return{"spec.type":this.getTypes()}}toQueryValue(){return this.getTypes()}}class Zt{constructor(O){this.values=O}filterEntity(O){return this.values.every(x=>{var B;return((B=O.metadata.tags)!=null?B:[]).includes(x)})}getCatalogFilters(){return{"metadata.tags":this.values}}toQueryValue(){return this.values}}class pn{constructor(O){this.value=O}filterEntity(O){const x=this.toUpperArray(this.value.split(/\s/)),B=this.toUpperArray([O.metadata.tags]),ne=this.toUpperArray([O.metadata.name,O.metadata.title]);for(const Se of x)if(B.every(be=>be!==Se)&&ne.every(be=>!be.includes(Se)))return!1;return!0}getFullTextFilters(){return{term:this.value,fields:["metadata.name","metadata.title","spec.profile.displayName"]}}toQueryValue(){return this.value}toUpperArray(O){return O.flat().filter(x=>!!x).map(x=>x.toLocaleUpperCase("en-US"))}}class mn{constructor(O){ot(this,"values"),this.values=O.reduce((x,B)=>{try{return x.push((0,b.U2)((0,b.KU)(B,{defaultKind:"Group"}))),x}catch{return x}},[])}getCatalogFilters(){return{"relations.ownedBy":this.values}}filterEntity(O){return this.values.some(x=>(0,D.g)(O,b.vv).some(B=>(0,b.U2)(B)===x))}toQueryValue(){return this.values}}class kt{constructor(O){this.values=O}getCatalogFilters(){return{"spec.lifecycle":this.values}}filterEntity(O){return this.values.some(x=>{var B;return((B=O.spec)==null?void 0:B.lifecycle)===x})}toQueryValue(){return this.values}}class Sn{constructor(O){this.values=O}getCatalogFilters(){return{"metadata.namespace":this.values}}filterEntity(O){return this.values.some(x=>O.metadata.namespace===x)}toQueryValue(){return this.values}}class un{constructor(O,x){this.value=O,this.refs=x}static owned(O){return new un("owned",O)}static all(){return new un("all")}static starred(O){return new un("starred",O)}getCatalogFilters(){var O,x,B;return this.value==="owned"?{"relations.ownedBy":(O=this.refs)!=null?O:[]}:this.value==="starred"?{"metadata.name":(B=(x=this.refs)==null?void 0:x.map(ne=>(0,b.KU)(ne).name))!=null?B:[]}:{}}filterEntity(O){var x,B,ne,Se;if(this.value==="starred")return(B=(x=this.refs)==null?void 0:x.includes((0,b.U2)(O)))!=null?B:!0;if(this.value==="owned"){const be=(0,D.g)(O,b.vv);return(Se=(ne=this.refs)==null?void 0:ne.some(De=>be.some(at=>(0,b.U2)(at)===De)))!=null?Se:!1}return!0}toQueryValue(){return this.value}}class $n{constructor(O,x,B){this.value=O,this.isOwnedEntity=x,this.isStarredEntity=B}filterEntity(O){switch(this.value){case"owned":return this.isOwnedEntity(O);case"starred":return this.isStarredEntity(O);default:return!0}}toQueryValue(){return this.value}}class qn{constructor(O){this.value=O}getCatalogFilters(){return this.value?{"metadata.annotations.backstage.io/orphan":String(this.value)}:{}}filterEntity(O){var x;const B=(x=O.metadata.annotations)==null?void 0:x["backstage.io/orphan"];return B!==void 0&&this.value.toString()===B}}class na{constructor(O){this.value=O}filterEntity(O){var x,B;const ne=((B=(x=O==null?void 0:O.status)==null?void 0:x.items)==null?void 0:B.length)>0;return ne!==void 0&&this.value===ne}}const kn=(0,r.createContext)(void 0),wn=f=>{const O=(0,Ae.A)(),x=(0,s.u)(he),[B,ne]=(0,r.useState)({}),Se=(0,F.zy)(),be=f.pagination===!0||typeof f.pagination=="object",De=f.pagination&&typeof f.pagination=="object"&&typeof f.pagination.limit=="number"?f.pagination.limit:20,{queryParameters:at,cursor:Mt}=(0,r.useMemo)(()=>{var Jn;const ua=v().parse(Se.search,{ignoreQueryPrefix:!0});return{queryParameters:(Jn=ua.filters)!=null?Jn:{},cursor:typeof ua.cursor=="string"?ua.cursor:void 0}},[Se]),[Tt,nn]=(0,r.useState)(Mt),[En,on]=(0,r.useState)(()=>({appliedFilters:{},entities:[],backendEntities:[],pageInfo:be?{}:void 0})),[{loading:Tn,error:zn},Cn]=(0,ae.A)(async()=>{var Jn;const ua=(0,w.compact)(Object.values(B)),Da=Object.keys(B).reduce((fa,ma)=>{const ya=B[ma];return ya!=null&&ya.toQueryValue&&(fa[ma]=ya.toQueryValue()),fa},{});if(be)if(Tt){if(Tt!==En.appliedCursor){const fa=U(ua),ma=await x.queryEntities({cursor:Tt,limit:De});on({appliedFilters:B,appliedCursor:Tt,backendEntities:ma.items,entities:ma.items.filter(fa),pageInfo:ma.pageInfo,totalItems:ma.totalItems})}}else{const fa=U(ua),ma=le(ua),ya=le((0,w.compact)(Object.values(En.appliedFilters)));if(!(0,w.isEqual)(ya,ma)){const Pa=await x.queryEntities({...ma,limit:De,orderFields:[{field:"metadata.name",order:"asc"}]});on({appliedFilters:B,backendEntities:Pa.items,entities:Pa.items.filter(fa),pageInfo:Pa.pageInfo,totalItems:Pa.totalItems})}}else{const fa=U(ua),ma=I(ua),ya=I((0,w.compact)(Object.values(En.appliedFilters)));if((0,w.isEqual)(ya,ma)){const Pa=En.backendEntities.filter(fa);on({appliedFilters:B,backendEntities:En.backendEntities,entities:Pa,totalItems:Pa.length})}else{const Pa=await x.getEntities({filter:ma}),fr=Pa.items.filter(fa);on({appliedFilters:B,backendEntities:Pa.items,entities:fr,totalItems:fr.length})}}if(O()){const fa=v().parse(Se.search,{ignoreQueryPrefix:!0}),ma=v().stringify({...fa,filters:Da,cursor:Tt},{addQueryPrefix:!0,arrayFormat:"repeat"}),ya=`${window.location.pathname}${ma}`;(Jn=window.history)==null||Jn.replaceState(null,document.title,ya)}},[x,at,B,En,Tt,be],{loading:!0});(0,Fe.A)(Cn,10,[B,Tt]);const Xn=(0,r.useCallback)(Jn=>{nn(void 0),ne(ua=>{const Da=typeof Jn=="function"?Jn(ua):Jn;return{...ua,...Da}})},[]),ga=(0,r.useMemo)(()=>{var Jn,ua;if(!be)return;const Da=(Jn=En.pageInfo)==null?void 0:Jn.prevCursor,fa=(ua=En.pageInfo)==null?void 0:ua.nextCursor;return{prev:Da?()=>nn(Da):void 0,next:fa?()=>nn(fa):void 0}},[be,En.pageInfo]),xn=(0,r.useMemo)(()=>({filters:En.appliedFilters,entities:En.entities,backendEntities:En.backendEntities,updateFilters:Xn,queryParameters:at,loading:Tn,error:zn,pageInfo:ga,totalItems:En.totalItems}),[En,Xn,at,Tn,zn,ga]);return r.createElement(kn.Provider,{value:xn},f.children)};function gn(){const f=(0,r.useContext)(kn);if(!f)throw new Error("useEntityList must be used within EntityListProvider");return f}function Jt(){var f;const O=(0,s.u)(he),{filters:{kind:x,type:B},queryParameters:{type:ne},updateFilters:Se}=gn(),be=(0,r.useMemo)(()=>[ne].flat().filter(Boolean),[ne]),[De,at]=(0,r.useState)(be.length?be:(f=B==null?void 0:B.getTypes())!=null?f:[]);(0,r.useEffect)(()=>{be.length&&at(be)},[be]);const[Mt,Tt]=(0,r.useState)([]),nn=(0,r.useMemo)(()=>x==null?void 0:x.value,[x]),{error:En,loading:on,value:Tn}=(0,X.A)(async()=>nn?await O.getEntityFacets({filter:{kind:nn},facets:["spec.type"]}).then(Xn=>Xn.facets["spec.type"]||[]):[],[nn,O]),zn=(0,r.useRef)(Tn);return(0,r.useEffect)(()=>{const Cn=zn.current;if(zn.current=Tn,on||!nn||Cn===Tn||!Tn)return;const Xn=[...new Set(re()(Tn,xn=>-xn.count).map(xn=>xn.value.toLocaleLowerCase("en-US")))];Tt(Xn);const ga=De.filter(xn=>Xn.includes(xn));H()(De,ga)||at(ga)},[on,nn,De,at,Tn]),(0,r.useEffect)(()=>{Se({type:De.length?new en(De):void 0})},[De,Se]),{loading:on,error:En,availableTypes:Mt,selectedTypes:De,setSelectedTypes:at}}function vn(f,O){var x,B;const ne=(x=O==null?void 0:O.type)==null?void 0:x.toLocaleLowerCase("en-US"),Se=(B=O==null?void 0:O.kind)==null?void 0:B.toLocaleLowerCase("en-US"),be=(0,s.u)(he),{loading:De,value:at,error:Mt}=(0,X.A)(async()=>{var Tt;const nn=(Tt=f.relations)==null?void 0:Tt.filter(on=>(!ne||on.type.toLocaleLowerCase("en-US")===ne)&&(!Se||(0,b.KU)(on.targetRef).kind===Se));if(!(nn!=null&&nn.length))return[];const{items:En}=await be.getEntitiesByRefs({entityRefs:nn.map(on=>on.targetRef)});return En.filter(on=>!!on)},[f,ne,Se]);return{entities:at,loading:De,error:Mt}}function _n(f){return typeof f=="string"?f:(0,b.U2)(f)}function Aa(){const f=(0,s.u)(Un),O=(0,_e.A)((0,r.useMemo)(()=>f.starredEntitie$(),[f]),new Set),x=(0,r.useCallback)(ne=>O.has(_n(ne)),[O]),B=(0,r.useCallback)(ne=>f.toggleStarred(_n(ne)).then(),[f]);return{starredEntities:O,toggleStarredEntity:B,isStarredEntity:x}}function Oa(f){return typeof f=="string"?f:(0,b.U2)(f)}function J(f){const O=(0,s.u)(Un),[x,B]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{const Se=O.starredEntitie$().subscribe({next(be){B(be.has(Oa(f)))}});return()=>{Se.unsubscribe()}},[f,O]),{toggleStarredEntity:(0,r.useCallback)(()=>O.toggleStarred(Oa(f)).then(),[f,O]),isStarredEntity:x}}function ge(){const f=(0,s.u)(s.t),{loading:O,value:x}=(0,X.A)(async()=>{const{ownershipEntityRefs:ne}=await f.getBackstageIdentity();return ne},[]),B=(0,r.useMemo)(()=>{const ne=new Set(x!=null?x:[]);return Se=>{const be=(0,D.g)(Se,b.vv).map(b.U2);for(const De of be)if(ne.has(De))return!0;return!1}},[x]);return{loading:O,isOwnedEntity:B}}function ke(){const f=(0,s.u)(he),{error:O,loading:x,value:B}=(0,X.A)(async()=>await f.getEntityFacets({facets:["kind"]}).then(Se=>{var be;return((be=Se.facets.kind)==null?void 0:be.map(De=>De.value).sort())||[]}),[f]);return{loading:x,error:O,allKinds:B!=null?B:[]}}function it(f,O,x){let B=f;return O&&(B=B.filter(Se=>O.some(be=>be.toLocaleLowerCase("en-US")===Se.toLocaleLowerCase("en-US")))),x&&!f.some(Se=>Se.toLocaleLowerCase("en-US")===x.toLocaleLowerCase("en-US"))&&(B=B.concat([x])),B.sort().reduce((Se,be)=>(Se[be.toLocaleLowerCase("en-US")]=be,Se),{})}function St(f){var O,x;const{filters:B,queryParameters:{kind:ne},updateFilters:Se}=gn(),be=(0,r.useMemo)(()=>[ne].flat()[0],[ne]),[De,at]=(0,r.useState)((x=be!=null?be:(O=B.kind)==null?void 0:O.value)!=null?x:f.initialFilter);(0,r.useEffect)(()=>{be&&at(be)},[be]),(0,r.useEffect)(()=>{var En,on;(En=B.kind)!=null&&En.value&&at((on=B.kind)==null?void 0:on.value)},[B.kind]),(0,r.useEffect)(()=>{Se({kind:De?new Ot(De):void 0})},[De,Se]);const{allKinds:Mt,loading:Tt,error:nn}=ke();return{loading:Tt,error:nn,allKinds:Mt!=null?Mt:[],selectedKind:De,setSelectedKind:at}}const At=f=>{const{allowedKinds:O,hidden:x,initialFilter:B="component"}=f,ne=(0,s.u)(s.l),{error:Se,allKinds:be,selectedKind:De,setSelectedKind:at}=St({initialFilter:B});if((0,r.useEffect)(()=>{Se&&ne.post({message:"Failed to load entity kinds",severity:"error"})},[Se,ne]),Se)return null;const Mt=it(be,O,De),Tt=Object.keys(Mt).map(nn=>({value:nn,label:Mt[nn]}));return x?null:r.createElement(t.A,{pb:1,pt:1},r.createElement(ee.l6,{label:"Kind",items:Tt,selected:De.toLocaleLowerCase("en-US"),onChange:nn=>at(String(nn))}))},cn=r.createElement(Je.A,{fontSize:"small"}),hn=r.createElement(Ge.A,{fontSize:"small"});function ie({selected:f}){return r.createElement(Ze.A,{icon:cn,checkedIcon:hn,checked:f})}const Te=(0,r.memo)(f=>{const{selected:O,value:x,availableOptions:B,showCounts:ne}=f,Se=ne?`${x} (${B==null?void 0:B[x]})`:x;return r.createElement(nt.A,{control:r.createElement(ie,{selected:O}),label:Se,onClick:be=>be.preventDefault()})}),We=(0,ye.A)({input:{}},{name:"CatalogReactEntityAutocompletePickerInput"});function Ne(f){const O=We();return r.createElement(Re.A,{variant:"outlined",...f,className:lt()(O.input,f.className)})}const He=(0,ye.A)({root:{},label:{}},{name:"CatalogReactEntityAutocompletePicker"});function zt(f){var O,x;const{label:B,name:ne,path:Se,showCounts:be,Filter:De,InputProps:at,initialSelectedOptions:Mt=[],filtersForAvailableValues:Tt=["kind"]}=f,nn=He(),{updateFilters:En,filters:on,queryParameters:{[ne]:Tn}}=gn(),zn=(0,s.u)(he),Cn=Tt.map(ma=>on[ma]),{value:Xn}=(0,X.A)(async()=>{const ma=Se,{facets:ya}=await zn.getEntityFacets({facets:[ma],filter:I(Cn.filter(Boolean))});return Object.fromEntries(ya[ma].map(({value:Pa,count:fr})=>[Pa,fr]))},[...Cn]),ga=(0,r.useMemo)(()=>[Tn].flat().filter(Boolean),[Tn]),[xn,Jn]=(0,r.useState)(ga.length?ga:(x=(O=on[ne])==null?void 0:O.values)!=null?x:Mt);(0,r.useEffect)(()=>{ga.length&&Jn(ga)},[ga]);const ua=Object.keys(Xn!=null?Xn:{}),Da=xn.length&&ua.length;(0,r.useEffect)(()=>{En({[ne]:Da?new De(xn):void 0})},[ne,Da,xn,De,En]);const fa=on[ne];return fa&&typeof fa=="object"&&!("values"in fa)||!ua.length?null:r.createElement(t.A,{className:nn.root,pb:1,pt:1},r.createElement(me.A,{className:nn.label,variant:"button",component:"label"},B,r.createElement(Ve.Ay,{multiple:!0,disableCloseOnSelect:!0,options:ua,value:xn,onChange:(ma,ya)=>Jn(ya),renderOption:(ma,{selected:ya})=>r.createElement(Te,{selected:ya,value:ma,availableOptions:Xn,showCounts:!!be}),size:"small",popupIcon:r.createElement(tt.A,{"data-testid":`${String(ne)}-picker-expand`}),renderInput:ma=>r.createElement(Ne,{...ma,...at})})))}const _t=(0,ye.A)({input:{}},{name:"CatalogReactEntityLifecyclePicker"}),bt=f=>{const{initialFilter:O=[]}=f,x=_t();return r.createElement(zt,{label:"Lifecycle",name:"lifecycles",path:"spec.lifecycle",Filter:kt,InputProps:{className:x.input},initialSelectedOptions:O})},Gt=(0,ye.A)({input:{}},{name:"CatalogReactEntityNamespacePicker"}),fn=f=>{const{initiallySelectedNamespaces:O}=f,x=Gt();return r.createElement(zt,{label:"Namespace",name:"namespace",path:"metadata.namespace",Filter:Sn,InputProps:{className:x.input},initialSelectedOptions:O})};function rn(f,O){const x=O==null?void 0:O.defaultKind;let B,ne,Se;return"metadata"in f?(B=f.kind,ne=f.metadata.namespace,Se=f.metadata.name):(B=f.kind,ne=f.namespace,Se=f.name),(ne===void 0||ne==="")&&(ne=b.oQ),(O==null?void 0:O.defaultNamespace)!==void 0?(O==null?void 0:O.defaultNamespace)===ne&&(ne=void 0):ne===b.oQ&&(ne=void 0),B=B.toLocaleLowerCase("en-US"),B=x&&x.toLocaleLowerCase("en-US")===B?void 0:B,`${B?`${B}:`:""}${ne?`${ne}/`:""}${Se}`}function Nn(f,O){for(const x of["spec.profile.displayName","metadata.title"]){const B=W()(f,x);if(B&&typeof B=="string")return B}return O}function Mn({enabled:f}){const O=(0,s.u)(he),[x]=(0,r.useState)(async()=>{if(!f)return[];const B="relations.ownedBy";return O.getEntityFacets({facets:[B]}).then(ne=>ne.facets[B].map(Se=>Se.value).map(Se=>{const{kind:be,name:De,namespace:at}=(0,b.KU)(Se);return{apiVersion:"backstage.io/v1beta1",kind:be,metadata:{name:De,namespace:at}}}).sort((Se,be)=>(Se.metadata.namespace||"").localeCompare(be.metadata.namespace||"","en-US")||Se.metadata.name.localeCompare(be.metadata.name,"en-US")||Se.kind.localeCompare(be.kind,"en-US"))).catch(()=>[])});return(0,ae.A)(async(B,ne)=>{var Se;const be=await x;if(!be)return{items:[]};const De=(Se=ne==null?void 0:ne.limit)!=null?Se:20,{text:at,start:Mt}=Gn(B),Tt=be.filter(En=>ea(at,En)),nn=Mt+De;return{items:Tt.slice(0,nn),...Fn({entities:Tt,limit:nn,payload:{text:at,start:nn}})}},[x],{loading:!0,value:{items:[]}})}function Gn(f){return la(f)&&f.cursor?JSON.parse(atob(f.cursor)):{text:f.text||"",start:0}}function la(f){return!!f.cursor}function Fn({entities:f,limit:O,payload:x}){return f.length>O?{cursor:btoa(JSON.stringify(x))}:{}}function ea(f,O){var x;const B=f.trim();return O.kind.includes(B)||((x=O.metadata.namespace)==null?void 0:x.includes(B))||O.metadata.name.includes(B)}function ca(){const f=(0,s.u)(he);return(0,ae.A)(async(O,x)=>{var B;const ne=O,Se=O,be=(B=x==null?void 0:x.limit)!=null?B:20;if(Se.cursor){const at=await f.queryEntities({cursor:Se.cursor,limit:be});return{cursor:at.pageInfo.nextCursor,items:[...Se.items,...at.items]}}const De=await f.queryEntities({fullTextFilter:{term:ne.text||"",fields:["metadata.name","kind","spec.profile.displayname","metadata.title"]},filter:{kind:["User","Group"]},orderFields:[{field:"metadata.name",order:"asc"}],limit:be});return{cursor:De.pageInfo.nextCursor,items:De.items}},[],{loading:!0})}function sa({mode:f,initialSelectedOwnersRefs:O}){const x=f==="owners-only",B=ca(),ne=Mn({enabled:x}),[Se,be]=x?ne:B;return[Se,be,Ea({enabled:!x,initialSelectedOwnersRefs:O})]}function Ea({enabled:f,initialSelectedOwnersRefs:O}){const x=(0,r.useRef)({}),B=(0,s.u)(he),[,ne]=(0,ae.A)(async()=>{(await B.getEntitiesByRefs({entityRefs:O})).items.forEach(be=>{be&&(x.current[(0,b.U2)(be)]=be)})},[]);return(0,wt.u)(()=>{f&&O.length>0&&ne()}),{getEntity:Se=>x.current[Se],setEntity:Se=>{x.current[(0,b.U2)(Se)]=Se}}}const ba=(0,ye.A)({root:{},label:{},input:{},fullWidth:{width:"100%"},boxLabel:{width:"100%",textOverflow:"ellipsis",overflow:"hidden"}},{name:"CatalogReactEntityOwnerPicker"}),Ra=(0,ut.A)(f=>({label:{width:"100%"},root:{width:"90%"}}),{name:"FixedWidthFormControlLabel"})(nt.A),Ta=r.createElement(Je.A,{fontSize:"small"}),Ha=r.createElement(Ge.A,{fontSize:"small"});function Ja(f){const O=ba(),x=f.entity.kind.toLocaleLowerCase("en-US")==="group",{primaryTitle:B}=Dn(f.entity);return r.createElement(t.A,{className:O.fullWidth},r.createElement(Ra,{className:O.fullWidth,control:r.createElement(Ze.A,{icon:Ta,checkedIcon:Ha,checked:f.isSelected}),onClick:ne=>ne.preventDefault(),label:r.createElement(Et.Ay,{title:B},r.createElement(t.A,{display:"flex",alignItems:"center"},x?r.createElement(ue.A,{fontSize:"small"}):r.createElement(yt.A,{fontSize:"small"}),"\xA0",r.createElement(t.A,{className:O.boxLabel},r.createElement(me.A,{noWrap:!0},B))))}))}const Za=f=>{var O,x,B;const ne=ba(),{mode:Se="owners-only"}=f||{},{updateFilters:be,filters:De,queryParameters:{owners:at}}=gn(),[Mt,Tt]=(0,r.useState)(""),nn=(0,r.useMemo)(()=>[at].flat().filter(Boolean),[at]),[En,on]=(0,r.useState)(nn.length?nn:(x=(O=De.owners)==null?void 0:O.values)!=null?x:[]),[{value:Tn,loading:zn},Cn,Xn]=sa({mode:Se,initialSelectedOwnersRefs:En});(0,Qt.s)(()=>Cn({text:Mt}),[Mt,Cn],250);const ga=(Tn==null?void 0:Tn.items)||[];return(0,r.useEffect)(()=>{if(nn.length){const xn=new mn(nn);on(xn.values)}},[nn]),(0,r.useEffect)(()=>{be({owners:En.length?new mn(En):void 0})},[En,be]),["user","group"].includes(((B=De.kind)==null?void 0:B.value.toLocaleLowerCase("en-US"))||"")?null:r.createElement(t.A,{className:ne.root,pb:1,pt:1},r.createElement(me.A,{className:ne.label,variant:"button",component:"label"},"Owner",r.createElement(Ve.Ay,{multiple:!0,disableCloseOnSelect:!0,loading:zn,options:ga,value:En,getOptionSelected:(xn,Jn)=>typeof Jn=="string"?(0,b.U2)(xn)===Jn:xn===Jn,getOptionLabel:xn=>{const Jn=typeof xn=="string"?Xn.getEntity(xn)||(0,b.KU)(xn,{defaultKind:"group",defaultNamespace:"default"}):xn;return Nn(Jn,rn(Jn))},onChange:(xn,Jn)=>{Tt(""),on(Jn.map(ua=>{const Da=typeof ua=="string"?ua:(0,b.U2)(ua);return typeof ua!="string"&&Xn.setEntity(ua),Da}))},filterOptions:xn=>xn,renderOption:(xn,{selected:Jn})=>r.createElement(Ja,{entity:xn,isSelected:Jn}),size:"small",popupIcon:r.createElement(tt.A,{"data-testid":"owner-picker-expand"}),renderInput:xn=>r.createElement(Re.A,{...xn,className:ne.input,onChange:Jn=>{Tt(Jn.currentTarget.value)},variant:"outlined"}),ListboxProps:{onScroll:xn=>{const Jn=xn.currentTarget;Math.abs(Jn.scrollHeight-Jn.clientHeight-Jn.scrollTop)<1&&(Tn!=null&&Tn.cursor)&&Cn({items:Tn.items,cursor:Tn.cursor})},"data-testid":"owner-picker-listbox"}})))},hr=(0,ye.A)({root:{},input:{},label:{}},{name:"CatalogReactEntityProcessingStatusPickerPicker"}),gr=r.createElement(Je.A,{fontSize:"small"}),or=r.createElement(Ge.A,{fontSize:"small"}),ur=()=>{const f=hr(),{updateFilters:O}=gn(),[x,B]=(0,r.useState)([]);function ne(De){O({orphan:De?new qn(De):void 0})}function Se(De){O({error:De?new na(De):void 0})}const be=["Is Orphan","Has Error"];return r.createElement(t.A,{className:f.root,pb:1,pt:1},r.createElement(me.A,{className:f.label,variant:"button",component:"label"},"Processing Status",r.createElement(Ve.Ay,{multiple:!0,disableCloseOnSelect:!0,options:be,value:x,onChange:(De,at)=>{B(at),ne(at.includes("Is Orphan")),Se(at.includes("Has Error"))},renderOption:(De,{selected:at})=>r.createElement(nt.A,{control:r.createElement(Ze.A,{icon:gr,checkedIcon:or,checked:at}),onClick:Mt=>Mt.preventDefault(),label:De}),size:"small",popupIcon:r.createElement(tt.A,{"data-testid":"processing-status-picker-expand"}),renderInput:De=>r.createElement(Re.A,{...De,className:f.input,variant:"outlined"})})))},Sa=(0,ye.A)({input:{}},{name:"CatalogReactEntityTagPicker"}),qa=f=>{const O=Sa();return r.createElement(zt,{label:"Tags",name:"tags",path:"metadata.tags",Filter:Zt,showCounts:f.showCounts,InputProps:{className:O.input}})},er=f=>{var O;const{hidden:x,initialFilter:B}=f,ne=(0,s.u)(s.l),{error:Se,availableTypes:be,selectedTypes:De,setSelectedTypes:at}=Jt();if((0,r.useEffect)(()=>{Se&&ne.post({message:"Failed to load entity types",severity:"error"}),B&&at([B])},[Se,ne,B,at]),be.length===0||Se)return null;const Mt=[{value:"all",label:"all"},...be.map(Tt=>({value:Tt,label:Tt}))];return x?null:r.createElement(t.A,{pb:1,pt:1},r.createElement(ee.l6,{label:"Type",items:Mt,selected:(O=Mt.length>1?De[0]:void 0)!=null?O:"all",onChange:Tt=>at(Tt==="all"?[]:[String(Tt)])}))};function ir(){const f=(0,s.u)(s.t),O=(0,s.u)(he),{filters:x}=gn(),{value:B,loading:ne}=(0,X.A)(async()=>(await f.getBackstageIdentity()).ownershipEntityRefs,[]),{user:Se,owners:be,...De}=x,at=le((0,w.compact)(Object.values(De))),[{value:Mt,loading:Tt},nn]=(0,ae.A)(async on=>{const Tn=ar(on.owners,on.ownershipEntityRefs);if(Tn===void 0)return 0;const{["metadata.name"]:zn,...Cn}=on.filter.filter,{totalItems:Xn}=await O.queryEntities({...on.filter,filter:{...Cn,"relations.ownedBy":Tn},limit:0});return Xn},[],{loading:!0});return(0,Ie.A)(()=>{Object.keys(at.filter).length!==0&&B!==void 0&&nn({ownershipEntityRefs:B,owners:be,filter:at})},[B,be,at]),{count:Mt,loading:ne||Tt,filter:(0,r.useMemo)(()=>un.owned(B!=null?B:[]),[B]),ownershipEntityRefs:B}}function ar(f,O){var x;if(O===void 0)return;const B=(x=f==null?void 0:f.values)!=null?x:[];if(B.length){const ne=(0,w.intersection)(B,O);return ne.length===0?void 0:ne}return O}function $e(){const f=(0,s.u)(he),{filters:O}=gn(),x=(0,r.useRef)(),B=(0,r.useMemo)(()=>{const{user:be,...De}=O,at=(0,w.compact)(Object.values(De)),Mt=le(at),Tt={...Mt,limit:0};return Object.keys(Mt.filter).length===0?(x.current=void 0,x.current):(0,w.isEqual)(Tt,x.current)?x.current:(x.current=Tt,Tt)},[O]),{value:ne,loading:Se}=(0,X.A)(async()=>{if(B===void 0)return 0;const{totalItems:be}=await f.queryEntities(B);return be},[B]);return{count:ne,loading:Se}}function ce(){const f=(0,s.u)(he),{filters:O}=gn(),{starredEntities:x}=Aa(),B=(0,r.useRef)(),ne=(0,r.useMemo)(()=>{const{user:at,...Mt}=O,Tt=(0,w.compact)(Object.values(Mt)),nn=le(Tt),on={...nn,filter:{...nn.filter,["metadata.name"]:Array.from(x).map(Tn=>(0,b.KU)(Tn).name)},limit:1e3};return(0,w.isEqual)(on,B.current)?B.current:(B.current=on,on)},[O,x]),{value:Se,loading:be}=(0,X.A)(async()=>x.size?(await f.queryEntities(ne)).items.map(Mt=>(0,b.U2)({kind:Mt.kind,namespace:Mt.metadata.namespace,name:Mt.metadata.name})).filter(Mt=>x.has(Mt)).length:0,[ne,x]),De=(0,r.useMemo)(()=>un.starred(Array.from(x)),[x]);return{count:Se,loading:be,filter:De}}const st=(0,ye.A)(f=>({root:{backgroundColor:"rgba(0, 0, 0, .11)",boxShadow:"none",margin:f.spacing(1,0,1,0)},title:{margin:f.spacing(1,0,0,1),textTransform:"uppercase",fontSize:12,fontWeight:"bold"},listIcon:{minWidth:30,color:f.palette.text.primary},menuItem:{minHeight:f.spacing(6)},groupWrapper:{margin:f.spacing(1,1,2,1)}}),{name:"CatalogReactUserListPicker"});function Rn(f){return[{name:"Personal",items:[{id:"owned",label:"Owned",icon:j.A},{id:"starred",label:"Starred",icon:Z.A}]},{name:f!=null?f:"Company",items:[{id:"all",label:"All"}]}]}const Kn=f=>{var O;const{initialFilter:x,availableFilters:B}=f,ne=st(),be=(O=(0,s.u)(s.p).getOptionalString("organization.name"))!=null?O:"Company",{filters:De,updateFilters:at,queryParameters:{kind:Mt,user:Tt}}=gn(),nn=["starred","all"],En=Rn(be).map(ya=>({...ya,items:ya.items.filter(({id:Pa})=>["group","user"].some(fr=>fr===Mt)?nn.includes(Pa):!B||B.includes(Pa))})).filter(({items:ya})=>!!ya.length),{count:on,loading:Tn,filter:zn}=ir(),{count:Cn}=$e(),{count:Xn,filter:ga,loading:xn}=ce(),Jn=(0,r.useMemo)(()=>[Tt].flat()[0],[Tt]),[ua,Da]=(0,r.useState)(Jn!=null?Jn:x),fa=(0,r.useMemo)(()=>({all:Cn,starred:Xn,owned:on}),[Xn,on,Cn]);(0,r.useEffect)(()=>{Jn&&Da(Jn)},[Jn]);const ma=Tn||xn;return(0,r.useEffect)(()=>{!ma&&ua&&ua!=="all"&&fa[ua]===0&&Da("all")},[ma,fa,ua,Da]),(0,r.useEffect)(()=>{if(!ua||ma)return;at({user:ua==="owned"?zn:ua==="starred"?ga:un.all()})},[ua,ga,zn,at,ma]),r.createElement(gt.A,{className:ne.root},En.map(ya=>r.createElement(r.Fragment,{key:ya.name},r.createElement(me.A,{variant:"subtitle2",component:"span",className:ne.title},ya.name),r.createElement(gt.A,{className:ne.groupWrapper},r.createElement(xt.A,{disablePadding:!0,dense:!0,role:"menu","aria-label":ya.name},ya.items.map(Pa=>{var fr,ro;return r.createElement(P.A,{role:"none presentation",key:Pa.id,divider:!0,onClick:()=>Da(Pa.id),selected:Pa.id===((fr=De.user)==null?void 0:fr.value),className:ne.menuItem,disabled:fa[Pa.id]===0,"data-testid":`user-picker-${Pa.id}`,tabIndex:0,ContainerProps:{role:"menuitem"}},Pa.icon&&r.createElement(ht.A,{className:ne.listIcon},r.createElement(Pa.icon,{fontSize:"small"})),r.createElement(S.A,null,r.createElement(me.A,{variant:"body1"},Pa.label," ")),r.createElement(Ut.A,null,(ro=fa[Pa.id])!=null?ro:"-"))}))))))},aa=f=>{const{initialKind:O,initiallySelectedFilter:x,ownerPickerMode:B,initiallySelectedNamespaces:ne}=f;return r.createElement(r.Fragment,null,r.createElement(At,{initialFilter:O}),r.createElement(er,null),r.createElement(Kn,{initialFilter:x}),r.createElement(Za,{mode:B}),r.createElement(bt,null),r.createElement(qa,null),r.createElement(ur,null),r.createElement(fn,{initiallySelectedNamespaces:ne}))},ra=(0,ye.A)(f=>({root:{display:"inline-flex",alignItems:"center"},icon:{marginRight:f.spacing(.5),color:f.palette.text.secondary,lineHeight:0}}),{name:"CatalogReactEntityDisplayName"}),va=f=>{const{entityRef:O,hideIcon:x,disableTooltip:B,defaultKind:ne,defaultNamespace:Se}=f,be=ra(),{primaryTitle:De,secondaryTitle:at,Icon:Mt}=Dn(O,{defaultKind:ne,defaultNamespace:Se});let Tt=r.createElement(r.Fragment,null,De);return Tt=r.createElement(t.A,{component:"span",className:be.root},Mt&&!x?r.createElement(t.A,{component:"span",className:be.icon},r.createElement(Mt,{fontSize:"inherit"})):null,Tt),at&&!B&&(Tt=r.createElement(Et.Ay,{enterDelay:1500,title:at},Tt)),Tt},_a=(0,ze.Q6)("catalog:entity-route-ref",()=>(0,l.HM)({id:"catalog:entity",params:["namespace","kind","name"]}));function wa(f){var O,x;return{kind:f.kind.toLocaleLowerCase("en-US"),namespace:(x=(O=f.metadata.namespace)==null?void 0:O.toLocaleLowerCase("en-US"))!=null?x:DEFAULT_NAMESPACE,name:f.metadata.name}}const Ia=(0,r.forwardRef)((f,O)=>{var x;const{entityRef:B,defaultKind:ne,defaultNamespace:Se,title:be,children:De,hideIcon:at,...Mt}=f,Tt=Ka(f.entityRef),nn=(x=De!=null?De:be)!=null?x:r.createElement(va,{entityRef:B,defaultKind:ne,defaultNamespace:Se,hideIcon:at});return r.createElement(ee.N_,{...Mt,ref:O,to:Tt},nn)});function Ka(f){var O;const x=(0,l.Sf)(_a);let B,ne,Se;if(typeof f=="string"){const De=(0,b.KU)(f);B=De.kind,ne=De.namespace,Se=De.name}else"metadata"in f?(B=f.kind,ne=f.metadata.namespace,Se=f.metadata.name):(B=f.kind,ne=f.namespace,Se=f.name);B=B.toLocaleLowerCase("en-US"),ne=(O=ne==null?void 0:ne.toLocaleLowerCase("en-US"))!=null?O:b.oQ;const be={kind:encodeURIComponent(B),namespace:encodeURIComponent(ne),name:encodeURIComponent(Se)};return x(be)}function dr(f){const{entityRefs:O,hideIcons:x,...B}=f;return r.createElement(r.Fragment,null,O.map((ne,Se)=>{const be=typeof ne=="string"?ne:(0,b.U2)(ne);return r.createElement(r.Fragment,{key:`${Se}.${be}`},Se>0&&", ",r.createElement(Ia,{...B,entityRef:ne,hideIcon:x}))}))}const ha=f=>{const O=useRouteRef(_a);return React.createElement(IconButton,{component:Link,"aria-label":"Show",title:"Show details",to:O(getCompoundEntityRef(f.entity))},React.createElement(InfoIcon,null))},za=f=>React.createElement(IconButton,{component:Link,"aria-label":"Email",title:`Email ${f.email}`,to:`mailto:${f.email}`},React.createElement(EmailIcon,null)),Er=f=>{var O;const x=(O=f.entity.spec.profile)==null?void 0:O.email;return x?React.createElement(za,{email:x}):null},sr=f=>{var O;const x=(O=f.entity.spec.profile)==null?void 0:O.email;return x?React.createElement(za,{email:x}):null},$a=(0,ye.A)(()=>({popoverPaper:{width:"30em"},descriptionTypography:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"}})),Ar=4,Zr=f=>{var O,x,B,ne;const{entityRef:Se,children:be,delayTime:De=500}=f,at=$a(),Mt=useApiHolder(),Tt=usePopupState({variant:"popover",popupId:"entity-peek-ahead"}),[nn,En]=useState(!1),on=useMemo(()=>debounce(()=>En(!0),De),[De]),[{loading:Tn,error:zn,value:Cn},Xn]=useAsyncFn(async()=>{const xn=Mt.get(he);if(xn){const Jn=await xn.getEntityByRef(Se);if(!Jn)throw new Error(`${Se} not found`);return Jn}},[Mt,Se]),ga=()=>{En(!1),on.cancel()};return useEffect(()=>{Tt.isOpen&&!Cn&&!zn&&!Tn&&Xn()},[Tt.isOpen,Xn,Cn,zn,Tn]),React.createElement(React.Fragment,null,React.createElement(Typography,{component:"span",onMouseEnter:on},React.createElement(Typography,{component:"span","data-testid":"trigger",...bindHover(Tt)},be)),nn&&React.createElement(HoverPopover,{PaperProps:{className:at.popoverPaper},...bindPopover(Tt),anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},onMouseLeave:ga},React.createElement(Card,null,React.createElement(CardContent,null,zn&&React.createElement(ResponseErrorPanel,{error:zn}),Tn&&React.createElement(Progress,null),Cn&&React.createElement(React.Fragment,null,React.createElement(Typography,{color:"textSecondary"},Cn.metadata.namespace),React.createElement(Typography,{variant:"h5",component:"div"},Cn.metadata.name),React.createElement(Typography,{color:"textSecondary",gutterBottom:!0},Cn.kind),Cn.metadata.description&&React.createElement(Typography,{className:at.descriptionTypography,paragraph:!0},Cn.metadata.description),React.createElement(Typography,null,(x=(O=Cn.spec)==null?void 0:O.type)==null?void 0:x.toString()),React.createElement(Box,{marginTop:"0.5em"},(Cn.metadata.tags||[]).slice(0,Ar).map(xn=>React.createElement(Chip,{key:xn,size:"small",label:xn})),((B=Cn.metadata.tags)==null?void 0:B.length)&&((ne=Cn.metadata.tags)==null?void 0:ne.length)>Ar&&React.createElement(Tooltip,{title:"Drill into the entity to see all of the tags."},React.createElement(Chip,{key:"other-tags",size:"small",label:"..."}))))),!zn&&Cn&&React.createElement(CardActions,null,React.createElement(React.Fragment,null,isUserEntity(Cn)&&React.createElement(sr,{entity:Cn}),isGroupEntity(Cn)&&React.createElement(Er,{entity:Cn}),React.createElement(ha,{entity:Cn}))))))},Lr=(0,ye.A)(f=>({searchToolbar:{paddingLeft:0,paddingRight:0},input:{}}),{name:"CatalogReactEntitySearchBar"}),Br=()=>{const f=Lr(),{updateFilters:O,queryParameters:{text:x}}=gn(),B=(0,r.useMemo)(()=>[x].flat()[0],[x]),[ne,Se]=(0,r.useState)(B!=null?B:"");return(0,sn.A)(()=>{O({text:ne.length?new pn(ne):void 0})},250,[ne,O]),(0,r.useEffect)(()=>{B&&Se(B)},[B]),r.createElement(It.A,{className:f.searchToolbar},r.createElement(et.A,null,r.createElement($t.A,{"aria-label":"search",id:"input-with-icon-adornment",className:f.input,placeholder:"Search",autoComplete:"off",onChange:be=>Se(be.target.value),value:ne,startAdornment:r.createElement(tn.A,{position:"start"},r.createElement(qt.A,null)),endAdornment:r.createElement(tn.A,{position:"end"},r.createElement(Qe.A,{"aria-label":"clear search",onClick:()=>Se(""),edge:"end",disabled:ne.length===0},r.createElement(pt.A,null)))})))},g=Object.freeze({createEntityRefColumn(f){const{defaultKind:O}=f;function x(B){var ne;return((ne=B.metadata)==null?void 0:ne.title)||rn(B,{defaultKind:O})}return{title:"Name",highlight:!0,customFilterAndSearch(B,ne){return x(ne).includes(B)},customSort(B,ne){return x(B).localeCompare(x(ne))},render:B=>{var ne;return r.createElement(Ia,{entityRef:B,defaultKind:O,title:(ne=B.metadata)==null?void 0:ne.title})}}},createEntityRelationColumn(f){const{title:O,relation:x,defaultKind:B,filter:ne}=f;function Se(De){return(0,D.g)(De,x,ne)}function be(De){return Se(De).map(at=>rn(at,{defaultKind:B})).join(", ")}return{title:O,customFilterAndSearch(De,at){return be(at).includes(De)},customSort(De,at){return be(De).localeCompare(be(at))},render:De=>r.createElement(dr,{entityRefs:Se(De),defaultKind:B})}},createOwnerColumn(){return this.createEntityRelationColumn({title:"Owner",relation:b.vv,defaultKind:"group"})},createDomainColumn(){return this.createEntityRelationColumn({title:"Domain",relation:b.jn,defaultKind:"domain",filter:{kind:"domain"}})},createSystemColumn(){return this.createEntityRelationColumn({title:"System",relation:b.jn,defaultKind:"system",filter:{kind:"system"}})},createMetadataDescriptionColumn(){return{title:"Description",field:"metadata.description",render:f=>r.createElement(ee.Mm,{text:f.metadata.description,placement:"bottom-start",line:2})}},createSpecLifecycleColumn(){return{title:"Lifecycle",field:"spec.lifecycle"}},createSpecTypeColumn(){return{title:"Type",field:"spec.type"}}}),c=[g.createEntityRefColumn({defaultKind:"system"}),g.createDomainColumn(),g.createOwnerColumn(),g.createMetadataDescriptionColumn()],E=[g.createEntityRefColumn({defaultKind:"component"}),g.createSystemColumn(),g.createOwnerColumn(),g.createSpecTypeColumn(),g.createSpecLifecycleColumn(),g.createMetadataDescriptionColumn()],$=(0,ye.A)(f=>({empty:{padding:f.spacing(2),display:"flex",justifyContent:"center"}})),Pe=f=>{const{entities:O,title:x,emptyContent:B,variant:ne="gridItem",columns:Se,tableOptions:be={}}=f,De=$(),at={minWidth:"0",width:"100%"};return ne==="gridItem"&&(at.height="calc(100% - 10px)"),r.createElement(ee.XI,{columns:Se,title:x,style:at,emptyContent:B&&r.createElement("div",{className:De.empty},B),options:{search:!1,paging:!1,actionsColumnIndex:-1,padding:"dense",draggable:!1,...be},data:O})};Pe.columns=g,Pe.systemEntityColumns=c,Pe.componentEntityColumns=E;const Be=(0,ut.A)({root:{color:"#f3ba37"}})(Z.A),Rt=f=>{const{toggleStarredEntity:O,isStarredEntity:x}=J(f.entity);return r.createElement(Qe.A,{"aria-label":"favorite",color:"inherit",...f,onClick:()=>O()},r.createElement(Et.Ay,{title:x?"Remove from favorites":"Add to favorites"},x?r.createElement(Be,null):r.createElement(an.A,null)))},Ft=Ln.A;function On(f,O){if(f)return f.toLocaleLowerCase("en-US");if(O)try{return(0,b.KU)(O).kind.toLocaleLowerCase("en-US")}catch{return}}function Wn(f,O){const x=(0,l.nm)(),B=On(f,O);return B&&x.getSystemIcon(`kind:${B}`)||Ft}function La(f){const{kind:O,entityRef:x,...B}=f,ne=Wn(O,x);return r.createElement(ne,{...B})}const ka=(0,ye.A)(f=>({node:{fill:f.palette.grey[300],stroke:f.palette.grey[300],"&.primary":{fill:f.palette.primary.light,stroke:f.palette.primary.light},"&.secondary":{fill:f.palette.secondary.light,stroke:f.palette.secondary.light}},text:{fill:f.palette.getContrastText(f.palette.grey[300]),"&.primary":{fill:f.palette.primary.contrastText},"&.secondary":{fill:f.palette.secondary.contrastText},"&.focused":{fontWeight:"bold"}},clickable:{cursor:"pointer"}}));function Ba(f){const O=(0,s.u)(he),x=(0,b.U2)(f),{loading:B,error:ne,value:Se}=(0,X.A)(async()=>{const be=await O.getEntityAncestors({entityRef:x}),De=new Array,at=new Array;for(const Mt of be.items){const Tt=(0,b.U2)(Mt.entity),nn=Tt===be.rootEntityRef;De.push({id:Tt,root:nn,...Mt.entity});for(const En of Mt.parentEntityRefs)at.push({from:Tt,to:En})}return{nodes:De,edges:at}},[x]);return{loading:B,error:ne,nodes:(Se==null?void 0:Se.nodes)||[],edges:(Se==null?void 0:Se.edges)||[]}}function Ca({node:f}){const O=ka(),x=(0,F.Zp)(),B=(0,l.Sf)(_a),[ne,Se]=(0,r.useState)(0),[be,De]=(0,r.useState)(0),at=(0,l.nm)(),Mt=(0,r.useRef)(null);(0,r.useLayoutEffect)(()=>{if(Mt.current){let{height:ga,width:xn}=Mt.current.getBBox();ga=Math.round(ga),xn=Math.round(xn),(ga!==be||xn!==ne)&&(Se(xn),De(ga))}},[ne,be]);const Tt=at.getSystemIcon(`kind:${f.kind.toLocaleLowerCase("en-US")}`),nn=10,En=be,on=Tt?En+nn:0,Tn=on+ne+nn*2,zn=be+nn*2,Cn=f.metadata.title||(f.kind&&f.metadata.name&&f.metadata.namespace?rn({kind:f.kind,name:f.metadata.name,namespace:f.metadata.namespace||""}):f.id),Xn=()=>{x(B({kind:f.kind,namespace:f.metadata.namespace||b.oQ,name:f.metadata.name}))};return r.createElement("g",{onClick:Xn,className:O.clickable},r.createElement("rect",{className:lt()(O.node,f.root?"secondary":"primary"),width:Tn,height:zn,rx:10}),Tt&&r.createElement(La,{kind:f.kind,y:nn,x:nn,width:En,height:En,className:lt()(O.text,f.root?"secondary":"primary")}),r.createElement("text",{ref:Mt,className:lt()(O.text,f.root?"secondary":"primary"),y:zn/2,x:on+(ne+nn*2)/2,textAnchor:"middle",alignmentBaseline:"middle"},Cn))}function ja(f){const{loading:O,error:x,nodes:B,edges:ne}=Ba(f.entity);return O?r.createElement(ee.ke,null):x?r.createElement(ee._1,{error:x}):r.createElement(r.Fragment,null,r.createElement(ft.A,{variant:"h2"},"Ancestry"),r.createElement(ft.A,{gutterBottom:!0},"This is the ancestry of entities above the current one - as in, the chain(s) of entities down to the current one, where"," ",r.createElement(ee.N_,{to:"https://backstage.io/docs/features/software-catalog/life-of-an-entity"},"processors emitted")," ","child entities that ultimately led to the current one existing. Note that this is a completely different mechanism from relations."),r.createElement(t.A,{mt:4},r.createElement(ee.wB,{nodes:B,edges:ne,renderNode:Ca,direction:ee.DT.Direction.BOTTOM_TOP,zoom:"enable-on-click"})))}const tr=(0,ye.A)(f=>({root:{display:"flex",flexDirection:"column"},marginTop:{marginTop:f.spacing(2)},helpIcon:{marginLeft:f.spacing(1),color:f.palette.text.disabled},monospace:{fontFamily:"monospace"}}));function Na(f){const O=tr();return r.createElement(S.A,{...f,primaryTypographyProps:{className:O.monospace},secondaryTypographyProps:{className:O.monospace}})}function Va(f){const O=tr();return r.createElement(An.A,{className:O.monospace},f.children)}function wr(f){return r.createElement(t.A,{mt:2},r.createElement(gt.A,{variant:"outlined"},r.createElement(dt.A,null,r.createElement(me.A,{variant:"h6",gutterBottom:!0},f.title,f.helpLink&&r.createElement(qr,{to:f.helpLink})),f.children)))}function Yr(f){if(f.match(/^url:https?:\/\//))return f.slice(4);if(f.match(/^https?:\/\//))return f}function Jr(f){const[O,x]=f.entry,B=Yr(x);return r.createElement(dn.A,null,f.indent&&r.createElement(ht.A,null),r.createElement(Na,{primary:O,secondary:B?r.createElement(ee.N_,{to:B},x):x}))}function qr(f){const O=tr();return r.createElement(ee.N_,{to:f.to,className:O.helpIcon},r.createElement(Xe.A,{fontSize:"inherit"}))}const Ur=(0,ye.A)({root:{display:"flex",flexDirection:"column"}});function eo(f){var O,x;const B=(0,s.u)(he),ne=(0,b.U2)(f),Se=(O=f.metadata.annotations)==null?void 0:O[b.Eo],be=(x=f.metadata.annotations)==null?void 0:x[b.r2],{loading:De,error:at,value:Mt}=(0,X.A)(async()=>!Se&&!be?[]:(await B.getEntities({filter:[...Se?[{[`metadata.annotations.${b.Eo}`]:Se}]:[],...be?[{[`metadata.annotations.${b.r2}`]:be}]:[]]})).items,[Se,be]);return{loading:De,error:at,location:Se,originLocation:be,colocatedEntities:Mt==null?void 0:Mt.filter(Tt=>(0,b.U2)(Tt)!==ne)}}function Or(f){return r.createElement(xt.A,{dense:!0},f.header&&r.createElement(Jr,{key:"header",entry:f.header}),f.entities.map(O=>r.createElement(dn.A,{key:(0,b.U2)(O)},r.createElement(Na,{primary:r.createElement(Ia,{entityRef:O})}))))}function uo(f){const{entity:O}=f,{loading:x,error:B,location:ne,originLocation:Se,colocatedEntities:be}=eo(O);if(x)return r.createElement(ee.ke,null);if(B)return r.createElement(ee._1,{error:B});if(!ne&&!Se)return r.createElement(Xt.A,{severity:"warning"},"Entity had no location information.");if(!(be!=null&&be.length))return r.createElement(Xt.A,{severity:"info"},"There were no other entities on this location.");if(ne===Se)return r.createElement(Or,{entities:be});const De=be.filter(Mt=>{var Tt;return((Tt=Mt.metadata.annotations)==null?void 0:Tt[b.Eo])===ne}),at=be.filter(Mt=>{var Tt;return((Tt=Mt.metadata.annotations)==null?void 0:Tt[b.r2])===Se});return r.createElement(r.Fragment,null,De.length>0&&r.createElement(Or,{entities:De,header:["At the same location",ne]}),at.length>0&&r.createElement(Or,{entities:at,header:["At the same origin",Se]}))}function mo(f){const O=Ur();return r.createElement(r.Fragment,null,r.createElement(ft.A,{variant:"h2"},"Colocated"),r.createElement(ft.A,null,"These are the entities that are colocated with this entity - as in, they originated from the same data source (e.g. came from the same YAML file), or from the same origin (e.g. the originally registered URL)."),r.createElement("div",{className:O.root},r.createElement(uo,{entity:f.entity})))}function Tr(f){return Object.fromEntries([...Object.entries(f)].sort((O,x)=>O[0]<x[0]?-1:1))}function to(f){return r.createElement(r.Fragment,null,r.createElement(ft.A,{variant:"h2"},"Entity as JSON"),r.createElement(ft.A,null,"This is the raw entity data as received from the catalog, on JSON form."),r.createElement(ft.A,null,r.createElement("div",{style:{fontSize:"75%"},"data-testid":"code-snippet"},r.createElement(ee.z7,{text:JSON.stringify(Tr(f.entity),void 0,2),language:"json",showCopyCodeButton:!0}))))}const po=(0,ye.A)({root:{display:"flex",flexDirection:"column"}});function ho(f){var O,x,B;const ne=po(),{apiVersion:Se,kind:be,metadata:De,spec:at,relations:Mt=[],status:Tt={}}=f.entity,nn=Dt()(re()(Mt,on=>on.targetRef),"type"),En=(0,b.U2)(f.entity);return r.createElement(r.Fragment,null,r.createElement(ft.A,{variant:"h2"},"Overview"),r.createElement("div",{className:ne.root},r.createElement(wr,{title:"Identity"},r.createElement(xt.A,{dense:!0},r.createElement(dn.A,null,r.createElement(Na,{primary:"apiVersion",secondary:Se})),r.createElement(dn.A,null,r.createElement(Na,{primary:"kind",secondary:be})),(at==null?void 0:at.type)&&r.createElement(dn.A,null,r.createElement(Na,{primary:"spec.type",secondary:(O=at.type)==null?void 0:O.toString()})),De.uid&&r.createElement(dn.A,null,r.createElement(Na,{primary:"uid",secondary:De.uid}),r.createElement(Ut.A,null,r.createElement(ee.lz,{text:De.uid}))),De.etag&&r.createElement(dn.A,null,r.createElement(Na,{primary:"etag",secondary:De.etag}),r.createElement(Ut.A,null,r.createElement(ee.lz,{text:De.etag}))),r.createElement(dn.A,null,r.createElement(Na,{primary:"entityRef",secondary:En}),r.createElement(Ut.A,null,r.createElement(ee.lz,{text:En}))))),r.createElement(wr,{title:"Metadata"},!!Object.keys(De.annotations||{}).length&&r.createElement(xt.A,{dense:!0,subheader:r.createElement(Va,null,"Annotations",r.createElement(qr,{to:"https://backstage.io/docs/features/software-catalog/well-known-annotations"}))},Object.entries(De.annotations).map(on=>r.createElement(Jr,{key:on[0],indent:!0,entry:on}))),!!Object.keys(De.labels||{}).length&&r.createElement(xt.A,{dense:!0,subheader:r.createElement(Va,null,"Labels")},Object.entries(De.labels).map(on=>r.createElement(Jr,{key:on[0],indent:!0,entry:on}))),!!((x=De.tags)!=null&&x.length)&&r.createElement(xt.A,{dense:!0,subheader:r.createElement(Va,null,"Tags")},De.tags.map((on,Tn)=>r.createElement(dn.A,{key:`${on}-${Tn}`},r.createElement(ht.A,null),r.createElement(Na,{primary:on}))))),!!Mt.length&&r.createElement(wr,{title:"Relations",helpLink:"https://backstage.io/docs/features/software-catalog/well-known-relations"},Object.entries(nn).map(([on,Tn],zn)=>r.createElement("div",{key:zn},r.createElement(xt.A,{dense:!0,subheader:r.createElement(Va,null,on)},Tn.map(Cn=>r.createElement(dn.A,{key:Cn.targetRef},r.createElement(Na,{primary:r.createElement(Ia,{entityRef:Cn.targetRef})}))))))),!!((B=Tt.items)!=null&&B.length)&&r.createElement(wr,{title:"Status",helpLink:"https://backstage.io/docs/features/software-catalog/well-known-statuses"},Tt.items.map((on,Tn)=>r.createElement("div",{key:Tn},r.createElement(me.A,null,on.level,": ",on.type),r.createElement(t.A,{ml:2},on.message))))))}function go(f){return r.createElement(r.Fragment,null,r.createElement(ft.A,{variant:"h2"},"Entity as YAML"),r.createElement(ft.A,null,"This is the raw entity data as received from the catalog, on YAML form."),r.createElement(ft.A,null,r.createElement("div",{style:{fontSize:"75%"},"data-testid":"code-snippet"},r.createElement(ee.z7,{text:rt.Ay.stringify(Tr(f.entity)),language:"yaml",showCopyCodeButton:!0}))))}const no=(0,ye.A)(f=>({fullHeightDialog:{height:"calc(100% - 64px)"},root:{display:"flex",flexGrow:1,width:"100%",backgroundColor:f.palette.background.paper},tabs:{borderRight:`1px solid ${f.palette.divider}`,flexShrink:0},tabContents:{flexGrow:1,overflowX:"auto"}}));function br(f){const{children:O,value:x,index:B,...ne}=f,Se=no();return r.createElement("div",{role:"tabpanel",hidden:x!==B,id:`vertical-tabpanel-${B}`,"aria-labelledby":`vertical-tab-${B}`,className:Se.tabContents,...ne},x===B&&r.createElement(t.A,{pl:3,pr:3},O))}function $r(f){return{id:`vertical-tab-${f}`,"aria-controls":`vertical-tabpanel-${f}`}}function Ir(f){const O=no(),[x,B]=r.useState(0);return(0,r.useEffect)(()=>{B(0)},[f.open]),f.entity?r.createElement(Vt.A,{fullWidth:!0,maxWidth:"xl",open:f.open,onClose:f.onClose,"aria-labelledby":"entity-inspector-dialog-title",PaperProps:{className:O.fullHeightDialog}},r.createElement(Kt.A,{id:"entity-inspector-dialog-title"},"Entity Inspector"),r.createElement(Ye.A,{dividers:!0},r.createElement("div",{className:O.root},r.createElement(Wt.A,{orientation:"vertical",variant:"scrollable",value:x,onChange:(ne,Se)=>B(Se),"aria-label":"Inspector options",className:O.tabs},r.createElement(jt.A,{label:"Overview",...$r(0)}),r.createElement(jt.A,{label:"Ancestry",...$r(1)}),r.createElement(jt.A,{label:"Colocated",...$r(2)}),r.createElement(jt.A,{label:"Raw JSON",...$r(3)}),r.createElement(jt.A,{label:"Raw YAML",...$r(4)})),r.createElement(br,{value:x,index:0},r.createElement(ho,{entity:f.entity})),r.createElement(br,{value:x,index:1},r.createElement(ja,{entity:f.entity})),r.createElement(br,{value:x,index:2},r.createElement(mo,{entity:f.entity})),r.createElement(br,{value:x,index:3},r.createElement(to,{entity:f.entity})),r.createElement(br,{value:x,index:4},r.createElement(go,{entity:f.entity})))),r.createElement(Ce.A,null,r.createElement(pe.A,{onClick:f.onClose,color:"primary"},"Close"))):null}function fo(f){var O;const x=(0,s.u)(he),B=(O=f.metadata.annotations)==null?void 0:O[b.r2],ne=f.metadata.uid,Se=B==="bootstrap:bootstrap",be=(0,X.A)(async()=>{const Tn=x.getLocationByRef(B);let zn;if(!B)zn=Promise.resolve([]);else{const Cn=`metadata.annotations.${b.r2}`;zn=x.getEntities({filter:{[Cn]:B},fields:["kind","metadata.uid","metadata.name","metadata.namespace"]}).then(Xn=>Xn.items)}return Promise.all([Tn,zn]).then(([Cn,Xn])=>({location:Cn,colocatedEntities:Xn}))},[x,f]),De=(0,r.useCallback)(async function(){const{location:zn}=be.value;await x.removeLocationById(zn.id)},[x,be]),at=(0,r.useCallback)(async function(){await x.removeEntityByUid(ne)},[x,ne]);if(Se)return{type:"bootstrap",location:B,deleteEntity:at};const{loading:Mt,error:Tt,value:nn}=be;if(Mt)return{type:"loading"};if(Tt)return{type:"error",error:Tt};const{location:En,colocatedEntities:on}=nn;return En?{type:"unregister",location:B,colocatedEntities:on.map(b.sM),unregisterLocation:De,deleteEntity:at}:{type:"only-delete",deleteEntity:at}}const ao=(0,ye.A)({advancedButton:{fontSize:"0.7em"},dialogActions:{display:"inline-block"}}),_r=({entity:f,onConfirm:O,onClose:x})=>{var B;const ne=(0,s.u)(s.l),Se=(0,s.u)(s.p),be=ao(),De=fo(f),[at,Mt]=(0,r.useState)(!1),[Tt,nn]=(0,r.useState)(!1),En=(B=Se.getOptionalString("app.title"))!=null?B:"Backstage",on=(0,r.useCallback)(async function(){if("unregisterLocation"in De){nn(!0);try{await De.unregisterLocation(),O()}catch(Xn){(0,V.tX)(Xn),ne.post({message:Xn.message})}finally{nn(!1)}}},[ne,O,De]),Tn=(0,r.useCallback)(async function(){var Xn;if("deleteEntity"in De){nn(!0);try{await De.deleteEntity();const ga=(Xn=f.metadata.title)!=null?Xn:f.metadata.name;O(),ne.post({message:`Removed entity ${ga}`,severity:"success",display:"transient"})}catch(ga){(0,V.tX)(ga),ne.post({message:ga.message})}finally{nn(!1)}}},[ne,O,De,f]),zn=()=>r.createElement(Ce.A,{className:be.dialogActions},r.createElement(pe.A,{onClick:x,color:"primary"},"Cancel"));return De.type==="loading"?r.createElement(ee.ke,null):De.type==="error"?r.createElement(ee._1,{error:De.error}):De.type==="bootstrap"?r.createElement(r.Fragment,null,r.createElement(Xt.A,{severity:"info"},'You cannot unregister this entity, since it originates from a protected Backstage configuration (location "',De.location,'"). If you believe this is in error, please contact the ',En," ","integrator."),r.createElement(t.A,{marginTop:2},!at&&r.createElement(r.Fragment,null,r.createElement(pe.A,{variant:"text",size:"small",color:"primary",className:be.advancedButton,onClick:()=>Mt(!0)},"Advanced Options"),r.createElement(zn,null)),at&&r.createElement(r.Fragment,null,r.createElement(ft.A,null,"You have the option to delete the entity itself from the catalog. Note that this should only be done if you know that the catalog file has been deleted at, or moved from, its origin location. If that is not the case, the entity will reappear shortly as the next refresh round is performed by the catalog."),r.createElement(pe.A,{variant:"contained",color:"secondary",disabled:Tt,onClick:Tn},"Delete Entity"),r.createElement(zn,null)))):De.type==="only-delete"?r.createElement(r.Fragment,null,r.createElement(ft.A,null,"This entity does not seem to originate from a registered location. You therefore only have the option to delete it outright from the catalog."),r.createElement(pe.A,{variant:"contained",color:"secondary",disabled:Tt,onClick:Tn},"Delete Entity"),r.createElement(zn,null)):De.type==="unregister"?r.createElement(r.Fragment,null,r.createElement(ft.A,null,"This action will unregister the following entities:"),r.createElement(ft.A,{component:"ul"},De.colocatedEntities.map(Cn=>r.createElement("li",{key:`${Cn.kind}:${Cn.namespace}/${Cn.name}`},r.createElement(Ia,{entityRef:Cn})))),r.createElement(ft.A,null,"Located at the following location:"),r.createElement(ft.A,{component:"ul"},r.createElement("li",null,De.location)),r.createElement(ft.A,null,"To undo, just re-register the entity in ",En,"."),r.createElement(t.A,{marginTop:2},r.createElement(pe.A,{variant:"contained",color:"secondary",disabled:Tt,onClick:on},"Unregister Location"),!at&&r.createElement(t.A,{component:"span",marginLeft:2},r.createElement(pe.A,{variant:"text",size:"small",color:"primary",className:be.advancedButton,onClick:()=>Mt(!0)},"Advanced Options"))),at&&r.createElement(r.Fragment,null,r.createElement(t.A,{paddingTop:4,paddingBottom:4},r.createElement(qe.A,null)),r.createElement(ft.A,null,"You also have the option to delete the entity itself from the catalog. Note that this should only be done if you know that the catalog file has been deleted at, or moved from, its origin location. If that is not the case, the entity will reappear shortly as the next refresh round is performed by the catalog."),r.createElement(pe.A,{variant:"contained",color:"secondary",disabled:Tt,onClick:Tn},"Delete Entity"))):r.createElement(Xt.A,{severity:"error"},"Internal error: Unknown state")},Qr=f=>{const{open:O,onConfirm:x,onClose:B,entity:ne}=f;return r.createElement(Vt.A,{open:O,onClose:B},r.createElement(Kt.A,{id:"responsive-dialog-title"},"Are you sure you want to unregister this entity?"),r.createElement(Ye.A,null,r.createElement(_r,{entity:ne,onConfirm:x,onClose:B})))},zr=(0,ye.A)(f=>({code:{borderRadius:6,margin:f.spacing(2,0),background:f.palette.type==="dark"?"#444":f.palette.common.white}}),{name:"BackstageMissingAnnotationEmptyState"});function Dr(f,O){var x,B;const ne=(O==null?void 0:O.kind)||"Component",Se=(O==null?void 0:O.metadata.name)||"example",be=((x=O==null?void 0:O.spec)==null?void 0:x.type)||"website",De=((B=O==null?void 0:O.spec)==null?void 0:B.owner)||"user:default/guest",at=`apiVersion: backstage.io/v1alpha1
kind: ${ne}
metadata:
  name: ${Se}
  annotations:${f.map(nn=>`
    ${nn}: value`).join("")}
spec:
  type: ${be}
  owner: ${De}`;let Mt=6;const Tt=[];return f.forEach(()=>{Tt.push(Mt),Mt++}),{yamlText:at,lineNumbers:Tt}}function Cr(f,O="Component"){const x=f.length<=1;return r.createElement(r.Fragment,null,"The ",x?"annotation":"annotations"," ",f.map(B=>r.createElement("code",null,B)).reduce((B,ne)=>r.createElement(r.Fragment,null,B,", ",ne))," ",x?"is":"are"," missing. You need to add the"," ",x?"annotation":"annotations"," to your ",O," if you want to enable this tool.")}function Mr(f){let O;try{O=(0,D.u)().entity}catch{}const{annotation:x,readMoreUrl:B}=f,ne=Array.isArray(x)?x:[x],Se=B||"https://backstage.io/docs/features/software-catalog/well-known-annotations",be=zr(),De=(O==null?void 0:O.kind)||"Component",{yamlText:at,lineNumbers:Mt}=Dr(ne,O);return r.createElement(ee.pp,{missing:"field",title:"Missing Annotation",description:Cr(ne,De),action:r.createElement(r.Fragment,null,r.createElement(me.A,{variant:"body1"},"Add the annotation to your ",De," YAML as shown in the highlighted example below:"),r.createElement(t.A,{className:be.code},r.createElement(ee.z7,{text:at,language:"yaml",showLineNumbers:!0,highlightedNumbers:Mt,customStyle:{background:"inherit",fontSize:"115%"}})),r.createElement(pe.A,{color:"primary",component:ee.N_,to:Se},"Read more"))})}function jr(f){var O;const{children:x,value:B}=f,[ne,Se]=useState((O=B==null?void 0:B.filters)!=null?O:{}),be=useCallback(Mt=>{Se(Tt=>{const nn=typeof Mt=="function"?Mt(Tt):Mt;return{...Tt,...nn}})},[]),De=useMemo(()=>({entities:[],backendEntities:[],queryParameters:{}}),[]),at=useMemo(()=>{var Mt,Tt,nn,En,on,Tn,zn;return{entities:(Mt=B==null?void 0:B.entities)!=null?Mt:De.entities,backendEntities:(Tt=B==null?void 0:B.backendEntities)!=null?Tt:De.backendEntities,updateFilters:(nn=B==null?void 0:B.updateFilters)!=null?nn:be,filters:ne,loading:(En=B==null?void 0:B.loading)!=null?En:!1,queryParameters:(on=B==null?void 0:B.queryParameters)!=null?on:De.queryParameters,error:B==null?void 0:B.error,totalItems:(zn=B==null?void 0:B.totalItems)!=null?zn:((Tn=B==null?void 0:B.entities)!=null?Tn:De.entities).length}},[B,De,ne,be]);return React.createElement(kn.Provider,{value:at},x)}},98881:(In,Ct,e)=>{"use strict";e.d(Ct,{E:()=>Ve});var s=e(29835),l=e(22968),b=e(5124),A=e(11638),W=e(92651),r=e(2069),q=e(77125),Q=e(74219),t=e(14041),pe=e(18690),_=e(37197),de=e(29365),me=e(46423),G=e(5951),xe=e(26343),ye=e(28233),ut=e(55197),z=e(71677),ee=e(58837),D=e(85005),w=e(71407),M=e(26314),y=e(90749),v=e(99993),F=e(92399),ae=e(36338),Fe=e(21319);function Ae(Ze){var nt;const{unregisterEntityOptions:Ge,isUnregisterAllowed:Je,onUnregisterEntity:Re,onClose:Le}=Ze,lt=typeof(Ge==null?void 0:Ge.disableUnregister)=="boolean",Et=(nt=!Je||(lt?!!(Ge!=null&&Ge.disableUnregister):(Ge==null?void 0:Ge.disableUnregister)==="disable"))!=null?nt:!1;let wt=t.createElement(t.Fragment,null);return(Ge==null?void 0:Ge.disableUnregister)!=="hidden"&&(wt=t.createElement(xe.A,{onClick:()=>{Le(),Re()},disabled:Et},t.createElement(me.A,null,t.createElement(F.A,{fontSize:"small"})),t.createElement(G.A,{primary:"Unregister entity"}))),t.createElement(t.Fragment,null,wt)}const X=(0,ee.A)(Ze=>({button:{color:Ze.page.fontColor}}),{name:"PluginCatalogEntityContextMenu"});function N(Ze){const{UNSTABLE_extraContextMenuItems:nt,UNSTABLE_contextMenuOptions:Ge,onUnregisterEntity:Je,onInspectEntity:Re}=Ze,[Le,lt]=(0,t.useState)(),Et=X(),Qt=(0,y.Az)(v.Nf).allowed,yt=S=>{lt(S.currentTarget)},ue=()=>{lt(void 0)},gt=(0,b.u)(b.l),[xt,ht]=(0,ae.A)();(0,t.useEffect)(()=>{!xt.error&&xt.value&&gt.post({message:"Copied!",severity:"info",display:"transient"})},[xt,gt]);const Ut=nt&&[...nt.map(S=>t.createElement(xe.A,{key:S.title,onClick:()=>{ue(),S.onClick()}},t.createElement(me.A,null,t.createElement(S.Icon,{fontSize:"small"})),t.createElement(G.A,{primary:S.title}))),t.createElement(_.A,{key:"the divider is here!"})];return t.createElement(t.Fragment,null,t.createElement(z.Ay,{title:"More",arrow:!0},t.createElement(de.A,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true","aria-expanded":!!Le,role:"button",onClick:yt,"data-testid":"menu-button",className:Et.button,id:"long-menu"},t.createElement(w.A,null))),t.createElement(ut.Ay,{open:!!Le,onClose:ue,anchorEl:Le,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},"aria-labelledby":"long-menu"},t.createElement(ye.A,{autoFocusItem:!!Le},Ut,t.createElement(Ae,{unregisterEntityOptions:Ge,isUnregisterAllowed:Qt,onUnregisterEntity:Je,onClose:ue}),t.createElement(xe.A,{onClick:()=>{ue(),Re()}},t.createElement(me.A,null,t.createElement(D.A,{fontSize:"small"})),t.createElement(G.A,{primary:"Inspect entity"})),t.createElement(xe.A,{onClick:()=>{ue(),ht(window.location.toString())}},t.createElement(me.A,null,t.createElement(M.A,{fontSize:"small"})),t.createElement(G.A,{primary:"Copy entity URL"})))))}const H="plugin.catalog.entityLayoutRoute",oe=()=>null;(0,A.h3)(oe,H,!0),(0,A.h3)(oe,"core.gatherMountPoints",!0);function re(Ze){const{entity:nt,title:Ge}=Ze;return t.createElement(q.A,{display:"inline-flex",alignItems:"center",height:"1em",maxWidth:"100%"},t.createElement(q.A,{component:"span",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},nt?t.createElement(W.d5,{entityRef:nt,hideIcon:!0}):Ge),nt&&t.createElement(W.uR,{entity:nt}))}function _e(Ze,nt,Ge,Je){var Re,Le,lt,Et,wt;const Qt=(Re=Ze!=null?Ze:Je==null?void 0:Je.kind)!=null?Re:"",yt=(Le=nt!=null?nt:Je==null?void 0:Je.metadata.namespace)!=null?Le:"";return{headerTitle:`${(wt=(Et=(lt=Je==null?void 0:Je.metadata.title)!=null?lt:Ge)!=null?Et:Je==null?void 0:Je.metadata.name)!=null?wt:""}${yt&&yt!==s.oQ?` in ${yt}`:""}`,headerType:(()=>{let gt=Qt.toLocaleLowerCase("en-US");return Je&&Je.spec&&"type"in Je.spec&&(gt+=" \u2014 ",gt+=Je.spec.type.toLocaleLowerCase("en-US")),gt})()}}function tt(Ze){var nt,Ge;const{entity:Je}=Ze,Re=(0,r.g)(Je,s.vv);return t.createElement(t.Fragment,null,Re.length>0&&t.createElement(l.ST,{label:"Owner",contentTypograpyRootComponent:"p",value:t.createElement(W.iI,{entityRefs:Re,defaultKind:"Group",color:"inherit"})}),((nt=Je.spec)==null?void 0:nt.lifecycle)&&t.createElement(l.ST,{label:"Lifecycle",value:(Ge=Je.spec.lifecycle)==null?void 0:Ge.toString()}))}const Ve=Ze=>{var nt,Ge,Je;const{UNSTABLE_extraContextMenuItems:Re,UNSTABLE_contextMenuOptions:Le,children:lt,NotFoundComponent:Et}=Ze,{kind:wt,namespace:Qt,name:yt}=(0,A.KS)(W.sF),{entity:ue,loading:gt,error:xt}=(0,r.a)(),ht=(0,pe.zy)(),Ut=(0,A.OJ)(lt,tn=>tn.selectByComponentData({key:H,withStrictError:"Child of EntityLayout must be an EntityLayout.Route"}).getElements().flatMap(({props:It})=>{if(ue){if(It.if&&!It.if(ue))return[]}else return[];return[{path:It.path,title:It.title,children:It.children,tabProps:It.tabProps}]}),[ue]),{headerTitle:S,headerType:P}=_e(wt,Qt,yt,ue),[j,Z]=(0,t.useState)(!1),[Ie,ze]=(0,t.useState)(!1),dt=(0,pe.Zp)(),Qe=(0,A.Sf)(Fe.r),et=(0,A.Sf)(Fe.u),$t=async()=>{Z(!1),ze(!1),dt(et?et():Qe())};return(0,t.useEffect)(()=>{Z(!1),ze(!1)},[ht.pathname]),t.createElement(l.YW,{themeId:(Je=(Ge=(nt=ue==null?void 0:ue.spec)==null?void 0:nt.type)==null?void 0:Ge.toString())!=null?Je:"home"},t.createElement(l.Y9,{title:t.createElement(re,{title:S,entity:ue}),pageTitleOverride:S,type:P},ue&&t.createElement(t.Fragment,null,t.createElement(tt,{entity:ue}),t.createElement(N,{UNSTABLE_extraContextMenuItems:Re,UNSTABLE_contextMenuOptions:Le,onUnregisterEntity:()=>Z(!0),onInspectEntity:()=>ze(!0)}))),gt&&t.createElement(l.ke,null),ue&&t.createElement(l.kE,{routes:Ut}),xt&&t.createElement(l.UC,null,t.createElement(Q.A,{severity:"error"},xt.toString())),!gt&&!xt&&!ue&&t.createElement(l.UC,null,Et||t.createElement(l.Bp,{title:"Entity not found"},"There is no ",wt," with the requested"," ",t.createElement(l.N_,{to:"https://backstage.io/docs/features/software-catalog/references"},"kind, namespace, and name"),".")),t.createElement(W.Id,{open:j,entity:ue,onConfirm:$t,onClose:()=>Z(!1)}),t.createElement(W.qq,{open:Ie,entity:ue,onClose:()=>ze(!1)}))};Ve.Route=oe},54067:(In,Ct,e)=>{"use strict";e.d(Ct,{E:()=>H,a:()=>w,b:()=>v,c:()=>Fe,d:()=>Ae,h:()=>y,i:()=>D});var s=e(92651),l=e(2069),b=e(74219),A=e(14041),W=e(18690),r=e(64947),q=e(76891),Q=e(93453),t=e(61477),pe=e(5124),_=e(11638),de=e(3399),me=e(21319),G=e(73466),xe=e(77125),ye=e(22968),ut=e(29835),z=e(75757);function ee(_e){const{open:tt,onClose:Ve,onConfirm:Ze,entity:nt}=_e,[Ge,Je]=(0,A.useState)(!1),Re=(0,pe.u)(s.vp),Le=(0,pe.u)(pe.l),lt=async()=>{Je(!0);try{const Et=nt.metadata.uid;await Re.removeEntityByUid(Et),Ze()}catch(Et){(0,de.tX)(Et),Le.post({message:Et.message})}finally{Je(!1)}};return A.createElement(q.A,{open:tt,onClose:Ve},A.createElement(t.A,{id:"responsive-dialog-title"},"Are you sure you want to delete this entity?"),A.createElement(Q.A,null,A.createElement(r.A,{variant:"contained",color:"secondary",disabled:Ge,onClick:lt},"Delete"),A.createElement(r.A,{onClick:Ve,color:"primary"},"Cancel")))}function D(_e){var tt,Ve;return((Ve=(tt=_e==null?void 0:_e.metadata)==null?void 0:tt.annotations)==null?void 0:Ve["backstage.io/orphan"])==="true"}function w(){const _e=(0,W.Zp)(),tt=(0,_.Sf)(me.r),[Ve,Ze]=(0,A.useState)(!1),{entity:nt}=(0,l.u)(),Ge=async()=>{Ze(!1),_e(tt())};return A.createElement(A.Fragment,null,A.createElement(b.A,{severity:"warning",onClick:()=>Ze(!0)},"This entity is not referenced by any location and is therefore not receiving updates. Click here to delete."),A.createElement(ee,{open:Ve,entity:nt,onConfirm:Ge,onClose:()=>Ze(!1)}))}async function M(_e,tt){var Ve;const Ze=(Ve=_e.relations)==null?void 0:Ve.map(Ge=>Ge.targetRef);if(!Ze||(Ze==null?void 0:Ze.length)<1||Ze.length>1e3)return[];const nt=await tt.getEntitiesByRefs({entityRefs:Ze,fields:["kind","metadata.name","metadata.namespace"]});return Ze.filter((Ge,Je)=>nt.items[Je]===void 0)}async function y(_e,tt){const Ve=tt.apis.get(s.vp);if(!Ve)throw new Error(`No implementation available for ${s.vp}`);return(await M(_e,Ve)).length>0}function v(){const{entity:_e}=(0,l.u)(),tt=(0,pe.u)(s.vp),{loading:Ve,error:Ze,value:nt}=(0,G.A)(async()=>M(_e,tt),[_e,tt]);return Ze?A.createElement(xe.A,{mb:1},A.createElement(ye._1,{error:Ze})):Ve||!nt||nt.length===0?null:A.createElement(A.Fragment,null,A.createElement(b.A,{severity:"warning"},"This entity has relations to other entities, which can't be found in the catalog. ",A.createElement("br",null),"Entities not found are: ",nt.join(", ")))}const F=_e=>_e.error&&_e.level==="error"&&_e.type===z.K3;async function ae(_e,tt){return{items:(await tt.getEntityAncestors({entityRef:_e})).items.map(nt=>{var Ge,Je;return{errors:((Je=(Ge=nt.entity.status)==null?void 0:Ge.items)!=null?Je:[]).filter(F).map(lt=>lt.error).filter(lt=>!!lt),entity:nt.entity}}).filter(nt=>nt.errors.length>0)}}async function Fe(_e,tt){const Ve=tt.apis.get(s.vp);if(!Ve)throw new Error(`No implementation available for ${s.vp}`);return(await ae((0,ut.U2)(_e),Ve)).items.length>0}function Ae(){const{entity:_e}=(0,l.u)(),tt=(0,ut.U2)(_e),Ve=(0,pe.u)(s.vp),{loading:Ze,error:nt,value:Ge}=(0,G.A)(async()=>ae(tt,Ve),[tt,Ve]);return nt?A.createElement(xe.A,{mb:1},A.createElement(ye._1,{error:nt})):Ze||!Ge?null:A.createElement(A.Fragment,null,Ge.items.map((Je,Re)=>A.createElement(xe.A,{key:Re,mb:1},(0,ut.U2)(_e)!==(0,ut.U2)(Je.entity)&&A.createElement(xe.A,{p:1},"The error below originates from"," ",A.createElement(s.zI,{entityRef:Je.entity})),Je.errors.map((Le,lt)=>A.createElement(ye._1,{key:lt,error:Le})))))}const X="core.backstage.entitySwitch",N=_e=>null;(0,_.h3)(N,X,!0);const H=_e=>{var tt,Ve;const{entity:Ze,loading:nt}=(0,l.a)(),Ge=(0,pe.b)(),Je=(0,_.OJ)(_e.children,Le=>Le.selectByComponentData({key:X,withStrictError:"Child of EntitySwitch is not an EntitySwitch.Case"}).getElements().flatMap(lt=>{if(nt&&!Ze)return[];const{if:Et,children:wt}=lt.props;return Ze?[{if:Et==null?void 0:Et(Ze,{apis:Ge}),children:wt}]:[{if:Et===void 0,children:wt}]}),[Ge,Ze,nt]);if(Je.some(Le=>typeof Le.if=="object"&&"then"in Le.if))return A.createElement(oe,{results:Je,renderMultipleMatches:_e.renderMultipleMatches});if(_e.renderMultipleMatches==="all"){const Le=Je.filter(lt=>lt.if).map(lt=>lt.children);return Le.length===0?re(Je):A.createElement(A.Fragment,null,Le)}return(Ve=(tt=Je.find(Le=>Le.if))==null?void 0:tt.children)!=null?Ve:re(Je)};function oe({results:_e,renderMultipleMatches:tt}){const{loading:Ve,value:Ze}=(0,G.A)(async()=>{var nt;const Ge=_e.map(async({if:Je,children:Re})=>{try{if(await Je)return Re}catch{}return null});if(tt==="all"){const Je=(await Promise.all(Ge)).filter(Boolean);return Je.length===0?re(_e):A.createElement(A.Fragment,null,Je)}return(nt=(await Promise.all(Ge)).find(Boolean))!=null?nt:re(_e)},[_e]);return Ve||!Ze?null:Ze}function re(_e){var tt,Ve;return(Ve=(tt=_e.filter(Ze=>Ze.if===void 0)[0])==null?void 0:tt.children)!=null?Ve:null}H.Case=N},21319:(In,Ct,e)=>{"use strict";e.d(Ct,{D:()=>yt,a:()=>xt,b:()=>Le,c:()=>ue,r:()=>Ut,u:()=>ht,v:()=>gt});var s=e(29835);function l(S){const{years:P=0,months:j=0,weeks:Z=0,days:Ie=0,hours:ze=0,minutes:dt=0,seconds:Qe=0,milliseconds:et=0}=S;return((((P*365+j*30+Z*7+Ie)*24+ze)*60+dt)*60+Qe)*1e3+et}var b=e(25033),A=e.n(b),W=e(25295),r=e.n(W),q=e(96403),Q=e.n(q),t=e(92651),pe=e(14451),_=e(94389),de=e(17400),me=e(71865),G=e(52755),xe=e(89350),ye=e(33602),ut=e(48108),z=e(55700),ee=e(45250),D=e(11638);const w={seconds:10},M={milliseconds:50},y={api:de.A,component:xe.A,system:_.A,resource:z.A,domain:pe.A,location:G.A,user:ut.A,group:ye.A,template:me.A};function v(S){return{async:S.async,render:({entityRef:P,entity:j,context:Z})=>({snapshot:(0,t.Tj)(j||P,Z),loadEntity:S.async})}}var F=(S,P,j)=>{if(!P.has(S))throw TypeError("Cannot "+j)},ae=(S,P,j)=>(F(S,P,"read from private field"),j?j.call(S):P.get(S)),Fe=(S,P,j)=>{if(P.has(S))throw TypeError("Cannot add the same private member more than once");P instanceof WeakSet?P.add(S):P.set(S,j)},Ae=(S,P,j,Z)=>(F(S,P,"write to private field"),Z?Z.call(S,j):P.set(S,j),j),X=(S,P,j)=>(F(S,P,"access private method"),j),N,H,oe,re,_e,tt,Ve,Ze,nt,Ge,Je;const Re=class mi{constructor(P){Fe(this,tt),Fe(this,Ze),Fe(this,Ge),Fe(this,N,void 0),Fe(this,H,void 0),Fe(this,oe,void 0),Fe(this,re,void 0),Fe(this,_e,void 0);var j,Z,Ie,ze;const dt=(j=P.cacheTtl)!=null?j:w,Qe=(Z=P.batchDelay)!=null?Z:M,et=(Ie=P.renderer)!=null?Ie:v({async:!0}),$t={};if(Object.entries(y).forEach(([tn,It])=>{$t[tn.toLocaleLowerCase("en-US")]=It}),Object.entries((ze=P.kindIcons)!=null?ze:{}).forEach(([tn,It])=>{$t[tn.toLocaleLowerCase("en-US")]=It}),et.async){if(!P.catalogApi)throw new TypeError("Asynchronous rendering requires a catalog API");Ae(this,oe,X(this,Ze,nt).call(this,{cacheTtl:dt,batchDelay:Qe,renderer:et,catalogApi:P.catalogApi}))}Ae(this,H,l(dt)),Ae(this,N,new Map),Ae(this,re,$t),Ae(this,_e,et)}static createLocal(){return new mi({renderer:v({async:!1})})}static create(P){return new mi(P)}forEntity(P,j){const{entityRef:Z,kind:Ie,entity:ze,needsLoad:dt}=X(this,tt,Ve).call(this,P),Qe=tn=>{const{snapshot:It}=ae(this,_e).render({entityRef:Z,loading:tn.loading,entity:tn.entity,context:j||{}});return{...It,entityRef:Z,Icon:X(this,Ge,Je).call(this,It.Icon,Ie)}};let et;try{et=Qe({loading:dt,entity:ze})}catch{et={primaryTitle:Z,entityRef:Z}}const $t=dt?new(Q())(tn=>{let It=!1;return Promise.resolve().then(()=>{var pt;return(pt=ae(this,oe))==null?void 0:pt.load(Z)}).then(pt=>{if(!It&&pt&&pt.metadata.etag!==(ze==null?void 0:ze.metadata.etag)){const qt=Qe({loading:!1,entity:pt});tn.next(qt)}}).catch(()=>{}).finally(()=>{It||tn.complete()}),()=>{It=!0}}):void 0;return{snapshot:et,update$:$t}}};N=new WeakMap,H=new WeakMap,oe=new WeakMap,re=new WeakMap,_e=new WeakMap,tt=new WeakSet,Ve=function(S){if(typeof S!="string")return{entity:S,kind:S.kind,entityRef:(0,s.U2)(S),needsLoad:!1};const P=ae(this,N).get(S),j=P==null?void 0:P.entity,Ie=(!P||Date.now()-P.updatedAt>ae(this,H))&&ae(this,_e).async!==!1&&ae(this,oe)!==void 0;return{entity:j,kind:(0,s.KU)(S).kind,entityRef:S,needsLoad:Ie}},Ze=new WeakSet,nt=function(S){const P=l(S.cacheTtl),j=l(S.batchDelay);return new(A())(async Z=>{const{items:Ie}=await S.catalogApi.getEntitiesByRefs({entityRefs:Z}),ze=Date.now();return Z.forEach((dt,Qe)=>{ae(this,N).set(dt,{updatedAt:ze,entity:Ie[Qe]})}),Ie},{name:"DefaultEntityPresentationApi",cacheMap:new(r())(P),maxBatchSize:100,batchScheduleFn:j?Z=>setTimeout(Z,j):void 0})},Ge=new WeakSet,Je=function(S,P){return S||(S===!1?!1:ae(this,re)[P.toLocaleLowerCase("en-US")])};let Le=Re;async function lt({storageApi:S}){var P;const j=S.forBucket("settings"),Z=S.forBucket("starredEntities"),Ie=j.snapshot("starredEntities").value;if(!(0,ee.isArray)(Ie))return;const ze=new Set((P=Z.snapshot("entityRefs").value)!=null?P:[]);Ie.filter(ee.isString).map(dt=>dt.split(":")).filter(dt=>dt.length===4&&dt[0]==="entity").map(([dt,Qe,et,$t])=>(0,s.U2)({kind:Qe,namespace:et,name:$t})).forEach(dt=>ze.add(dt)),await Z.set("entityRefs",Array.from(ze)),await j.remove("starredEntities")}var Et=Object.defineProperty,wt=(S,P,j)=>P in S?Et(S,P,{enumerable:!0,configurable:!0,writable:!0,value:j}):S[P]=j,Qt=(S,P,j)=>(wt(S,typeof P!="symbol"?P+"":P,j),j);class yt{constructor(P){Qt(this,"settingsStore"),Qt(this,"starredEntities"),Qt(this,"subscribers",new Set),Qt(this,"observable",new(Q())(Z=>(Z.next(new Set(this.starredEntities)),this.subscribers.add(Z),()=>{this.subscribers.delete(Z)})));var j;lt(P).then(),this.settingsStore=P.storageApi.forBucket("starredEntities"),this.starredEntities=new Set((j=this.settingsStore.snapshot("entityRefs").value)!=null?j:[]),this.settingsStore.observe$("entityRefs").subscribe({next:Z=>{var Ie;this.starredEntities=new Set((Ie=Z.value)!=null?Ie:[]),this.notifyChanges()}})}async toggleStarred(P){this.starredEntities.has(P)?this.starredEntities.delete(P):this.starredEntities.add(P),await this.settingsStore.set("entityRefs",Array.from(this.starredEntities))}starredEntitie$(){return this.observable}notifyChanges(){for(const P of this.subscribers)P.next(new Set(this.starredEntities))}}const ue=(0,D.Il)({id:"create-component",optional:!0}),gt=(0,D.Il)({id:"view-techdoc",optional:!0,params:["namespace","kind","name"]}),xt=(0,D.Il)({id:"create-from-template",optional:!0,params:["namespace","templateName"]}),ht=(0,D.Il)({id:"catalog:unregister-redirect",optional:!0}),Ut=(0,D.HM)({id:"catalog"})},22073:(In,Ct,e)=>{"use strict";e.d(Ct,{E:()=>lt,JF:()=>wt,N8:()=>Ze,Sz:()=>Ge,TZ:()=>Ve,VF:()=>v,Wm:()=>F,XQ:()=>_e,Z9:()=>re,bb:()=>Le,sU:()=>yt,yE:()=>Je,yP:()=>Re,yW:()=>tt});var s=e(21319),l=e(14041),b=e(58837),A=e(99703),W=e(92651),r=e(65398),q=e.n(r),Q=e(11638),t=e(5124),pe=e(75757),_=e(22299),de=e(25033),me=e.n(de),G=e(96403),xe=e.n(G),ye=e(45250),ut=e.n(ye);function z(){const ue=useApi(catalogApiRef),{error:gt,loading:xt,value:ht}=useAsync(async()=>await ue.getEntityFacets({facets:["kind"]}).then(S=>{var P;return((P=S.facets.kind)==null?void 0:P.map(j=>j.value).sort())||[]}),[ue]);return{loading:xt,error:gt,allKinds:ht!=null?ht:[]}}function ee(ue,gt,xt){let ht=ue;return gt&&(ht=ht.filter(S=>gt.some(P=>P.toLocaleLowerCase("en-US")===S.toLocaleLowerCase("en-US")))),xt&&!ue.some(S=>S.toLocaleLowerCase("en-US")===xt.toLocaleLowerCase("en-US"))&&(ht=ht.concat([xt])),ht.sort().reduce((S,P)=>(S[P.toLocaleLowerCase("en-US")]=P,S),{})}const D=(0,b.A)(ue=>(0,A.A)({root:{...ue.typography.h4}}));function w(ue){var gt,xt;const{initialFilter:ht="component",allowedKinds:Ut}=ue,S=D(),{allKinds:P}=z(),{filters:j,updateFilters:Z,queryParameters:{kind:Ie}}=useEntityList(),ze=useMemo(()=>[Ie].flat()[0],[Ie]),[dt,Qe]=useState((xt=ze!=null?ze:(gt=j.kind)==null?void 0:gt.value)!=null?xt:ht);useEffect(()=>{ze&&Qe(ze)},[ze]),useEffect(()=>{var $t,tn;($t=j.kind)!=null&&$t.value&&Qe((tn=j.kind)==null?void 0:tn.value)},[j.kind]),useEffect(()=>{Z({kind:dt?new EntityKindFilter(dt):void 0})},[dt,Z]);const et=ee(P,Ut,dt);return React.createElement(Select,{input:React.createElement(InputBase,null),value:dt.toLocaleLowerCase("en-US"),onChange:$t=>Qe($t.target.value),classes:S},Object.keys(et).map($t=>React.createElement(MenuItem,{value:$t,key:$t},`${pluralize(et[$t])}`)))}function M(ue,gt){return!!(ue&&typeof ue=="string"&&(ue==null?void 0:ue.toLocaleLowerCase("en-US"))===(gt==null?void 0:gt.toLocaleLowerCase("en-US")))}function y(ue,gt){return typeof gt=="string"?M(ue,gt):gt.length===0||gt.some(xt=>M(ue,xt))}function v(ue){return Ae({kind:ue})}function F(ue){return Ae({kind:"component",type:ue})}function ae(ue){return Ae({kind:"resource",type:ue})}function Fe(ue){return Ae({kind:"api",type:ue})}function Ae(ue){return gt=>{var xt;return!(ue.kind&&!y(gt.kind,ue.kind)||ue.type&&!y((xt=gt.spec)==null?void 0:xt.type,ue.type))}}function X(ue){return gt=>{var xt;return y((xt=gt.metadata)==null?void 0:xt.namespace,ue)}}const N=null,H=W.GI.Filters,oe=W.GI.Content,re=(0,Q.i1)({id:"catalog",apis:[(0,Q.bW)({api:W.vp,deps:{discoveryApi:t.q,fetchApi:t.s},factory:({discoveryApi:ue,fetchApi:gt})=>new pe.dJ({discoveryApi:ue,fetchApi:gt})}),(0,Q.bW)({api:W.ah,deps:{storageApi:t.y},factory:({storageApi:ue})=>new s.D({storageApi:ue})}),(0,Q.bW)({api:W.nQ,deps:{catalogApi:W.vp},factory:({catalogApi:ue})=>s.b.create({catalogApi:ue})})],routes:{catalogIndex:s.r,catalogEntity:W.sF},externalRoutes:{createComponent:s.c,viewTechDoc:s.v,createFromTemplate:s.a,unregisterRedirect:s.u}}),_e=re.provide((0,Q.QJ)({name:"CatalogIndexPage",component:()=>e.e(7614).then(e.bind(e,97614)).then(ue=>ue.CatalogPage),mountPoint:s.r})),tt=re.provide((0,Q.QJ)({name:"CatalogEntityPage",component:()=>e.e(2059).then(e.bind(e,32059)).then(ue=>ue.CatalogEntityPage),mountPoint:W.sF})),Ve=re.provide((0,Q.NC)({name:"EntityAboutCard",component:{lazy:()=>e.e(6037).then(e.bind(e,16037)).then(ue=>ue.AboutCard)}})),Ze=re.provide((0,Q.NC)({name:"EntityLinksCard",component:{lazy:()=>e.e(3532).then(e.bind(e,73532)).then(ue=>ue.EntityLinksCard)}})),nt=re.provide((0,Q.NC)({name:"EntityLabelsCard",component:{lazy:()=>e.e(8878).then(e.bind(e,8878)).then(ue=>ue.EntityLabelsCard)}})),Ge=re.provide((0,Q.NC)({name:"EntityHasSystemsCard",component:{lazy:()=>e.e(2611).then(e.bind(e,72611)).then(ue=>ue.HasSystemsCard)}})),Je=re.provide((0,Q.NC)({name:"EntityHasComponentsCard",component:{lazy:()=>e.e(5511).then(e.bind(e,55511)).then(ue=>ue.HasComponentsCard)}})),Re=re.provide((0,Q.NC)({name:"EntityHasSubcomponentsCard",component:{lazy:()=>e.e(6518).then(e.bind(e,16518)).then(ue=>ue.HasSubcomponentsCard)}})),Le=re.provide((0,Q.NC)({name:"EntityHasResourcesCard",component:{lazy:()=>e.e(7471).then(e.bind(e,27471)).then(ue=>ue.HasResourcesCard)}})),lt=re.provide((0,Q.NC)({name:"EntityDependsOnComponentsCard",component:{lazy:()=>e.e(971).then(e.bind(e,20971)).then(ue=>ue.DependsOnComponentsCard)}})),Et=re.provide((0,Q.NC)({name:"EntityDependencyOfComponentsCard",component:{lazy:()=>e.e(7120).then(e.bind(e,67120)).then(ue=>ue.DependencyOfComponentsCard)}})),wt=re.provide((0,Q.NC)({name:"EntityDependsOnResourcesCard",component:{lazy:()=>e.e(4271).then(e.bind(e,44271)).then(ue=>ue.DependsOnResourcesCard)}})),Qt=re.provide((0,Q.NC)({name:"RelatedEntitiesCard",component:{lazy:()=>e.e(8484).then(e.bind(e,88484)).then(ue=>ue.RelatedEntitiesCard)}})),yt=re.provide((0,_.c)({name:"CatalogSearchResultListItem",component:()=>e.e(9575).then(e.bind(e,39575)).then(ue=>ue.CatalogSearchResultListItem),predicate:ue=>ue.type==="software-catalog"}))},79367:(In,Ct,e)=>{"use strict";e.d(Ct,{MM:()=>m,P4:()=>le,XT:()=>tn,Zg:()=>R,ee:()=>Vn});var s=e(5124),l=e(11638),b=e(63188),A=e(49863),W=e(33478),r=e(14041),q=e(2069),Q=e(92651),t=e(73657),pe=e(18690),_=e(8973),de=e(91567),me=e(29655),G=e(77125),xe=e(78467),ye=e(88951),ut=e(5951),z=e(4321),ee=e(61009),D=e(13677),w=e(54801),M=e(10985),y=e(9719),v=e(72501),F=e(58837),ae=e(99703),Fe=e(6924),Ae=e(21718),X=e(52950),N=e(22968),H=e(73466),oe=e(18171),re=e(4313),_e=e(71677),tt=e(43669),Ve=e(4832),Ze=e(29835),nt=e(52536),Ge=e.n(nt),Je=e(29365),Re=e(64947),Le=e(67720),lt=e(91413),Et=e(42899),wt=e(60083),Qt=e(81215),yt=e(26343),ue=e(16249),gt=e(42226),xt=e(64118),ht=e(77714),Ut=e(28966),S=e(74219);const P=(0,s.c)({id:"plugin.githubactions.service"});var j=Object.defineProperty,Z=(I,U,Y)=>U in I?j(I,U,{enumerable:!0,configurable:!0,writable:!0,value:Y}):I[U]=Y,Ie=(I,U,Y)=>(Z(I,typeof U!="symbol"?U+"":U,Y),Y);class ze{constructor(U){Ie(this,"configApi"),Ie(this,"scmAuthApi"),this.configApi=U.configApi,this.scmAuthApi=U.scmAuthApi}async getOctokit(U="github.com"){var Y;const{token:we}=await this.scmAuthApi.getCredentials({url:`https://${U}/`,additionalScope:{customScopes:{github:["repo"]}}}),ot=(0,b.bm)((Y=this.configApi.getOptionalConfigArray("integrations.github"))!=null?Y:[]).find(en=>en.host===U),Ot=ot==null?void 0:ot.apiBaseUrl;return new A.E({auth:we,baseUrl:Ot})}async reRunWorkflow(U){const{hostname:Y,owner:we,repo:Oe,runId:ot}=U;return(await this.getOctokit(Y)).actions.reRunWorkflow({owner:we,repo:Oe,run_id:ot})}async listWorkflowRuns(U){const{hostname:Y,owner:we,repo:Oe,pageSize:ot=100,page:Ot=0,branch:en}=U;return(await(await this.getOctokit(Y)).actions.listWorkflowRunsForRepo({owner:we,repo:Oe,per_page:ot,page:Ot,...en?{branch:en}:{}})).data}async getWorkflow(U){const{hostname:Y,owner:we,repo:Oe,id:ot}=U;return(await(await this.getOctokit(Y)).actions.getWorkflow({owner:we,repo:Oe,workflow_id:ot})).data}async getWorkflowRun(U){const{hostname:Y,owner:we,repo:Oe,id:ot}=U;return(await(await this.getOctokit(Y)).actions.getWorkflowRun({owner:we,repo:Oe,run_id:ot})).data}async listJobsForWorkflowRun(U){const{hostname:Y,owner:we,repo:Oe,id:ot,pageSize:Ot=100,page:en=0}=U;return(await(await this.getOctokit(Y)).actions.listJobsForWorkflowRun({owner:we,repo:Oe,run_id:ot,per_page:Ot,page:en})).data}async downloadJobLogsForWorkflowRun(U){const{hostname:Y,owner:we,repo:Oe,runId:ot}=U;return(await(await this.getOctokit(Y)).actions.downloadJobLogsForWorkflowRun({owner:we,repo:Oe,job_id:ot})).data}async listBranches(U){const{hostname:Y,owner:we,repo:Oe,page:ot=0}=U;return(await(await this.getOctokit(Y)).rest.repos.listBranches({owner:we,repo:Oe,per_page:100,page:ot})).data}async getDefaultBranch(U){const{hostname:Y,owner:we,repo:Oe}=U;return(await(await this.getOctokit(Y)).rest.repos.get({owner:we,repo:Oe})).data.default_branch}}var dt=(I=>(I[I.success=0]="success",I[I.failure=1]="failure",I[I.pending=2]="pending",I[I.running=3]="running",I))(dt||{});const Qe=(0,l.HM)({id:"github-actions"}),et=(0,l.Vb)({id:"github-actions/build",path:"/:id",parent:Qe}),$t=(0,l.i1)({id:"github-actions",apis:[(0,l.bW)({api:P,deps:{configApi:s.p,scmAuthApi:W.$J},factory:({configApi:I,scmAuthApi:U})=>new ze({configApi:I,scmAuthApi:U})})],routes:{entityContent:Qe}}),tn=$t.provide((0,l.QJ)({name:"EntityGithubActionsContent",component:()=>Promise.resolve().then(function(){return Yn}).then(I=>I.Router),mountPoint:Qe})),It=$t.provide((0,l.NC)({name:"EntityLatestGithubActionRunCard",component:{lazy:()=>e.e(3616).then(e.bind(e,93616)).then(I=>I.LatestWorkflowRunCard)}})),pt=$t.provide((0,l.NC)({name:"EntityLatestGithubActionsForBranchCard",component:{lazy:()=>e.e(3616).then(e.bind(e,93616)).then(I=>I.LatestWorkflowsForBranchCard)}})),qt=$t.provide((0,l.NC)({name:"EntityRecentGithubActionsRunsCard",component:{lazy:()=>e.e(3616).then(e.bind(e,93616)).then(I=>I.RecentWorkflowRunsCard)}})),sn="github.com/project-slug",an=I=>{var U,Y;return(Y=(U=I==null?void 0:I.metadata.annotations)==null?void 0:U[sn])!=null?Y:""},Vt=I=>r.createElement(r.Fragment,null,r.createElement(Ce,{...I}),Ye(I));function Ce({status:I,conclusion:U}){if(I===void 0)return null;switch(I.toLocaleLowerCase("en-US")){case"queued":return r.createElement(N.Ek,null);case"in_progress":return r.createElement(N.W$,null);case"completed":switch(U==null?void 0:U.toLocaleLowerCase("en-US")){case"skipped":case"cancelled":return r.createElement(N.c_,null);case"timed_out":return r.createElement(N.EV,null);case"failure":return r.createElement(N.Xs,null);default:return r.createElement(N.So,null)}default:return r.createElement(N.Ek,null)}}function Ye({status:I,conclusion:U}){if(I===void 0)return"";switch(I.toLocaleLowerCase("en-US")){case"queued":return"Queued";case"in_progress":return"In progress";case"completed":switch(U==null?void 0:U.toLocaleLowerCase("en-US")){case"skipped":case"cancelled":return"Aborted";case"timed_out":return"Timed out";case"failure":return"Error";default:return"Completed"}default:return"Pending"}}const Kt=({hostname:I,owner:U,repo:Y})=>{const we=(0,s.u)(P),{id:Oe}=(0,l.KS)(et);return(0,H.A)(async()=>{if(!Y||!U)throw new Error("No repo/owner provided");const ot=await we.listJobsForWorkflowRun({hostname:I,owner:U,repo:Y,id:parseInt(Oe,10)});return{total_count:ot.total_count,jobs:ot.jobs.map(Ot=>{var en,Zt,pn,mn;return{html_url:(en=Ot.html_url)!=null?en:void 0,status:Ot.status,conclusion:(Zt=Ot.conclusion)!=null?Zt:void 0,started_at:Ot.started_at,completed_at:(pn=Ot.completed_at)!=null?pn:void 0,id:Ot.id,name:Ot.name,steps:(mn=Ot.steps)==null?void 0:mn.map(kt=>{var Sn,un,$n;return{name:kt.name,status:kt.status,conclusion:(Sn=kt.conclusion)!=null?Sn:void 0,number:kt.number,started_at:(un=kt.started_at)!=null?un:void 0,completed_at:($n=kt.completed_at)!=null?$n:void 0}})}})}},[Y,U,Oe])},jt=({hostname:I,owner:U,repo:Y})=>{const we=(0,s.u)(P),{id:Oe}=(0,l.KS)(et);return(0,H.A)(async()=>Y&&U?we.getWorkflowRun({hostname:I,owner:U,repo:Y,id:parseInt(Oe,10)}):Promise.reject(new Error("No repo/owner provided")),[Y,U,Oe])},Wt=({hostname:I,owner:U,repo:Y,id:we})=>{const Oe=(0,s.u)(P);return(0,H.A)(async()=>Y&&U?Oe.downloadJobLogsForWorkflowRun({hostname:I,owner:U,repo:Y,runId:we}):Promise.reject("No repo/owner provided"),[Y,U,we])},ft=I=>{var U,Y,we;const Oe=(we=(U=I==null?void 0:I.metadata.annotations)==null?void 0:U[Ze.I4])!=null?we:(Y=I==null?void 0:I.metadata.annotations)==null?void 0:Y[Ze.Eo];return Oe!=null&&Oe.startsWith("url:")?Ge()(Oe.slice(4)).resource:void 0},Ln=(0,F.A)(I=>({button:{order:-1,marginRight:0,marginLeft:"-20px"},modal:{display:"flex",alignItems:"center",width:"85%",height:"85%",justifyContent:"center",margin:"auto"},normalLogContainer:{height:"75vh",width:"100%"},modalLogContainer:{height:"100%",width:"100%"},log:{background:I.palette.background.default}})),dn=({entity:I,runId:U,inProgress:Y})=>{const we=Ln(),Oe=an(I),ot=ft(I),[Ot,en]=Oe&&Oe.split("/")||[],Zt=Wt({hostname:ot,owner:Ot,repo:en,id:U}),pn=Zt.value?String(Zt.value):void 0,[mn,kt]=r.useState(!1),Sn=()=>{kt(!0)},un=()=>{kt(!1)};return r.createElement(_.A,{TransitionProps:{unmountOnExit:!0},disabled:Y},r.createElement(me.A,{expandIcon:r.createElement(Fe.A,null),IconButtonProps:{className:we.button}},r.createElement(v.A,{variant:"button"},Zt.loading?r.createElement(xe.A,null):"Job Log"),r.createElement(_e.Ay,{title:"Open Log",TransitionComponent:tt.A,arrow:!0},r.createElement(Ve.A,{onClick:$n=>{$n.stopPropagation(),Sn()},style:{marginLeft:"auto"}})),r.createElement(re.A,{className:we.modal,onClick:$n=>$n.stopPropagation(),open:mn,onClose:un},r.createElement(oe.A,{in:mn},r.createElement("div",{className:we.modalLogContainer},r.createElement(N.rW,{text:pn!=null?pn:"No Values Found",classes:{root:we.log}}))))),pn&&r.createElement("div",{className:we.normalLogContainer},r.createElement(N.rW,{text:pn,classes:{root:we.log}})))},Xt=(0,F.A)(I=>({root:{maxWidth:720,margin:I.spacing(2)},title:{padding:I.spacing(1,0,2,0)},table:{padding:I.spacing(1)},accordionDetails:{padding:0},button:{order:-1,marginRight:0,marginLeft:"-20px"},externalLinkIcon:{fontSize:"inherit",verticalAlign:"bottom"}})),An=(I,U)=>{if(!I||!U)return"";const Y=X.c9.fromISO(I);return(U?X.c9.fromISO(U):X.c9.now()).diff(Y).toFormat("m 'minutes' s 'seconds'")},Xe=({step:I})=>{var U;return r.createElement(y.A,null,r.createElement(w.A,null,r.createElement(ut.A,{primary:I.name,secondary:An(I.started_at,I.completed_at)})),r.createElement(w.A,null,r.createElement(Vt,{status:I.status.toLocaleUpperCase("en-US"),conclusion:(U=I.conclusion)==null?void 0:U.toLocaleUpperCase("en-US")})))},mt=({job:I,className:U,entity:Y})=>{var we;const Oe=Xt();return r.createElement(_.A,{TransitionProps:{unmountOnExit:!0},className:U},r.createElement(me.A,{expandIcon:r.createElement(Fe.A,null),IconButtonProps:{className:Oe.button}},r.createElement(v.A,{variant:"button"},I.name," (",An(I.started_at,I.completed_at),")")),r.createElement(de.A,{className:Oe.accordionDetails},r.createElement(M.A,null,r.createElement(ee.A,null,(we=I.steps)==null?void 0:we.map(ot=>r.createElement(Xe,{key:ot.number,step:ot}))))),I.status==="queued"||I.status==="in_progress"?r.createElement(dn,{runId:I.id,inProgress:!0,entity:Y}):r.createElement(dn,{runId:I.id,inProgress:!1,entity:Y}))},Dt=({jobs:I,entity:U})=>{const Y=Xt();return r.createElement(G.A,null,I&&I.total_count>0&&I.jobs.map(we=>r.createElement(mt,{key:we.id,job:we,className:we.status!=="success"?Y.failed:Y.success,entity:U})))},rt=({entity:I})=>{var U,Y,we,Oe,ot,Ot,en,Zt,pn,mn,kt,Sn,un,$n,qn;const na=an(I),kn=ft(I),[wn,gn]=na&&na.split("/")||[],Jt=jt({hostname:kn,owner:wn,repo:gn}),vn=Kt({hostname:kn,owner:wn,repo:gn}),_n=Xt();return Jt.error&&Jt.error.message?r.createElement(v.A,{variant:"h6",color:"error"},"Failed to load build, ",Jt.error.message):Jt.loading?r.createElement(ye.A,null):r.createElement("div",{className:_n.root},r.createElement(G.A,{mb:3},r.createElement(N.BI,{"aria-label":"breadcrumb"},r.createElement(N.N_,{to:".."},"Workflow runs"),r.createElement(v.A,null,"Workflow run details"))),r.createElement(M.A,{component:z.A,className:_n.table},r.createElement(ee.A,null,r.createElement(D.A,null,r.createElement(y.A,null,r.createElement(w.A,null,r.createElement(v.A,{noWrap:!0},"Branch")),r.createElement(w.A,null,(U=Jt.value)==null?void 0:U.head_branch)),r.createElement(y.A,null,r.createElement(w.A,null,r.createElement(v.A,{noWrap:!0},"Message")),r.createElement(w.A,null,(we=(Y=Jt.value)==null?void 0:Y.head_commit)==null?void 0:we.message)),r.createElement(y.A,null,r.createElement(w.A,null,r.createElement(v.A,{noWrap:!0},"Commit ID")),r.createElement(w.A,null,(ot=(Oe=Jt.value)==null?void 0:Oe.head_commit)==null?void 0:ot.id)),r.createElement(y.A,null,r.createElement(w.A,null,r.createElement(v.A,{noWrap:!0},"Workflow")),r.createElement(w.A,null,(Ot=Jt.value)==null?void 0:Ot.name)),r.createElement(y.A,null,r.createElement(w.A,null,r.createElement(v.A,{noWrap:!0},"Status")),r.createElement(w.A,null,r.createElement(Vt,{status:((en=Jt.value)==null?void 0:en.status)||void 0,conclusion:((Zt=Jt.value)==null?void 0:Zt.conclusion)||void 0}))),r.createElement(y.A,null,r.createElement(w.A,null,r.createElement(v.A,{noWrap:!0},"Author")),r.createElement(w.A,null,`${(kt=(mn=(pn=Jt.value)==null?void 0:pn.head_commit)==null?void 0:mn.author)==null?void 0:kt.name} (${($n=(un=(Sn=Jt.value)==null?void 0:Sn.head_commit)==null?void 0:un.author)==null?void 0:$n.email})`)),r.createElement(y.A,null,r.createElement(w.A,null,r.createElement(v.A,{noWrap:!0},"Links")),r.createElement(w.A,null,((qn=Jt.value)==null?void 0:qn.html_url)&&r.createElement(N.N_,{to:Jt.value.html_url},"Workflow runs on GitHub"," ",r.createElement(Ae.A,{className:_n.externalLinkIcon})))),r.createElement(y.A,null,r.createElement(w.A,{colSpan:2},r.createElement(v.A,{noWrap:!0},"Jobs"),vn.loading?r.createElement(xe.A,null):r.createElement(Dt,{jobs:vn.value,entity:I})))))))};function qe({hostname:I,owner:U,repo:Y,branch:we,initialPageSize:Oe=6}){const ot=(0,s.u)(P),Ot=(0,s.u)(s.r),[en,Zt]=(0,r.useState)(0),[pn,mn]=(0,r.useState)(0),[kt,Sn]=(0,r.useState)(Oe),[un,$n]=(0,r.useState)([]),[qn,na]=(0,r.useState)(""),{loading:kn,value:wn,retry:gn,error:Jt}=(0,Ut.A)(async()=>{const vn=await ot.getDefaultBranch({hostname:I,owner:U,repo:Y});na(vn);let _n=we;we==="default"&&(_n=vn);const Oa=await(async()=>{let ge=!0,ke=0;const it=[];for(;ge;){const St=await ot.listBranches({hostname:I,owner:U,repo:Y,page:ke});St.length===0&&(ge=!1),ke++,it.push(...St)}return it})();$n(Oa);const J=await ot.listWorkflowRuns({hostname:I,owner:U,repo:Y,pageSize:kt,page:pn+1,branch:_n});return Zt(J.total_count),J.workflow_runs.map(ge=>{var ke,it,St,At,cn,hn,ie,Te,We;return{workflowName:(ke=ge.name)!=null?ke:void 0,message:(it=ge.head_commit)==null?void 0:it.message,id:`${ge.id}`,onReRunClick:async()=>{try{await ot.reRunWorkflow({hostname:I,owner:U,repo:Y,runId:ge.id})}catch(Ne){Ot.post(new Error(`Failed to rerun the workflow: ${Ne.message}`))}},source:{branchName:(St=ge.head_branch)!=null?St:void 0,commit:{hash:(At=ge.head_commit)==null?void 0:At.id,url:(ie=(cn=ge.head_repository)==null?void 0:cn.branches_url)==null?void 0:ie.replace("{/branch}",(hn=ge.head_branch)!=null?hn:"")}},status:(Te=ge.status)!=null?Te:void 0,conclusion:(We=ge.conclusion)!=null?We:void 0,url:ge.url,githubUrl:ge.html_url}})},[pn,kt,Y,U]);return[{page:pn,pageSize:kt,loading:kn,runs:wn,branches:un,defaultBranch:qn,projectName:`${U}/${Y}`,total:en,error:Jt},{runs:wn,setPage:mn,setPageSize:Sn,retry:gn}]}const V=(0,F.A)(I=>(0,ae.A)({card:{border:`1px solid ${I.palette.divider}`,boxShadow:I.shadows[2],borderRadius:"4px",overflow:"visible",position:"relative",margin:I.spacing(4,1,1),flex:"1",minWidth:"0px"},externalLinkIcon:{fontSize:"inherit",verticalAlign:"middle"},bottomline:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"-5px"},pagination:{width:"100%"}})),he={skipped:"warning",canceled:"info",timed_out:"error",failure:"error",success:"success"},Ee=(I,U)=>{var Y,we,Oe,ot;const Ot=U.toLocaleLowerCase();return((Y=I.workflowName)==null?void 0:Y.toLocaleLowerCase().includes(Ot))||((we=I.source.branchName)==null?void 0:we.toLocaleLowerCase().includes(Ot))||((Oe=I.status)==null?void 0:Oe.toLocaleLowerCase().includes(Ot))||((ot=I.id)==null?void 0:ot.toLocaleLowerCase().includes(Ot))},Pt=({runs:I,searchTerm:U,loading:Y,onChangePageSize:we,onChangePage:Oe,page:ot,total:Ot,pageSize:en})=>{const Zt=V(),pn=(0,l.Sf)(et),mn=I==null?void 0:I.filter(kt=>Ee(kt,U));return r.createElement(Et.A,{container:!0,spacing:3},mn&&(I==null?void 0:I.length)!==0?mn.map(kt=>{var Sn,un;return r.createElement(Et.A,{key:kt.id,item:!0,container:!0,xs:12,sm:4,md:4,xl:4},r.createElement(G.A,{className:Zt.card},r.createElement(G.A,{display:"flex",flexDirection:"column",m:3,alignItems:"center",justifyContent:"center"},r.createElement(G.A,{pt:2,sx:{width:"100%"},textAlign:"center"},r.createElement(_e.Ay,{title:(Sn=kt.status)!=null?Sn:"No Status",placement:"top-start"},r.createElement(S.A,{variant:"outlined",severity:he[kt.conclusion],style:{alignItems:"center"}},r.createElement(v.A,{variant:"h6"},r.createElement(N.N_,{to:pn({id:kt.id})},r.createElement(v.A,{color:"primary",variant:"h6"},kt.workflowName))))),r.createElement(_e.Ay,{title:(un=kt.message)!=null?un:"No run message"},r.createElement(v.A,{variant:"body2",component:"span",style:{fontSize:"smaller"}},r.createElement(N.h2,{content:`Commit ID : ${kt.source.commit.hash}`}))),kt.source.branchName&&r.createElement(N.h2,{content:`Branch : ${kt.source.branchName}`}),r.createElement(Le.A,{key:kt.id,size:"small",label:`Workflow ID : ${kt.id}`}),r.createElement(Le.A,{size:"small",label:r.createElement(G.A,{display:"flex",alignItems:"center"},r.createElement(Vt,{status:kt.status,conclusion:kt.conclusion}))}),r.createElement("div",{className:Zt.bottomline},kt.githubUrl&&r.createElement(N.N_,{to:kt.githubUrl},"Workflow runs on GitHub"," ",r.createElement(Ae.A,{className:Zt.externalLinkIcon})),r.createElement(lt.A,null,r.createElement(_e.Ay,{title:"Rerun workflow"},r.createElement(Je.A,{onClick:kt.onReRunClick,style:{fontSize:"12px"}},r.createElement(xt.A,null)))))))))}):r.createElement(G.A,{p:2},Y?r.createElement(xe.A,null):"No matching runs found."),r.createElement("div",{className:Zt.pagination},r.createElement(wt.A,{component:"div",count:Ot,page:ot,rowsPerPage:en,onPageChange:(kt,Sn)=>Oe(Sn),onRowsPerPageChange:kt=>we(parseInt(kt.target.value,6)),labelRowsPerPage:"Workflows per page",rowsPerPageOptions:[6,12,18,{label:"All",value:-1}]})))},Nt=({searchTerm:I,handleSearch:U,retry:Y})=>r.createElement(r.Fragment,null,r.createElement(G.A,{flexGrow:1}),r.createElement(ue.A,{type:"search",label:"Search",value:I,onChange:U,"data-testid":"search-control",style:{marginRight:"20px"}}),r.createElement(lt.A,null,r.createElement(_e.Ay,{title:"Reload workflow runs"},r.createElement(Je.A,{onClick:Y},r.createElement(ht.A,null))))),ln=({entity:I})=>{const U=an(I),Y=ft(I),[we,Oe]=(U!=null?U:"/").split("/"),[ot,Ot]=(0,r.useState)("default"),[en,Zt]=(0,r.useState)([]),[pn,mn]=(0,r.useState)(""),kt=_n=>{mn(_n.target.value)},[{runs:Sn,branches:un,defaultBranch:$n,...qn},{retry:na,setPage:kn,setPageSize:wn}]=qe({hostname:Y,owner:we,repo:Oe,branch:ot==="all"?void 0:ot}),gn=Y||"github.com",Jt=!qn.loading&&!Sn,vn=_n=>{const Aa=_n.target.value;Ot(Aa),kn(0),na()};return(0,r.useEffect)(()=>{Zt(Sn)},[Sn,ot]),(0,r.useEffect)(()=>{Ot($n)},[$n]),r.createElement(Et.A,{item:!0},Jt?r.createElement(N.pp,{missing:"data",title:"No Workflow Data",description:"This component has GitHub Actions enabled, but no data was found. Have you created any Workflows? Click the button below to create a new Workflow.",action:r.createElement(Re.A,{variant:"contained",color:"primary",href:`https://${gn}/${U}/actions/new`},"Create new Workflow")}):r.createElement(N.nO,{title:r.createElement(G.A,{display:"flex",alignItems:"center"},r.createElement(gt.A,null),r.createElement(G.A,{mr:1}),r.createElement(v.A,{variant:"h6"},U),r.createElement(Qt.A,{value:ot,key:ot,label:"Branch",onChange:vn,"data-testid":"menu-control",style:{marginLeft:"30px",marginRight:"20px",width:"230px"}},un.map(_n=>r.createElement(yt.A,{key:_n.name,value:_n.name},_n.name===$n?r.createElement(v.A,{variant:"body2",component:"span"},_n.name," ",r.createElement(v.A,{variant:"body2",component:"span",style:{color:"lightgray",fontSize:"x-small"}},"(default)")):_n.name)),r.createElement(yt.A,{value:"all",key:"all",style:{color:"lightGrey",fontSize:"small"}},"select all branches")),r.createElement(Nt,{searchTerm:pn,handleSearch:kt,retry:na}))},r.createElement(Pt,{runs:en,loading:qn.loading,onChangePageSize:wn,onChangePage:kn,page:qn.page,total:qn.total,pageSize:qn.pageSize,searchTerm:pn,projectName:U})))},bn=[{title:"ID",field:"id",type:"numeric",width:"150px"},{title:"Message",field:"message",highlight:!0,render:I=>{const U=()=>{const Y=(0,l.Sf)(et);return r.createElement(N.N_,{component:t.N_,to:Y({id:I.id})},I.message)};return r.createElement(U,null)}},{title:"Source",render:I=>{var U,Y;return r.createElement(v.A,{variant:"body2",noWrap:!0},r.createElement(v.A,{paragraph:!0,variant:"body2"},(U=I.source)==null?void 0:U.branchName),r.createElement(v.A,{paragraph:!0,variant:"body2"},(Y=I.source)==null?void 0:Y.commit.hash))}},{title:"Workflow",field:"workflowName"},{title:"Status",customSort:(I,U)=>Ye(I).localeCompare(Ye(U)),render:I=>r.createElement(G.A,{display:"flex",alignItems:"center"},r.createElement(Vt,{status:I.status,conclusion:I.conclusion}))},{title:"Actions",render:I=>r.createElement(_e.Ay,{title:"Rerun workflow"},r.createElement(Je.A,{onClick:I.onReRunClick},r.createElement(xt.A,null))),width:"10%"}],Dn=({projectName:I,loading:U,pageSize:Y,page:we,retry:Oe,runs:ot,onChangePage:Ot,onChangePageSize:en,total:Zt})=>r.createElement(N.XI,{isLoading:U,options:{paging:!0,pageSize:Y,padding:"dense"},totalCount:Zt,page:we,actions:[{icon:()=>r.createElement(ht.A,null),tooltip:"Reload workflow runs",isFreeAction:!0,onClick:()=>Oe()}],data:ot!=null?ot:[],onPageChange:Ot,onRowsPerPageChange:en,style:{width:"100%"},title:r.createElement(G.A,{display:"flex",alignItems:"center"},r.createElement(gt.A,null),r.createElement(G.A,{mr:1}),r.createElement(v.A,{variant:"h6"},I)),columns:bn}),Un=({entity:I,branch:U})=>{const Y=an(I),we=ft(I),[Oe,ot]=(Y!=null?Y:"/").split("/"),[{runs:Ot,...en},{retry:Zt,setPage:pn,setPageSize:mn}]=qe({hostname:we,owner:Oe,repo:ot,branch:U}),kt=we||"github.com";return!en.loading&&!Ot?r.createElement(N.pp,{missing:"data",title:"No Workflow Data",description:"This component has GitHub Actions enabled, but no data was found. Have you created any Workflows? Click the button below to create a new Workflow.",action:r.createElement(Re.A,{variant:"contained",color:"primary",href:`https://${kt}/${Y}/actions/new`},"Create new Workflow")}):r.createElement(Dn,{...en,runs:Ot,loading:en.loading,retry:Zt,onChangePageSize:mn,onChangePage:pn})},Vn=I=>{var U;return!!((U=I.metadata.annotations)!=null&&U[sn])};var Yn=Object.freeze({__proto__:null,Router:I=>{const{view:U="table"}=I,{entity:Y}=(0,q.u)();if(!Vn(Y))return r.createElement(Q.o9,{annotation:sn});const we=U==="cards"?r.createElement(ln,{entity:Y}):r.createElement(Un,{entity:Y});return r.createElement(pe.BV,null,r.createElement(pe.qh,{path:"/",element:we}),r.createElement(pe.qh,{path:`${et.path}`,element:r.createElement(rt,{entity:Y})}))},isGithubActionsAvailable:Vn});const da=(0,F.A)({externalLinkIcon:{fontSize:"inherit",verticalAlign:"bottom"}}),ct=I=>{var U;const{error:Y,loading:we,lastRun:Oe,branch:ot}=I,Ot=da();return Y?r.createElement(v.A,null,"Couldn't fetch latest ",ot," run"):we?r.createElement(ye.A,null):r.createElement(N.tA,{metadata:{status:r.createElement(r.Fragment,null,r.createElement(Vt,{status:Oe.status,conclusion:Oe.conclusion})),message:Oe.message,url:r.createElement(N.N_,{to:(U=Oe.githubUrl)!=null?U:""},"See more on GitHub"," ",r.createElement(Ae.A,{className:Ot.externalLinkIcon}))}})},m=I=>{var U,Y,we;const{branch:Oe="master",variant:ot}=I,{entity:Ot}=(0,q.u)(),en=(0,s.u)(s.r),Zt=ft(Ot),[pn,mn]=((Y=(U=Ot==null?void 0:Ot.metadata.annotations)==null?void 0:U[sn])!=null?Y:"/").split("/"),[{runs:kt,loading:Sn,error:un}]=qe({hostname:Zt,owner:pn,repo:mn,branch:Oe}),$n=(we=kt==null?void 0:kt[0])!=null?we:{};return(0,r.useEffect)(()=>{un&&en.post(un)},[un,en]),r.createElement(N.nO,{title:`Last ${Oe} build`,variant:ot},r.createElement(ct,{error:un,loading:Sn,branch:Oe,lastRun:$n}))},R=I=>{const{branch:U="master",variant:Y}=I,{entity:we}=(0,q.u)();return r.createElement(N.nO,{title:`Last ${U} build`,variant:Y},r.createElement(Un,{branch:U,entity:we}))},K=I=>I.split(`
`)[0],le=I=>{var U,Y;const{branch:we,dense:Oe=!1,limit:ot=5,variant:Ot}=I,{entity:en}=(0,q.u)(),Zt=(0,s.u)(s.r),pn=ft(en),[mn,kt]=((Y=(U=en==null?void 0:en.metadata.annotations)==null?void 0:U[sn])!=null?Y:"/").split("/"),[{runs:Sn=[],loading:un,error:$n}]=qe({hostname:pn,owner:mn,repo:kt,branch:we,initialPageSize:ot});(0,r.useEffect)(()=>{$n&&Zt.post($n)},[$n,Zt]);const qn=pn||"github.com",na=(0,l.Sf)(et);return $n?r.createElement(N.bJ,{title:$n.message,error:$n}):r.createElement(N.nO,{title:"Recent Workflow Runs",subheader:we?`Branch: ${we}`:"All Branches",noPadding:!0,variant:Ot},Sn.length?r.createElement(N.XI,{isLoading:un,options:{search:!1,paging:!1,padding:Oe?"dense":"default",toolbar:!1},columns:[{title:"Commit Message",field:"message",render:kn=>{var wn;return r.createElement(N.N_,{component:t.N_,to:na({id:kn.id})},K((wn=kn.message)!=null?wn:""))}},{title:"Branch",field:"source.branchName"},{title:"Status",field:"status",render:Vt}],data:Sn}):r.createElement("div",{style:{textAlign:"center"}},r.createElement(v.A,{variant:"body1"},"This component has GitHub Actions enabled, but no workflows were found."),r.createElement(v.A,{variant:"body2"},r.createElement(N.N_,{to:`https://${qn}/${mn}/${kt}/actions/new`},"Create a new workflow"))))}},12670:(In,Ct,e)=>{"use strict";e.d(Ct,{c:()=>l});var s=e(11638);const l=(0,s.Il)({id:"catalog-index"})},78190:(In,Ct,e)=>{"use strict";e.d(Ct,{O2:()=>ee,VA:()=>z,iU:()=>ye,k8:()=>D,lD:()=>ut,yJ:()=>xe});var s=e(11638),l=e(5124),b=e(12670),A=e(14041),W=e(29835),r=e(22968),q=e(73466),Q=e(92651),t=e(65398),pe=e.n(t),_=e(50308),de=e.n(_),me=e(45250),G=e.n(me);const xe=(0,s.i1)({id:"org",externalRoutes:{catalogIndex:b.c}}),ye=xe.provide((0,s.NC)({name:"EntityGroupProfileCard",component:{lazy:()=>e.e(878).then(e.bind(e,90878)).then(w=>w.GroupProfileCard)}})),ut=xe.provide((0,s.NC)({name:"EntityMembersListCard",component:{lazy:()=>e.e(878).then(e.bind(e,90878)).then(w=>w.MembersListCard)}})),z=xe.provide((0,s.NC)({name:"EntityOwnershipCard",component:{lazy:()=>e.e(878).then(e.bind(e,90878)).then(w=>w.OwnershipCard)}})),ee=xe.provide((0,s.NC)({name:"EntityUserProfileCard",component:{lazy:()=>e.e(878).then(e.bind(e,90878)).then(w=>w.UserProfileCard)}})),D=w=>{const{singularTitle:M,pluralTitle:y,icon:v,filter:F}=w,ae=(0,l.u)(l.t),Fe=(0,l.u)(Q.vp),Ae=(0,s.Sf)(Q.sF),{value:X}=(0,q.A)(async()=>{const N=await ae.getBackstageIdentity();return(await Fe.getEntities({filter:[{kind:"group","relations.hasMember":N.userEntityRef,...F!=null?F:{}}],fields:["metadata","kind"]})).items},[]);if(!(X!=null&&X.length))return null;if(X.length===1){const N=X[0];return A.createElement(r.uk,{text:M,to:Ae((0,W.sM)(N)),icon:v})}return A.createElement(r.uk,{icon:v,text:y},A.createElement(r.O6,{title:y},X==null?void 0:X.map(function(H){return A.createElement(r.hl,{title:H.metadata.title||H.metadata.name,subtitle:H.metadata.namespace!==W.oQ?H.metadata.namespace:void 0,to:Ae((0,W.sM)(H)),icon:v,key:(0,W.U2)(H)})})))}},50585:(In,Ct,e)=>{"use strict";e.d(Ct,{$D:()=>M,OL:()=>Q,bh:()=>r,iP:()=>G});var s=e(3399),l=e(10288),b=e.n(l),A=e(52964),W=e(46195),r=(y=>(y.DENY="DENY",y.ALLOW="ALLOW",y.CONDITIONAL="CONDITIONAL",y))(r||{});function q(y,v){return y.name===v.name}function Q(y,v){return"resourceType"in y?!v||y.resourceType===v:!1}function t(y){return y.attributes.action==="create"}function pe(y){return y.attributes.action==="read"}function _(y){return y.attributes.action==="update"}function de(y){return y.attributes.action==="delete"}function me(y){return{authorize:async(v,F)=>await y.authorize(v,F),authorizeConditional(v,F){const ae=v;return y.authorize(ae,F)}}}function G({name:y,attributes:v,resourceType:F}){return F?{type:"resource",name:y,attributes:v,resourceType:F}:{type:"basic",name:y,attributes:v}}var xe=Object.defineProperty,ye=(y,v,F)=>v in y?xe(y,v,{enumerable:!0,configurable:!0,writable:!0,value:F}):y[v]=F,ut=(y,v,F)=>(ye(y,typeof v!="symbol"?v+"":v,F),F);const z=W.z.lazy(()=>W.z.object({rule:W.z.string(),resourceType:W.z.string(),params:W.z.record(W.z.any()).optional()}).or(W.z.object({anyOf:W.z.array(z).nonempty()})).or(W.z.object({allOf:W.z.array(z).nonempty()})).or(W.z.object({not:z}))),ee=W.z.object({result:W.z.literal(r.ALLOW).or(W.z.literal(r.DENY))}),D=W.z.union([W.z.object({result:W.z.literal(r.ALLOW).or(W.z.literal(r.DENY))}),W.z.object({result:W.z.literal(r.CONDITIONAL),pluginId:W.z.string(),resourceType:W.z.string(),conditions:z})]),w=(y,v)=>W.z.object({items:W.z.array(W.z.intersection(W.z.object({id:W.z.string()}),y)).refine(F=>F.length===v.size&&F.every(({id:ae})=>v.has(ae)),{message:"Items in response do not match request"})});class M{constructor(v){ut(this,"enabled"),ut(this,"discovery");var F;this.discovery=v.discovery,this.enabled=(F=v.config.getOptionalBoolean("permission.enabled"))!=null?F:!1}async authorize(v,F){return this.makeRequest(v,ee,F)}async authorizeConditional(v,F){return this.makeRequest(v,D,F)}async makeRequest(v,F,ae){if(!this.enabled)return v.map(re=>({result:r.ALLOW}));const Fe={items:v.map(re=>({id:A.A(),...re}))},Ae=await this.discovery.getBaseUrl("permission"),X=await b()(`${Ae}/authorize`,{method:"POST",body:JSON.stringify(Fe),headers:{...this.getAuthorizationHeader(ae==null?void 0:ae.token),"content-type":"application/json"}});if(!X.ok)throw await s.o3.fromResponse(X);const N=await X.json(),oe=w(F,new Set(Fe.items.map(({id:re})=>re))).parse(N).items.reduce((re,_e)=>(re[_e.id]=_e,re),{});return Fe.items.map(re=>oe[re.id])}getAuthorizationHeader(v){return v?{Authorization:`Bearer ${v}`}:{}}}},17899:(In,Ct,e)=>{"use strict";e.d(Ct,{JT:()=>Q,Tw:()=>pe,ak:()=>q,x9:()=>r});var s=e(14041),l=e(5124),b=e(11638),A=e(50585),W=e(68721);const r=(0,l.c)({id:"plugin.permission.api"});class q{constructor(de,me){this.permissionClient=de,this.identityApi=me}static create(de){const{config:me,discovery:G,identity:xe}=de,ye=new A.$D({discovery:G,config:me});return new q(ye,xe)}async authorize(de){return(await this.permissionClient.authorize([de],await this.identityApi.getCredentials()))[0]}}function Q(_){const de=(0,l.u)(r),{data:me,error:G}=(0,W.Ay)(_,async xe=>{if((0,A.OL)(xe.permission)&&!xe.resourceRef)return A.bh.DENY;const{result:ye}=await de.authorize(xe);return ye});return G?{error:G,loading:!1,allowed:!1}:me===void 0?{loading:!0,allowed:!1}:{loading:!1,allowed:me===A.bh.ALLOW}}const t=_=>{const{permission:de,resourceRef:me,errorComponent:G,...xe}=_,ye=Q(isResourcePermission(de)?{permission:de,resourceRef:me}:{permission:de}),ut=useApp(),{NotFoundErrorPage:z}=ut.getComponents();let ee=G===void 0?React.createElement(z,null):G;return ye.loading?ee=null:ye.allowed&&(ee=_.element),React.createElement(Route,{...xe,element:ee})};function pe(_){const{permission:de,resourceRef:me}=_,G=Q((0,A.OL)(de)?{permission:de,resourceRef:me}:{permission:de}),xe=(0,b.nm)();if(G.loading)return null;if(G.allowed)return s.createElement(s.Fragment,null,_.children);if(_.errorPage)return s.createElement(s.Fragment,null,_.errorPage);const{NotFoundErrorPage:ye}=xe.getComponents();return s.createElement(ye,null)}},10015:(In,Ct,e)=>{"use strict";e.d(Ct,{c:()=>pe});var s=e(29835),l="http://json-schema.org/draft-07/schema",b="TemplateV1beta3",A="A Template describes a scaffolding task for use with the Scaffolder. It describes the required parameters as well as a series of steps that will be taken to execute the scaffolding task.",W=[{apiVersion:"scaffolder.backstage.io/v1beta3",kind:"Template",metadata:{name:"react-ssr-template",title:"React SSR Template",description:"Next.js application skeleton for creating isomorphic web applications.",tags:["recommended","react"]},spec:{owner:"artist-relations-team",type:"website",parameters:{required:["name","description","repoUrl"],"backstage:permissions":{tags:["one","two"]},properties:{name:{title:"Name",type:"string",description:"Unique name of the component"},description:{title:"Description",type:"string",description:"Description of the component"},repoUrl:{title:"Pick a repository",type:"string","ui:field":"RepoUrlPicker"}}},steps:[{id:"fetch",name:"Fetch",action:"fetch:plain",parameters:{url:"./template"},"backstage:permissions":{tags:["one","two"]}},{id:"publish",name:"Publish to GitHub",action:"publish:github",parameters:{repoUrl:"${{ parameters.repoUrl }}"},if:"${{ parameters.repoUrl }}"}],output:{catalogInfoUrl:"${{ steps.publish.output.catalogInfoUrl }}"}}}],r=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["scaffolder.backstage.io/v1beta3"]},kind:{enum:["Template"]},spec:{type:"object",required:["type","steps"],properties:{type:{type:"string",description:"The type of component created by the template. The software catalog accepts any type value, but an organization should take great care to establish a proper taxonomy for these. Tools including Backstage itself may read this field and behave differently depending on its value. For example, a website type component may present tooling in the Backstage interface that is specific to just websites.",examples:["service","website","library"],minLength:1},owner:{type:"string",description:"The user (or group) owner of the template",minLength:1},parameters:{oneOf:[{type:"object",description:"The JSONSchema describing the inputs for the template.",properties:{"backstage:permissions":{type:"object",description:"Object used for authorizing the parameter",properties:{tags:{type:"array",items:{type:"string"}}}}}},{type:"array",description:"A list of separate forms to collect parameters.",items:{type:"object",description:"The JSONSchema describing the inputs for the template.",properties:{"backstage:permissions":{type:"object",description:"Object used for authorizing the parameter",properties:{tags:{type:"array",items:{type:"string"}}}}}}}]},presentation:{type:"object",description:"A way to redefine the labels for actionable buttons.",properties:{backButtonText:{type:"string",description:"A button which return the user to one step back."},createButtonText:{type:"string",description:"A button which start the execution of the template."},reviewButtonText:{type:"string",description:"A button which open the review step to verify the input prior to start the execution."}}},EXPERIMENTAL_recovery:{type:"object",description:"A task recovery section.",properties:{EXPERIMENTAL_strategy:{type:"string",description:"Recovery strategy for your task (none or startOver). By default none"}}},steps:{type:"array",description:"A list of steps to execute.",items:{type:"object",description:"A description of the step to execute.",required:["action"],properties:{id:{type:"string",description:"The ID of the step, which can be used to refer to its outputs."},name:{type:"string",description:"The name of the step, which will be displayed in the UI during the scaffolding process."},action:{type:"string",description:"The name of the action to execute."},input:{type:"object",description:"A templated object describing the inputs to the action."},if:{type:["string","boolean"],description:'A templated condition that skips the step when evaluated to false. If the condition is true or not defined, the step is executed. The condition is true, if the input is not `false`, `undefined`, `null`, `""`, `0`, or `[]`.'},"backstage:permissions":{type:"object",description:"Object used for authorizing the step",properties:{tags:{type:"array",items:{type:"string"}}}}}}},output:{type:"object",description:"A templated object describing the outputs of the scaffolding task.",properties:{links:{type:"array",description:"A list of external hyperlinks, typically pointing to resources created or updated by the template",items:{type:"object",required:[],properties:{url:{type:"string",description:"A url in a standard uri format.",examples:["https://github.com/my-org/my-new-repo"],minLength:1},entityRef:{type:"string",description:"An entity reference to an entity in the catalog.",examples:["Component:default/my-app"],minLength:1},title:{type:"string",description:"A user friendly display name for the link.",examples:["View new repo"],minLength:1},icon:{type:"string",description:"A key representing a visual icon to be displayed in the UI.",examples:["dashboard"],minLength:1}}}},text:{type:"array",description:"A list of Markdown text blobs, like output data from the template.",items:{type:"object",required:[],properties:{title:{type:"string",description:"A user friendly display name for the text.",examples:["Output Content"],minLength:1},icon:{type:"string",description:"A key representing a visual icon to be displayed in the UI.",examples:["dashboard"],minLength:1},content:{type:"string",description:"The text blob to display in the UI, rendered as Markdown.",examples:["**hey** _I'm_ Markdown"]}}}}},additionalProperties:{type:"string"}}}}}}],q={$schema:l,$id:b,description:A,examples:W,allOf:r};const Q=(0,s.zu)(q),t={async check(_){return Q(_)===_}},pe=_=>_.apiVersion==="scaffolder.backstage.io/v1beta3"&&_.kind==="Template"},97093:(In,Ct,e)=>{"use strict";e.d(Ct,{C1:()=>Y,KE:()=>he,KV:()=>wn,RO:()=>hn,Wu:()=>un,gZ:()=>Yn,g_:()=>ge,hJ:()=>mn,he:()=>At,lN:()=>Oa,lV:()=>K});var s=e(5124),l=e(11638),b=e(78733),A=e(21619),W=e(37877),r=e(64947),q=e(88951),Q=e(58837),t=e(99703),pe=e(54917),_=e(14041),de=e(400),me=e(72937),G=e(22968),xe=e(94403),ye=e(45810),ut=e.n(ye),z=e(73466),ee=e(12564),D=e(46108),w=e.n(D),M=e(43157),y=e(30860),v=e(95061),F=e(72501),ae=e(94384),Fe=e(58007),Ae=e(8109),X=e(46423),N=e(5951),H=e(4321),oe=e(7147),re=e(29835),_e=e(92651),tt=e(2069),Ve=e(77125),Ze=e(40703),nt=e(59469),Ge=e(48653),Je=e(67720),Re=e(37197),Le=e(42899),lt=e(23127),Et=e(10015),wt=e(52950),Qt=e(91638),yt=e(86613),ue=e(4832),gt=e(54819),xt=e(78467),ht=e(51767),Ut=e(25711),S=e(53373),P=e.n(S),j=e(7707),Z=e(9181),Ie=e(45313),ze=e(4794),dt=e.n(ze),Qe=e(76842),et=e(56005),$t=e.n(et),tn=e(69076),It=e(86901),pt=e(16249),qt=e(44148),sn=e(41260),an=e(6924),Vt=e(20577),Ce=e(29365),Ye=e(26343),Kt=e(28233),jt=e(55197),Wt=e(25534),ft=e(75625),Ln=e(20353),dn=e(71407);function Xt(ie){return typeof ie=="object"&&ie!==null&&!Array.isArray(ie)}function An(ie,Te){if(!Xt(ie))return;const{properties:We,items:Ne,anyOf:He,oneOf:zt,allOf:_t,dependencies:bt,then:Gt,else:fn}=ie;for(const rn in ie)ie.hasOwnProperty(rn)&&rn.startsWith("ui:")&&(Te[rn]=ie[rn],delete ie[rn]);if(Xt(We))for(const rn in We){if(!We.hasOwnProperty(rn))continue;const Nn=We[rn];if(Xt(Nn)){if(!Xt(Te[rn])){const Mn={};Te[rn]=Mn}An(Nn,Te[rn])}}if(Xt(Ne)){const rn={};Te.items=rn,An(Ne,rn)}if(Array.isArray(He))for(const rn of He)Xt(rn)&&An(rn,Te);if(Array.isArray(zt))for(const rn of zt)Xt(rn)&&An(rn,Te);if(Array.isArray(_t))for(const rn of _t)Xt(rn)&&An(rn,Te);if(Xt(bt))for(const rn of Object.keys(bt)){const Nn=bt[rn];Xt(Nn)&&An(Nn,Te)}Xt(Gt)&&An(Gt,Te),Xt(fn)&&An(fn,Te)}const Xe=ie=>{const Te={},We=(0,me.qg)((0,me.As)(ie));return An(We,Te),{uiSchema:Te,schema:We}},mt=()=>{const ie={__errors:[],addError:Te=>{var We;(We=ie.__errors)==null||We.push(Te)}};return ie};function Dt(ie){return!!ie&&"__errors"in ie}function rt(ie){var Te;if(!ie)return!1;for(const We of Object.values(ie)){if(Dt(We)){if(((Te=We.__errors)!=null?Te:[]).length>0)return!0;continue}if(rt(We))return!0}return!1}function qe(ie){return typeof ie=="object"&&ie!==null&&!Array.isArray(ie)}const V=ie=>"type"in ie&&ie.type==="error",he=(ie,Te,We)=>{async function Ne(He,zt="#",_t=He){var bt,Gt;const fn=new de.t0(ie),rn={},Nn=async(Mn,Gn,la,Fn,ea)=>{const ca=Te[Mn];if(ca){const sa=mt();try{await ca(la,sa,{...We,formData:He,schema:Fn,uiSchema:ea})}catch(Ea){sa.addError(Ea.message)}rn[Gn]=sa}};for(const[Mn,Gn]of Object.entries(_t)){const la=`${zt}/${Mn}`,Fn=fn.getSchema({pointer:la,data:He});if(!Fn)continue;if(V(Fn))throw new Error(Fn.message);const{schema:ea,uiSchema:ca}=Xe(Fn),sa=Fn&&Fn.items,Ea=async(Ra,Ta,Ha)=>{await Nn(Ra["ui:field"],Mn,Gn,Ta,Ha)},ba=async Ra=>{if("ui:field"in Ra){const{schema:Ta,uiSchema:Ha}=Xe(Fn.items);await Ea(Ra,Ta,Ha)}};if("ui:field"in Fn)await Ea(Fn,ea,ca);else if(sa&&"ui:field"in Fn.items)await ba(Fn.items);else if(sa&&Fn.items.type==="object"){const Ra=(Gt=(bt=Fn.items)==null?void 0:bt.properties)!=null?Gt:[];for(const[,Ta]of Object.entries(Ra))await ba(Ta)}else qe(Gn)&&(rn[Mn]=await Ne(He,la,Gn))}return rn}return async He=>await Ne(He)},Ee=ie=>{const Te=Object.fromEntries(Object.entries(ie.formState).map(([We,Ne])=>{var He;for(const zt of ie.schemas){const bt=new de.t0(zt.mergedSchema).getSchema({pointer:`#/${We}`,data:ie.formState});if(bt){const Gt=(He=bt["ui:backstage"])==null?void 0:He.review;if(Gt){if(Gt.mask)return[We,Gt.mask];if(Gt.show===!1)return[]}if(bt["ui:widget"]==="password")return[We,"******"];if(bt.enum&&bt.enumNames)return[We,bt.enumNames[bt.enum.indexOf(Ne)]||Ne]}}return[We,Ne]}).filter(We=>We.length>0));return _.createElement(G.tA,{metadata:Te})},Pt=ie=>{const Te=(0,s.u)(s.f),Ne=ie.steps.map(({title:He,description:zt,schema:_t})=>({title:He,description:zt,mergedSchema:_t,...Xe(_t)})).filter(He=>{var zt;const _t=(zt=He.uiSchema["ui:backstage"])==null?void 0:zt.featureFlag;return _t?Te.isActive(_t):!0}).map(He=>{var zt,_t,bt,Gt;const fn={...He,schema:{...He.schema,title:void 0}};return((zt=He.schema)!=null&&zt.properties||!((_t=He.schema)!=null&&_t.dependencies))&&(fn.schema.properties=Object.fromEntries(Object.entries((Gt=(bt=He.schema)==null?void 0:bt.properties)!=null?Gt:{}).filter(([rn])=>{var Nn,Mn;const Gn=(Mn=(Nn=He.uiSchema[rn])==null?void 0:Nn["ui:backstage"])==null?void 0:Mn.featureFlag;return Gn?Te.isActive(Gn):!0}))),fn});return{presentation:ie.presentation,steps:Ne}},Nt=ie=>(0,_.useState)(()=>{if(ie)return ie;const Te=ut().parse(window.location.search,{ignoreQueryPrefix:!0});try{return JSON.parse(Te.formData)}catch{return{}}}),ln=ie=>{const Te=(0,s.u)(ee.s),{value:We,loading:Ne,error:He}=(0,z.A)(()=>Te.getTemplateParameterSchema(ie),[Te,ie]);return{manifest:We,loading:Ne,error:He}},bn=ie=>{const Te="backstage:featureFlag",We=(0,s.u)(s.f);if(!ie)return;const Ne=ie==null?void 0:ie.steps.filter(He=>{const zt=He.schema[Te];return typeof zt!="string"||We.isActive(zt)}).map(He=>{var zt;const _t=w()(He),bt=[];return _t.schema.properties&&(_t.schema.properties=Object.fromEntries(Object.entries(_t.schema.properties).filter(([Gt,fn])=>fn[Te]?We.isActive(fn[Te])?!0:(bt.push(Gt),!1):!0)),_t.schema.required=Array.isArray(_t.schema.required)?(zt=_t.schema.required)==null?void 0:zt.filter(Gt=>!bt.includes(Gt)):_t.schema.required),_t});return{...ie,steps:Ne}},Dn=(ie,Te={})=>{var We;const{layouts:Ne=[]}=Te,He=ie==null?void 0:ie.uiSchema["ui:ObjectFieldTemplate"];if(typeof He!="string")return ie;const zt=(We=Ne.find(_t=>_t.name===He))==null?void 0:We.component;return zt?{...ie,uiSchema:{...ie.uiSchema,"ui:ObjectFieldTemplate":zt}}:ie};var Vn=Object.freeze({__proto__:null,DescriptionField:({description:ie})=>ie&&_.createElement(G.h2,{content:ie,linkTarget:"_blank"})});const Pn=(0,Q.A)(ie=>({markdownDescription:{fontSize:ie.typography.caption.fontSize,margin:0,color:ie.palette.text.secondary,"& :first-child":{margin:0,marginTop:"3px"}}})),Yn=ie=>{const{children:Te,displayLabel:We=!0,rawErrors:Ne=[],errors:He,help:zt,rawDescription:_t,required:bt,disabled:Gt}=ie,fn=Pn();return _.createElement(v.A,{fullWidth:!0,error:!!Ne.length,required:bt,disabled:Gt},Te,We&&_t?_.createElement(G.h2,{content:_t,className:fn.markdownDescription}):null,He,zt)},da=ie=>{const{id:Te,children:We,classNames:Ne,style:He,disabled:zt,displayLabel:_t,hidden:bt,label:Gt,onDropPropertyClick:fn,onKeyChange:rn,readonly:Nn,required:Mn,rawErrors:Gn=[],errors:la,help:Fn,rawDescription:ea,schema:ca,uiSchema:sa,registry:Ea}=ie,ba=(0,y.$R)(sa),Ra=(0,y.$F)("WrapIfAdditionalTemplate",Ea,ba);return bt?_.createElement("div",{style:{display:"none"}},We):_.createElement(Ra,{classNames:Ne,style:He,disabled:zt,id:Te,label:Gt,onDropPropertyClick:fn,onKeyChange:rn,readonly:Nn,required:Mn,schema:ca,uiSchema:sa,registry:Ea},_.createElement(Yn,{displayLabel:_t,rawErrors:Gn,help:Fn,disabled:zt,rawDescription:ea,errors:la,required:Mn},We))},ct=(0,Q.A)(ie=>({markdownDescription:{fontSize:ie.typography.caption.fontSize,margin:0,color:ie.palette.text.secondary,"& :first-child":{margin:0,marginTop:"3px"}}})),m=ie=>{const{id:Te,description:We}=ie,Ne=ct();return We?typeof We=="string"?_.createElement(G.h2,{content:We,className:Ne.markdownDescription}):_.createElement(F.A,{id:Te,variant:"subtitle2",style:{marginTop:"5px"}},We):null},R=(0,M.SL)(ae.Sx),K=ie=>{const Te=_.useMemo(()=>{var Ne;return Object.fromEntries(Object.entries((Ne=ie.fields)!=null?Ne:{}).map(([He,zt])=>[He,_t=>{var bt,Gt;return _.createElement(zt,{..._t,uiSchema:(bt=_t.uiSchema)!=null?bt:{},formData:_t.formData,rawErrors:(Gt=_t.rawErrors)!=null?Gt:[]})}]))},[ie.fields]),We=_.useMemo(()=>({FieldTemplate:da,DescriptionFieldTemplate:m,...ie.templates}),[ie.templates]);return _.createElement(R,{...ie,templates:We,fields:Te})},le=(0,Q.A)(ie=>(0,t.A)({list:{width:"100%"},text:{textWrap:"wrap"}})),I=({errors:ie})=>{const Te=le();return _.createElement(H.A,null,_.createElement(Fe.A,{dense:!0,className:Te.list},ie.map((We,Ne)=>_.createElement(Ae.A,{key:Ne},_.createElement(X.A,null,_.createElement(oe.A,{color:"error"})),_.createElement(N.A,{classes:{primary:Te.text},primary:We.stack})))))},U=(0,Q.A)(ie=>({backButton:{marginRight:ie.spacing(1)},footer:{display:"flex",flexDirection:"row",justifyContent:"right",marginTop:ie.spacing(2)},formWrapper:{padding:ie.spacing(2)}})),Y=ie=>{var Te,We,Ne,He,zt,_t,bt;const{layouts:Gt=[],components:fn={},...rn}=ie,{ReviewStateComponent:Nn=Ee,ReviewStepComponent:Mn,backButtonText:Gn="Back",createButtonText:la="Create",reviewButtonText:Fn="Review"}=fn,ea=(0,l.st)(),{presentation:ca,steps:sa}=Pt(rn.manifest),Ea=(0,s.b)(),[ba,Ra]=(0,_.useState)(0),[Ta,Ha]=(0,_.useState)(!1),[Ja,Za]=Nt(rn.initialState),[hr,gr]=(0,_.useState)(),or=U(),ur=(0,_.useMemo)(()=>Object.fromEntries(rn.extensions.map(({name:ra,component:va})=>[ra,va])),[rn.extensions]),Sa=(0,_.useMemo)(()=>({...Vn,...ur}),[ur]),qa=(0,_.useMemo)(()=>Object.fromEntries(rn.extensions.map(({name:ra,validation:va})=>[ra,va])),[rn.extensions]),er=(0,_.useMemo)(()=>{var ra;return he((ra=sa[ba])==null?void 0:ra.mergedSchema,qa,{apiHolder:Ea})},[sa,ba,qa,Ea]),ir=()=>{Ra(ra=>ra-1)},ar=(0,_.useCallback)(ra=>Za(va=>({...va,...ra.formData})),[Za]),$e=(0,_.useCallback)(()=>{rn.onCreate(Ja)},[rn,Ja]),ce=Dn(sa[ba],{layouts:Gt}),st=async({formData:ra={}})=>{gr(void 0),Ha(!0);const va=await er(ra);Ha(!1),rt(va)?gr(va):(gr(void 0),Ra(_a=>{const wa=_a+1;return ea.captureEvent("click",`Next Step (${wa})`),wa})),Za(_a=>({..._a,...ra}))},Rn=(We=(Te=ca==null?void 0:ca.buttonLabels)==null?void 0:Te.backButtonText)!=null?We:Gn,Kn=(He=(Ne=ca==null?void 0:ca.buttonLabels)==null?void 0:Ne.createButtonText)!=null?He:la,aa=(_t=(zt=ca==null?void 0:ca.buttonLabels)==null?void 0:zt.reviewButtonText)!=null?_t:Fn;return _.createElement(_.Fragment,null,Ta&&_.createElement(q.A,{variant:"indeterminate"}),_.createElement(b.A,{activeStep:ba,alternativeLabel:!0,variant:"elevation",style:{overflowX:"auto"}},sa.map((ra,va)=>{const _a=ba>va;return _.createElement(A.A,{key:va},_.createElement(W.A,{"aria-label":`Step ${va+1}`,style:{cursor:_a?"pointer":"default"},onClick:()=>{_a&&Ra(va)}},ra.title))}),_.createElement(A.A,null,_.createElement(W.A,null,"Review"))),_.createElement("div",{className:or.formWrapper},ba<sa.length?_.createElement(K,{validator:xe.Ay,extraErrors:hr,formData:Ja,formContext:{formData:Ja},schema:ce.schema,uiSchema:ce.uiSchema,onSubmit:st,fields:Sa,showErrorList:"top",templates:{ErrorListTemplate:I},onChange:ar,experimental_defaultFormStateBehavior:{allOf:"populateDefaults"},...(bt=rn.formProps)!=null?bt:{}},_.createElement("div",{className:or.footer},_.createElement(r.A,{onClick:ir,className:or.backButton,disabled:ba<1||Ta},Rn),_.createElement(r.A,{variant:"contained",color:"primary",type:"submit",disabled:Ta},ba===sa.length-1?aa:"Next"))):Mn?_.createElement(Mn,{disableButtons:Ta,formData:Ja,handleBack:ir,handleReset:()=>{},steps:sa,handleCreate:$e}):_.createElement(_.Fragment,null,_.createElement(Nn,{formState:Ja,schemas:sa}),_.createElement("div",{className:or.footer},_.createElement(r.A,{onClick:ir,className:or.backButton,disabled:ba<1},"Back"),_.createElement(r.A,{variant:"contained",color:"primary",onClick:$e},Kn)))))},we=(0,Q.A)(()=>({header:{backgroundImage:({cardBackgroundImage:ie})=>ie,color:({cardFontColor:ie})=>ie},subtitleWrapper:{display:"flex",justifyContent:"space-between"}})),Oe=ie=>{const{template:{metadata:{title:Te,name:We},spec:{type:Ne}}}=ie,{getPageTheme:He}=(0,pe.A)(),zt=He({themeId:Ne}),_t=we({cardFontColor:zt.fontColor,cardBackgroundImage:zt.backgroundImage}),bt=_.createElement("div",{className:_t.subtitleWrapper},_.createElement("div",null,Ne),_.createElement("div",null,_.createElement(_e.uR,{entity:ie.template,style:{padding:0}})));return _.createElement(G.f1,{title:Te!=null?Te:We,subtitle:bt,classes:{root:_t.header}})},ot=(0,Q.A)(()=>({linkText:{display:"inline-flex",alignItems:"center"}})),Ot=({icon:ie,text:Te,url:We})=>{const Ne=ot();return _.createElement("div",{className:Ne.linkText},_.createElement(ie,{fontSize:"small"}),_.createElement(G.N_,{style:{marginLeft:"8px"},to:We},Te||We))},en=(0,Q.A)(ie=>({box:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box","-webkit-line-clamp":10,"-webkit-box-orient":"vertical"},markdown:{"& :first-child":{margin:0}},label:{color:ie.palette.text.secondary,textTransform:"uppercase",fontWeight:"bold",letterSpacing:.5,lineHeight:1,fontSize:"0.75rem"},footer:{display:"flex",justifyContent:"space-between",flex:1,alignItems:"center"},ownedBy:{display:"flex",alignItems:"center",flex:1,color:ie.palette.link}})),Zt=ie=>{var Te,We,Ne,He,zt,_t,bt;const{template:Gt}=ie,fn=en(),rn=(0,tt.g)(Gt,re.vv),Nn=(0,l.nm)(),Mn=ea=>{var ca;return ea&&(ca=Nn.getSystemIcon(ea))!=null?ca:lt.A},Gn=!!((Te=Gt.metadata.tags)!=null&&Te.length),la=!!((We=ie.additionalLinks)!=null&&We.length)||!!((Ne=Gt.metadata.links)!=null&&Ne.length),Fn=!Gn&&!la;return _.createElement(Ze.A,null,_.createElement(Oe,{template:Gt}),_.createElement(Ge.A,null,_.createElement(Le.A,{container:!0,spacing:2},_.createElement(Le.A,{item:!0,xs:12},_.createElement(Ve.A,{className:fn.box},_.createElement(G.h2,{className:fn.markdown,content:(He=Gt.metadata.description)!=null?He:"No description"}))),Fn&&_.createElement(Le.A,{item:!0,xs:12},_.createElement(Re.A,{"data-testid":"template-card-separator"})),Gn&&_.createElement(_.Fragment,null,_.createElement(Le.A,{item:!0,xs:12},_.createElement(Re.A,{"data-testid":"template-card-separator--tags"})),_.createElement(Le.A,{item:!0,xs:12},_.createElement(Le.A,{container:!0,spacing:2},(zt=Gt.metadata.tags)==null?void 0:zt.map(ea=>_.createElement(Le.A,{key:`grid-${ea}`,item:!0},_.createElement(Je.A,{style:{margin:0},size:"small",label:ea,key:ea})))))),la&&_.createElement(_.Fragment,null,_.createElement(Le.A,{item:!0,xs:12},_.createElement(Re.A,{"data-testid":"template-card-separator--links"})),_.createElement(Le.A,{item:!0,xs:12},_.createElement(Le.A,{container:!0,spacing:2},(_t=ie.additionalLinks)==null?void 0:_t.map(({icon:ea,text:ca,url:sa},Ea)=>_.createElement(Le.A,{className:fn.linkText,item:!0,xs:6,key:Ea},_.createElement(Ot,{icon:ea,text:ca,url:sa}))),(bt=Gt.metadata.links)==null?void 0:bt.map(({url:ea,icon:ca,title:sa},Ea)=>_.createElement(Le.A,{className:fn.linkText,item:!0,xs:6,key:Ea},_.createElement(Ot,{icon:Mn(ca),text:sa||ea,url:ea})))))))),_.createElement(nt.A,{style:{padding:"16px",flex:1,alignItems:"flex-end"}},_.createElement("div",{className:fn.footer},_.createElement("div",{className:fn.ownedBy},rn.length>0&&_.createElement(_.Fragment,null,_.createElement(G.ny,{fontSize:"small"}),_.createElement(_e.iI,{style:{marginLeft:"8px"},entityRefs:rn,defaultKind:"Group",hideIcons:!0}))),_.createElement(r.A,{size:"small",variant:"outlined",color:"primary",onClick:()=>{var ea;return(ea=ie.onSelected)==null?void 0:ea.call(ie,Gt)}},"Choose"))))},pn=ie=>{const{templates:Te,title:We,components:{CardComponent:Ne}={},onSelected:He}=ie,zt=typeof We=="string"?_.createElement(G.dv,{title:We}):We;if(Te.length===0)return null;const _t=Ne||Zt;return _.createElement(G.UC,null,zt,_.createElement(G.s3,null,Te.map(({template:bt,additionalLinks:Gt})=>_.createElement(_t,{key:(0,re.U2)(bt),additionalLinks:Gt,template:bt,onSelected:He}))))},mn=ie=>{const{loading:Te,error:We,entities:Ne}=(0,_e.nK)(),{groups:He,templateFilter:zt,TemplateCardComponent:_t,onTemplateSelected:bt}=ie,Gt=(0,s.u)(s.r),fn=(0,_.useCallback)(rn=>{bt==null||bt(rn)},[bt]);return Te?_.createElement(G.ke,null):We?(Gt.post(We),null):!Ne||!Ne.length?_.createElement(F.A,{variant:"body2"},"No templates found that match your filter. Learn more about"," ",_.createElement(G.N_,{to:"https://backstage.io/docs/features/software-templates/adding-templates"},"adding templates"),"."):_.createElement(_.Fragment,null,He.map(({title:rn,filter:Nn},Mn)=>{const Gn=Ne.filter(Et.c).filter(la=>zt?zt(la):!0).filter(Nn).map(la=>{var Fn,ea;const ca=(ea=(Fn=ie.additionalLinksForEntity)==null?void 0:Fn.call(ie,la))!=null?ea:[];return{template:la,additionalLinks:ca}});return _.createElement(pn,{key:Mn,templates:Gn,title:rn,components:{CardComponent:_t},onSelected:fn})}))},kt=ie=>{const Te=(0,s.u)(_e.vp),{value:We}=(0,Qt.A)(async()=>{var Ne;const He=await Te.getEntityByRef(ie),zt=(Ne=He==null?void 0:He.metadata.annotations)==null?void 0:Ne["backstage.io/time-saved"];if(!He||!zt)return;const _t=wt.dw.fromISO(zt).as("minutes");if(!Number.isNaN(_t))return _t},[Te,ie]);return We},Sn=(0,Q.A)({markdown:{"& :first-child":{marginTop:0},"& :last-child":{marginBottom:0}}}),un=ie=>{var Te;const{title:We,description:Ne,namespace:He,templateName:zt,onCreate:_t,...bt}=ie,Gt=(0,l.st)(),fn=Sn(),rn=(0,re.U2)({kind:"Template",namespace:He,name:zt}),Nn=(0,s.u)(s.r),{loading:Mn,manifest:Gn,error:la}=ln(rn),Fn=bn(Gn),ea=kt(rn),ca=(0,_.useCallback)(async sa=>{var Ea;_t(sa);const ba=typeof sa.name=="string"?sa.name:void 0;Gt.captureEvent("create",(Ea=ba!=null?ba:zt)!=null?Ea:"unknown",{value:ea})},[_t,Gt,zt,ea]);return(0,_.useEffect)(()=>{la&&Nn.post(new Error(`Failed to load template, ${la}`))},[la,Nn]),la?bt.onError(la):_.createElement(G.UC,null,Mn&&_.createElement(G.ke,null),Fn&&_.createElement(G.nO,{title:We!=null?We:Fn.title,subheader:_.createElement(G.h2,{className:fn.markdown,content:(Te=Ne!=null?Ne:Fn.description)!=null?Te:"No description"}),noPadding:!0,titleTypographyProps:{component:"h2"}},_.createElement(Y,{manifest:Fn,onCreate:ca,...bt})))},$n=ie=>React.createElement(SecretsContextProvider,null,React.createElement(un,{...ie})),qn=(0,Q.A)({root:{"&:hover":{textDecoration:"none"}}}),na=ie=>{const{links:Te=[]}=ie.output,We=qn(),Ne=(0,l.nm)(),He=(0,l.Sf)(_e.sF),zt=_t=>{var bt;return(bt=Ne.getSystemIcon(_t))!=null?bt:yt.A};return _.createElement(_.Fragment,null,Te.filter(({url:_t,entityRef:bt})=>_t||bt).map(({url:_t,entityRef:bt,title:Gt,icon:fn})=>{if(bt){const rn=(0,re.KU)(bt),Nn=He(rn);return{title:Gt,icon:fn,url:Nn}}return{title:Gt,icon:fn,url:_t}}).map(({url:_t,title:bt,icon:Gt},fn)=>{const rn=zt(Gt);return _.createElement(G.N_,{to:_t,key:fn,classes:{root:We.root}},_.createElement(r.A,{startIcon:_.createElement(rn,null),component:"div",color:"primary"},bt))}))},kn=ie=>{const{output:{text:Te=[]},index:We,setIndex:Ne}=ie,He=(0,l.nm)(),zt=_t=>{var bt;return(bt=He.getSystemIcon(_t))!=null?bt:ue.A};return _.createElement(_.Fragment,null,Te.filter(({content:_t})=>_t!==void 0).map(({title:_t,icon:bt},Gt)=>{const fn=zt(bt);return _.createElement(r.A,{key:Gt,startIcon:_.createElement(fn,null),component:"div",color:"primary",onClick:()=>{We!==Gt&&(Ne==null||Ne(Gt))},variant:We===Gt?"outlined":void 0},_t)}))},wn=ie=>{var Te,We;const{output:Ne}=ie,[He,zt]=(0,_.useState)(void 0);(0,_.useEffect)(()=>{if(He===void 0&&(Ne!=null&&Ne.text)){const bt=Ne.text.findIndex(Gt=>Gt.default);zt(bt>=0?bt:0)}},[He,Ne]);const _t=(0,_.useMemo)(()=>{var bt;return He!==void 0?(bt=Ne==null?void 0:Ne.text)==null?void 0:bt[He]:null},[Ne,He]);return Ne?_.createElement(_.Fragment,null,_.createElement(Ve.A,{paddingBottom:2},_.createElement(H.A,null,_.createElement(Ve.A,{padding:2,justifyContent:"center",display:"flex",gridGap:16},_.createElement(kn,{output:Ne,index:He,setIndex:zt}),_.createElement(na,{output:Ne})))),_t?_.createElement(Ve.A,{paddingBottom:2},_.createElement(G.nO,{title:(Te=_t.title)!=null?Te:"Text Output",noPadding:!0,titleTypographyProps:{component:"h2"}},_.createElement(Ve.A,{padding:2,height:"100%"},_.createElement(G.h2,{content:(We=_t.content)!=null?We:""})))):null):null},gn=(0,Q.A)(ie=>({root:{color:ie.palette.text.disabled},completed:{color:ie.palette.status.ok},error:{color:ie.palette.status.error}})),Jt=ie=>{const Te=gn(),{active:We,completed:Ne,error:He,skipped:zt}=ie,_t=()=>We?_.createElement(xt.A,{size:"20px"}):Ne?_.createElement(j.A,null):He?_.createElement(Z.A,null):zt?_.createElement(ht.A,null):_.createElement(Ut.A,null);return _.createElement("div",{className:P()(Te.root,{[Te.completed]:Ne,[Te.error]:He})},_t())},vn=ie=>{const[Te,We]=(0,_.useState)(""),{step:Ne}=ie,He=()=>Ne.startedAt&&Ne.endedAt&&Te?null:Ne.startedAt&&Ne.endedAt?1:1e3,zt=(0,_.useCallback)(()=>{if(!Ne.startedAt){We("");return}const _t=Ne.endedAt?wt.c9.fromISO(Ne.endedAt):wt.c9.local(),bt=wt.c9.fromISO(Ne.startedAt),Gt=wt.IX.fromDateTimes(bt,_t).toDuration().valueOf();We(dt()(Gt,{round:!0}))},[Ne.endedAt,Ne.startedAt]);return(0,Qe.u)(zt),(0,Ie.A)(zt,He()),_.createElement(F.A,{variant:"caption"},Te)},_n=(0,Q.A)(ie=>({failed:{backgroundColor:ie.palette.error.main},success:{backgroundColor:ie.palette.success.main}})),Aa=ie=>{const Te=_n();return ie.isComplete?_.createElement(q.A,{variant:"determinate",classes:{bar:ie.isError?Te.failed:Te.success},value:100}):_.createElement(q.A,{variant:"indeterminate"})},Oa=ie=>{var Te,We;return _.createElement(H.A,{style:{position:"relative",overflow:"hidden"}},_.createElement(Aa,{isComplete:(Te=ie.isComplete)!=null?Te:!1,isError:(We=ie.isError)!=null?We:!1}),_.createElement(Ve.A,{padding:2},_.createElement(b.A,{activeStep:ie.activeStep,alternativeLabel:!0,variant:"elevation",style:{overflowX:"auto"}},ie.steps.map(Ne=>{const He=Ne.status==="completed",zt=Ne.status==="failed",_t=Ne.status==="processing",bt=Ne.status==="skipped",Gt={completed:He,error:zt,active:_t,skipped:bt};return _.createElement(A.A,{key:Ne.id},_.createElement(gt.A,null,_.createElement(W.A,{StepIconProps:Gt,StepIconComponent:Jt,"data-testid":"step-label"},_.createElement(Ve.A,null,Ne.name),!bt&&_.createElement(vn,{step:Ne}))))}))))},J=(0,Q.A)({root:{width:"100%",height:"100%",position:"relative"}}),ge=ie=>{const Te=J();return _.createElement("div",{className:Te.root},_.createElement(G.rW,{text:Object.values(ie.logs).map(We=>We.join(`
`)).filter(Boolean).join(`
`)}))},ke=_.createElement(sn.A,{fontSize:"small"}),it=_.createElement(qt.A,{fontSize:"small"}),St=(0,Q.A)({root:{},label:{}},{name:"ScaffolderReactTemplateCategoryPicker"}),At=()=>{const ie=St(),Te=(0,s.u)(s.l),{error:We,loading:Ne,availableTypes:He,selectedTypes:zt,setSelectedTypes:_t}=(0,_e.jF)();return Ne?_.createElement(G.ke,null):We?(Te.post({message:`Failed to load entity types with error: ${We}`,severity:"error"}),null):He?_.createElement(Ve.A,{className:ie.root,pb:1,pt:1},_.createElement(F.A,{className:ie.label,variant:"button",component:"label",htmlFor:"categories-picker"},"Categories"),_.createElement(Vt.Ay,{multiple:!0,id:"categories-picker",options:He,value:zt,onChange:(bt,Gt)=>_t(Gt),renderOption:(bt,{selected:Gt})=>_.createElement(It.A,{control:_.createElement(tn.A,{icon:ke,checkedIcon:it,checked:Gt}),label:$t()(bt)}),size:"small",popupIcon:_.createElement(an.A,null),renderInput:bt=>_.createElement(pt.A,{...bt,variant:"outlined"})})):null},cn=(0,Q.A)(ie=>({button:{color:ie.page.fontColor}}));function hn(ie){const{onEditorClicked:Te,onActionsClicked:We,onTasksClicked:Ne,onCreateClicked:He}=ie,zt=cn(),[_t,bt]=(0,_.useState)();if(!Te&&!We)return null;const Gt=rn=>{bt(rn.currentTarget)},fn=()=>{bt(void 0)};return _.createElement(_.Fragment,null,_.createElement(Ce.A,{id:"long-menu","aria-label":"more","aria-controls":"long-menu","aria-expanded":!!_t,"aria-haspopup":"true",role:"button",onClick:Gt,"data-testid":"menu-button",color:"inherit",className:zt.button},_.createElement(dn.A,null)),_.createElement(jt.Ay,{"aria-labelledby":"long-menu",open:!!_t,onClose:fn,anchorEl:_t,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},_.createElement(Kt.A,null,He&&_.createElement(Ye.A,{onClick:He},_.createElement(X.A,null,_.createElement(Wt.A,{fontSize:"small"})),_.createElement(N.A,{primary:"Create"})),Te&&_.createElement(Ye.A,{onClick:Te},_.createElement(X.A,null,_.createElement(ft.A,{fontSize:"small"})),_.createElement(N.A,{primary:"Template Editor"})),We&&_.createElement(Ye.A,{onClick:We},_.createElement(X.A,null,_.createElement(ue.A,{fontSize:"small"})),_.createElement(N.A,{primary:"Installed Actions"})),Ne&&_.createElement(Ye.A,{onClick:Ne},_.createElement(X.A,null,_.createElement(Ln.A,{fontSize:"small"})),_.createElement(N.A,{primary:"Task List"})))))}},12564:(In,Ct,e)=>{"use strict";e.d(Ct,{S:()=>W,s:()=>q,u:()=>r});var s=e(97388),l=e(14041),b=e(5124);const A=(0,s.tK)("secrets-context"),W=Q=>{const{initialSecrets:t={}}=Q,[pe,_]=(0,l.useState)({...t});return l.createElement(A.Provider,{value:(0,s.Bl)({1:{secrets:pe,setSecrets:_}})},Q.children)},r=()=>{var Q;const t=(Q=(0,l.useContext)(A))==null?void 0:Q.atVersion(1);if(!t)throw new Error("useTemplateSecrets must be used within a SecretsContextProvider");const{setSecrets:pe,secrets:_={}}=t;return{setSecrets:(0,l.useCallback)(me=>{pe(G=>({...G,...me}))},[pe]),secrets:_}},q=(0,s.Q6)("scaffolder:scaffolder-api-ref",()=>(0,b.c)({id:"plugin.scaffolder.service"}))},77189:(In,Ct,e)=>{"use strict";e.d(Ct,{TA:()=>xe,cw:()=>me,l3:()=>pe,zD:()=>Q});var s=e(11638),l=e(5124),b=e(12564),A=e(82806),W=e(14041);const r="scaffolder.extensions.wrapper.v1",q="scaffolder.extensions.field.v1";function Q(z){return{expose(){const ee=()=>null;return(0,s.h3)(ee,q,z),ee}}}const t=()=>null;(0,s.h3)(t,r,!0);const pe=z=>(0,s.OJ)(z,ee=>ee.selectByComponentData({key:r}).findComponentData({key:q})),_="scaffolder.layout.v1",de="scaffolder.layouts.wrapper.v1",me=z=>(0,s.OJ)(z,ee=>ee.selectByComponentData({key:de}).findComponentData({key:_}));function G(z,ee){var D,w,M;switch(ee.type){case"INIT":{z.steps=ee.data.spec.steps.reduce((y,v)=>(y[v.id]={status:"open",id:v.id},y),{}),z.stepLogs=ee.data.spec.steps.reduce((y,v)=>(y[v.id]=[],y),{}),z.loading=!1,z.error=void 0,z.completed=!1,z.task=ee.data;return}case"LOGS":{const y=ee.data;for(const v of y){const F=`${v.createdAt} ${v.body.message}`;if(!v.body.stepId||!((D=z.steps)!=null&&D[v.body.stepId]))continue;const ae=(w=z.stepLogs)==null?void 0:w[v.body.stepId],Fe=(M=z.steps)==null?void 0:M[v.body.stepId];Fe&&v.body.status&&v.body.status!==Fe.status&&(Fe.status=v.body.status,Fe.status==="processing"&&(Fe.startedAt=v.createdAt),["cancelled","completed","failed"].includes(Fe.status)&&(Fe.endedAt=v.createdAt)),ae==null||ae.push(F)}return}case"COMPLETED":{z.completed=!0,z.output=ee.data.body.output,z.error=ee.data.body.error;return}case"CANCELLED":{z.cancelled=!0;return}case"RECOVERED":{for(const y in z.steps)z.steps.hasOwnProperty(y)&&(z.steps[y].startedAt=void 0,z.steps[y].endedAt=void 0,z.steps[y].status="open");return}case"ERROR":{z.error=ee.data,z.loading=!1,z.completed=!0;return}default:return}}const xe=z=>{const ee=(0,l.u)(b.s),[D,w]=(0,A.A)(G,{cancelled:!1,loading:!0,completed:!1,stepLogs:{},steps:{}});return(0,W.useEffect)(()=>{let M=!1,y,v,F=1;const ae=()=>ee.getTask(z).then(Fe=>{if(M)return;w({type:"INIT",data:Fe});const Ae=ee.streamLogs({taskId:z}),X=new Array;function N(){if(X.length){const H=X.splice(0,X.length);w({type:"LOGS",data:H})}}v=setInterval(N,500),y=Ae.subscribe({next:H=>{switch(F=1,H.type){case"log":return X.push(H);case"cancelled":w({type:"CANCELLED"});return;case"completion":N(),w({type:"COMPLETED",data:H});return;case"recovered":w({type:"RECOVERED",data:H});return;default:throw new Error(`Unhandled event type ${H.type} in observer`)}},error:H=>{N();const oe=3;H.message||(H.message=`We cannot connect at the moment, trying again in some seconds... Retrying (${F>oe?oe:F}/${oe} retries)`),setTimeout(()=>{F+=1,ae()},15e3),w({type:"ERROR",data:H})}})},Fe=>{M||w({type:"ERROR",data:Fe})});return ae(),()=>{M=!0,y&&y.unsubscribe(),v&&clearInterval(v)}},[ee,w,z]),D};function ye(z){return{expose(){const ee=()=>null;return attachComponentData(ee,_,z),ee}}}const ut=()=>null;(0,s.h3)(ut,de,!0)},16976:(In,Ct,e)=>{"use strict";e.d(Ct,{E:()=>ht,M:()=>pt,O:()=>et,R:()=>rt,a:()=>xt,b:()=>ze,c:()=>Ie,d:()=>It,e:()=>j,f:()=>Ye,g:()=>Qe,h:()=>Un,i:()=>Dn,j:()=>he,k:()=>V,l:()=>ln,m:()=>Nt,n:()=>da,r:()=>Kt,v:()=>qt});var s=e(29835),l=e(14041),b=e(16249),A=e(46195),W=e(75757),r=e(5124),q=e(11638),Q=e(92651),t=e(95061),pe=e(20577),_=e(73466),de=e(33478),me=e(51253),G=e(63301),xe=e(48543),ye=e(22968),ut=e(12564),z=e(77189),ee=e(22771),D=e(77125),w=e(37197),M=e(72501),y=e(8380),v=e(63177),F=e(3399),ae=e(18690),Fe=e(64947),Ae=e(4321),X=e(58837),N=e(54917),H=e(45516),oe=e(45810),re=e.n(oe),_e=e(29365),tt=e(46423),Ve=e(5951),Ze=e(26343),nt=e(28233),Ge=e(55197),Je=e(91042),Re=e(92399),Le=e(55534),lt=e(25283),Et=e(86868),wt=e(71407),Qt=e(97093);function yt(ct,m){return{schema:{returnValue:(0,v.Ay)(ct),uiOptions:m?(0,v.Ay)(m):void 0},type:null,uiOptionsType:null}}const ue=A.z.record(A.z.string().or(A.z.object({exists:A.z.boolean().optional()})).or(A.z.array(A.z.string()))),xt=yt(A.z.string(),A.z.object({allowedKinds:A.z.array(A.z.string()).optional().describe("DEPRECATED: Use `catalogFilter` instead. List of kinds of entities to derive options from"),defaultKind:A.z.string().optional().describe("The default entity kind. Options of this kind will not be prefixed."),allowArbitraryValues:A.z.boolean().optional().describe("Whether to allow arbitrary user input. Defaults to true"),defaultNamespace:A.z.union([A.z.string(),A.z.literal(!1)]).optional().describe("The default namespace. Options with this namespace will not be prefixed."),catalogFilter:A.z.array(ue).or(ue).optional().describe("List of key-value filter expression for entities")})).schema,ht=ct=>{var m,R,K,le,I;const{onChange:U,schema:{title:Y="Entity",description:we="An entity from the catalog"},required:Oe,uiSchema:ot,rawErrors:Ot,formData:en,idSchema:Zt}=ct,pn=P(ot),mn=(m=ot["ui:options"])==null?void 0:m.defaultKind,kt=((R=ot["ui:options"])==null?void 0:R.defaultNamespace)||void 0,Sn=(0,r.u)(Q.vp),{value:un,loading:$n}=(0,_.A)(async()=>{const gn=["metadata.name","metadata.namespace","kind"],{items:Jt}=await Sn.getEntities(pn?{filter:pn,fields:gn}:{filter:void 0,fields:gn});return Jt}),qn=(le=(K=ot["ui:options"])==null?void 0:K.allowArbitraryValues)!=null?le:!0,na=(0,l.useCallback)(gn=>{try{return(0,Q.SE)((0,s.KU)(gn,{defaultKind:mn,defaultNamespace:kt}),{defaultKind:mn,defaultNamespace:kt})}catch{return gn}},[mn,kt]),kn=(0,l.useCallback)((gn,Jt,vn)=>{if(typeof Jt!="string")U(Jt?(0,s.U2)(Jt):void 0);else if(vn==="blur"||vn==="create-option"){let _n=Jt;try{_n=(0,s.U2)((0,s.KU)(Jt,{defaultKind:mn,defaultNamespace:kt}))}catch{}(en!==Jt||qn)&&U(_n)}},[U,en,mn,kt,qn]),wn=(I=un==null?void 0:un.find(gn=>(0,s.U2)(gn)===en))!=null?I:qn&&en?na(en):"";return(0,l.useEffect)(()=>{(un==null?void 0:un.length)===1&&wn===""&&U((0,s.U2)(un[0]))},[un,U,wn]),l.createElement(t.A,{margin:"normal",required:Oe,error:(Ot==null?void 0:Ot.length)>0&&!en},l.createElement(pe.Ay,{disabled:(un==null?void 0:un.length)===1,id:Zt==null?void 0:Zt.$id,value:wn,loading:$n,onChange:kn,options:un||[],getOptionLabel:gn=>typeof gn=="string"?gn:(0,Q.SE)(gn,{defaultKind:mn,defaultNamespace:kt}),autoSelect:!0,freeSolo:qn,renderInput:gn=>l.createElement(b.A,{...gn,label:Y,margin:"dense",helperText:we,FormHelperTextProps:{margin:"dense",style:{marginLeft:0}},variant:"outlined",required:Oe,InputProps:gn.InputProps})}))};function Ut(ct){return typeof ct=="object"&&ct.exists?W.cr:ct==null?void 0:ct.toString()}function S(ct){const m={};for(const[R,K]of Object.entries(ct))Array.isArray(K)?m[R]=K:m[R]=Ut(K);return m}function P(ct){var m,R;const K=(m=ct["ui:options"])==null?void 0:m.allowedKinds,le=((R=ct["ui:options"])==null?void 0:R.catalogFilter)||K&&{kind:K};if(le)return Array.isArray(le)?le.map(S):S(le)}const j=(ct,m)=>{s.yz.isValidObjectName(ct)||m.addError("Must start and end with an alphanumeric character, and contain only alphanumeric characters, hyphens, underscores, and periods. Maximum length is 63 characters.")},Ie=yt(A.z.string()).schema,ze=ct=>{const{onChange:m,required:R,schema:{title:K="Name",description:le="Unique name of the component"},rawErrors:I,formData:U,uiSchema:{"ui:autofocus":Y},idSchema:we,placeholder:Oe}=ct;return l.createElement(b.A,{id:we==null?void 0:we.$id,label:K,placeholder:Oe,helperText:le,required:R,value:U!=null?U:"",onChange:({target:{value:ot}})=>m(ot),margin:"normal",error:(I==null?void 0:I.length)>0&&!U,inputProps:{autoFocus:Y}})},Qe=yt(A.z.string(),A.z.object({allowedKinds:A.z.array(A.z.string()).default(["Group","User"]).optional().describe("DEPRECATED: Use `catalogFilter` instead. List of kinds of entities to derive options from. Defaults to Group and User"),allowArbitraryValues:A.z.boolean().optional().describe("Whether to allow arbitrary user input. Defaults to true"),defaultNamespace:A.z.union([A.z.string(),A.z.literal(!1)]).optional().describe("The default namespace. Options with this namespace will not be prefixed."),catalogFilter:A.z.array(ue).or(ue).optional().describe("List of key-value filter expression for entities")})).schema,et=ct=>{var m,R,K,le,I;const{schema:{title:U="Owner",description:Y="The owner of the component"},uiSchema:we,...Oe}=ct,ot=(m=we["ui:options"])==null?void 0:m.defaultNamespace,Ot=(R=we["ui:options"])==null?void 0:R.allowedKinds,en=((K=we["ui:options"])==null?void 0:K.catalogFilter)||{kind:Ot||["Group","User"]},Zt={...we,"ui:options":{catalogFilter:en,defaultKind:"Group",allowArbitraryValues:(I=(le=we["ui:options"])==null?void 0:le.allowArbitraryValues)!=null?I:!0,...ot!==void 0?{defaultNamespace:ot}:{}}};return l.createElement(ht,{...Oe,schema:{title:U,description:Y},uiSchema:Zt})},$t=A.z.record(A.z.string().or(A.z.object({exists:A.z.boolean().optional()})).or(A.z.array(A.z.string()))),It=yt(A.z.array(A.z.string()),A.z.object({defaultKind:A.z.string().optional().describe("The default entity kind. Options of this kind will not be prefixed."),allowArbitraryValues:A.z.boolean().optional().describe("Whether to allow arbitrary user input. Defaults to true"),defaultNamespace:A.z.union([A.z.string(),A.z.literal(!1)]).optional().describe("The default namespace. Options with this namespace will not be prefixed."),catalogFilter:A.z.array($t).or($t).optional().describe("List of key-value filter expression for entities")})).schema,pt=ct=>{var m,R,K,le,I;const{onChange:U,schema:{title:Y="Entity",description:we="An entity from the catalog"},required:Oe,uiSchema:ot,rawErrors:Ot,formData:en,idSchema:Zt}=ct,pn=Vt(ot),mn=(m=ot["ui:options"])==null?void 0:m.defaultKind,kt=((R=ot["ui:options"])==null?void 0:R.defaultNamespace)||void 0,Sn=(0,r.u)(Q.vp),{value:un,loading:$n}=(0,_.A)(async()=>{const{items:wn}=await Sn.getEntities(pn?{filter:pn}:void 0);return wn}),qn=(le=(K=ot["ui:options"])==null?void 0:K.allowArbitraryValues)!=null?le:!0,na=(0,l.useCallback)(wn=>{try{return(0,Q.SE)((0,s.KU)(wn,{defaultKind:mn,defaultNamespace:kt}),{defaultKind:mn,defaultNamespace:kt})}catch{return wn}},[mn,kt]),kn=(0,l.useCallback)((wn,gn,Jt)=>{const vn=gn.map(_n=>{if(typeof _n!="string")return _n?(0,s.U2)(_n):void 0;if(Jt==="blur"||Jt==="create-option"){let Aa=_n;try{Aa=(0,s.U2)((0,s.KU)(_n,{defaultKind:mn,defaultNamespace:kt}))}catch{}if(en.includes(_n)||qn)return Aa}}).filter(_n=>_n!==void 0);U(vn)},[U,en,mn,kt,qn]);return(0,l.useEffect)(()=>{(un==null?void 0:un.length)===1&&U([(0,s.U2)(un[0])])},[un,U]),l.createElement(t.A,{margin:"normal",required:Oe,error:(Ot==null?void 0:Ot.length)>0&&!en},l.createElement(pe.Ay,{multiple:!0,filterSelectedOptions:!0,disabled:(un==null?void 0:un.length)===1,id:Zt==null?void 0:Zt.$id,value:(I=un==null?void 0:un.filter(wn=>en&&en.includes((0,s.U2)(wn))))!=null?I:qn&&en?en.map(na):[],loading:$n,onChange:kn,options:un||[],getOptionLabel:wn=>typeof wn=="string"?wn:(0,Q.SE)(wn,{defaultKind:mn,defaultNamespace:kt}),autoSelect:!0,freeSolo:qn,renderInput:wn=>l.createElement(b.A,{...wn,label:Y,margin:"dense",helperText:we,FormHelperTextProps:{margin:"dense",style:{marginLeft:0}},variant:"outlined",required:Oe,InputProps:wn.InputProps})}))},qt=(ct,m)=>{ct.forEach(R=>{try{(0,s.KU)(R)}catch{m.addError(`${R} is not a valid entity ref`)}})};function sn(ct){return typeof ct=="object"&&ct.exists?W.cr:ct==null?void 0:ct.toString()}function an(ct){const m={};for(const[R,K]of Object.entries(ct))Array.isArray(K)?m[R]=K:m[R]=sn(K);return m}function Vt(ct){var m;const R=(m=ct["ui:options"])==null?void 0:m.catalogFilter;if(R)return Array.isArray(R)?R.map(an):an(R)}const Ye=yt(A.z.string(),A.z.object({allowedHosts:A.z.array(A.z.string()).optional().describe("List of allowed SCM platform hosts"),allowedOrganizations:A.z.array(A.z.string()).optional().describe("List of allowed organizations in the given SCM platform"),allowedOwners:A.z.array(A.z.string()).optional().describe("List of allowed owners in the given SCM platform"),allowedProjects:A.z.array(A.z.string()).optional().describe("List of allowed projects in the given SCM platform"),allowedRepos:A.z.array(A.z.string()).optional().describe("List of allowed repos in the given SCM platform"),requestUserCredentials:A.z.object({secretsKey:A.z.string().describe("Key used within the template secrets context to store the credential"),additionalScopes:A.z.object({gitea:A.z.array(A.z.string()).optional().describe("Additional Gitea scopes to request"),gerrit:A.z.array(A.z.string()).optional().describe("Additional Gerrit scopes to request"),github:A.z.array(A.z.string()).optional().describe("Additional GitHub scopes to request"),gitlab:A.z.array(A.z.string()).optional().describe("Additional GitLab scopes to request"),bitbucket:A.z.array(A.z.string()).optional().describe("Additional BitBucket scopes to request"),azure:A.z.array(A.z.string()).optional().describe("Additional Azure scopes to request")}).optional().describe("Additional permission scopes to request")}).optional().describe("If defined will request user credentials to auth against the given SCM platform")})).schema,Kt=(ct,m,R)=>{var K,le;try{const{host:I,searchParams:U}=new URL(`https://${ct}`),Y=R.apiHolder.get(de.YT);I?(((K=Y==null?void 0:Y.byHost(I))==null?void 0:K.type)==="bitbucket"?(I==="bitbucket.org"&&!U.get("workspace")&&m.addError("Incomplete repository location provided, workspace not provided"),U.get("project")||m.addError("Incomplete repository location provided, project not provided")):((le=Y==null?void 0:Y.byHost(I))==null?void 0:le.type)!=="gerrit"&&(U.get("owner")||m.addError("Incomplete repository location provided, owner not provided")),U.get("repo")||m.addError("Incomplete repository location provided, repo not provided")):m.addError("Incomplete repository location provided, host not provided")}catch{m.addError("Unable to parse the Repository URL")}},jt=ct=>{const{allowedOwners:m=[],rawErrors:R,state:K,onChange:le}=ct,I=m?m.map(Y=>({label:Y,value:Y})):[{label:"Loading...",value:"loading"}],{owner:U}=K;return l.createElement(l.Fragment,null,l.createElement(t.A,{margin:"normal",required:!0,error:(R==null?void 0:R.length)>0&&!U},m!=null&&m.length?l.createElement(ye.l6,{native:!0,label:"Owner Available",onChange:Y=>le({owner:String(Array.isArray(Y)?Y[0]:Y)}),disabled:m.length===1,selected:U,items:I}):l.createElement(l.Fragment,null,l.createElement(xe.A,{htmlFor:"ownerInput"},"Owner"),l.createElement(G.A,{id:"ownerInput",onChange:Y=>le({owner:Y.target.value}),value:U})),l.createElement(me.A,null,"The organization, user or project that this repo will belong to")))},Wt=ct=>{const{allowedOwners:m=[],state:R,onChange:K,rawErrors:le}=ct,I=m?m.map(Y=>({label:Y,value:Y})):[{label:"Loading...",value:"loading"}],{owner:U}=R;return l.createElement(l.Fragment,null,l.createElement(t.A,{margin:"normal",required:!0,error:(le==null?void 0:le.length)>0&&!U},m!=null&&m.length?l.createElement(ye.l6,{native:!0,label:"Owner Available",onChange:Y=>K({owner:String(Array.isArray(Y)?Y[0]:Y)}),disabled:m.length===1,selected:U,items:I}):l.createElement(l.Fragment,null,l.createElement(xe.A,{htmlFor:"ownerInput"},"Owner"),l.createElement(G.A,{id:"ownerInput",onChange:Y=>K({owner:Y.target.value}),value:U})),l.createElement(me.A,null,"Gitea namespace where this repository will belong to. It can be the name of organization, group, subgroup, user, or the project.")))},ft=ct=>{const{allowedOwners:m=[],state:R,onChange:K,rawErrors:le}=ct,I=m?m.map(Y=>({label:Y,value:Y})):[{label:"Loading...",value:"loading"}],{owner:U}=R;return l.createElement(l.Fragment,null,l.createElement(t.A,{margin:"normal",required:!0,error:(le==null?void 0:le.length)>0&&!U},m!=null&&m.length?l.createElement(ye.l6,{native:!0,label:"Owner Available",onChange:Y=>K({owner:String(Array.isArray(Y)?Y[0]:Y)}),disabled:m.length===1,selected:U,items:I}):l.createElement(l.Fragment,null,l.createElement(xe.A,{htmlFor:"ownerInput"},"Owner"),l.createElement(G.A,{id:"ownerInput",onChange:Y=>K({owner:Y.target.value}),value:U})),l.createElement(me.A,null,"GitLab namespace where this repository will belong to. It can be the name of organization, group, subgroup, user, or the project.")))},Ln=ct=>{const{allowedOrganizations:m=[],allowedOwners:R=[],rawErrors:K,state:le,onChange:I}=ct,U=m?m.map(ot=>({label:ot,value:ot})):[{label:"Loading...",value:"loading"}],Y=R?R.map(ot=>({label:ot,value:ot})):[{label:"Loading...",value:"loading"}],{organization:we,owner:Oe}=le;return l.createElement(l.Fragment,null,l.createElement(t.A,{margin:"normal",required:!0,error:(K==null?void 0:K.length)>0&&!we},m!=null&&m.length?l.createElement(ye.l6,{native:!0,label:"Organization",onChange:ot=>I({organization:String(Array.isArray(ot)?ot[0]:ot)}),disabled:m.length===1,selected:we,items:U}):l.createElement(l.Fragment,null,l.createElement(xe.A,{htmlFor:"orgInput"},"Organization"),l.createElement(G.A,{id:"orgInput",onChange:ot=>I({organization:ot.target.value}),value:we})),l.createElement(me.A,null,"The Organization that this repo will belong to")),l.createElement(t.A,{margin:"normal",required:!0,error:(K==null?void 0:K.length)>0&&!Oe},R!=null&&R.length?l.createElement(ye.l6,{native:!0,label:"Owner",onChange:ot=>I({owner:String(Array.isArray(ot)?ot[0]:ot)}),disabled:R.length===1,selected:Oe,items:Y}):l.createElement(l.Fragment,null,l.createElement(xe.A,{htmlFor:"ownerInput"},"Project"),l.createElement(G.A,{id:"ownerInput",onChange:ot=>I({owner:ot.target.value}),value:Oe})),l.createElement(me.A,null,"The Project that this repo will belong to")))},dn=ct=>{const{allowedOwners:m=[],allowedProjects:R=[],onChange:K,rawErrors:le,state:I}=ct,{host:U,workspace:Y,project:we}=I,Oe=m?m==null?void 0:m.map(Ot=>({label:Ot,value:Ot})):[],ot=R?R==null?void 0:R.map(Ot=>({label:Ot,value:Ot})):[];return(0,l.useEffect)(()=>{U==="bitbucket.org"&&m.length&&K({workspace:m[0]})},[m,U,K]),l.createElement(l.Fragment,null,U==="bitbucket.org"&&l.createElement(t.A,{margin:"normal",required:!0,error:(le==null?void 0:le.length)>0&&!Y},m!=null&&m.length?l.createElement(ye.l6,{native:!0,label:"Allowed Workspaces",onChange:Ot=>K({workspace:String(Array.isArray(Ot)?Ot[0]:Ot)}),disabled:m.length===1,selected:Y,items:Oe}):l.createElement(l.Fragment,null,l.createElement(xe.A,{htmlFor:"workspaceInput"},"Workspace"),l.createElement(G.A,{id:"workspaceInput",onChange:Ot=>K({workspace:Ot.target.value}),value:Y})),l.createElement(me.A,null,"The Workspace that this repo will belong to")),l.createElement(t.A,{margin:"normal",required:!0,error:(le==null?void 0:le.length)>0&&!we},R!=null&&R.length?l.createElement(ye.l6,{native:!0,label:"Allowed Projects",onChange:Ot=>K({project:String(Array.isArray(Ot)?Ot[0]:Ot)}),disabled:R.length===1,selected:we,items:ot}):l.createElement(l.Fragment,null,l.createElement(xe.A,{htmlFor:"projectInput"},"Project"),l.createElement(G.A,{id:"projectInput",onChange:Ot=>K({project:Ot.target.value}),value:we})),l.createElement(me.A,null,"The Project that this repo will belong to")))},Xt=ct=>{const{onChange:m,rawErrors:R,state:K}=ct,{workspace:le,owner:I}=K;return l.createElement(l.Fragment,null,l.createElement(t.A,{margin:"normal",error:(R==null?void 0:R.length)>0&&!le},l.createElement(xe.A,{htmlFor:"ownerInput"},"Owner"),l.createElement(G.A,{id:"ownerInput",onChange:U=>m({owner:U.target.value}),value:I}),l.createElement(me.A,null,"The owner of the project (optional)")),l.createElement(t.A,{margin:"normal",required:!0,error:(R==null?void 0:R.length)>0&&!le},l.createElement(xe.A,{htmlFor:"parentInput"},"Parent"),l.createElement(G.A,{id:"parentInput",onChange:U=>m({workspace:U.target.value}),value:le}),l.createElement(me.A,null,"The project parent that the repo will belong to")))},An=ct=>{const{host:m,hosts:R,onChange:K,rawErrors:le}=ct,I=(0,r.u)(ut.s),{value:{integrations:U}={integrations:[]},loading:Y}=(0,_.A)(async()=>await I.getIntegrationsList({allowedHosts:R!=null?R:[]}));(0,l.useEffect)(()=>{m||(R!=null&&R.length?K(R[0]):U!=null&&U.length&&K(U[0].host))},[R,m,K,U]);const we=U?U.filter(Oe=>R!=null&&R.length?R==null?void 0:R.includes(Oe.host):!0).map(Oe=>({label:Oe.title,value:Oe.host})):[{label:"Loading...",value:"loading"}];return Y?l.createElement(ye.ke,null):l.createElement(l.Fragment,null,l.createElement(t.A,{margin:"normal",required:!0,error:(le==null?void 0:le.length)>0&&!m},l.createElement(ye.l6,{native:!0,disabled:(R==null?void 0:R.length)===1,label:"Host",onChange:Oe=>K(String(Array.isArray(Oe)?Oe[0]:Oe)),selected:m,items:we,"data-testid":"host-select"}),l.createElement(me.A,null,"The host where the repository will be created")))},Xe=ct=>{const{repoName:m,allowedRepos:R,onChange:K,rawErrors:le}=ct;(0,l.useEffect)(()=>{m||R!=null&&R.length&&K(R[0])},[R,m,K]);const I=R?R.map(U=>({label:U,value:U})):[{label:"Loading...",value:"loading"}];return l.createElement(l.Fragment,null,l.createElement(t.A,{margin:"normal",required:!0,error:(le==null?void 0:le.length)>0&&!m},R!=null&&R.length?l.createElement(ye.l6,{native:!0,label:"Repositories Available",onChange:U=>K(String(Array.isArray(U)?U[0]:U)),disabled:R.length===1,selected:m,items:I}):l.createElement(l.Fragment,null,l.createElement(xe.A,{htmlFor:"repoNameInput"},"Repository"),l.createElement(G.A,{id:"repoNameInput",onChange:U=>K(String(U.target.value)),value:m})),l.createElement(me.A,null,"The name of the repository")))};function mt(ct){if(!ct.host)return;const m=new URLSearchParams;return ct.owner&&m.set("owner",ct.owner),ct.repoName&&m.set("repo",ct.repoName),ct.organization&&m.set("organization",ct.organization),ct.workspace&&m.set("workspace",ct.workspace),ct.project&&m.set("project",ct.project),`${ct.host}?${m.toString()}`}function Dt(ct){let m="",R="",K="",le="",I="",U="";try{if(ct){const Y=new URL(`https://${ct}`);m=Y.host,R=Y.searchParams.get("owner")||"",K=Y.searchParams.get("repo")||"",le=Y.searchParams.get("organization")||"",I=Y.searchParams.get("workspace")||"",U=Y.searchParams.get("project")||""}}catch{}return{host:m,owner:R,repoName:K,organization:le,workspace:I,project:U}}const rt=ct=>{var m,R;const{uiSchema:K,onChange:le,rawErrors:I,formData:U,schema:Y}=ct,[we,Oe]=(0,l.useState)(Dt(U)),ot=(0,r.u)(de.YT),Ot=(0,r.u)(de.$J),{secrets:en,setSecrets:Zt}=(0,ut.u)(),pn=(0,l.useMemo)(()=>{var Jt,vn;return(vn=(Jt=K==null?void 0:K["ui:options"])==null?void 0:Jt.allowedHosts)!=null?vn:[]},[K]),mn=(0,l.useMemo)(()=>{var Jt,vn;return(vn=(Jt=K==null?void 0:K["ui:options"])==null?void 0:Jt.allowedOrganizations)!=null?vn:[]},[K]),kt=(0,l.useMemo)(()=>{var Jt,vn;return(vn=(Jt=K==null?void 0:K["ui:options"])==null?void 0:Jt.allowedOwners)!=null?vn:[]},[K]),Sn=(0,l.useMemo)(()=>{var Jt,vn;return(vn=(Jt=K==null?void 0:K["ui:options"])==null?void 0:Jt.allowedProjects)!=null?vn:[]},[K]),un=(0,l.useMemo)(()=>{var Jt,vn;return(vn=(Jt=K==null?void 0:K["ui:options"])==null?void 0:Jt.allowedRepos)!=null?vn:[]},[K]),{owner:$n,organization:qn,project:na,repoName:kn}=we;(0,l.useEffect)(()=>{le(mt(we))},[we,le]),(0,l.useEffect)(()=>{mn.length>0&&!qn&&Oe(Jt=>({...Jt,organization:mn[0]}))},[Oe,mn,qn]),(0,l.useEffect)(()=>{kt.length>0&&!$n&&Oe(Jt=>({...Jt,owner:kt[0]}))},[Oe,kt,$n]),(0,l.useEffect)(()=>{Sn.length>0&&!na&&Oe(Jt=>({...Jt,project:Sn[0]}))},[Oe,Sn,na]),(0,l.useEffect)(()=>{un.length>0&&!kn&&Oe(Jt=>({...Jt,repoName:un[0]}))},[Oe,un,kn]);const wn=(0,l.useCallback)(Jt=>{Oe(vn=>({...vn,...Jt}))},[Oe]);(0,ee.A)(async()=>{var Jt;const{requestUserCredentials:vn}=(Jt=K==null?void 0:K["ui:options"])!=null?Jt:{},_n=we.owner?we.owner:we.project;if(!vn||!(we.host&&_n&&we.repoName)||en[vn.secretsKey])return;const[Aa,Oa]=[we.host,we.repoName].map(encodeURIComponent),{token:J}=await Ot.getCredentials({url:`https://${Aa}/${_n}/${Oa}`,additionalScope:{repoWrite:!0,customScopes:vn.additionalScopes}});Zt({[vn.secretsKey]:J})},500,[we,K]);const gn=(R=we.host&&((m=ot.byHost(we.host))==null?void 0:m.type))!=null?R:null;return l.createElement(l.Fragment,null,Y.title&&l.createElement(D.A,{my:1},l.createElement(M.A,{variant:"h5"},Y.title),l.createElement(w.A,null)),Y.description&&l.createElement(M.A,{variant:"body1"},Y.description),l.createElement(An,{host:we.host,hosts:pn,onChange:Jt=>Oe(vn=>({...vn,host:Jt})),rawErrors:I}),gn==="github"&&l.createElement(jt,{allowedOwners:kt,onChange:wn,rawErrors:I,state:we}),gn==="gitea"&&l.createElement(Wt,{allowedOwners:kt,allowedRepos:un,rawErrors:I,state:we,onChange:wn}),gn==="gitlab"&&l.createElement(ft,{allowedOwners:kt,rawErrors:I,state:we,onChange:wn}),gn==="bitbucket"&&l.createElement(dn,{allowedOwners:kt,allowedProjects:Sn,rawErrors:I,state:we,onChange:wn}),gn==="azure"&&l.createElement(Ln,{allowedOrganizations:mn,allowedOwners:kt,rawErrors:I,state:we,onChange:wn}),gn==="gerrit"&&l.createElement(Xt,{rawErrors:I,state:we,onChange:wn}),l.createElement(Xe,{repoName:we.repoName,allowedRepos:un,onChange:Jt=>Oe(vn=>({...vn,repoName:Jt})),rawErrors:I}))},V=yt(A.z.string(),A.z.object({allowedKinds:A.z.array(A.z.string()).optional().describe("DEPRECATED: Use `catalogFilter` instead. List of kinds of entities to derive options from"),defaultKind:A.z.string().optional().describe("The default entity kind. Options of this kind will not be prefixed."),allowArbitraryValues:A.z.boolean().optional().describe("Whether to allow arbitrary user input. Defaults to true"),defaultNamespace:A.z.union([A.z.string(),A.z.literal(!1)]).optional().describe("The default namespace. Options with this namespace will not be prefixed."),catalogFilter:A.z.array(ue).or(ue).optional().describe("List of key-value filter expression for entities")})).schema,he=ct=>{const{schema:{title:m="Entity",description:R="An entity from the catalog"},uiSchema:K,required:le}=ct,I=(0,r.u)(r.t),{loading:U,value:Y}=(0,_.A)(async()=>(await I.getBackstageIdentity()).ownershipEntityRefs);if(U)return l.createElement(pe.Ay,{loading:U,renderInput:Oe=>l.createElement(b.A,{...Oe,label:m,margin:"dense",helperText:R,FormHelperTextProps:{margin:"dense",style:{marginLeft:0}},variant:"outlined",required:le,InputProps:Oe.InputProps}),options:[]});const we=Ee(K,Y);return l.createElement(ht,{...ct,uiSchema:we})};function Ee(ct,m){const R=(ct==null?void 0:ct["ui:options"])||{},K=R.allowedKinds;return{"ui:options":{catalogFilter:{...R.catalogFilter,...K?{kind:K,[`relations.${s.vv}`]:m||[]}:{[`relations.${s.vv}`]:m||[]}}}}}const Nt=yt(A.z.array(A.z.string()),A.z.object({kinds:A.z.array(A.z.string()).optional().describe("List of kinds of entities to derive tags from"),showCounts:A.z.boolean().optional().describe("Whether to show usage counts per tag"),helperText:A.z.string().optional().describe("Helper text to display")})).schema,ln=ct=>{var m,R,K;const{formData:le,onChange:I,uiSchema:U}=ct,Y=(0,r.u)(Q.vp),[we,Oe]=(0,l.useState)([]),[ot,Ot]=(0,l.useState)(""),[en,Zt]=(0,l.useState)(!1),pn=(0,s.tj)().isValidTag,mn=(m=U["ui:options"])==null?void 0:m.kinds,kt=(R=U["ui:options"])==null?void 0:R.showCounts,Sn=(K=U["ui:options"])==null?void 0:K.helperText,{loading:un,value:$n}=(0,_.A)(async()=>{const na="metadata.tags",kn={facets:[na]};mn&&(kn.filter={kind:mn});const{facets:wn}=await Y.getEntityFacets(kn),gn=Object.fromEntries(wn[na].map(({value:Jt,count:vn})=>[Jt,vn]));return Oe(Object.keys(gn).sort((Jt,vn)=>kt?gn[vn]-gn[Jt]:Jt.localeCompare(vn))),gn}),qn=(na,kn)=>{let wn=!1,gn=!1;const Jt=le||[];if(kn!=null&&kn.length&&Jt.length<kn.length){const vn=kn[kn.length-1]=kn[kn.length-1].toLocaleLowerCase("en-US").trim();wn=!pn(vn),gn=Jt.indexOf(vn)!==-1}Zt(wn),Ot(wn?ot:""),!wn&&!gn&&I(kn||[])};return(0,y.A)(()=>I(le||[])),l.createElement(t.A,{margin:"normal"},l.createElement(pe.Ay,{multiple:!0,freeSolo:!0,filterSelectedOptions:!0,onChange:qn,value:le||[],inputValue:ot,loading:un,options:we,ChipProps:{size:"small"},renderOption:na=>kt?`${na} (${$n==null?void 0:$n[na]})`:na,renderInput:na=>l.createElement(b.A,{...na,label:"Tags",onChange:kn=>Ot(kn.target.value),error:en,helperText:Sn!=null?Sn:"Add any relevant tags, hit 'Enter' to add new tags. Valid format: [a-z0-9+#] separated by [-], at most 63 characters"})}))},Dn=yt(A.z.string(),A.z.object({title:A.z.string().default("Group").describe("Group"),description:A.z.string().default("A group you are part of").describe("The group to which the entity belongs")})).schema,Un=ct=>{const{schema:{title:m,description:R},required:K,rawErrors:le,onChange:I,formData:U}=ct,Y=(0,r.u)(r.t),we=(0,r.u)(Q.vp),Oe=(0,r.u)(r.r),[ot,Ot]=(0,l.useState)([]);(0,_.A)(async()=>{const{userEntityRef:pn}=await Y.getBackstageIdentity();if(!pn){Oe.post(new F.m_("No user entity ref found"));return}const{items:mn}=await we.getEntities({filter:{kind:"Group","relations.hasMember":[pn]}}),kt=mn.filter(Sn=>!!Sn).map(Sn=>{var un;return{label:(un=Sn.metadata.title)!=null?un:Sn.metadata.name,ref:(0,s.U2)(Sn)}});Ot(kt)});const en=(pn,mn)=>{var kt;I((kt=mn==null?void 0:mn.ref)!=null?kt:"")},Zt=(ot==null?void 0:ot.find(pn=>pn.ref===U))||null;return l.createElement(t.A,{margin:"normal",required:K,error:(le==null?void 0:le.length)>0},l.createElement(pe.Ay,{id:"OwnershipEntityRefPicker-dropdown",options:ot||[],value:Zt,onChange:en,getOptionLabel:pn=>pn.label,renderInput:pn=>l.createElement(b.A,{...pn,label:m,margin:"dense",helperText:R,FormHelperTextProps:{margin:"dense",style:{marginLeft:0}},variant:"outlined",required:K})}))},Vn=(0,X.A)(()=>({button:{color:({fontColor:ct})=>ct}})),Pn=ct=>{const{cancelEnabled:m,logsVisible:R,buttonBarVisible:K,onStartOver:le,onToggleLogs:I,onToggleButtonBar:U,taskId:Y}=ct,{getPageTheme:we}=(0,N.A)(),Oe=we({themeId:"website"}),ot=Vn({fontColor:Oe.fontColor}),Ot=(0,r.u)(ut.s),[en,Zt]=(0,l.useState)(),[{status:pn},{execute:mn}]=(0,Je.Y)(async()=>{Y&&await Ot.cancelTask(Y)});return l.createElement(l.Fragment,null,l.createElement(_e.A,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true",onClick:kt=>{Zt(kt.currentTarget)},"data-testid":"menu-button",className:ot.button},l.createElement(wt.A,null)),l.createElement(Ge.Ay,{open:!!en,onClose:()=>Zt(void 0),anchorEl:en,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},l.createElement(nt.A,null,l.createElement(Ze.A,{onClick:()=>I==null?void 0:I(!R)},l.createElement(tt.A,null,l.createElement(lt.A,{fontSize:"small"})),l.createElement(Ve.A,{primary:R?"Hide Logs":"Show Logs"})),l.createElement(Ze.A,{onClick:()=>U==null?void 0:U(!K)},l.createElement(tt.A,null,l.createElement(Et.A,{fontSize:"small"})),l.createElement(Ve.A,{primary:K?"Hide Button Bar":"Show Button Bar"})),l.createElement(Ze.A,{onClick:le},l.createElement(tt.A,null,l.createElement(Le.A,{fontSize:"small"})),l.createElement(Ve.A,{primary:"Start Over"})),l.createElement(Ze.A,{onClick:mn,disabled:!m||pn!=="not-executed","data-testid":"cancel-task"},l.createElement(tt.A,null,l.createElement(Re.A,{fontSize:"small"})),l.createElement(Ve.A,{primary:"Cancel"})))))},Yn=(0,X.A)(ct=>({contentWrapper:{display:"flex",flexDirection:"column"},buttonBar:{display:"flex",flexDirection:"row",justifyContent:"right"},cancelButton:{marginRight:ct.spacing(1)},logsVisibilityButton:{marginRight:ct.spacing(1)}})),da=ct=>{var m,R,K,le,I,U,Y,we;const{taskId:Oe}=(0,ae.g)(),ot=(0,q.Sf)(H.s),Ot=(0,ae.Zp)(),en=(0,r.u)(ut.s),Zt=(0,z.TA)(Oe),pn=Yn(),mn=(0,l.useMemo)(()=>{var _n,Aa;return(Aa=(_n=Zt.task)==null?void 0:_n.spec.steps.map(Oa=>{var J;return{...Oa,...(J=Zt==null?void 0:Zt.steps)==null?void 0:J[Oa.id]}}))!=null?Aa:[]},[Zt]),[kt,Sn]=(0,l.useState)(!1),[un,$n]=(0,l.useState)(!0);(0,l.useEffect)(()=>{Zt.error&&Sn(!0)},[Zt.error]),(0,l.useEffect)(()=>{Zt.completed&&!Zt.error&&$n(!1)},[Zt.error,Zt.completed]);const qn=(0,l.useMemo)(()=>{for(let _n=mn.length-1;_n>=0;_n--)if(mn[_n].status!=="open")return _n;return 0},[mn]),na=(0,l.useCallback)(()=>{var _n,Aa,Oa,J,ge,ke;const{namespace:it,name:St}=(J=(Oa=(Aa=(_n=Zt.task)==null?void 0:_n.spec.templateInfo)==null?void 0:Aa.entity)==null?void 0:Oa.metadata)!=null?J:{},At=(ke=(ge=Zt.task)==null?void 0:ge.spec.parameters)!=null?ke:{};!it||!St||Ot({pathname:ot({namespace:it,templateName:St}),search:`?${re().stringify({formData:JSON.stringify(At)})}`})},[Ot,(m=Zt.task)==null?void 0:m.spec.parameters,(le=(K=(R=Zt.task)==null?void 0:R.spec.templateInfo)==null?void 0:K.entity)==null?void 0:le.metadata,ot]),[{status:kn},{execute:wn}]=(0,Je.Y)(async()=>{Oe&&await en.cancelTask(Oe)}),gn=(I=ct.TemplateOutputsComponent)!=null?I:Qt.KV,Jt=(we=(Y=(U=Zt.task)==null?void 0:U.spec.templateInfo)==null?void 0:Y.entity)==null?void 0:we.metadata.name,vn=!(Zt.cancelled||Zt.completed);return l.createElement(ye.YW,{themeId:"website"},l.createElement(ye.Y9,{pageTitleOverride:`Run of ${Jt}`,title:l.createElement("div",null,"Run of ",l.createElement("code",null,Jt)),subtitle:`Task ${Oe}`},l.createElement(Pn,{cancelEnabled:vn,logsVisible:kt,buttonBarVisible:un,onStartOver:na,onToggleLogs:Sn,onToggleButtonBar:$n,taskId:Oe})),l.createElement(ye.UC,{className:pn.contentWrapper},Zt.error?l.createElement(D.A,{paddingBottom:2},l.createElement(ye.bJ,{error:Zt.error,titleFormat:"markdown",title:Zt.error.message})):null,l.createElement(D.A,{paddingBottom:2},l.createElement(Qt.lN,{steps:mn,activeStep:qn,isComplete:Zt.completed,isError:!!Zt.error})),l.createElement(gn,{output:Zt.output}),un?l.createElement(D.A,{paddingBottom:2},l.createElement(Ae.A,null,l.createElement(D.A,{padding:2},l.createElement("div",{className:pn.buttonBar},l.createElement(Fe.A,{className:pn.cancelButton,disabled:!vn||kn!=="not-executed",onClick:wn,"data-testid":"cancel-button"},"Cancel"),l.createElement(Fe.A,{className:pn.logsVisibilityButton,color:"primary",variant:"outlined",onClick:()=>Sn(!kt)},kt?"Hide Logs":"Show Logs"),l.createElement(Fe.A,{variant:"contained",color:"primary",disabled:vn,onClick:na},"Start Over"))))):null,kt?l.createElement(D.A,{paddingBottom:2,height:"100%"},l.createElement(Ae.A,{style:{height:"100%"}},l.createElement(D.A,{padding:2,height:"100%"},l.createElement(Qt.g_,{logs:Zt.stepLogs})))):null))}},45516:(In,Ct,e)=>{"use strict";e.d(Ct,{S:()=>me,a:()=>z,b:()=>D,c:()=>ee,d:()=>G,e:()=>w,r:()=>ye,s:()=>ut,v:()=>xe});var s=e(29835),l=e(3399),b=e(45810),A=e.n(b),W=e(96403),r=e.n(W),q=e(4237),Q=e.n(q),t=e(11638),pe=Object.defineProperty,_=(M,y,v)=>y in M?pe(M,y,{enumerable:!0,configurable:!0,writable:!0,value:v}):M[y]=v,de=(M,y,v)=>(_(M,typeof y!="symbol"?y+"":y,v),v);class me{constructor(y){de(this,"discoveryApi"),de(this,"scmIntegrationsApi"),de(this,"fetchApi"),de(this,"identityApi"),de(this,"useLongPollingLogs");var v,F;this.discoveryApi=y.discoveryApi,this.fetchApi=(v=y.fetchApi)!=null?v:{fetch},this.scmIntegrationsApi=y.scmIntegrationsApi,this.useLongPollingLogs=(F=y.useLongPollingLogs)!=null?F:!1,this.identityApi=y.identityApi}async listTasks(y){if(!this.identityApi)throw new Error("IdentityApi is not available in the ScaffolderClient, please pass through the IdentityApi to the ScaffolderClient constructor in order to use the listTasks method");const v=await this.discoveryApi.getBaseUrl("scaffolder"),{userEntityRef:F}=await this.identityApi.getBackstageIdentity(),ae=A().stringify(y.filterByOwnership==="owned"?{createdBy:F}:{}),Fe=await this.fetchApi.fetch(`${v}/v2/tasks?${ae}`);if(!Fe.ok)throw await l.o3.fromResponse(Fe);return await Fe.json()}async getIntegrationsList(y){return{integrations:[...this.scmIntegrationsApi.azure.list(),...this.scmIntegrationsApi.bitbucket.list().filter(F=>!this.scmIntegrationsApi.bitbucketCloud.byHost(F.config.host)&&!this.scmIntegrationsApi.bitbucketServer.byHost(F.config.host)),...this.scmIntegrationsApi.bitbucketCloud.list(),...this.scmIntegrationsApi.bitbucketServer.list(),...this.scmIntegrationsApi.gerrit.list(),...this.scmIntegrationsApi.gitea.list(),...this.scmIntegrationsApi.github.list(),...this.scmIntegrationsApi.gitlab.list()].map(F=>({type:F.type,title:F.title,host:F.config.host})).filter(F=>y.allowedHosts.includes(F.host))}}async getTemplateParameterSchema(y){const{namespace:v,kind:F,name:ae}=(0,s.KU)(y,{defaultKind:"template"}),Fe=await this.discoveryApi.getBaseUrl("scaffolder"),Ae=[v,F,ae].map(oe=>encodeURIComponent(oe)).join("/"),X=`${Fe}/v2/templates/${Ae}/parameter-schema`,N=await this.fetchApi.fetch(X);if(!N.ok)throw await l.o3.fromResponse(N);return await N.json()}async scaffold(y){const{templateRef:v,values:F,secrets:ae={}}=y,Fe=`${await this.discoveryApi.getBaseUrl("scaffolder")}/v2/tasks`,Ae=await this.fetchApi.fetch(Fe,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({templateRef:v,values:{...F},secrets:ae})});if(Ae.status!==201){const N=`${Ae.status} ${Ae.statusText}`,H=await Ae.text();throw new Error(`Backend request failed, ${N} ${H.trim()}`)}const{id:X}=await Ae.json();return{taskId:X}}async getTask(y){const F=`${await this.discoveryApi.getBaseUrl("scaffolder")}/v2/tasks/${encodeURIComponent(y)}`,ae=await this.fetchApi.fetch(F);if(!ae.ok)throw await l.o3.fromResponse(ae);return await ae.json()}streamLogs(y){return this.useLongPollingLogs?this.streamLogsPolling(y):this.streamLogsEventStream(y)}async dryRun(y){const v=await this.discoveryApi.getBaseUrl("scaffolder"),F=await this.fetchApi.fetch(`${v}/v2/dry-run`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({template:y.template,values:y.values,secrets:y.secrets,directoryContents:y.directoryContents})});if(!F.ok)throw await l.o3.fromResponse(F);return F.json()}streamLogsEventStream({taskId:y,after:v}){return new(r())(F=>{var ae;const Fe=new URLSearchParams;v!==void 0&&Fe.set("after",String(Number(v))),Promise.all([this.discoveryApi.getBaseUrl("scaffolder"),(ae=this.identityApi)==null?void 0:ae.getCredentials()]).then(([Ae,X])=>{const N=`${Ae}/v2/tasks/${encodeURIComponent(y)}/eventstream`,H=re=>{if(re.data)try{F.next(JSON.parse(re.data))}catch(_e){F.error(_e)}},oe=new q.EventSourcePolyfill(N,{withCredentials:!0,headers:X!=null&&X.token?{Authorization:`Bearer ${X.token}`}:{}});oe.addEventListener("log",H),oe.addEventListener("recovered",H),oe.addEventListener("cancelled",H),oe.addEventListener("completion",re=>{H(re),oe.close(),F.complete()}),oe.addEventListener("error",re=>{F.error(re)})},Ae=>{F.error(Ae)})})}streamLogsPolling({taskId:y,after:v}){let F=v;return new(r())(ae=>{this.discoveryApi.getBaseUrl("scaffolder").then(async Fe=>{for(;!ae.closed;){const Ae=`${Fe}/v2/tasks/${encodeURIComponent(y)}/events?${A().stringify({after:F})}`,X=await this.fetchApi.fetch(Ae);if(!X.ok){await new Promise(H=>setTimeout(H,1e3));continue}const N=await X.json();for(const H of N)if(F=Number(H.id),ae.next(H),H.type==="completion"){ae.complete();return}}})})}async listActions(){const y=await this.discoveryApi.getBaseUrl("scaffolder"),v=await this.fetchApi.fetch(`${y}/v2/actions`);if(!v.ok)throw await l.o3.fromResponse(v);return await v.json()}async cancelTask(y){const F=`${await this.discoveryApi.getBaseUrl("scaffolder")}/v2/tasks/${encodeURIComponent(y)}/cancel`,ae=await this.fetchApi.fetch(F,{method:"POST"});if(!ae.ok)throw await l.o3.fromResponse(ae);return await ae.json()}}const G=(0,t.Il)({id:"register-component",optional:!0}),xe=(0,t.Il)({id:"view-techdoc",optional:!0,params:["namespace","kind","name"]}),ye=(0,t.HM)({id:"scaffolder"});(0,t.Vb)({id:"scaffolder/legacy/selected-template",parent:ye,path:"/templates/:templateName"});const ut=(0,t.Vb)({id:"scaffolder/selected-template",parent:ye,path:"/templates/:namespace/:templateName"}),z=(0,t.Vb)({id:"scaffolder/task",parent:ye,path:"/tasks/:taskId"}),ee=(0,t.Vb)({id:"scaffolder/list-tasks",parent:ye,path:"/tasks"}),D=(0,t.Vb)({id:"scaffolder/actions",parent:ye,path:"/actions"}),w=(0,t.Vb)({id:"scaffolder/edit",parent:ye,path:"/edit"})},77587:(In,Ct,e)=>{"use strict";e.d(Ct,{Te:()=>z,r6:()=>F});var s=e(45516),l=e(33478),b=e(12564),A=e(77189),W=e(16976),r=e(11638),q=e(5124),Q=e(14041),t=e(56005),pe=e.n(t),_=e(44148),de=e(41260),me=e(96403),G=e.n(me),xe=e(4237),ye=e.n(xe),ut=e(63177);const z=(0,r.i1)({id:"scaffolder",apis:[(0,r.bW)({api:b.s,deps:{discoveryApi:q.q,scmIntegrationsApi:l.YT,fetchApi:q.s,identityApi:q.t},factory:({discoveryApi:nt,scmIntegrationsApi:Ge,fetchApi:Je,identityApi:Re})=>new s.S({discoveryApi:nt,scmIntegrationsApi:Ge,fetchApi:Je,identityApi:Re})})],routes:{root:s.r,selectedTemplate:s.s,ongoingTask:s.a,actions:s.b,listTasks:s.c,edit:s.e},externalRoutes:{registerComponent:s.d,viewTechDoc:s.v}}),ee=z.provide((0,A.zD)({component:W.E,name:"EntityPicker",schema:W.a})),D=z.provide((0,A.zD)({component:W.b,name:"EntityNamePicker",validation:W.e,schema:W.c})),w=z.provide((0,A.zD)({component:W.M,name:"MultiEntityPicker",schema:W.d,validation:W.v})),M=z.provide((0,A.zD)({component:W.R,name:"RepoUrlPicker",validation:W.r,schema:W.f})),y=z.provide((0,A.zD)({component:W.O,name:"OwnerPicker",schema:W.g})),v=z.provide((0,A.zD)({component:W.h,name:"MyGroupsPicker",schema:W.i})),F=z.provide((0,r.QJ)({name:"ScaffolderPage",component:()=>e.e(4362).then(e.bind(e,94362)).then(nt=>nt.Router),mountPoint:s.r})),ae=z.provide((0,A.zD)({component:W.j,name:"OwnedEntityPicker",schema:W.k})),Fe=z.provide((0,A.zD)({component:W.l,name:"EntityTagsPicker",schema:W.m})),Ae=Q.createElement(de.A,{fontSize:"small"}),X=Q.createElement(_.A,{fontSize:"small"}),N=()=>{const nt=useApi(alertApiRef),{error:Ge,loading:Je,availableTypes:Re,selectedTypes:Le,setSelectedTypes:lt}=useEntityTypeFilter();return Je?React.createElement(Progress,null):Re?Ge?(nt.post({message:"Failed to load entity types",severity:"error"}),null):React.createElement(Box,{pb:1,pt:1},React.createElement(Typography,{variant:"button",component:"label",htmlFor:"categories-picker"},"Categories"),React.createElement(Autocomplete,{id:"categories-picker",multiple:!0,options:Re,value:Le,onChange:(Et,wt)=>lt(wt),renderOption:(Et,{selected:wt})=>React.createElement(FormControlLabel,{control:React.createElement(Checkbox,{icon:Ae,checkedIcon:X,checked:wt}),label:capitalize(Et)}),size:"small",popupIcon:React.createElement(ExpandMoreIcon,{"data-testid":"categories-picker-expand"}),renderInput:Et=>React.createElement(TextField,{...Et,variant:"outlined"})})):null},H=null,oe=null,re=null,_e=null,tt=null,Ve=null,Ze=null},4237:function(In,Ct){var e,s,l;/** @license
* eventsource.js
* Available under MIT License (MIT)
* https://github.com/Yaffle/EventSource/
*/(function(b){"use strict";var A=b.setTimeout,W=b.clearTimeout,r=b.XMLHttpRequest,q=b.XDomainRequest,Q=b.ActiveXObject,t=b.EventSource,pe=b.document,_=b.Promise,de=b.fetch,me=b.Response,G=b.TextDecoder,xe=b.TextEncoder,ye=b.AbortController;if(typeof window!="undefined"&&typeof pe!="undefined"&&!("readyState"in pe)&&pe.body==null&&(pe.readyState="loading",window.addEventListener("load",function(S){pe.readyState="complete"},!1)),r==null&&Q!=null&&(r=function(){return new Q("Microsoft.XMLHTTP")}),Object.create==null&&(Object.create=function(S){function P(){}return P.prototype=S,new P}),Date.now||(Date.now=function(){return new Date().getTime()}),ye==null){var ut=de;de=function(S,P){var j=P.signal;return ut(S,{headers:P.headers,credentials:P.credentials,cache:P.cache}).then(function(Z){var Ie=Z.body.getReader();return j._reader=Ie,j._aborted&&j._reader.cancel(),{status:Z.status,statusText:Z.statusText,headers:Z.headers,body:{getReader:function(){return Ie}}}})},ye=function(){this.signal={_reader:null,_aborted:!1},this.abort=function(){this.signal._reader!=null&&this.signal._reader.cancel(),this.signal._aborted=!0}}}function z(){this.bitsNeeded=0,this.codePoint=0}z.prototype.decode=function(S){function P($t,tn,It){if(It===1)return $t>=128>>tn&&$t<<tn<=2047;if(It===2)return $t>=2048>>tn&&$t<<tn<=55295||$t>=57344>>tn&&$t<<tn<=65535;if(It===3)return $t>=65536>>tn&&$t<<tn<=1114111;throw new Error}function j($t,tn){if($t===6*1)return tn>>6>15?3:tn>31?2:1;if($t===6*2)return tn>15?3:2;if($t===6*3)return 3;throw new Error}for(var Z=65533,Ie="",ze=this.bitsNeeded,dt=this.codePoint,Qe=0;Qe<S.length;Qe+=1){var et=S[Qe];ze!==0&&(et<128||et>191||!P(dt<<6|et&63,ze-6,j(ze,dt)))&&(ze=0,dt=Z,Ie+=String.fromCharCode(dt)),ze===0?(et>=0&&et<=127?(ze=0,dt=et):et>=192&&et<=223?(ze=6*1,dt=et&31):et>=224&&et<=239?(ze=6*2,dt=et&15):et>=240&&et<=247?(ze=6*3,dt=et&7):(ze=0,dt=Z),ze!==0&&!P(dt,ze,j(ze,dt))&&(ze=0,dt=Z)):(ze-=6,dt=dt<<6|et&63),ze===0&&(dt<=65535?Ie+=String.fromCharCode(dt):(Ie+=String.fromCharCode(55296+(dt-65535-1>>10)),Ie+=String.fromCharCode(56320+(dt-65535-1&1023))))}return this.bitsNeeded=ze,this.codePoint=dt,Ie};var ee=function(){try{return new G().decode(new xe().encode("test"),{stream:!0})==="test"}catch(S){console.debug("TextDecoder does not support streaming option. Using polyfill instead: "+S)}return!1};(G==null||xe==null||!ee())&&(G=z);var D=function(){};function w(S){this.withCredentials=!1,this.readyState=0,this.status=0,this.statusText="",this.responseText="",this.onprogress=D,this.onload=D,this.onerror=D,this.onreadystatechange=D,this._contentType="",this._xhr=S,this._sendTimeout=0,this._abort=D}w.prototype.open=function(S,P){this._abort(!0);var j=this,Z=this._xhr,Ie=1,ze=0;this._abort=function(It){j._sendTimeout!==0&&(W(j._sendTimeout),j._sendTimeout=0),(Ie===1||Ie===2||Ie===3)&&(Ie=4,Z.onload=D,Z.onerror=D,Z.onabort=D,Z.onprogress=D,Z.onreadystatechange=D,Z.abort(),ze!==0&&(W(ze),ze=0),It||(j.readyState=4,j.onabort(null),j.onreadystatechange())),Ie=0};var dt=function(){if(Ie===1){var It=0,pt="",qt=void 0;if("contentType"in Z)It=200,pt="OK",qt=Z.contentType;else try{It=Z.status,pt=Z.statusText,qt=Z.getResponseHeader("Content-Type")}catch{It=0,pt="",qt=void 0}It!==0&&(Ie=2,j.readyState=2,j.status=It,j.statusText=pt,j._contentType=qt,j.onreadystatechange())}},Qe=function(){if(dt(),Ie===2||Ie===3){Ie=3;var It="";try{It=Z.responseText}catch{}j.readyState=3,j.responseText=It,j.onprogress()}},et=function(It,pt){if((pt==null||pt.preventDefault==null)&&(pt={preventDefault:D}),Qe(),Ie===1||Ie===2||Ie===3){if(Ie=4,ze!==0&&(W(ze),ze=0),j.readyState=4,It==="load")j.onload(pt);else if(It==="error")j.onerror(pt);else if(It==="abort")j.onabort(pt);else throw new TypeError;j.onreadystatechange()}},$t=function(It){Z!=null&&(Z.readyState===4?(!("onload"in Z)||!("onerror"in Z)||!("onabort"in Z))&&et(Z.responseText===""?"error":"load",It):Z.readyState===3?"onprogress"in Z||Qe():Z.readyState===2&&dt())},tn=function(){ze=A(function(){tn()},500),Z.readyState===3&&Qe()};"onload"in Z&&(Z.onload=function(It){et("load",It)}),"onerror"in Z&&(Z.onerror=function(It){et("error",It)}),"onabort"in Z&&(Z.onabort=function(It){et("abort",It)}),"onprogress"in Z&&(Z.onprogress=Qe),"onreadystatechange"in Z&&(Z.onreadystatechange=function(It){$t(It)}),("contentType"in Z||!("ontimeout"in r.prototype))&&(P+=(P.indexOf("?")===-1?"?":"&")+"padding=true"),Z.open(S,P,!0),"readyState"in Z&&(ze=A(function(){tn()},0))},w.prototype.abort=function(){this._abort(!1)},w.prototype.getResponseHeader=function(S){return this._contentType},w.prototype.setRequestHeader=function(S,P){var j=this._xhr;"setRequestHeader"in j&&j.setRequestHeader(S,P)},w.prototype.getAllResponseHeaders=function(){return this._xhr.getAllResponseHeaders!=null&&this._xhr.getAllResponseHeaders()||""},w.prototype.send=function(){if((!("ontimeout"in r.prototype)||!("sendAsBinary"in r.prototype)&&!("mozAnon"in r.prototype))&&pe!=null&&pe.readyState!=null&&pe.readyState!=="complete"){var S=this;S._sendTimeout=A(function(){S._sendTimeout=0,S.send()},4);return}var P=this._xhr;"withCredentials"in P&&(P.withCredentials=this.withCredentials);try{P.send(void 0)}catch(j){throw j}};function M(S){return S.replace(/[A-Z]/g,function(P){return String.fromCharCode(P.charCodeAt(0)+32)})}function y(S){for(var P=Object.create(null),j=S.split(`\r
`),Z=0;Z<j.length;Z+=1){var Ie=j[Z],ze=Ie.split(": "),dt=ze.shift(),Qe=ze.join(": ");P[M(dt)]=Qe}this._map=P}y.prototype.get=function(S){return this._map[M(S)]},r!=null&&r.HEADERS_RECEIVED==null&&(r.HEADERS_RECEIVED=2);function v(){}v.prototype.open=function(S,P,j,Z,Ie,ze,dt){S.open("GET",Ie);var Qe=0;S.onprogress=function(){var $t=S.responseText,tn=$t.slice(Qe);Qe+=tn.length,j(tn)},S.onerror=function($t){$t.preventDefault(),Z(new Error("NetworkError"))},S.onload=function(){Z(null)},S.onabort=function(){Z(null)},S.onreadystatechange=function(){if(S.readyState===r.HEADERS_RECEIVED){var $t=S.status,tn=S.statusText,It=S.getResponseHeader("Content-Type"),pt=S.getAllResponseHeaders();P($t,tn,It,new y(pt))}},S.withCredentials=ze;for(var et in dt)Object.prototype.hasOwnProperty.call(dt,et)&&S.setRequestHeader(et,dt[et]);return S.send(),S};function F(S){this._headers=S}F.prototype.get=function(S){return this._headers.get(S)};function ae(){}ae.prototype.open=function(S,P,j,Z,Ie,ze,dt){var Qe=null,et=new ye,$t=et.signal,tn=new G;return de(Ie,{headers:dt,credentials:ze?"include":"same-origin",signal:$t,cache:"no-store"}).then(function(It){return Qe=It.body.getReader(),P(It.status,It.statusText,It.headers.get("Content-Type"),new F(It.headers)),new _(function(pt,qt){var sn=function(){Qe.read().then(function(an){if(an.done)pt(void 0);else{var Vt=tn.decode(an.value,{stream:!0});j(Vt),sn()}}).catch(function(an){qt(an)})};sn()})}).catch(function(It){if(It.name!=="AbortError")return It}).then(function(It){Z(It)}),{abort:function(){Qe!=null&&Qe.cancel(),et.abort()}}};function Fe(){this._listeners=Object.create(null)}function Ae(S){A(function(){throw S},0)}Fe.prototype.dispatchEvent=function(S){S.target=this;var P=this._listeners[S.type];if(P!=null)for(var j=P.length,Z=0;Z<j;Z+=1){var Ie=P[Z];try{typeof Ie.handleEvent=="function"?Ie.handleEvent(S):Ie.call(this,S)}catch(ze){Ae(ze)}}},Fe.prototype.addEventListener=function(S,P){S=String(S);var j=this._listeners,Z=j[S];Z==null&&(Z=[],j[S]=Z);for(var Ie=!1,ze=0;ze<Z.length;ze+=1)Z[ze]===P&&(Ie=!0);Ie||Z.push(P)},Fe.prototype.removeEventListener=function(S,P){S=String(S);var j=this._listeners,Z=j[S];if(Z!=null){for(var Ie=[],ze=0;ze<Z.length;ze+=1)Z[ze]!==P&&Ie.push(Z[ze]);Ie.length===0?delete j[S]:j[S]=Ie}};function X(S){this.type=S,this.target=void 0}function N(S,P){X.call(this,S),this.data=P.data,this.lastEventId=P.lastEventId}N.prototype=Object.create(X.prototype);function H(S,P){X.call(this,S),this.status=P.status,this.statusText=P.statusText,this.headers=P.headers}H.prototype=Object.create(X.prototype);function oe(S,P){X.call(this,S),this.error=P.error}oe.prototype=Object.create(X.prototype);var re=-1,_e=0,tt=1,Ve=2,Ze=-1,nt=0,Ge=1,Je=2,Re=3,Le=/^text\/event\-stream(;.*)?$/i,lt=1e3,Et=18e6,wt=function(S,P){var j=S==null?P:parseInt(S,10);return j!==j&&(j=P),Qt(j)},Qt=function(S){return Math.min(Math.max(S,lt),Et)},yt=function(S,P,j){try{typeof P=="function"&&P.call(S,j)}catch(Z){Ae(Z)}};function ue(S,P){Fe.call(this),P=P||{},this.onopen=void 0,this.onmessage=void 0,this.onerror=void 0,this.url=void 0,this.readyState=void 0,this.withCredentials=void 0,this.headers=void 0,this._close=void 0,ht(this,S,P)}function gt(){return r!=null&&"withCredentials"in r.prototype||q==null?new r:new q}var xt=de!=null&&me!=null&&"body"in me.prototype;function ht(S,P,j){P=String(P);var Z=!!j.withCredentials,Ie=j.lastEventIdQueryParameterName||"lastEventId",ze=Qt(1e3),dt=wt(j.heartbeatTimeout,45e3),Qe="",et=ze,$t=!1,tn=0,It=j.headers||{},pt=j.Transport,qt=xt&&pt==null?void 0:new w(pt!=null?new pt:gt()),sn=pt!=null&&typeof pt!="string"?new pt:qt==null?new ae:new v,an=void 0,Vt=0,Ce=re,Ye="",Kt="",jt="",Wt="",ft=nt,Ln=0,dn=0,Xt=function(rt,qe,V,he){if(Ce===_e)if(rt===200&&V!=null&&Le.test(V)){Ce=tt,$t=Date.now(),et=ze,S.readyState=tt;var Ee=new H("open",{status:rt,statusText:qe,headers:he});S.dispatchEvent(Ee),yt(S,S.onopen,Ee)}else{var Pt="";rt!==200?(qe&&(qe=qe.replace(/\s+/g," ")),Pt="EventSource's response has a status "+rt+" "+qe+" that is not 200. Aborting the connection."):Pt="EventSource's response has a Content-Type specifying an unsupported type: "+(V==null?"-":V.replace(/\s+/g," "))+". Aborting the connection.",mt();var Ee=new H("error",{status:rt,statusText:qe,headers:he});S.dispatchEvent(Ee),yt(S,S.onerror,Ee),console.error(Pt)}},An=function(rt){if(Ce===tt){for(var qe=-1,V=0;V<rt.length;V+=1){var he=rt.charCodeAt(V);(he===10||he===13)&&(qe=V)}var Ee=(qe!==-1?Wt:"")+rt.slice(0,qe+1);Wt=(qe===-1?Wt:"")+rt.slice(qe+1),rt!==""&&($t=Date.now(),tn+=rt.length);for(var Pt=0;Pt<Ee.length;Pt+=1){var he=Ee.charCodeAt(Pt);if(ft===Ze&&he===10)ft=nt;else if(ft===Ze&&(ft=nt),he===13||he===10){if(ft!==nt){ft===Ge&&(dn=Pt+1);var Nt=Ee.slice(Ln,dn-1),ln=Ee.slice(dn+(dn<Pt&&Ee.charCodeAt(dn)===32?1:0),Pt);Nt==="data"?(Ye+=`
`,Ye+=ln):Nt==="id"?Kt=ln:Nt==="event"?jt=ln:Nt==="retry"?(ze=wt(ln,ze),et=ze):Nt==="heartbeatTimeout"&&(dt=wt(ln,dt),Vt!==0&&(W(Vt),Vt=A(function(){Dt()},dt)))}if(ft===nt){if(Ye!==""){Qe=Kt,jt===""&&(jt="message");var bn=new N(jt,{data:Ye.slice(1),lastEventId:Kt});if(S.dispatchEvent(bn),jt==="open"?yt(S,S.onopen,bn):jt==="message"?yt(S,S.onmessage,bn):jt==="error"&&yt(S,S.onerror,bn),Ce===Ve)return}Ye="",jt=""}ft=he===13?Ze:nt}else ft===nt&&(Ln=Pt,ft=Ge),ft===Ge?he===58&&(dn=Pt+1,ft=Je):ft===Je&&(ft=Re)}}},Xe=function(rt){if(Ce===tt||Ce===_e){Ce=re,Vt!==0&&(W(Vt),Vt=0),Vt=A(function(){Dt()},et),et=Qt(Math.min(ze*16,et*2)),S.readyState=_e;var qe=new oe("error",{error:rt});S.dispatchEvent(qe),yt(S,S.onerror,qe),rt!=null&&console.error(rt)}},mt=function(){Ce=Ve,an!=null&&(an.abort(),an=void 0),Vt!==0&&(W(Vt),Vt=0),S.readyState=Ve},Dt=function(){if(Vt=0,Ce!==re){if(!$t&&an!=null)Xe(new Error("No activity within "+dt+" milliseconds. "+(Ce===_e?"No response received.":tn+" chars received.")+" Reconnecting.")),an!=null&&(an.abort(),an=void 0);else{var rt=Math.max(($t||Date.now())+dt-Date.now(),1);$t=!1,Vt=A(function(){Dt()},rt)}return}$t=!1,tn=0,Vt=A(function(){Dt()},dt),Ce=_e,Ye="",jt="",Kt=Qe,Wt="",Ln=0,dn=0,ft=nt;var qe=P;if(P.slice(0,5)!=="data:"&&P.slice(0,5)!=="blob:"&&Qe!==""){var V=P.indexOf("?");qe=V===-1?P:P.slice(0,V+1)+P.slice(V+1).replace(/(?:^|&)([^=&]*)(?:=[^&]*)?/g,function(ln,bn){return bn===Ie?"":ln}),qe+=(P.indexOf("?")===-1?"?":"&")+Ie+"="+encodeURIComponent(Qe)}var he=S.withCredentials,Ee={};Ee.Accept="text/event-stream";var Pt=S.headers;if(Pt!=null)for(var Nt in Pt)Object.prototype.hasOwnProperty.call(Pt,Nt)&&(Ee[Nt]=Pt[Nt]);try{an=sn.open(qt,Xt,An,Xe,qe,he,Ee)}catch(ln){throw mt(),ln}};S.url=P,S.readyState=_e,S.withCredentials=Z,S.headers=It,S._close=mt,Dt()}ue.prototype=Object.create(Fe.prototype),ue.prototype.CONNECTING=_e,ue.prototype.OPEN=tt,ue.prototype.CLOSED=Ve,ue.prototype.close=function(){this._close()},ue.CONNECTING=_e,ue.OPEN=tt,ue.CLOSED=Ve,ue.prototype.withCredentials=void 0;var Ut=t;r!=null&&(t==null||!("withCredentials"in t.prototype))&&(Ut=ue),function(S){if(typeof In.exports=="object"){var P=S(Ct);P!==void 0&&(In.exports=P)}else s=[Ct],e=S,l=typeof e=="function"?e.apply(Ct,s):e,l!==void 0&&(In.exports=l)}(function(S){S.EventSourcePolyfill=ue,S.NativeEventSource=t,S.EventSource=Ut})})(typeof globalThis=="undefined"?typeof window!="undefined"?window:typeof self!="undefined"?self:this:globalThis)},22299:(In,Ct,e)=>{"use strict";e.d(Ct,{S:()=>D,b:()=>de,c:()=>z});var s=e(14041),l=e(11638),b=e(58007),A=e(8109),W=e(58837),r=e(46423),q=e(5951),Q=e(77125),t=e(72501),pe=e(22968);const _=(0,W.A)(()=>({highlight:{}}),{name:"BackstageHighlightedSearchResultText"}),de=w=>{const{text:M,preTag:y,postTag:v}=w,F=_(),ae=(0,s.useMemo)(()=>M.split(new RegExp(`(${y}.+?${v})`)),[v,y,M]);return s.createElement(s.Fragment,null,ae.map((Fe,Ae)=>Fe.includes(y)?s.createElement("mark",{className:F.highlight,key:Ae},Fe.replace(new RegExp(`${y}|${v}`,"g"),"")):Fe))},me=({result:w,highlight:M,icon:y,secondaryAction:v,lineClamp:F=5})=>w?s.createElement(s.Fragment,null,y&&s.createElement(r.A,null,y),s.createElement(q.A,{primaryTypographyProps:{variant:"h6"},primary:s.createElement(pe.N_,{noTrack:!0,to:w.location},M!=null&&M.fields.title?s.createElement(de,{text:(M==null?void 0:M.fields.title)||"",preTag:(M==null?void 0:M.preTag)||"",postTag:(M==null?void 0:M.postTag)||""}):w.title),secondary:s.createElement(t.A,{component:"span",style:{display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:F,overflow:"hidden"},color:"textSecondary",variant:"body2"},M!=null&&M.fields.text?s.createElement(de,{text:M.fields.text,preTag:M.preTag,postTag:M.postTag}):w.text)}),v&&s.createElement(Q.A,{alignItems:"flex-end"},v)):null,G=w=>s.createElement(l.Ig,{attributes:{pluginId:"search",extension:"DefaultResultListItem"}},s.createElement(me,{...w})),xe="search.results.list.items.extensions.v1",ye=(w,M)=>{for(const y of w){if(!(0,s.isValidElement)(y))continue;const v=(0,l.E0)(y,xe);if(v!=null&&v(M))return(0,s.cloneElement)(y,{rank:M.rank,highlight:M.highlight,result:M.document,...y.props})}return null},ut=w=>{const{rank:M,result:y,noTrack:v,children:F,alignItems:ae="flex-start",...Fe}=w,Ae=(0,l.st)(),X=(0,s.useCallback)(()=>{v||y&&Ae.captureEvent("discover",y.title,{attributes:{to:y.location},value:M})},[M,y,v,Ae]);return s.createElement(A.A,{divider:!0,alignItems:ae,onClickCapture:X,...Fe},F)},z=w=>{const{name:M,component:y,predicate:v=()=>!0}=w;return(0,l.zZ)({name:M,component:{lazy:()=>y().then(F=>ae=>s.createElement(ut,{rank:ae.rank,result:ae.result,noTrack:ae.noTrack},(0,s.createElement)(F,ae)))},data:{[xe]:v}})},ee=w=>{const M=(0,l.OJ)(w,y=>y.selectByComponentData({key:xe}).getElements(),[w]);return(0,s.useCallback)((y,v)=>{const F=ye(M,y);return s.createElement(s.Fragment,{key:v},F!=null?F:s.createElement(ut,{rank:y.rank,result:y.document},s.createElement(G,{rank:y.rank,highlight:y.highlight,result:y.document})))},[M])},D=w=>{const{results:M,children:y,...v}=w,F=ee(y);return s.createElement(b.A,{...v},M.map(F))}},13270:(In,Ct,e)=>{"use strict";e.d(Ct,{$6:()=>Ie,IW:()=>wt,Lt:()=>Le,SQ:()=>Ze,Z5:()=>An,Zf:()=>Et,nJ:()=>et,pY:()=>gt,q0:()=>qt,yY:()=>_e});var s=e(5124),l=e(11638),b=e(22299),A=e(29365),W=e(34839),r=e(16249),q=e(64947),Q=e(45917),t=e(14041),pe=e(22771),_=e(45250),de=e.n(_),me=e(73466),G=e(5877),xe=e(97388),ye=e(78467),ut=e(58837),z=e(20577),ee=e(95061),D=e(86901),w=e(48543),M=e(69076),y=e(81215),v=e(26343),F=e(91761),ae=e(72501),Fe=e(67720),Ae=e(87290),X=e(60083),N=e(22968),H=e(21098),oe=e(22982),re=e(1048).Buffer;const _e=(0,s.c)({id:"plugin.search.queryservice"});class tt{constructor(mt){this.mockedResults=mt}query(){return Promise.resolve(this.mockedResults||{results:[]})}}const Ve=(0,xe.tK)("search-context"),Ze=()=>{const Xe=(0,t.useContext)(Ve);if(!Xe)throw new Error("useSearch must be used within a SearchContextProvider");const mt=Xe.atVersion(1);if(!mt)throw new Error("No SearchContext v1 found");return mt},nt=()=>(0,t.useContext)(Ve)!==void 0,Ge={term:"",types:[],filters:{},pageLimit:void 0,pageCursor:void 0},Je=(Xe=Ge)=>{var mt,Dt,rt,qe;const V=(0,s.u)(_e),he=(0,l.st)(),[Ee,Pt]=(0,t.useState)(Xe.term),[Nt,ln]=(0,t.useState)(Xe.types),[bn,Dn]=(0,t.useState)(Xe.filters),[Un,Vn]=(0,t.useState)(Xe.pageLimit),[Pn,Yn]=(0,t.useState)(Xe.pageCursor),da=(0,G.A)(Ee),ct=(0,G.A)(bn),m=(0,me.A)(async()=>{var Y,we;const Oe=await V.query({term:Ee,types:Nt,filters:bn,pageLimit:Un,pageCursor:Pn});return Ee&&he.captureEvent("search",Ee,{value:(we=(Y=m.value)==null?void 0:Y.numberOfResults)!=null?we:void 0}),Oe},[Ee,Nt,bn,Un,Pn]),R=!m.loading&&!m.error&&((mt=m.value)==null?void 0:mt.nextPageCursor),K=!m.loading&&!m.error&&((Dt=m.value)==null?void 0:Dt.previousPageCursor),le=(0,t.useCallback)(()=>{var Y;Yn((Y=m.value)==null?void 0:Y.nextPageCursor)},[(rt=m.value)==null?void 0:rt.nextPageCursor]),I=(0,t.useCallback)(()=>{var Y;Yn((Y=m.value)==null?void 0:Y.previousPageCursor)},[(qe=m.value)==null?void 0:qe.previousPageCursor]);return(0,t.useEffect)(()=>{da!==void 0&&Ee!==da&&Yn(void 0)},[Ee,da,Yn]),(0,t.useEffect)(()=>{ct!==void 0&&!(0,_.isEqual)(bn,ct)&&Yn(void 0)},[bn,ct,Yn]),{result:m,term:Ee,setTerm:Pt,types:Nt,setTypes:ln,filters:bn,setFilters:Dn,pageLimit:Un,setPageLimit:Vn,pageCursor:Pn,setPageCursor:Yn,fetchNextPage:R?le:void 0,fetchPreviousPage:K?I:void 0}},Re=Xe=>{const{initialState:mt,children:Dt}=Xe,rt=Je(mt);return t.createElement(l.Ig,{attributes:{searchTypes:rt.types.sort().join(",")}},t.createElement(Ve.Provider,{value:(0,xe.Bl)({1:rt})},Dt))},Le=Xe=>{const{initialState:mt,inheritParentContextIfAvailable:Dt,children:rt}=Xe,qe=nt(),V=(0,s.u)(s.p),he=mt!=null?mt:{},Ee=V.has("search.query.pageLimit")?{pageLimit:V.getNumber("search.query.pageLimit")}:{},Pt={...Ge,...he,...Ee};return qe&&Dt?t.createElement(t.Fragment,null,rt):t.createElement(Re,{initialState:Pt},rt)};function lt(Xe){return(0,t.forwardRef)((mt,Dt)=>t.createElement(Le,{inheritParentContextIfAvailable:!0},t.createElement(Xe,{...mt,ref:Dt})))}const Et=lt((0,t.forwardRef)((Xe,mt)=>{const{onChange:Dt,onKeyDown:rt=()=>{},onClear:qe=()=>{},onSubmit:V=()=>{},debounceTime:he=200,clearButton:Ee=!0,fullWidth:Pt=!0,value:Nt,label:ln,placeholder:bn,inputProps:Dn={},InputProps:Un={},endAdornment:Vn,...Pn}=Xe,Yn=(0,s.u)(s.p),[da,ct]=(0,t.useState)(""),m=(0,t.useRef)("");(0,t.useEffect)(()=>{ct(Oe=>Oe===m.current?String(Nt):Oe)},[Nt,m]),(0,pe.A)(()=>{m.current=da,Dt(da)},he,[da]);const R=(0,t.useCallback)(Oe=>{ct(Oe.target.value)},[ct]),K=(0,t.useCallback)(Oe=>{rt&&rt(Oe),V&&Oe.key==="Enter"&&V()},[rt,V]),le=(0,t.useCallback)(()=>{m.current="",Dt(""),ct(""),qe&&qe()},[Dt,qe]),I=ln?void 0:"Search",U=bn!=null?bn:`Search in ${Yn.getOptionalString("app.title")||"Backstage"}`,Y=t.createElement(W.A,{position:"start"},t.createElement(A.A,{"aria-label":"Query",size:"small",disabled:!0},t.createElement(Q.A,null))),we=t.createElement(W.A,{position:"end"},t.createElement(q.A,{"aria-label":"Clear",size:"small",onClick:le,onKeyDown:Oe=>{Oe.key==="Enter"&&Oe.stopPropagation()}},"Clear"));return t.createElement(r.A,{id:"search-bar-text-field","data-testid":"search-bar-next",variant:"outlined",margin:"normal",inputRef:mt,value:da,label:ln,placeholder:U,InputProps:{startAdornment:Y,endAdornment:Ee?we:Vn,...Un},inputProps:{"aria-label":I,...Dn},fullWidth:Pt,onChange:R,onKeyDown:K,...Pn})})),wt=lt((0,t.forwardRef)((Xe,mt)=>{const{value:Dt="",onChange:rt,...qe}=Xe,{term:V,setTerm:he}=Ze();(0,t.useEffect)(()=>{Dt&&he(String(Dt))},[Dt,he]);const Ee=(0,t.useCallback)(Pt=>{rt?rt(Pt):he(Pt)},[rt,he]);return t.createElement(l.Ig,{attributes:{pluginId:"search",extension:"SearchBar"}},t.createElement(Et,{...qe,ref:mt,value:V,onChange:Ee}))})),Qt=(0,ut.A)(Xe=>({loading:{right:Xe.spacing(1),position:"absolute"}})),yt=Xe=>mt=>t.createElement(Le,{inheritParentContextIfAvailable:!0},t.createElement(Xe,{...mt})),ue=()=>{const Xe=Qt();return t.createElement(ye.A,{className:Xe.loading,"data-testid":"search-autocomplete-progressbar",color:"inherit",size:20})},gt=yt(function(mt){const{loading:Dt,value:rt,onChange:qe=()=>{},options:V=[],getOptionLabel:he=m=>String(m),inputPlaceholder:Ee,inputDebounceTime:Pt,freeSolo:Nt=!0,fullWidth:ln=!0,clearOnBlur:bn=!1,"data-testid":Dn="search-autocomplete",...Un}=mt,{setTerm:Vn}=Ze(),Pn=(0,t.useCallback)(m=>m?typeof m=="string"?m:he(m):"",[he]),Yn=(0,t.useMemo)(()=>Pn(rt),[rt,Pn]),da=(0,t.useCallback)((m,R,K,le)=>{Vn(Pn(R)),qe(m,R,K,le)},[Pn,Vn,qe]),ct=(0,t.useCallback)(({InputProps:{ref:m,className:R,endAdornment:K},InputLabelProps:le,...I})=>t.createElement(wt,{...I,ref:m,clearButton:!1,value:Yn,placeholder:Ee,debounceTime:Pt,endAdornment:Dt?t.createElement(ue,null):K,InputProps:{className:R}}),[Dt,Yn,Ee,Pt]);return t.createElement(z.Ay,{...Un,"data-testid":Dn,value:rt,onChange:da,options:V,getOptionLabel:he,renderInput:ct,freeSolo:Nt,fullWidth:ln,clearOnBlur:bn})}),xt=Xe=>{const{icon:mt,primaryText:Dt,primaryTextTypographyProps:rt,secondaryText:qe,secondaryTextTypographyProps:V,disableTextTypography:he}=Xe;return React.createElement(React.Fragment,null,mt?React.createElement(ListItemIcon,null,mt):null,React.createElement(ListItemText,{primary:Dt,primaryTypographyProps:rt,secondary:qe,secondaryTypographyProps:V,disableTypography:he}))},ht=(Xe,mt,Dt=[],rt=250)=>{const qe=(0,t.useRef)({}),V=Xe||(()=>Promise.resolve([])),[he,Ee]=(0,Ae.A)(V,[mt],{loading:!0});if((0,pe.A)(()=>{qe.current[mt]===void 0&&(qe.current[mt]=Ee(mt).then(Nt=>(qe.current[mt]=Nt,Nt)))},rt,[Ee,mt]),Dt.length)return{loading:!1,value:Dt};const Pt=qe.current[mt];return Array.isArray(Pt)?{loading:!1,value:Pt}:he},Ut=(Xe,mt)=>{const{setFilters:Dt}=Ze();(0,t.useEffect)(()=>{mt&&[mt].flat().length>0&&Dt(rt=>({...rt,[Xe]:mt}))},[])},S=Xe=>{const{className:mt,defaultValue:Dt,name:rt,values:qe,valuesDebounceMs:V,label:he,filterSelectedOptions:Ee,limitTags:Pt,multiple:Nt}=Xe,[ln,bn]=(0,t.useState)("");Ut(rt,Dt);const Dn=typeof qe=="function"?qe:void 0,Un=typeof qe=="function"?void 0:qe,{value:Vn,loading:Pn}=ht(Dn,ln,Un,V),{filters:Yn,setFilters:da}=Ze(),ct=Yn[rt]||(Nt?[]:null),m=(le,I)=>{da(U=>{const{[rt]:Y,...we}=U;return I?{...we,[rt]:I}:{...we}})},R=le=>t.createElement(r.A,{...le,name:"search",variant:"outlined",label:he,fullWidth:!0}),K=(le,I)=>le.map((U,Y)=>t.createElement(Fe.A,{label:U,color:"primary",...I({index:Y})}));return t.createElement(z.Ay,{filterSelectedOptions:Ee,limitTags:Pt,multiple:Nt,className:mt,id:`${Nt?"multi-":""}select-filter-${rt}--select`,options:Vn||[],loading:Pn,value:ct,onChange:m,onInputChange:(le,I)=>bn(I),renderInput:R,renderTags:K})},P=(0,ut.A)({label:{textTransform:"capitalize"},checkboxWrapper:{display:"flex",alignItems:"center",width:"100%"},textWrapper:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}),j=Xe=>{const{className:mt,defaultValue:Dt,label:rt,name:qe,values:V=[],valuesDebounceMs:he}=Xe,Ee=P(),{filters:Pt,setFilters:Nt}=Ze();Ut(qe,Dt);const ln=typeof V=="function"?V:void 0,bn=typeof V=="function"?void 0:V,{value:Dn=[],loading:Un}=ht(ln,"",bn,he),Vn=Pn=>{const{target:{value:Yn,checked:da}}=Pn;Nt(ct=>{const{[qe]:m,...R}=ct,K=(m||[]).filter(I=>I!==Yn),le=da?[...K,Yn]:K;return le.length?{...R,[qe]:le}:R})};return t.createElement(ee.A,{className:mt,disabled:Un,fullWidth:!0,"data-testid":"search-checkboxfilter-next"},rt?t.createElement(F.A,{className:Ee.label},rt):null,Dn.map(Pn=>{var Yn;return t.createElement(D.A,{key:Pn,classes:{root:Ee.checkboxWrapper,label:Ee.textWrapper},label:Pn,control:t.createElement(M.A,{color:"primary",inputProps:{"aria-labelledby":Pn},value:Pn,name:Pn,onChange:Vn,checked:((Yn=Pt[qe])!=null?Yn:[]).includes(Pn)})})}))},Z=Xe=>{const{className:mt,defaultValue:Dt,label:rt,name:qe,values:V,valuesDebounceMs:he}=Xe,Ee=P();Ut(qe,Dt);const Pt=typeof V=="function"?V:void 0,Nt=typeof V=="function"?void 0:V,{value:ln=[],loading:bn}=ht(Pt,"",Nt,he),{filters:Dn,setFilters:Un}=Ze(),Vn=Pn=>{const{target:{value:Yn}}=Pn;Un(da=>{const{[qe]:ct,...m}=da;return Yn?{...m,[qe]:Yn}:m})};return t.createElement(ee.A,{disabled:bn,className:mt,variant:"filled",fullWidth:!0,"data-testid":"search-selectfilter-next"},rt?t.createElement(w.A,{className:Ee.label,margin:"dense"},rt):null,t.createElement(y.A,{variant:"outlined",value:Dn[qe]||"",onChange:Vn},t.createElement(v.A,{value:""},t.createElement("em",null,"All")),ln.map(Pn=>t.createElement(v.A,{key:Pn,value:Pn},t.createElement(ae.A,{variant:"inherit",noWrap:!0},Pn)))))},Ie=Xe=>{const{component:mt,...Dt}=Xe;return t.createElement(mt,{...Dt})};Ie.Checkbox=Xe=>t.createElement(Ie,{...Xe,component:j}),Ie.Select=Xe=>t.createElement(Ie,{...Xe,component:Z}),Ie.Autocomplete=Xe=>t.createElement(Ie,{...Xe,component:S});const ze=Xe=>re.from(Xe.toString(),"utf-8").toString("base64"),dt=Xe=>Xe?Number(re.from(Xe,"base64").toString("utf-8")):0,Qe=Xe=>{const{total:mt=-1,cursor:Dt,hasNextPage:rt,onCursorChange:qe,limit:V=25,limitLabel:he="Results per page:",limitText:Ee=({from:Vn,to:Pn})=>mt>0?`of ${mt}`:`${Vn}-${Pn}`,limitOptions:Pt,onLimitChange:Nt,...ln}=Xe,bn=(0,t.useMemo)(()=>dt(Dt),[Dt]),Dn=(0,t.useCallback)((Vn,Pn)=>{qe==null||qe(ze(Pn))},[qe]),Un=(0,t.useCallback)(Vn=>{const Pn=Vn.target.value;Nt==null||Nt(parseInt(Pn,10))},[Nt]);return t.createElement(X.A,{...ln,component:"div",count:mt,page:bn,nextIconButtonProps:{...rt!==void 0&&{disabled:!rt}},onPageChange:Dn,rowsPerPage:V,labelRowsPerPage:he,labelDisplayedRows:Ee,rowsPerPageOptions:Pt,onRowsPerPageChange:Un})},et=Xe=>{const{pageLimit:mt,setPageLimit:Dt,pageCursor:rt,setPageCursor:qe,fetchNextPage:V}=Ze(),he=(0,t.useCallback)(Ee=>{Dt(Ee),qe(void 0)},[Dt,qe]);return t.createElement(Qe,{...Xe,hasNextPage:!!V,limit:mt,onLimitChange:he,cursor:rt,onCursorChange:qe})},$t=Xe=>{const{children:mt}=Xe,Dt=Ze(),{result:rt,...qe}=Dt;return mt(rt,qe)},tn=Xe=>{const{query:mt,children:Dt}=Xe,rt=(0,s.u)(_e),qe=(0,me.A)(()=>{const{term:V="",types:he=[],filters:Ee={},...Pt}=mt;return rt.query({...Pt,term:V,types:he,filters:Ee})},[mt]);return Dt(qe,mt)},It=Xe=>{const{query:mt,children:Dt}=Xe;return mt?t.createElement(tn,{query:mt},Dt):t.createElement($t,null,Dt)},pt=Xe=>{const{query:mt,children:Dt,noResultsComponent:rt=t.createElement(N.pp,{missing:"data",title:"Sorry, no results were found"}),...qe}=Xe;return t.createElement(It,{query:mt},({loading:V,error:he,value:Ee})=>V?t.createElement(N.ke,null):he?t.createElement(N._1,{title:"Error encountered while fetching search results",error:he}):Ee!=null&&Ee.results.length?(0,_.isFunction)(Dt)?Dt(Ee):t.createElement(b.S,{...qe,results:Ee.results},Dt):rt)},qt=Xe=>t.createElement(l.Ig,{attributes:{pluginId:"search",extension:"SearchResult"}},t.createElement(pt,{...Xe})),sn=Xe=>{const{error:mt,loading:Dt,resultItems:rt,renderResultItem:qe=Pt=>React.createElement(HigherOrderDefaultResultListItem,{key:Pt.document.location,result:Pt.document}),disableRenderingWithNoResults:V,noResultsComponent:he=V?null:React.createElement(EmptyState,{missing:"data",title:"Sorry, no results were found"}),...Ee}=Xe;return Dt?React.createElement(Progress,null):mt?React.createElement(ResponseErrorPanel,{title:"Error encountered while fetching search results",error:mt}):rt!=null&&rt.length?React.createElement(List,{...Ee},rt.map(qe)):React.createElement(React.Fragment,null,he)},an=Xe=>{const{query:mt,renderResultItem:Dt,children:rt,...qe}=Xe,V=useSearchResultListItemExtensions(rt);return React.createElement(AnalyticsContext,{attributes:{pluginId:"search",extension:"SearchResultList"}},React.createElement(It,{query:mt},({loading:he,error:Ee,value:Pt})=>React.createElement(sn,{...qe,error:Ee,loading:he,resultItems:Pt==null?void 0:Pt.results,renderResultItem:Dt!=null?Dt:V})))},Vt=(0,ut.A)(Xe=>({listSubheader:{display:"flex",alignItems:"center"},listSubheaderName:{marginLeft:Xe.spacing(1),textTransform:"uppercase"},listSubheaderChip:{color:Xe.palette.text.secondary,margin:Xe.spacing(0,0,0,1.5)},listSubheaderFilter:{display:"flex",color:Xe.palette.text.secondary,margin:Xe.spacing(0,0,0,1.5)},listSubheaderLink:{marginLeft:"auto",display:"flex",alignItems:"center"},listSubheaderLinkIcon:{fontSize:"inherit",marginLeft:Xe.spacing(.5)}})),Ce=Xe=>{const mt=Vt(),{label:Dt,children:rt,...qe}=Xe;return React.createElement(Chip,{...qe,className:mt.listSubheaderFilter,variant:"outlined",label:React.createElement(React.Fragment,null,Dt,": ",rt)})},Ye=()=>null,Kt=(0,ut.A)(Xe=>({root:{fontSize:"inherit","&:focus":{outline:"none",background:Xe.palette.common.white},"&:not(:focus)":{cursor:"pointer",color:Xe.palette.primary.main,"&:hover":{textDecoration:"underline"}}}})),jt=Xe=>{const mt=Kt(),{label:Dt,value:rt="None",onChange:qe,onDelete:V}=Xe,he=useCallback(Ee=>{qe(Ee.target.value)},[qe]);return React.createElement(Ce,{label:Dt,onDelete:V},React.createElement(Typography,{role:"textbox",component:"span",className:mt.root,onChange:he,contentEditable:!0,suppressContentEditableWarning:!0},rt==null?void 0:rt.toString()))},Wt=(0,ut.A)(Xe=>({root:{fontSize:"inherit","&:not(:focus)":{cursor:"pointer",color:Xe.palette.primary.main,"&:hover":{textDecoration:"underline"}},"&:focus":{outline:"none"},"&>div:first-child":{padding:0}}})),ft=Xe=>{const mt=Wt(),{label:Dt,value:rt="none",onChange:qe,onDelete:V,children:he}=Xe,Ee=useCallback(Pt=>{qe(Pt.target.value)},[qe]);return React.createElement(Ce,{label:Dt,onDelete:V},React.createElement(Select,{className:mt.root,value:rt,onChange:Ee,input:React.createElement(InputBase,null),IconComponent:Ye},React.createElement(MenuItem,{value:"none"},"None"),he))};function Ln(Xe){const mt=Vt(),[Dt,rt]=useState(null),{error:qe,loading:V,icon:he,title:Ee,titleProps:Pt={},link:Nt=React.createElement(React.Fragment,null,"See all",React.createElement(ArrowRightIcon,{className:mt.listSubheaderLinkIcon})),linkProps:ln={},filterOptions:bn,renderFilterOption:Dn=le=>React.createElement(MenuItem,{key:String(le),value:String(le)},String(le)),filterFields:Un,renderFilterField:Vn,resultItems:Pn,renderResultItem:Yn=le=>React.createElement(HigherOrderDefaultResultListItem,{key:le.document.location,result:le.document}),disableRenderingWithNoResults:da,noResultsComponent:ct=da?null:React.createElement(EmptyState,{missing:"data",title:"Sorry, no results were found"}),...m}=Xe,R=useCallback(le=>{rt(le.currentTarget)},[]),K=useCallback(()=>{rt(null)},[]);return V?React.createElement(Progress,null):qe?React.createElement(ResponseErrorPanel,{title:"Error encountered while fetching search results",error:qe}):Pn!=null&&Pn.length?React.createElement(List,{...m},React.createElement(ListSubheader,{className:mt.listSubheader},he,React.createElement(Typography,{className:mt.listSubheaderName,component:"strong",...Pt},Ee),bn?React.createElement(Chip,{className:mt.listSubheaderChip,component:"button",icon:React.createElement(AddIcon,null),variant:"outlined",label:"Add filter","aria-controls":"filters-menu","aria-haspopup":"true",onClick:R}):null,bn?React.createElement(Menu,{id:"filters-menu",anchorEl:Dt,open:!!Dt,onClose:K,onClick:K,keepMounted:!0},bn.map(Dn)):null,Un==null?void 0:Un.map(le=>{var I;return(I=Vn==null?void 0:Vn(le))!=null?I:null}),React.createElement(Link,{className:mt.listSubheaderLink,to:"/search",...ln},Nt)),Pn.map(Yn)):React.createElement(React.Fragment,null,ct)}function dn(Xe){const{query:mt,children:Dt,renderResultItem:rt,linkProps:qe={},...V}=Xe,he=useSearchResultListItemExtensions(Dt);return React.createElement(AnalyticsContext,{attributes:{pluginId:"search",extension:"SearchResultGroup"}},React.createElement(It,{query:mt},({loading:Ee,error:Pt,value:Nt},{term:ln,types:bn,pageCursor:Dn,filters:Un={}})=>{const Vn=`/search?${qs.stringify({term:ln,types:bn,filters:Un,pageCursor:Dn,query:ln},{arrayFormat:"brackets"})}`;return React.createElement(Ln,{...V,error:Pt,loading:Ee,linkProps:{to:Vn,...qe},filterFields:Object.keys(Un),resultItems:Nt==null?void 0:Nt.results,renderResultItem:rt!=null?rt:he})}))}const Xt=(0,ut.A)(Xe=>({root:{display:"flex",justifyContent:"space-between",gap:Xe.spacing(2),margin:Xe.spacing(2,0)}})),An=()=>{const{fetchNextPage:Xe,fetchPreviousPage:mt}=Ze(),Dt=Xt();return!Xe&&!mt?t.createElement(t.Fragment,null):t.createElement("nav",{"aria-label":"pagination navigation",className:Dt.root},t.createElement(q.A,{"aria-label":"previous page",disabled:!mt,onClick:mt,startIcon:t.createElement(oe.A,null)},"Previous"),t.createElement(q.A,{"aria-label":"next page",disabled:!Xe,onClick:Xe,endIcon:t.createElement(H.A,null)},"Next"))}},2788:(In,Ct,e)=>{"use strict";e.d(Ct,{S:()=>Et,a:()=>xt,b:()=>Je,c:()=>Re,r:()=>nt});var s=e(3399),l=e(45810),b=e.n(l),A=e(13270),W=e(11638),r=e(5124),q=e(14041),Q=e(5877),t=e(18690),pe=e(69076),_=e(67720),de=e(95061),me=e(48543),G=e(5951),xe=e(26343),ye=e(81215),ut=e(58837),z=e(8380),ee=e(8973),D=e(29655),w=e(91567),M=e(40703),y=e(48653),v=e(45685),F=e(37197),ae=e(58007),Fe=e(8109),Ae=e(46423),X=e(6924),N=e(53364),H=e(73466),oe=e(38605),re=e(31653),_e=Object.defineProperty,tt=(ht,Ut,S)=>Ut in ht?_e(ht,Ut,{enumerable:!0,configurable:!0,writable:!0,value:S}):ht[Ut]=S,Ve=(ht,Ut,S)=>(tt(ht,typeof Ut!="symbol"?Ut+"":Ut,S),S);class Ze{constructor(Ut){Ve(this,"discoveryApi"),Ve(this,"identityApi"),this.discoveryApi=Ut.discoveryApi,this.identityApi=Ut.identityApi}async query(Ut){const{token:S}=await this.identityApi.getCredentials(),P=b().stringify(Ut),j=`${await this.discoveryApi.getBaseUrl("search")}/query?${P}`,Z=await fetch(j,{headers:S?{Authorization:`Bearer ${S}`}:{}});if(!Z.ok)throw await s.o3.fromResponse(Z);return Z.json()}}const nt=(0,W.HM)({id:"search"}),Ge=(0,W.i1)({id:"search",apis:[(0,W.bW)({api:A.yY,deps:{discoveryApi:r.q,identityApi:r.t},factory:({discoveryApi:ht,identityApi:Ut})=>new Ze({discoveryApi:ht,identityApi:Ut})})],routes:{root:nt}}),Je=Ge.provide((0,W.QJ)({name:"SearchPage",component:()=>e.e(4428).then(e.bind(e,84428)).then(ht=>ht.SearchPage),mountPoint:nt})),Re=Ge.provide((0,W.NC)({name:"SidebarSearchModal",component:{lazy:()=>e.e(6119).then(e.bind(e,26119)).then(ht=>ht.SidebarSearchModal)}})),Le=Ge.provide((0,W.NC)({name:"HomePageSearchBar",component:{lazy:()=>e.e(776).then(e.bind(e,70776)).then(ht=>ht.HomePageSearchBar)}})),lt=()=>{const ht=(0,t.zy)(),{term:Ut,setTerm:S,types:P,setTypes:j,pageCursor:Z,setPageCursor:Ie,filters:ze,setFilters:dt}=(0,A.SQ)(),Qe=(0,Q.A)(ht.search);return(0,q.useEffect)(()=>{if(ht.search===Qe)return;const et=b().parse(ht.search.substring(1),{arrayLimit:0})||{};et.filters&&dt(et.filters),et.query&&S(et.query),et.pageCursor&&Ie(et.pageCursor),et.types&&j(et.types)},[Qe,ht,S,j,Ie,dt]),(0,q.useEffect)(()=>{const et=b().stringify({query:Ut,types:P,pageCursor:Z,filters:ze},{arrayFormat:"brackets"}),$t=`${window.location.pathname}?${et}`;window.history.replaceState(null,document.title,$t)},[Ut,P,Z,ze]),null},Et=()=>{const ht=(0,t.P1)();return q.createElement(A.Lt,null,q.createElement(lt,null),ht)},wt=(0,ut.A)(ht=>({card:{backgroundColor:"rgba(0, 0, 0, .11)"},cardContent:{paddingTop:ht.spacing(1)},icon:{color:ht.palette.text.primary},list:{width:"100%"},listItemIcon:{width:"24px",height:"24px"},accordion:{backgroundColor:ht.palette.background.paper},accordionSummary:{minHeight:"auto","&.Mui-expanded":{minHeight:"auto"}},accordionSummaryContent:{margin:ht.spacing(2,0),"&.Mui-expanded":{margin:ht.spacing(2,0)}},accordionDetails:{padding:ht.spacing(0,0,1)}})),Qt=ht=>{const Ut=wt(),{filters:S,setPageCursor:P,setTypes:j,term:Z,types:Ie}=(0,A.SQ)(),ze=(0,r.u)(A.yY),[dt,Qe]=(0,q.useState)(!0),{defaultValue:et,name:$t,showCounts:tn,types:It}=ht,pt=()=>Qe(Ce=>!Ce),qt=Ce=>()=>{j(Ce!==""?[Ce]:[]),P(void 0),Qe(!1)};(0,q.useEffect)(()=>{et&&j([et])},[]);const sn=[{value:"",name:"All",icon:q.createElement(N.A,null)},...It],an=Ie[0]||"",{value:Vt}=(0,H.A)(async()=>{if(!tn)return{};const Ce=await Promise.all(sn.map(Ye=>Ye.value).map(async Ye=>{const{numberOfResults:Kt}=await ze.query({term:Z,types:Ye?[Ye]:[],filters:Ie.includes(Ye)||!Ie.length&&!Ye?S:{},pageLimit:0});return[Ye,Kt!==void 0?`${Kt>=1e4?">10000":Kt} results`:" -- "]}));return Object.fromEntries(Ce)},[S,tn,Z,Ie]);return q.createElement(M.A,{className:Ut.card},q.createElement(v.A,{title:$t,titleTypographyProps:{variant:"overline"}}),q.createElement(y.A,{className:Ut.cardContent},q.createElement(ee.A,{className:Ut.accordion,expanded:dt,onChange:pt},q.createElement(D.A,{classes:{root:Ut.accordionSummary,content:Ut.accordionSummaryContent},expandIcon:q.createElement(X.A,{className:Ut.icon}),IconButtonProps:{size:"small"}},dt?"Collapse":sn.filter(Ce=>Ce.value===an)[0].name),q.createElement(w.A,{classes:{root:Ut.accordionDetails}},q.createElement(ae.A,{className:Ut.list,component:"nav","aria-label":"filter by type",disablePadding:!0,dense:!0},sn.map(Ce=>q.createElement(q.Fragment,{key:Ce.value},q.createElement(F.A,null),q.createElement(Fe.A,{selected:Ie[0]===Ce.value||Ie.length===0&&Ce.value==="",onClick:qt(Ce.value),button:!0},q.createElement(Ae.A,null,(0,q.cloneElement)(Ce.icon,{className:Ut.listItemIcon})),q.createElement(G.A,{primary:Ce.name,secondary:Vt&&Vt[Ce.value]})))))))))},yt=(0,ut.A)(ht=>({tabs:{borderBottom:`1px solid ${ht.palette.textVerySubtle}`},tab:{height:"50px",fontWeight:ht.typography.fontWeightBold,fontSize:ht.typography.pxToRem(13),color:ht.palette.text.primary,minWidth:"130px"}})),ue=ht=>{const Ut=yt(),{setPageCursor:S,setTypes:P,types:j}=(0,A.SQ)(),{defaultValue:Z,types:Ie}=ht,ze=(Qe,et)=>{P(et!==""?[et]:[]),S(void 0)};(0,q.useEffect)(()=>{Z&&P([Z])},[]);const dt=[{value:"",name:"All"},...Ie];return q.createElement(re.A,{"aria-label":"List of search types tabs",className:Ut.tabs,indicatorColor:"primary",value:j.length===0?"":j[0],onChange:ze},dt.map((Qe,et)=>q.createElement(oe.A,{key:et,className:Ut.tab,label:Qe.name,value:Qe.value})))},gt=(0,ut.A)(ht=>({label:{textTransform:"capitalize"},chips:{display:"flex",flexWrap:"wrap",marginTop:ht.spacing(1)},chip:{margin:2}})),xt=ht=>{const{className:Ut,defaultValue:S,name:P,values:j=[]}=ht,Z=gt(),{types:Ie,setTypes:ze}=(0,A.SQ)();(0,z.A)(()=>{Ie.length||(S&&Array.isArray(S)?ze(S):S&&ze([S]))});const dt=Qe=>{const et=Qe.target.value;ze(et)};return q.createElement(de.A,{className:Ut,variant:"filled",fullWidth:!0,"data-testid":"search-typefilter-next"},q.createElement(me.A,{className:Z.label,margin:"dense"},P),q.createElement(ye.A,{multiple:!0,variant:"outlined",value:Ie,onChange:dt,placeholder:"All Results",renderValue:Qe=>q.createElement("div",{className:Z.chips},Qe.map(et=>q.createElement(_.A,{key:et,label:et,className:Z.chip,size:"small"})))},j.map(Qe=>q.createElement(xe.A,{key:Qe,value:Qe},q.createElement(pe.A,{checked:Ie.indexOf(Qe)>-1}),q.createElement(G.A,{primary:Qe})))))};xt.Accordion=ht=>q.createElement(Qt,{...ht}),xt.Tabs=ht=>q.createElement(ue,{...ht})},47745:(In,Ct,e)=>{"use strict";e.d(Ct,{M:()=>A,T:()=>de,a:()=>b});var s=e(5124),l=e(11638);const b=(0,s.c)({id:"plugin.techradar.service"});var A=(me=>(me[me.Down=-1]="Down",me[me.NoChange=0]="NoChange",me[me.Up=1]="Up",me))(A||{});const W=new Array;W.push({id:"adopt",name:"ADOPT",color:"#5BA300",description:"Commodi accusantium culpa sed itaque excepturi rem eum nulla possimus."}),W.push({id:"trial",name:"TRIAL",color:"#009EB0",description:"Recusandae possimus ipsum dolores."}),W.push({id:"assess",name:"ASSESS",color:"#C7BA00",description:"In asperiores repellat error recusandae et adipisci laborum porro."}),W.push({id:"hold",name:"HOLD",color:"#E09B96",description:"Esse mollitia in."});const r=new Array;r.push({id:"infrastructure",name:"Infrastructure"}),r.push({id:"frameworks",name:"Frameworks"}),r.push({id:"languages",name:"Languages"}),r.push({id:"process",name:"Process"});const q=new Array;q.push({timeline:[{moved:0,ringId:"adopt",date:new Date("2020-08-06"),description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua"}],key:"javascript",id:"javascript",title:"JavaScript",quadrant:"languages",links:[{url:"https://www.javascript.com/",title:"Learn more"},{url:"https://www.typescriptlang.org/",title:"TypeScript"}],description:'Excepteur **sint** occaecat *cupidatat* non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\n\n```ts\nconst x = "3";\n```\n'}),q.push({timeline:[{moved:-1,ringId:"adopt",date:new Date("2020-08-06"),description:"Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat"}],key:"typescript",id:"typescript",title:"TypeScript",quadrant:"languages",description:"Itaque earum rerum hic tenetur a sapiente delectus, ut aut reiciendis voluptatibus maiores alias consequatur aut perferendis doloribus asperiores repellat"}),q.push({timeline:[{moved:1,ringId:"adopt",date:new Date("2020-08-06"),description:"Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur"}],links:[{url:"https://webpack.js.org/",title:"Learn more"}],key:"webpack",id:"webpack",title:"Webpack",quadrant:"frameworks"}),q.push({timeline:[{moved:0,ringId:"adopt",date:new Date("2020-08-06")}],links:[{url:"https://reactjs.org/",title:"Learn more"}],key:"react",id:"react",title:"React",quadrant:"frameworks"}),q.push({timeline:[{moved:0,ringId:"adopt",date:new Date("2020-08-06")}],key:"code-reviews",id:"code-reviews",title:"Code Reviews",quadrant:"process"}),q.push({timeline:[{moved:0,ringId:"assess",date:new Date("2020-08-06")}],key:"mob-programming",id:"mob-programming",title:"Mob Programming",quadrant:"process"}),q.push({timeline:[{moved:0,ringId:"adopt",date:new Date("2020-08-06")}],key:"docs-like-code",id:"docs-like-code",title:"Docs-like-code",quadrant:"process"}),q.push({timeline:[{ringId:"hold",date:new Date("2020-08-06")}],key:"force-push",id:"force-push",title:"Force push to master",quadrant:"process"}),q.push({timeline:[{ringId:"adopt",date:new Date("2020-08-06"),description:"long description"},{ringId:"trial",date:new Date("2020-07-05"),description:"long description"}],links:[{url:"https://github.com",title:"Learn more"}],key:"github-actions",id:"github-actions",title:"GitHub Actions",quadrant:"infrastructure"});const Q={entries:q,quadrants:r,rings:W};class t{async load(){return Q}}const pe=(0,l.HM)({id:"tech-radar"}),de=(0,l.i1)({id:"tech-radar",routes:{root:pe},apis:[(0,l.bW)(b,new t)]}).provide((0,l.QJ)({name:"TechRadarPage",component:()=>e.e(8095).then(e.bind(e,38095)).then(function(me){return me.b}).then(me=>me.RadarPage),mountPoint:pe}))},51330:(In,Ct,e)=>{"use strict";e.d(Ct,{Gr:()=>$t});var s=e(5124),l=e(11638),b=e(20443),A=e(14041),W=e(87881),r=e(7031),q=e(64947),Q=e(58837),t=e(41883),pe=e(4321),_=e(33466),de=e(54917),me=e(26343),G=e(5951),xe=e(72501),ye=e(77125),ut=e(29365),z=e(63798),ee=e(6924),D=e(52536),w=e.n(D),M=e(63188),y=e(33478),v=e(85005),F=e(22968),ae=e(18466),Fe=e(80113),Ae=e(10527),X=e(60367);const N=".md-nav__item--nested .md-toggle",H="@backstage/techdocs-addons/nav-expanded",oe=(0,r.A)({root:{position:"absolute",left:"220px",top:"19px",padding:0,minWidth:0}})(q.A),re=(0,r.A)({root:{height:"20px",width:"20px"}})(z.A),_e=(0,r.A)({root:{height:"20px",width:"20px"}})(ee.A),tt=()=>{const pt={expandAllNestedNavs:!1},{value:qt,set:sn}=(0,W.t)(H,{defaultValue:pt}),[an,Vt]=(0,A.useState)(!1),[...Ce]=(0,b.$r)([N]),Ye=(0,A.useCallback)(jt=>{const Wt=jt.checked,ft=qt==null?void 0:qt.expandAllNestedNavs;return!!(ft&&!Wt||!ft&&Wt)},[qt]);(0,A.useEffect)(()=>{Ce!=null&&Ce.length&&(Vt(!0),Ce.forEach(jt=>{Ye(jt)&&jt.click()}))},[qt,Ye,Ce]);const Kt=()=>{sn(jt=>({expandAllNestedNavs:!(jt!=null&&jt.expandAllNestedNavs)}))};return A.createElement(A.Fragment,null,an?A.createElement(oe,{size:"small",onClick:Kt,"aria-label":qt!=null&&qt.expandAllNestedNavs?"collapse-nav":"expand-nav"},qt!=null&&qt.expandAllNestedNavs?A.createElement(_e,null):A.createElement(re,null)):null)},Ve="techdocs-report-issue",Ze=`#${Ve}`,nt='[title^="Edit this page"]',Ge='[title^="Leave feedback for"]',Je='[data-md-component="main"] .md-content',Re=(pt,qt)=>qt==="github"?(0,M.Fw)(pt,"blob"):qt==="gitlab"?(0,M.B)(pt,"blob"):(console.error(`Invalid SCM type ${qt} found in ReportIssue addon for URL ${pt}!`),pt),Le=pt=>{const qt=pt.toString().substring(0,70),sn=qt.length===70?"...":"";return`Documentation feedback: ${qt}${sn}`},lt=(pt,qt,sn)=>{const an="## Documentation Feedback \u{1F4DD}",Vt="#### The highlighted text:",Ce="#### The comment on the text:",Ye="_>replace this line with your comment<_",Kt=pt.toString().trim().split(`
`).map(Wt=>`> ${Wt.trim()}`).join(`
`),jt=[`${sn} URL: <${window.location.href}> 
Markdown URL: <${qt}>`];return`${an}

 ${Vt} 

 ${Kt}

 ${Ce} 
 ${Ye}

 ___
${jt}`},Et=pt=>{var qt,sn;const an={title:"",body:""},Vt=(0,b.k0)(pt),[Ce]=(0,b.$r)([nt]),Ye=(qt=Ce==null?void 0:Ce.href)!=null?qt:"",Kt=(0,s.u)(y.YT),Wt=(0,s.u)(s.p).getOptionalString("app.title")||"Backstage";if(!Vt||!Ye)return an;const ft=(sn=Kt.byUrl(Ye))==null?void 0:sn.type;return ft?{title:Le(Vt),body:lt(Vt,Re(Ye,ft),Wt)}:an},wt=()=>{var pt,qt;const sn=(0,s.u)(y.YT),[an]=(0,b.$r)([nt]),Vt=(pt=an==null?void 0:an.href)!=null?pt:"";if(!Vt)return null;const Ce=(qt=sn.byUrl(Vt))==null?void 0:qt.type;return Ce?{...w()(Re(Vt,Ce)),type:Ce}:null},Qt=(0,Q.A)(pt=>({root:{display:"grid",gridGap:pt.spacing(1),gridAutoFlow:"column",justifyContent:"center",alignItems:"center",color:pt.palette.common.black,fontSize:pt.typography.button.fontSize}})),yt=({type:pt})=>pt==="github"?F.Hk:v.A,ue=({type:pt})=>pt==="github"?"Github":"Gitlab",gt=(pt,qt)=>{const{title:sn,body:an}=qt,Vt=encodeURIComponent(sn),Ce=encodeURIComponent(an),{protocol:Ye,resource:Kt,owner:jt,name:Wt,type:ft}=pt,Ln=`${Ye}://${Kt}/${jt}/${Wt}`,dn=encodeURI(Ln);return ft==="github"?`${dn}/issues/new?title=${Vt}&body=${Ce}`:`${dn}/issues/new?issue[title]=${Vt}&issue[description]=${Ce}`},xt=({template:pt,repository:qt})=>{const sn=Qt(),an=yt(qt),Vt=gt(qt,pt);return A.createElement(F.N_,{className:sn.root,to:Vt,target:"_blank"},A.createElement(an,null)," Open new ",ue(qt)," issue")},ht=(0,Q.A)(pt=>({root:{transform:"translate(-100%, -100%)",position:"absolute",padding:pt.spacing(1),zIndex:pt.zIndex.tooltip,background:pt.palette.common.white}})),Ut=({debounceTime:pt=500,templateBuilder:qt})=>{const sn=ht(),[an,Vt]=(0,A.useState)(),Ce=wt(),Ye=Et(pt),Kt=(0,b.k0)(pt),[jt,Wt]=(0,b.$r)([Je,Ge]);let[ft]=(0,b.$r)([Ze]);return Wt&&(Wt.style.display="none"),(0,A.useEffect)(()=>{if(!Ce||!Kt||!Kt.containsNode(jt,!0)||Kt!=null&&Kt.containsNode(ft,!0))return;const Ln=jt.getBoundingClientRect(),dn=Kt.getRangeAt(0).getBoundingClientRect(),Xt=dn.top-Ln.top,An=50;let Xe=Xt<An?101:Xt-16;if(Ln.top<0){const mt=Math.abs(Ln.top);Xt-mt<An&&(Xe+=89)}Vt({top:`${Xe}px`,left:`${dn.left+dn.width/2}px`})},[Kt,jt,ft]),!Kt||!Ce||!["github","gitlab"].includes(Ce.type)?null:(ft||(ft=document.createElement("div"),ft.setAttribute("id",Ve),jt.prepend(ft)),A.createElement(t.A,{container:ft},A.createElement(pe.A,{"data-testid":"report-issue-addon",className:sn.root,style:an},A.createElement(xt,{repository:Ce,template:qt?qt({selection:Kt}):Ye}))))},S="0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.13),0 0 0 1px rgba(0,0,0,0.02)",P=(0,r.A)(pt=>({root:{height:2,padding:"15px 0"},thumb:{height:18,width:18,backgroundColor:pt.palette.common.white,boxShadow:S,marginTop:-9,marginLeft:-9,"&:focus, &:hover, &$active":{boxShadow:"0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.3),0 0 0 1px rgba(0,0,0,0.02)","@media (hover: none)":{boxShadow:S}}},active:{},valueLabel:{top:"100%",left:"50%",transform:"scale(1) translate(-50%, -5px) !important","& *":{color:pt.palette.textSubtle,fontSize:pt.typography.caption.fontSize,background:"transparent"}},track:{height:2},rail:{height:2,opacity:.5},mark:{height:10,width:1,marginTop:-4},markActive:{opacity:1,backgroundColor:"currentColor"}}))(_.A),j={key:"techdocs.addons.settings.textsize",defaultValue:100},Z=[{value:90},{value:100},{value:115},{value:130},{value:150}],Ie=(0,Q.A)(pt=>({container:{color:pt.palette.textSubtle,display:"flex",alignItems:"center",margin:0,minWidth:200},menuItem:{"&:hover":{background:"transparent"}},decreaseButton:{marginRight:pt.spacing(1)},increaseButton:{marginLeft:pt.spacing(1)}})),ze=()=>{const pt=Ie(),qt=(0,de.A)(),[sn]=(0,b.$r)(["body"]),[an,Vt]=(0,A.useState)(()=>{const Xt=localStorage==null?void 0:localStorage.getItem(j.key);return Xt?parseInt(Xt,10):j.defaultValue}),Ce=(0,A.useMemo)(()=>Z.map(Xt=>Xt.value),[]),Ye=(0,A.useMemo)(()=>Ce.indexOf(an),[Ce,an]),Kt=(0,A.useMemo)(()=>Ce[0],[Ce]),jt=(0,A.useMemo)(()=>Ce[Ce.length-1],[Ce]),Wt=(0,A.useCallback)(()=>`${an}%`,[an]),ft=(0,A.useCallback)((Xt,An)=>{Array.isArray(An)||(Vt(An),localStorage==null||localStorage.setItem(j.key,String(An)))},[Vt]),Ln=(0,A.useCallback)(Xt=>{ft(Xt,Ce[Ye-1])},[Ye,Ce,ft]),dn=(0,A.useCallback)(Xt=>{ft(Xt,Ce[Ye+1])},[Ye,Ce,ft]);return(0,A.useEffect)(()=>{var Xt,An;if(!sn)return;const Xe=(An=(Xt=qt.typography)==null?void 0:Xt.htmlFontSize)!=null?An:16;sn.style.setProperty("--md-typeset-font-size",`${Xe*(an/100)}px`)},[sn,an,qt]),A.createElement(me.A,{className:pt.menuItem,button:!0,disableRipple:!0},A.createElement(G.A,{primary:A.createElement(xe.A,{variant:"subtitle2",color:"textPrimary"},"Text size"),secondary:A.createElement(ye.A,{className:pt.container},A.createElement(ut.A,{className:pt.decreaseButton,size:"small",edge:"start",disabled:an===Kt,onClick:Ln,"aria-label":"Decrease text size"},A.createElement(Fe.A,null)),A.createElement(P,{value:an,"aria-labelledby":"text-size-slider",getAriaValueText:Wt,valueLabelDisplay:"on",valueLabelFormat:Wt,marks:Z,step:null,min:Kt,max:jt,onChangeCommitted:ft}),A.createElement(ut.A,{className:pt.increaseButton,size:"small",edge:"end",disabled:an===jt,onClick:dn,"aria-label":"Increase text size"},A.createElement(ae.A,null))),disableTypography:!0}))},dt=()=>{const pt=(0,b.$r)(["img"]);return(0,A.useEffect)(()=>{let qt=null,sn=new Ae.A({pswpModule:X.A,initialZoomLevel:1,secondaryZoomLevel:an=>{const Vt=an.elementSize.x,Ce=an.elementSize.y,Ye=an.panAreaSize.x,Kt=an.panAreaSize.y,jt=Ye/Vt,Wt=Kt/Ce;return Math.min(jt,Wt)},wheelToZoom:!0,arrowPrevSVG:'<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ArrowBackIosIcon" aria-label="fontSize large"><path d="M11.67 3.87 9.9 2.1 0 12l9.9 9.9 1.77-1.77L3.54 12z"></path></svg>',arrowNextSVG:'<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ArrowForwardIosIcon" aria-label="fontSize large"><path d="M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"></path></svg>',closeSVG:'<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="CloseIcon" aria-label="fontSize large"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>',zoomSVG:`<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ZoomIcon" aria-label="fontSize large">
          <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path><path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z" id="photoswipe-zoom-icon-zoomin-path"></path><path d="M12 10H 7 V 9 H 12 Z" id="photoswipe-zoom-icon-zoomout-path">
        </svg>`});return pt.forEach((an,Vt)=>{an.onclick=()=>(qt===null&&(qt=pt.map(Ce=>({element:Ce,src:Ce.src,msrc:Ce.src,alt:Ce.alt,width:Ce.clientWidth,height:Ce.clientHeight}))),sn.loadAndOpen(Vt,qt),!1)}),sn.init(),()=>{sn.destroy(),sn=null}},[pt]),null},Qe=(0,l.i1)({id:"techdocsModuleAddonsContrib"}),et=Qe.provide((0,b.Hr)({name:"ExpandableNavigation",location:b.eK.PrimarySidebar,component:tt})),$t=Qe.provide((0,b.Hr)({name:"ReportIssue",location:b.eK.Content,component:Ut})),tn=Qe.provide((0,b.Hr)({name:"TextSize",location:b.eK.Settings,component:ze})),It=Qe.provide((0,b.Hr)({name:"LightBox",location:b.eK.Content,component:dt}))},20443:(In,Ct,e)=>{"use strict";e.d(Ct,{$r:()=>nt,AF:()=>ye,Hr:()=>ee,K$:()=>re,R7:()=>N,V1:()=>H,Wm:()=>xe,YR:()=>y,_$:()=>tt,eK:()=>oe,eh:()=>Ve,k0:()=>Je,l9:()=>v,po:()=>ut,sm:()=>F});var s=e(14041),l=e(18690),b=e(11638),A=e(5124),W=e(73466),r=e(28966),q=e(29835),Q=e(97388),t=e(9394),pe=e(91360),_=e(22856),de=e(22968),me=e(12784),G=e.n(me);const xe="techdocs.addons.addon.v1",ye="techdocs.addons.wrapper.v1",ut=()=>null;(0,b.h3)(ut,ye,!0);const z=Re=>`${xe}.${Re.toLocaleLowerCase("en-US")}`;function ee(Re){const{name:Le,component:lt}=Re;return(0,b.zZ)({name:Le,component:{sync:Et=>s.createElement(lt,{...Et})},data:{[xe]:Re,[z(Le)]:!0}})}const D=(Re,Le)=>Re.selectByComponentData({key:Le}).getElements()[0],w=Re=>Re.selectByComponentData({key:ye}).selectByComponentData({key:xe}),M=Re=>Re.selectByComponentData({key:ye}).findComponentData({key:xe}),y=()=>{const Re=(0,l.P1)(),Le=(0,b.OJ)(Re,w),lt=(0,b.OJ)(Re,M),Et=(0,s.useCallback)(yt=>{var ue;if(!Le||!yt)return null;const gt=z(yt.name);return(ue=D(Le,gt))!=null?ue:null},[Le]),wt=(0,s.useCallback)(yt=>{const ue=lt.find(gt=>gt.name===yt);return ue?Et(ue):null},[lt,Et]),Qt=(0,s.useCallback)(yt=>{const ue=lt.filter(gt=>gt.location===yt);return ue.length?ue.map(Et):null},[lt,Et]);return{renderComponentByName:wt,renderComponentsByLocation:Qt}},v=(0,A.c)({id:"plugin.techdocs.service"}),F=(0,A.c)({id:"plugin.techdocs.storageservice"});function ae(Re,Le){return Le.getOptionalBoolean("techdocs.legacyUseCaseSensitiveTripletPaths")||(Re.kind=Re.kind.toLocaleLowerCase(),Re.name=Re.name.toLocaleLowerCase(),Re.namespace=Re.namespace.toLocaleLowerCase()),Re}const Fe=(Re,Le)=>(0,q.U2)(Re)===(0,q.U2)(Le),Ae={title:"",subtitle:"",setTitle:()=>{},setSubtitle:()=>{},setShadowRoot:()=>{},metadata:{loading:!0},entityMetadata:{loading:!0},entityRef:{kind:"",name:"",namespace:""}},X=(0,Q.tK)("techdocs-reader-page-context"),N=(0,s.memo)(Re=>{const{entityRef:Le,children:lt}=Re,Et=(0,A.u)(v),wt=(0,A.u)(A.p),Qt=(0,W.A)(async()=>Et.getEntityMetadata(Le),[Le]),yt=(0,r.A)(async()=>Et.getTechDocsMetadata(Le),[Le]),[ue,gt]=(0,s.useState)(Ae.title),[xt,ht]=(0,s.useState)(Ae.subtitle),[Ut,S]=(0,s.useState)(Ae.shadowRoot);(0,s.useEffect)(()=>{Ut&&!yt.value&&!yt.loading&&yt.retry()},[yt.value,yt.loading,Ut,yt.retry,yt]);const P={metadata:yt,entityRef:ae(Le,wt),entityMetadata:Qt,shadowRoot:Ut,setShadowRoot:S,title:ue,setTitle:gt,subtitle:xt,setSubtitle:ht},j=(0,Q.Bl)({1:P});return s.createElement(b.Ig,{attributes:{entityRef:(0,q.U2)(Le)}},s.createElement(X.Provider,{value:j},lt instanceof Function?lt(P):lt))},(Re,Le)=>Fe(Re.entityRef,Le.entityRef)),H=()=>{const Re=(0,s.useContext)(X);if(Re===void 0)return Ae;const Le=Re.atVersion(1);if(Le===void 0)throw new Error("No context found for version 1.");return Le},oe=Object.freeze({Header:"Header",Subheader:"Subheader",Settings:"Settings",PrimarySidebar:"PrimarySidebar",SecondarySidebar:"SecondarySidebar",Content:"Content"}),re="TECH_DOCS_SHADOW_DOM_STYLE_LOAD",_e=Re=>{(0,s.useEffect)(()=>{var Le;if(!Re)return()=>{};const lt=Re.querySelectorAll('head > link[rel="stylesheet"]');let Et=(Le=lt==null?void 0:lt.length)!=null?Le:0;const wt=new CustomEvent(re);if(!Et)return Re.dispatchEvent(wt),()=>{};const Qt=()=>{--Et===0&&Re.dispatchEvent(wt)};return lt==null||lt.forEach(yt=>{yt.addEventListener("load",Qt)}),()=>{lt==null||lt.forEach(yt=>{yt.removeEventListener("load",Qt)})}},[Re])},tt=Re=>{const[Le,lt]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{if(!Re)return()=>{};lt(!0);const Et=Re.style;Et.setProperty("opacity","0");const wt=()=>{lt(!1),Et.setProperty("opacity","1")};return Re.addEventListener(re,wt),()=>{Re.removeEventListener(re,wt)}},[Re]),Le},Ve=Re=>{const{element:Le,onAppend:lt,children:Et}=Re,[wt,Qt]=(0,s.useState)((0,t.vt)({...(0,_.A)(),insertionPoint:void 0}));_e(Le);const yt=tt(Le),ue=(0,s.useCallback)(gt=>{if(!Le||!gt)return;Qt((0,t.vt)({...(0,_.A)(),insertionPoint:Le.querySelector("head")||void 0}));let xt=gt.shadowRoot;xt||(xt=gt.attachShadow({mode:"open"})),xt.replaceChildren(Le),typeof lt=="function"&&lt(xt)},[Le,lt]);return s.createElement(s.Fragment,null,yt&&s.createElement(de.ke,null),s.createElement(pe.Ay,{jss:wt,sheetsManager:new Map},s.createElement("div",{ref:ue,"data-testid":"techdocs-native-shadowroot"}),Et))},Ze=()=>{const{shadowRoot:Re}=H();return Re},nt=Re=>{const Le=Ze();return Le?Re.map(lt=>Le==null?void 0:Le.querySelectorAll(lt)).filter(lt=>lt.length).map(lt=>Array.from(lt)).flat():[]},Ge=Re=>Re.toString()&&Re.rangeCount&&Re.getRangeAt(0).getBoundingClientRect().top,Je=(Re=0)=>{const Le=Ze(),[lt,Et]=(0,s.useState)(null),wt=(0,s.useMemo)(()=>G()(()=>{const Qt=Le,yt=Qt.getSelection?Qt.getSelection():document.getSelection();yt&&Ge(yt)?Et(yt):Et(null)},Re),[Le,Et,Re]);return(0,s.useEffect)(()=>(window.document.addEventListener("selectionchange",wt),()=>{wt.cancel(),window.document.removeEventListener("selectionchange",wt)}),[wt]),lt}},19491:(In,Ct,e)=>{"use strict";e.d(Ct,{E:()=>xe,a:()=>ut,c:()=>z,d:()=>ee,t:()=>me});var s=e(14041),l=e(18690),b=e(29835),A=e(20443),W=e(45495),r=e(11638),q=e(5124),Q=e(22299),t=e(76866),pe=e(20356),_=e(2069),de=e(92651);const me=(0,r.i1)({id:"techdocs",apis:[(0,r.bW)({api:A.sm,deps:{configApi:q.p,discoveryApi:q.q,identityApi:q.t,fetchApi:q.s},factory:({configApi:Ae,discoveryApi:X,identityApi:N,fetchApi:H})=>new W.T({configApi:Ae,discoveryApi:X,identityApi:N,fetchApi:H})}),(0,r.bW)({api:A.l9,deps:{configApi:q.p,discoveryApi:q.q,fetchApi:q.s},factory:({configApi:Ae,discoveryApi:X,fetchApi:N})=>new W.a({configApi:Ae,discoveryApi:X,fetchApi:N})})],routes:{root:W.r,docRoot:W.b,entityContent:W.c}}),G=me.provide((0,r.QJ)({name:"TechdocsPage",component:()=>Promise.resolve().then(function(){return Fe}).then(Ae=>Ae.Router),mountPoint:W.r})),xe=me.provide((0,r.QJ)({name:"EntityTechdocsContent",component:()=>Promise.resolve().then(function(){return Fe}).then(Ae=>Ae.EmbeddedDocsRouter),mountPoint:W.c})),ye=me.provide((0,r.QJ)({name:"TechDocsCustomHome",component:()=>e.e(257).then(e.bind(e,52638)).then(Ae=>Ae.TechDocsCustomHome),mountPoint:W.r})),ut=me.provide((0,r.QJ)({name:"TechDocsIndexPage",component:()=>Promise.resolve().then(e.bind(e,20356)).then(function(Ae){return Ae.d}).then(Ae=>Ae.TechDocsIndexPage),mountPoint:W.r})),z=me.provide((0,r.QJ)({name:"TechDocsReaderPage",component:()=>e.e(9507).then(e.bind(e,89507)).then(Ae=>Ae.TechDocsReaderPage),mountPoint:W.b})),ee=me.provide((0,Q.c)({name:"TechDocsSearchResultListItem",component:()=>Promise.resolve().then(e.bind(e,27332)).then(Ae=>Ae.TechDocsSearchResultListItem),predicate:Ae=>Ae.type==="techdocs"})),D="backstage.io/techdocs-entity",w=({entity:Ae})=>{var X,N;let H=(0,b.sM)(Ae);if((X=Ae.metadata.annotations)!=null&&X[D])try{H=(0,b.KU)((N=Ae.metadata.annotations)==null?void 0:N[D])}catch{}return s.createElement(z,{entityRef:H},s.createElement(t.e,null),s.createElement(t.d,{withSearch:!1}))},M="backstage.io/techdocs-ref",y="backstage.io/techdocs-entity";var Fe=Object.freeze({__proto__:null,EmbeddedDocsRouter:Ae=>{var X,N;const{children:H}=Ae,{entity:oe}=(0,_.u)(),re=(0,l.Ye)([{path:"/*",element:s.createElement(w,{entity:oe}),children:[{path:"*",element:H}]}]);return((X=oe.metadata.annotations)==null?void 0:X[M])||((N=oe.metadata.annotations)==null?void 0:N[y])?re:s.createElement(de.o9,{annotation:[M]})},Router:()=>s.createElement(l.BV,null,s.createElement(l.qh,{path:"/",element:s.createElement(pe.c,null)}),s.createElement(l.qh,{path:"/:namespace/:kind/:name/*",element:s.createElement(t.T,null)})),isTechDocsAvailable:Ae=>{var X,N,H,oe;return!!((N=(X=Ae==null?void 0:Ae.metadata)==null?void 0:X.annotations)!=null&&N[M])||!!((oe=(H=Ae==null?void 0:Ae.metadata)==null?void 0:H.annotations)!=null&&oe[y])}})},20356:(In,Ct,e)=>{"use strict";e.r(Ct),e.d(Ct,{D:()=>y,E:()=>v,T:()=>F,a:()=>Ae,b:()=>Fe,c:()=>X,d:()=>N,t:()=>z});var s=e(14041),l=e(18690),b=e(22968),A=e(92651),W=e(2069),r=e(75757),q=e(11638),Q=e(5124),t=e(36338),pe=e(45250),_=e.n(pe),de=e(29835),me=e(45495),G=e(55290),xe=e(7031),ye=e(80109),ut=e(15303);function z(H,oe){return oe.getOptionalBoolean("techdocs.legacyUseCaseSensitiveTripletPaths")?H:H.toLocaleLowerCase("en-US")}const ee=(0,xe.A)({root:{color:"#f3ba37"}})(ye.A),D={createCopyDocsUrlAction(H){return oe=>({icon:()=>s.createElement(G.A,{fontSize:"small"}),tooltip:"Click to copy documentation link to clipboard",onClick:()=>H(`${window.location.origin}${oe.resolved.docsUrl}`)})},createStarEntityAction(H,oe){return re=>{const _e=re.entity,tt=H(_e);return{cellStyle:{paddingLeft:"1em"},icon:()=>tt?s.createElement(ee,null):s.createElement(ut.A,null),tooltip:tt?"Remove from favorites":"Add to favorites",onClick:()=>oe(_e)}}}};function w(H){return H.metadata.title||H.metadata.name}const M={createNameColumn(){return{title:"Document",field:"entity.metadata.name",highlight:!0,render:H=>s.createElement(b.md,{value:s.createElement(b.N_,{to:H.resolved.docsUrl},w(H.entity)),subvalue:H.entity.metadata.description})}},createOwnerColumn(){return{title:"Owner",field:"resolved.ownedByRelationsTitle",render:({resolved:H})=>s.createElement(A.iI,{entityRefs:H.ownedByRelations,defaultKind:"group"})}},createKindColumn(){return{title:"Kind",field:"entity.kind"}},createTypeColumn(){return{title:"Type",field:"entity.spec.type"}}},y=H=>{const{entities:oe,title:re,loading:_e,columns:tt,actions:Ve,options:Ze}=H,[,nt]=(0,t.A)(),Ge=(0,q.Sf)(me.b),Je=(0,Q.u)(Q.p);if(!oe)return null;const Re=oe.map(Qt=>{var yt;const ue=(0,W.g)(Qt,de.vv);return{entity:Qt,resolved:{docsUrl:Ge({namespace:z((yt=Qt.metadata.namespace)!=null?yt:"default",Je),kind:z(Qt.kind,Je),name:z(Qt.metadata.name,Je)}),ownedByRelations:ue,ownedByRelationsTitle:ue.map(gt=>(0,A.SE)(gt,{defaultKind:"group"})).join(", ")}}}),Le=[M.createNameColumn(),M.createOwnerColumn(),M.createKindColumn(),M.createTypeColumn()],lt=[D.createCopyDocsUrlAction(nt)],Et=20,wt=Re&&Re.length>Et;return s.createElement(s.Fragment,null,_e||Re&&Re.length>0?s.createElement(b.XI,{isLoading:_e,options:{paging:wt,pageSize:Et,search:!0,actionsColumnIndex:-1,...Ze},data:Re,columns:tt||Le,actions:Ve||lt,title:re?`${re} (${Re.length})`:`All (${Re.length})`}):s.createElement(b.pp,{missing:"data",title:"No documents to show",description:"Create your own document. Check out our Getting Started Information",action:s.createElement(b.Su,{color:"primary",to:"https://backstage.io/docs/features/techdocs/getting-started",variant:"contained"},"DOCS")}))};y.columns=M,y.actions=D;const v=H=>{var oe,re;const{columns:_e,actions:tt,options:Ve}=H,{loading:Ze,error:nt,entities:Ge,filters:Je}=(0,A.nK)(),{isStarredEntity:Re,toggleStarredEntity:Le}=(0,A.IT)(),[,lt]=(0,t.A)(),Et=(0,pe.capitalize)((re=(oe=Je.user)==null?void 0:oe.value)!=null?re:"all"),wt=[D.createCopyDocsUrlAction(lt),D.createStarEntityAction(Re,Le)];return nt?s.createElement(b.Bp,{severity:"error",title:"Could not load available documentation."},s.createElement(b.z7,{language:"text",text:nt.toString()})):s.createElement(y,{title:Et,entities:Ge,loading:Ze,actions:tt||wt,columns:_e,options:Ve})};v.columns=M,v.actions=D;const F=H=>{var oe;const{children:re}=H,tt=`Documentation available in ${(oe=(0,Q.u)(Q.p).getOptionalString("organization.name"))!=null?oe:"Backstage"}`;return s.createElement(b.dT,{title:"Documentation",subtitle:tt,themeId:"documentation"},re)};class ae{getCatalogFilters(){return{"metadata.annotations.backstage.io/techdocs-ref":r.cr}}}const Fe=()=>{const{updateFilters:H}=(0,A.nK)();return(0,s.useEffect)(()=>{H({techdocs:new ae})},[H]),null},Ae=H=>{const{initialFilter:oe="owned",columns:re,actions:_e}=H;return s.createElement(F,null,s.createElement(b.UC,null,s.createElement(b.dv,{title:""},s.createElement(b.Yl,null,"Discover documentation in your ecosystem.")),s.createElement(A.B9,null,s.createElement(A.GI,null,s.createElement(A.GI.Filters,null,s.createElement(Fe,null),s.createElement(A.y2,{initialFilter:oe}),s.createElement(A.t3,null),s.createElement(A.mo,null)),s.createElement(A.GI.Content,null,s.createElement(v,{actions:_e,columns:re}))))))},X=H=>(0,l.P1)()||s.createElement(Ae,{...H});var N=Object.freeze({__proto__:null,TechDocsIndexPage:X})},76866:(In,Ct,e)=>{"use strict";e.d(Ct,{T:()=>Oa,a:()=>Aa,d:()=>kn,e:()=>_n});var s=e(14041),l=e(18690),b=e(22968),A=e(20443),W=e(42899),r=e(58837),q=e(99703),Q=e(268),t=e(54917),pe=e(7031),_=e(50868),de=e(13270),me=e(27332),G=e(78467),xe=e(64947),ye=e(74219),ut=e(73845),z=e(29365),ee=e(72501),D=e(32881),w=e(5124),M=e(11638),y=e(73466),v=e(28966),F=e(5893),ae=e(33478),Fe=e(71651),Ae=e.n(Fe),X=e(63188),N=e(90292),H=e(52536),oe=e.n(H),re=e(27326),_e=e(10437),tt=e(71677),Ve=e(36338),Ze=e(41883),nt=e(93285),Ge=e(4387),Je=e(13660),Re=e(2069),Le=e(92651),lt=e(29835),Et=e(45250),wt=e(45495),Qt=e(75173),yt=e(37757),ue=e(77125),gt=e(9684),xt=e(91042),ht=e(76842),Ut=e(3399);function S(){const J=useApi(identityApiRef),[ge,ke]=useAsync(async()=>{const{token:it}=await J.getCredentials();if(!it)throw new Error("Expected Backstage token in sign-in response");return it});return useMountEffect(ke.execute),ge.status==="error"&&ge.error?React.createElement(React.Fragment,null,"An error occurred: ",ge.error.message):ge.status==="success"&&ge.result?React.createElement("form",{ref:it=>it==null?void 0:it.submit(),action:window.location.href,method:"POST"},React.createElement("input",{type:"hidden",name:"type",value:"sign-in"}),React.createElement("input",{type:"hidden",name:"token",value:ge.result}),React.createElement("input",{type:"submit",value:"Continue"})):null}const P="/.backstage/auth/v1/cookie";function j(J){const{pluginId:ge}=J!=null?J:{},ke=(0,w.u)(w.s),it=(0,w.u)(w.q),St=(0,s.useMemo)(()=>"BroadcastChannel"in window?new BroadcastChannel(`${ge}-auth-cookie-expires-at`):null,[ge]),[At,cn]=(0,xt.Y)(async()=>{const We=`${await it.getBaseUrl(ge)}${P}`,Ne=await ke.fetch(`${We}`,{credentials:"include"});if(!Ne.ok)throw await Ut.o3.fromResponse(Ne);const He=await Ne.json();if(!He.expiresAt)throw new Error("No expiration date found in response");return He});(0,ht.u)(cn.execute);const hn=(0,s.useCallback)(()=>{cn.execute()},[cn]),ie=(0,s.useCallback)(Te=>{const We=(1+3*Math.random())*6e4,Ne=Date.parse(Te.expiresAt)-Date.now()-We,He=setTimeout(hn,Ne);return()=>clearTimeout(He)},[hn]);return(0,s.useEffect)(()=>{if(At.status!=="success"||!At.result)return()=>{};St==null||St.postMessage({action:"COOKIE_REFRESH_SUCCESS",payload:At.result});let Te=ie(At.result);const We=Ne=>{const{action:He,payload:zt}=Ne.data;He==="COOKIE_REFRESH_SUCCESS"&&(Te(),Te=ie(zt))};return St==null||St.addEventListener("message",We),()=>{Te(),St==null||St.removeEventListener("message",We)}},[At,ie,St]),At.status==="not-executed"?{status:"loading"}:At.status==="loading"&&!At.result?{status:"loading"}:At.status==="loading"&&At.error?{status:"loading"}:At.status==="error"&&At.error?{status:"error",error:At.error,retry:hn}:{status:"success",data:At.result}}function Z(J){const{children:ge,...ke}=J,it=(0,M.nm)(),{Progress:St}=it.getComponents(),At=j(ke);return At.status==="loading"?s.createElement(St,null):At.status==="error"?s.createElement(b.bJ,{error:At.error},s.createElement(xe.A,{variant:"outlined",onClick:At.retry},"Retry")):s.createElement(s.Fragment,null,ge)}function Ie({contentLoading:J,content:ge,activeSyncState:ke}){return J||ke==="BUILD_READY_RELOAD"||!ge&&ke==="CHECKING"?"CHECKING":!ge&&ke==="BUILDING"?"INITIAL_BUILD":ge?ke==="BUILDING"?"CONTENT_STALE_REFRESHING":ke==="BUILD_READY"?"CONTENT_STALE_READY":ke==="ERROR"?"CONTENT_STALE_ERROR":"CONTENT_FRESH":"CONTENT_NOT_FOUND"}function ze(J,ge){const ke={...J};switch(ge.type){case"sync":ge.state==="CHECKING"&&(ke.buildLog=[]),ke.activeSyncState=ge.state,ke.syncError=ge.syncError;break;case"contentLoading":ke.contentLoading=!0,ke.contentError=void 0;break;case"content":typeof ge.path=="string"&&(ke.path=ge.path),ke.contentLoading=!1,ke.content=ge.content,ke.contentError=ge.contentError;break;case"buildLog":ke.buildLog=ke.buildLog.concat(ge.log);break;default:throw new Error}return["BUILD_READY","BUILD_READY_RELOAD"].includes(ke.activeSyncState)&&["contentLoading","content"].includes(ge.type)&&(ke.activeSyncState="UP_TO_DATE",ke.buildLog=[]),ke}function dt(J,ge,ke,it){var St,At;const[cn,hn]=(0,s.useReducer)(ze,{activeSyncState:"CHECKING",path:it,contentLoading:!0,buildLog:[]}),ie=(0,w.u)(A.sm),{retry:Te}=(0,v.A)(async()=>{hn({type:"contentLoading"});try{const He=await ie.getEntityDocs({kind:J,namespace:ge,name:ke},it);return hn({type:"content",content:He,path:it}),He}catch(He){hn({type:"content",contentError:He,path:it})}},[ie,J,ge,ke,it]),We=(0,s.useRef)({content:void 0,reload:()=>{}});return We.current={content:cn.content,reload:Te},(0,y.A)(async()=>{hn({type:"sync",state:"CHECKING"});const He=setTimeout(()=>{hn({type:"sync",state:"BUILDING"})},1e3);try{switch(await ie.syncEntityDocs({kind:J,namespace:ge,name:ke},_t=>{hn({type:"buildLog",log:_t})})){case"updated":We.current.content?hn({type:"sync",state:"BUILD_READY"}):(We.current.reload(),hn({type:"sync",state:"BUILD_READY_RELOAD"}));break;case"cached":hn({type:"sync",state:"UP_TO_DATE"});break;default:hn({type:"sync",state:"ERROR",syncError:new Error("Unexpected return state")});break}}catch(zt){hn({type:"sync",state:"ERROR",syncError:zt})}finally{clearTimeout(He)}},[J,ke,ge,ie,hn,We]),{state:(0,s.useMemo)(()=>Ie({activeSyncState:cn.activeSyncState,contentLoading:cn.contentLoading,content:cn.content}),[cn.activeSyncState,cn.content,cn.contentLoading]),contentReload:Te,path:cn.path,content:cn.content,contentErrorMessage:(St=cn.contentError)==null?void 0:St.toString(),syncErrorMessage:(At=cn.syncError)==null?void 0:At.toString(),buildLog:cn.buildLog}}const Qe=(0,s.createContext)({}),et=()=>(0,s.useContext)(Qe),$t=J=>{const{children:ge}=J,{"*":ke=""}=(0,l.g)(),{entityRef:it}=(0,A.V1)(),{kind:St,namespace:At,name:cn}=it,hn=dt(St,At,cn,ke);return s.createElement(Qe.Provider,{value:hn},ge instanceof Function?ge(hn):ge)},tn=J=>ge=>s.createElement($t,null,s.createElement(J,{...ge})),It=J=>J==null?void 0:J.document,pt=J=>{const{entityId:ge,entityTitle:ke,debounceTime:it=150}=J,[St,At]=(0,s.useState)(!1),cn=(0,l.Zp)(),{setFilters:hn,result:{loading:ie,value:Te}}=(0,de.SQ)(),[We,Ne]=(0,s.useState)([]);(0,s.useEffect)(()=>{let Gt=!0;if(Gt&&Te){const fn=Te.results.slice(0,10);Ne(fn)}return()=>{Gt=!1}},[ie,Te]);const{kind:He,name:zt,namespace:_t}=ge;(0,s.useEffect)(()=>{hn(Gt=>({...Gt,kind:He,namespace:_t,name:zt}))},[He,_t,zt,hn]);const bt=(Gt,fn)=>{if(It(fn)){const{location:rn}=fn.document;cn(rn)}};return s.createElement(de.pY,{"data-testid":"techdocs-search-bar",size:"small",open:St,getOptionLabel:()=>"",filterOptions:Gt=>Gt,onClose:()=>{At(!1)},onFocus:()=>{At(!0)},onChange:bt,blurOnSelect:!0,noOptionsText:"No results found",value:null,options:We,renderOption:({document:Gt,highlight:fn})=>s.createElement(me.TechDocsSearchResultListItem,{result:Gt,lineClamp:3,asListItem:!1,asLink:!1,title:Gt.title,highlight:fn}),loading:ie,inputDebounceTime:it,inputPlaceholder:`Search ${ke||ge.name} docs`,freeSolo:!1})},qt=J=>{const ge={term:"",types:["techdocs"],pageCursor:"",filters:J.entityId};return s.createElement(de.Lt,{initialState:ge},s.createElement(pt,{...J}))},sn=(0,r.A)(J=>(0,q.A)({paper:{width:"100%",[J.breakpoints.up("sm")]:{width:"75%"},[J.breakpoints.up("md")]:{width:"50%"},padding:J.spacing(2.5)},root:{height:"100%",overflow:"hidden"},logs:{background:J.palette.background.default}})),an=({buildLog:J,onClose:ge})=>{const ke=sn(),it=J.length===0?"Waiting for logs...":J.join(`
`);return s.createElement(W.A,{container:!0,direction:"column",className:ke.root,spacing:0,wrap:"nowrap"},s.createElement(W.A,{item:!0,container:!0,justifyContent:"space-between",alignItems:"center",spacing:0,wrap:"nowrap"},s.createElement(ee.A,{variant:"h5"},"Build Details"),s.createElement(z.A,{key:"dismiss",title:"Close the drawer",onClick:ge,color:"inherit"},s.createElement(D.A,null))),s.createElement(W.A,{item:!0,xs:!0},s.createElement(b.rW,{text:it,classes:{root:ke.logs}})))},Vt=({buildLog:J})=>{const ge=sn(),[ke,it]=(0,s.useState)(!1);return s.createElement(s.Fragment,null,s.createElement(xe.A,{color:"inherit",onClick:()=>it(!0)},"Show Build Logs"),s.createElement(ut.Ay,{classes:{paper:ge.paper},anchor:"right",open:ke,onClose:()=>it(!1)},s.createElement(an,{buildLog:J,onClose:()=>it(!1)})))},Ce=({errorMessage:J})=>{const ge=(0,w.u)(w.p).getOptionalString("techdocs.builder"),ke=(0,M.st)(),{entityRef:it}=(0,A.V1)(),St=(0,l.zy)();(0,s.useEffect)(()=>{const{pathname:cn,search:hn,hash:ie}=St;ke.captureEvent("not-found",`${cn}${hn}${ie}`,{attributes:it})},[ke,it,St]);let At="";return ge!=="local"&&(At="Note that techdocs.builder is not set to 'local' in your config, which means this Backstage app will not generate docs if they are not found. Make sure the project's docs are generated and published by some external process (e.g. CI/CD pipeline). Or change techdocs.builder to 'local' to generate docs from this Backstage instance."),s.createElement(b.M,{status:"404",statusMessage:J||"Documentation not found",additionalInfo:At})},Ye=(0,r.A)(J=>({root:{marginBottom:J.spacing(2)},message:{wordBreak:"break-word",overflowWrap:"anywhere"}})),Kt=()=>{let J=null;const ge=Ye(),{state:ke,contentReload:it,contentErrorMessage:St,syncErrorMessage:At,buildLog:cn}=et();return ke==="INITIAL_BUILD"&&(J=s.createElement(ye.A,{classes:{root:ge.root},variant:"outlined",severity:"info",icon:s.createElement(G.A,{size:"24px"}),action:s.createElement(Vt,{buildLog:cn})},"Documentation is accessed for the first time and is being prepared. The subsequent loads are much faster.")),ke==="CONTENT_STALE_REFRESHING"&&(J=s.createElement(ye.A,{variant:"outlined",severity:"info",icon:s.createElement(G.A,{size:"24px"}),action:s.createElement(Vt,{buildLog:cn}),classes:{root:ge.root}},"A newer version of this documentation is being prepared and will be available shortly.")),ke==="CONTENT_STALE_READY"&&(J=s.createElement(ye.A,{variant:"outlined",severity:"success",action:s.createElement(xe.A,{color:"inherit",onClick:()=>it()},"Refresh"),classes:{root:ge.root}},"A newer version of this documentation is now available, please refresh to view.")),ke==="CONTENT_STALE_ERROR"&&(J=s.createElement(ye.A,{variant:"outlined",severity:"error",action:s.createElement(Vt,{buildLog:cn}),classes:{root:ge.root,message:ge.message}},"Building a newer version of this documentation failed."," ",At)),ke==="CONTENT_NOT_FOUND"&&(J=s.createElement(s.Fragment,null,At&&s.createElement(ye.A,{variant:"outlined",severity:"error",action:s.createElement(Vt,{buildLog:cn}),classes:{root:ge.root,message:ge.message}},"Building a newer version of this documentation failed."," ",At),s.createElement(Ce,{errorMessage:St}))),J},jt=/main\.[A-Fa-f0-9]{8}\.min\.css$/,Wt=/^https:\/\/fonts\.googleapis\.com/,ft=/^https:\/\/fonts\.gstatic\.com/,Ln=J=>J.nodeName==="LINK",dn=J=>{const ge=(J==null?void 0:J.getAttribute("href"))||"",ke=ge.match(jt),it=ge.match(Wt),St=ge.match(ft);return ke||it||St},Xt=J=>(Ln(J)&&!dn(J)&&J.remove(),J),An=J=>J.nodeName==="IFRAME",Xe=(J,ge)=>{const ke=J.getAttribute("src")||"";try{const{host:it}=new URL(ke);return ge.includes(it)}catch{return!1}},mt=J=>ge=>(An(ge)&&!Xe(ge,J)&&ge.remove(),ge),Dt=()=>{const J=(0,w.u)(w.p);return(0,s.useMemo)(()=>J.getOptionalConfig("techdocs.sanitizer"),[J])},rt=()=>{const J=Dt();return(0,s.useCallback)(async ge=>{const ke=J==null?void 0:J.getOptionalStringArray("allowedIframeHosts");Ae().addHook("beforeSanitizeElements",Xt);const it=["link"];return ke&&(it.push("iframe"),Ae().addHook("beforeSanitizeElements",mt(ke))),Ae().sanitize(ge.outerHTML,{ADD_TAGS:it,FORBID_TAGS:["style"],WHOLE_DOCUMENT:!0,RETURN_DOM:!0})},[J])};var qe=({theme:J})=>`
/*==================  Variables  ==================*/
/*
  As the MkDocs output is rendered in shadow DOM, the CSS variable definitions on the root selector are not applied. Instead, they have to be applied on :host.
  As there is no way to transform the served main*.css yet (for example in the backend), we have to copy from main*.css and modify them.
*/

:host {
  /* FONT */
  --md-default-fg-color: ${J.palette.text.primary};
  --md-default-fg-color--light: ${J.palette.text.secondary};
  --md-default-fg-color--lighter: ${(0,Q.a)(J.palette.text.secondary,.7)};
  --md-default-fg-color--lightest: ${(0,Q.a)(J.palette.text.secondary,.3)};

  /* BACKGROUND */
  --md-default-bg-color:${J.palette.background.default};
  --md-default-bg-color--light: ${J.palette.background.paper};
  --md-default-bg-color--lighter: ${(0,Q.a)(J.palette.background.paper,.7)};
  --md-default-bg-color--lightest: ${(0,Q.a)(J.palette.background.paper,.3)};

  /* PRIMARY */
  --md-primary-fg-color: ${J.palette.primary.main};
  --md-primary-fg-color--light: ${J.palette.primary.light};
  --md-primary-fg-color--dark: ${J.palette.primary.dark};
  --md-primary-bg-color: ${J.palette.primary.contrastText};
  --md-primary-bg-color--light: ${(0,Q.a)(J.palette.primary.contrastText,.7)};

  /* ACCENT */
  --md-accent-fg-color: var(--md-primary-fg-color);

  /* SHADOW */
  --md-shadow-z1: ${J.shadows[1]};
  --md-shadow-z2: ${J.shadows[2]};
  --md-shadow-z3: ${J.shadows[3]};

  /* EXTENSIONS */
  --md-admonition-fg-color: var(--md-default-fg-color);
  --md-admonition-bg-color: var(--md-default-bg-color);
  /* Admonitions and others are using SVG masks to define icons. These masks are defined as CSS variables. */
  --md-admonition-icon--note: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>');
  --md-admonition-icon--abstract: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 5h16v2H4V5m0 4h16v2H4V9m0 4h16v2H4v-2m0 4h10v2H4v-2z"/></svg>');
  --md-admonition-icon--info: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 9h-2V7h2m0 10h-2v-6h2m-1-9A10 10 0 002 12a10 10 0 0010 10 10 10 0 0010-10A10 10 0 0012 2z"/></svg>');
  --md-admonition-icon--tip: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17.55 11.2c-.23-.3-.5-.56-.76-.82-.65-.6-1.4-1.03-2.03-1.66C13.3 7.26 13 4.85 13.91 3c-.91.23-1.75.75-2.45 1.32-2.54 2.08-3.54 5.75-2.34 8.9.04.1.08.2.08.33 0 .22-.15.42-.35.5-.22.1-.46.04-.64-.12a.83.83 0 01-.15-.17c-1.1-1.43-1.28-3.48-.53-5.12C5.89 10 5 12.3 5.14 14.47c.04.5.1 1 .27 1.5.14.6.4 1.2.72 1.73 1.04 1.73 2.87 2.97 4.84 3.22 2.1.27 4.35-.12 5.96-1.6 1.8-1.66 2.45-4.32 1.5-6.6l-.13-.26c-.2-.46-.47-.87-.8-1.25l.05-.01m-3.1 6.3c-.28.24-.73.5-1.08.6-1.1.4-2.2-.16-2.87-.82 1.19-.28 1.89-1.16 2.09-2.05.17-.8-.14-1.46-.27-2.23-.12-.74-.1-1.37.18-2.06.17.38.37.76.6 1.06.76 1 1.95 1.44 2.2 2.8.04.14.06.28.06.43.03.82-.32 1.72-.92 2.27h.01z"/></svg>');
  --md-admonition-icon--success: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2m-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>');
  --md-admonition-icon--question: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15.07 11.25l-.9.92C13.45 12.89 13 13.5 13 15h-2v-.5c0-1.11.45-2.11 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41a2 2 0 00-2-2 2 2 0 00-2 2H8a4 4 0 014-4 4 4 0 014 4 3.2 3.2 0 01-.93 2.25M13 19h-2v-2h2M12 2A10 10 0 002 12a10 10 0 0010 10 10 10 0 0010-10c0-5.53-4.5-10-10-10z"/></svg>');
  --md-admonition-icon--warning: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 14h-2v-4h2m0 8h-2v-2h2M1 21h22L12 2 1 21z"/></svg>');
  --md-admonition-icon--failure: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2c5.53 0 10 4.47 10 10s-4.47 10-10 10S2 17.53 2 12 6.47 2 12 2m3.59 5L12 10.59 8.41 7 7 8.41 10.59 12 7 15.59 8.41 17 12 13.41 15.59 17 17 15.59 13.41 12 17 8.41 15.59 7z"/></svg>');
  --md-admonition-icon--danger: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11.5 20l4.86-9.73H13V4l-5 9.73h3.5V20M12 2c2.75 0 5.1 1 7.05 2.95C21 6.9 22 9.25 22 12s-1 5.1-2.95 7.05C17.1 21 14.75 22 12 22s-5.1-1-7.05-2.95C3 17.1 2 14.75 2 12s1-5.1 2.95-7.05C6.9 3 9.25 2 12 2z"/></svg>');
  --md-admonition-icon--bug: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 12h-4v-2h4m0 6h-4v-2h4m6-6h-2.81a5.985 5.985 0 00-1.82-1.96L17 4.41 15.59 3l-2.17 2.17a6.002 6.002 0 00-2.83 0L8.41 3 7 4.41l1.62 1.63C7.88 6.55 7.26 7.22 6.81 8H4v2h2.09c-.05.33-.09.66-.09 1v1H4v2h2v1c0 .34.04.67.09 1H4v2h2.81c1.04 1.79 2.97 3 5.19 3s4.15-1.21 5.19-3H20v-2h-2.09c.05-.33.09-.66.09-1v-1h2v-2h-2v-1c0-.34-.04-.67-.09-1H20V8z"/></svg>');
  --md-admonition-icon--example: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7 13v-2h14v2H7m0 6v-2h14v2H7M7 7V5h14v2H7M3 8V5H2V4h2v4H3m-1 9v-1h3v4H2v-1h2v-.5H3v-1h1V17H2m2.25-7a.75.75 0 01.75.75c0 .2-.08.39-.21.52L3.12 13H5v1H2v-.92L4 11H2v-1h2.25z"/></svg>');
  --md-admonition-icon--quote: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 17h3l2-4V7h-6v6h3M6 17h3l2-4V7H5v6h3l-2 4z"/></svg>');
  --md-footnotes-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 7v4H5.83l3.58-3.59L8 6l-6 6 6 6 1.41-1.42L5.83 13H21V7h-2z"/></svg>');
  --md-details-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>');
  --md-tasklist-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"/></svg>');
  --md-tasklist-icon--checked: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>');
  --md-nav-icon--prev: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>');
  --md-nav-icon--next: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>');
  --md-toc-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg>');
  --md-clipboard-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 21H8V7h11m0-2H8a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2m-3-4H4a2 2 0 0 0-2 2v14h2V3h12V1z"/></svg>');
  --md-search-result-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h7c-.41-.25-.8-.56-1.14-.9-.33-.33-.61-.7-.86-1.1H6V4h7v5h5v1.18c.71.16 1.39.43 2 .82V8l-6-6m6.31 16.9c1.33-2.11.69-4.9-1.4-6.22-2.11-1.33-4.91-.68-6.22 1.4-1.34 2.11-.69 4.89 1.4 6.22 1.46.93 3.32.93 4.79.02L22 23.39 23.39 22l-3.08-3.1m-3.81.1a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5z"/></svg>');
  --md-source-forks-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M5 3.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm0 2.122a2.25 2.25 0 1 0-1.5 0v.878A2.25 2.25 0 0 0 5.75 8.5h1.5v2.128a2.251 2.251 0 1 0 1.5 0V8.5h1.5a2.25 2.25 0 0 0 2.25-2.25v-.878a2.25 2.25 0 1 0-1.5 0v.878a.75.75 0 0 1-.75.75h-4.5A.75.75 0 0 1 5 6.25v-.878zm3.75 7.378a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm3-8.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5z"/></svg>');
  --md-source-repositories-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M2 2.5A2.5 2.5 0 0 1 4.5 0h8.75a.75.75 0 0 1 .75.75v12.5a.75.75 0 0 1-.75.75h-2.5a.75.75 0 1 1 0-1.5h1.75v-2h-8a1 1 0 0 0-.714 1.7.75.75 0 0 1-1.072 1.05A2.495 2.495 0 0 1 2 11.5v-9zm10.5-1V9h-8c-.356 0-.694.074-1 .208V2.5a1 1 0 0 1 1-1h8zM5 12.25v3.25a.25.25 0 0 0 .4.2l1.45-1.087a.25.25 0 0 1 .3 0L8.6 15.7a.25.25 0 0 0 .4-.2v-3.25a.25.25 0 0 0-.25-.25h-3.5a.25.25 0 0 0-.25.25z"/></svg>');
  --md-source-stars-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8 .25a.75.75 0 0 1 .673.418l1.882 3.815 4.21.612a.75.75 0 0 1 .416 1.279l-3.046 2.97.719 4.192a.75.75 0 0 1-1.088.791L8 12.347l-3.766 1.98a.75.75 0 0 1-1.088-.79l.72-4.194L.818 6.374a.75.75 0 0 1 .416-1.28l4.21-.611L7.327.668A.75.75 0 0 1 8 .25zm0 2.445L6.615 5.5a.75.75 0 0 1-.564.41l-3.097.45 2.24 2.184a.75.75 0 0 1 .216.664l-.528 3.084 2.769-1.456a.75.75 0 0 1 .698 0l2.77 1.456-.53-3.084a.75.75 0 0 1 .216-.664l2.24-2.183-3.096-.45a.75.75 0 0 1-.564-.41L8 2.694v.001z"/></svg>');
  --md-source-version-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M2.5 7.775V2.75a.25.25 0 0 1 .25-.25h5.025a.25.25 0 0 1 .177.073l6.25 6.25a.25.25 0 0 1 0 .354l-5.025 5.025a.25.25 0 0 1-.354 0l-6.25-6.25a.25.25 0 0 1-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 0 1 0 2.474l-5.026 5.026a1.75 1.75 0 0 1-2.474 0l-6.25-6.25A1.75 1.75 0 0 1 1 7.775zM6 5a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"/></svg>');
  --md-version-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="m310.6 246.6-127.1 128c-7.1 6.3-15.3 9.4-23.5 9.4s-16.38-3.125-22.63-9.375l-127.1-128C.224 237.5-2.516 223.7 2.438 211.8S19.07 192 32 192h255.1c12.94 0 24.62 7.781 29.58 19.75s3.12 25.75-6.08 34.85z"/></svg>');
}

:host > * {
  /* CODE */
  --md-code-fg-color: ${J.palette.text.primary};
  --md-code-bg-color: ${J.palette.background.paper};
  --md-code-hl-color: ${(0,Q.X4)(J.palette.warning.main,.5)};
  --md-code-hl-keyword-color: ${J.palette.type==="dark"?J.palette.primary.light:J.palette.primary.dark};
  --md-code-hl-function-color: ${J.palette.type==="dark"?J.palette.secondary.light:J.palette.secondary.dark};
  --md-code-hl-string-color: ${J.palette.type==="dark"?J.palette.success.light:J.palette.success.dark};
  --md-code-hl-number-color: ${J.palette.type==="dark"?J.palette.error.light:J.palette.error.dark};
  --md-code-hl-constant-color: var(--md-code-hl-function-color);
  --md-code-hl-special-color: var(--md-code-hl-function-color);
  --md-code-hl-name-color: var(--md-code-fg-color);
  --md-code-hl-comment-color: var(--md-default-fg-color--light);
  --md-code-hl-generic-color: var(--md-default-fg-color--light);
  --md-code-hl-variable-color: var(--md-default-fg-color--light);
  --md-code-hl-operator-color: var(--md-default-fg-color--light);
  --md-code-hl-punctuation-color: var(--md-default-fg-color--light);

  /* TYPESET */
  --md-typeset-font-size: 1rem;
  --md-typeset-color: var(--md-default-fg-color);
  --md-typeset-a-color: ${J.palette.link};
  --md-typeset-table-color: ${J.palette.text.primary};
  --md-typeset-del-color: ${J.palette.type==="dark"?(0,Q.X4)(J.palette.error.dark,.5):(0,Q.X4)(J.palette.error.light,.5)};
  --md-typeset-ins-color: ${J.palette.type==="dark"?(0,Q.X4)(J.palette.success.dark,.5):(0,Q.X4)(J.palette.success.light,.5)};
  --md-typeset-mark-color: ${J.palette.type==="dark"?(0,Q.X4)(J.palette.warning.dark,.5):(0,Q.X4)(J.palette.warning.light,.5)};
}

@media screen and (max-width: 76.1875em) {
  :host > * {
    /* TYPESET */
    --md-typeset-font-size: .9rem;
  }
}

@media screen and (max-width: 600px) {
  :host > * {
    /* TYPESET */
    --md-typeset-font-size: .7rem;
  }
}
`,V=({theme:J})=>`
/*==================  Reset  ==================*/

body {
  --md-text-color: var(--md-default-fg-color);
  --md-text-link-color: var(--md-accent-fg-color);
  --md-text-font-family: ${J.typography.fontFamily};
  font-family: var(--md-text-font-family);
  background-color: unset;
}
`;const he="224px";var Ee=({theme:J,sidebar:ge})=>`
/*==================  Layout  ==================*/

/* mkdocs material v9 compat */
.md-nav__title {
  color: var(--md-default-fg-color);
}

.md-grid {
  max-width: 100%;
  margin: 0;
}

.md-nav {
  font-size: calc(var(--md-typeset-font-size) * 0.9);
}
.md-nav__link {
  display: flex;
  align-items: center;
  justify-content: space-between;
}
.md-nav__icon {
  height: 20px !important;
  width: 20px !important;
  margin-left:${J.spacing(1)}px;
}
.md-nav__icon svg {
  margin: 0;
  width: 20px !important;
  height: 20px !important;
}
.md-nav__icon:after {
  width: 20px !important;
  height: 20px !important;
}

.md-nav__item--active > .md-nav__link, a.md-nav__link--active {
  text-decoration: underline;
  color: var(--md-typeset-a-color);
}

.md-main__inner {
  margin-top: 0;
}

.md-sidebar {
  bottom: 75px;
  position: fixed;
  width: 16rem;
  overflow-y: auto;
  overflow-x: hidden;
  scrollbar-color: rgb(193, 193, 193) #eee;
  scrollbar-width: thin;
}
.md-sidebar .md-sidebar__scrollwrap {
  width: calc(12.1rem);
}
.md-sidebar--secondary {
  right: ${J.spacing(3)}px;
}
.md-sidebar::-webkit-scrollbar {
  width: 5px;
}
.md-sidebar::-webkit-scrollbar-button {
  width: 5px;
  height: 5px;
}
.md-sidebar::-webkit-scrollbar-track {
  background: #eee;
  border: 1 px solid rgb(250, 250, 250);
  box-shadow: 0px 0px 3px #dfdfdf inset;
  border-radius: 3px;
}
.md-sidebar::-webkit-scrollbar-thumb {
  width: 5px;
  background: rgb(193, 193, 193);
  border: transparent;
  border-radius: 3px;
}
.md-sidebar::-webkit-scrollbar-thumb:hover {
  background: rgb(125, 125, 125);
}

.md-content {
  max-width: calc(100% - 16rem * 2);
  margin-left: 16rem;
  margin-bottom: 50px;
}

.md-footer {
  position: fixed;
  bottom: 0px;
  pointer-events: none;
}

.md-footer-nav__link, .md-footer__link {
  pointer-events: all;
}

.md-footer__title {
  background-color: unset;
}
.md-footer-nav__link, .md-footer__link {
  width: 16rem;
}

.md-dialog {
  background-color: unset;
}

@media screen and (min-width: 76.25em) {
  .md-sidebar {
    height: auto;
  }
}

@media screen and (max-width: 76.1875em) {
  .md-nav {
    transition: none !important;
    background-color: var(--md-default-bg-color)
  }
  .md-nav--primary .md-nav__title {
    cursor: auto;
    color: var(--md-default-fg-color);
    font-weight: 700;
    white-space: normal;
    line-height: 1rem;
    height: auto;
    display: flex;
    flex-flow: column;
    row-gap: 1.6rem;
    padding: 1.2rem .8rem .8rem;
    background-color: var(--md-default-bg-color);
  }
  .md-nav--primary .md-nav__title~.md-nav__list {
    box-shadow: none;
  }
  .md-nav--primary .md-nav__title ~ .md-nav__list > :first-child {
    border-top: none;
  }
  .md-nav--primary .md-nav__title .md-nav__button {
    display: none;
  }
  .md-nav--primary .md-nav__title .md-nav__icon {
    color: var(--md-default-fg-color);
    position: static;
    height: auto;
    margin: 0 0 0 -0.2rem;
  }
  .md-nav--primary > .md-nav__title [for="none"] {
    padding-top: 0;
  }
  .md-nav--primary .md-nav__item {
    border-top: none;
  }
  .md-nav--primary :is(.md-nav__title,.md-nav__item) {
    font-size : var(--md-typeset-font-size);
  }
  .md-nav .md-source {
    display: none;
  }

  .md-sidebar {
    height: 100%;
  }
  .md-sidebar--primary {
    width: 12.1rem !important;
    z-index: 200;
    left: ${ge.isPinned?`calc(-12.1rem + ${he})`:"calc(-12.1rem + 72px)"} !important;
  }
  .md-sidebar--secondary:not([hidden]) {
    display: none;
  }

  .md-content {
    max-width: 100%;
    margin-left: 0;
  }

  .md-header__button {
    margin: 0.4rem 0;
    margin-left: 0.4rem;
    padding: 0;
  }

  .md-overlay {
    left: 0;
  }

  .md-footer {
    position: static;
    padding-left: 0;
  }
  .md-footer-nav__link {
    /* footer links begin to overlap at small sizes without setting width */
    width: 50%;
  }
}

@media screen and (max-width: 600px) {
  .md-sidebar--primary {
    left: -12.1rem !important;
    width: 12.1rem;
  }
}


@media print {
  .md-sidebar,
  #toggle-sidebar {
    display: none;
  }
  
  .md-content {
    margin: 0;
    width: 100%;
    max-width: 100%;
  }
}
`;const Pt=["h1","h2","h3","h4","h5","h6"];var Nt=({theme:J})=>`
/*==================  Typeset  ==================*/

.md-typeset {
  font-size: var(--md-typeset-font-size);
}

${Pt.reduce((ge,ke)=>{var it;const St=(it=J.typography.htmlFontSize)!=null?it:16,At=J.typography[ke],{lineHeight:cn,fontFamily:hn,fontWeight:ie,fontSize:Te}=At,We=Ne=>{let He=1;return typeof Ne=="number"&&(He=Ne/St*.6),typeof Ne=="string"&&(He=Ne.replace("rem","")),`calc(${He} * var(--md-typeset-font-size))`};return ge.concat(`
    .md-typeset ${ke} {
      color: var(--md-default-fg-color);
      line-height: ${cn};
      font-family: ${hn};
      font-weight: ${ie};
      font-size: ${We(Te)};
    }
  `)},"")}

.md-typeset .md-content__button {
  color: var(--md-default-fg-color);
}

.md-typeset hr {
  border-bottom: 0.05rem dotted ${J.palette.divider};
}

.md-typeset details {
  font-size: var(--md-typeset-font-size) !important;
}
.md-typeset details summary {
  padding-left: 2.5rem !important;
}
.md-typeset details summary:before,
.md-typeset details summary:after {
  top: 50% !important;
  width: 20px !important;
  height: 20px !important;
  transform: rotate(0deg) translateY(-50%) !important;
}
.md-typeset details[open] > summary:after {
  transform: rotate(90deg) translateX(-50%) !important;
}

.md-typeset blockquote {
  color: var(--md-default-fg-color--light);
  border-left: 0.2rem solid var(--md-default-fg-color--light);
}

.md-typeset table:not([class]) {
  font-size: var(--md-typeset-font-size);
  border: 1px solid var(--md-default-fg-color);
  border-bottom: none;
  border-collapse: collapse;
}
.md-typeset table:not([class]) th {
  font-weight: bold;
}
.md-typeset table:not([class]) td, .md-typeset table:not([class]) th {
  border-bottom: 1px solid var(--md-default-fg-color);
}

.md-typeset pre > code::-webkit-scrollbar-thumb {
  background-color: hsla(0, 0%, 0%, 0.32);
}
.md-typeset pre > code::-webkit-scrollbar-thumb:hover {
  background-color: hsla(0, 0%, 0%, 0.87);
}

.md-typeset code {
  word-break: keep-all;
}
`,ln=()=>`
/*==================  Animations  ==================*/
/*
  Disable CSS animations on link colors as they lead to issues in dark mode.
  The dark mode color theme is applied later and theirfore there is always an animation from light to dark mode when navigation between pages.
*/
.md-dialog, .md-nav__link, .md-footer__link, .md-typeset a, .md-typeset a::before, .md-typeset .headerlink {
  transition: none;
}
`,bn=({theme:J})=>`
/*==================  Extensions  ==================*/

/* HIGHLIGHT */
.highlight .md-clipboard:after {
  content: unset;
}

.highlight .nx {
  color: ${J.palette.type==="dark"?"#ff53a3":"#ec407a"};
}

/* CODE HILITE */
.codehilite .gd {
  background-color: ${J.palette.type==="dark"?"rgba(248,81,73,0.65)":"#fdd"};
}

.codehilite .gi {
  background-color: ${J.palette.type==="dark"?"rgba(46,160,67,0.65)":"#dfd"};
}

/* TABBED */
.tabbed-set>input:nth-child(1):checked~.tabbed-labels>:nth-child(1),
.tabbed-set>input:nth-child(2):checked~.tabbed-labels>:nth-child(2),
.tabbed-set>input:nth-child(3):checked~.tabbed-labels>:nth-child(3),
.tabbed-set>input:nth-child(4):checked~.tabbed-labels>:nth-child(4),
.tabbed-set>input:nth-child(5):checked~.tabbed-labels>:nth-child(5),
.tabbed-set>input:nth-child(6):checked~.tabbed-labels>:nth-child(6),
.tabbed-set>input:nth-child(7):checked~.tabbed-labels>:nth-child(7),
.tabbed-set>input:nth-child(8):checked~.tabbed-labels>:nth-child(8),
.tabbed-set>input:nth-child(9):checked~.tabbed-labels>:nth-child(9),
.tabbed-set>input:nth-child(10):checked~.tabbed-labels>:nth-child(10),
.tabbed-set>input:nth-child(11):checked~.tabbed-labels>:nth-child(11),
.tabbed-set>input:nth-child(12):checked~.tabbed-labels>:nth-child(12),
.tabbed-set>input:nth-child(13):checked~.tabbed-labels>:nth-child(13),
.tabbed-set>input:nth-child(14):checked~.tabbed-labels>:nth-child(14),
.tabbed-set>input:nth-child(15):checked~.tabbed-labels>:nth-child(15),
.tabbed-set>input:nth-child(16):checked~.tabbed-labels>:nth-child(16),
.tabbed-set>input:nth-child(17):checked~.tabbed-labels>:nth-child(17),
.tabbed-set>input:nth-child(18):checked~.tabbed-labels>:nth-child(18),
.tabbed-set>input:nth-child(19):checked~.tabbed-labels>:nth-child(19),
.tabbed-set>input:nth-child(20):checked~.tabbed-labels>:nth-child(20) {
  color: var(--md-accent-fg-color);
  border-color: var(--md-accent-fg-color);
}

/* TASK-LIST */
.task-list-control .task-list-indicator::before {
  background-color: ${J.palette.action.disabledBackground};
}
.task-list-control [type="checkbox"]:checked + .task-list-indicator:before {
 background-color: ${J.palette.success.main};
}

/* ADMONITION */
.admonition {
  font-size: var(--md-typeset-font-size) !important;
}
.admonition .admonition-title {
  padding-left: 2.5rem !important;
}

.admonition .admonition-title:before {
  top: 50% !important;
  width: 20px !important;
  height: 20px !important;
  transform: translateY(-50%) !important;
}
`;const Dn=[qe,V,Ee,Nt,ln,bn],Un=()=>(0,b.Ut)(),Vn=()=>{const J=Un(),ge=(0,t.A)();return(0,s.useMemo)(()=>{const ke={theme:ge,sidebar:J};return Dn.reduce((it,St)=>it+St(ke),"")},[ge,J])},Pn=()=>{const J=Vn();return(0,s.useCallback)(ge=>(ge.getElementsByTagName("head")[0].insertAdjacentHTML("beforeend",`<style>${J}</style>`),ge),[J])},Yn=(J,ge,ke)=>{const it=J==="src"&&ge.endsWith(".svg"),St=!ge.match(/^([a-z]*:)?\/\//i),At=ge.startsWith(ke);return it&&(St||At)},da=({techdocsStorageApi:J,entityId:ge,path:ke})=>async it=>{const St=await J.getApiOrigin(),At=async(cn,hn)=>{for(const ie of cn)if(ie.hasAttribute(hn)){const Te=ie.getAttribute(hn);if(!Te)return;const We=await J.getBaseUrl(Te,ge,ke);if(Yn(hn,Te,St))try{const He=await(await fetch(We,{credentials:"include"})).text();ie.setAttribute(hn,`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(He)))}`)}catch{ie.setAttribute("alt",`Error: ${Te}`)}else ie.setAttribute(hn,We)}};return await Promise.all([At(it.querySelectorAll("img"),"src"),At(it.querySelectorAll("script"),"src"),At(it.querySelectorAll("source"),"src"),At(it.querySelectorAll("link"),"href"),At(it.querySelectorAll("a[download]"),"href")]),it};let ct;ct=Promise.resolve().then(e.t.bind(e,25873,19));function m(J,ge){ct.then(ke=>{"createRoot"in ke?ke.createRoot(ge).render(J):ke.render(J,ge)})}const R=J=>ge=>{var ke;const it=ge.querySelector('[title="Edit this page"]');if(!it||!it.href)return ge;const St=new URL(it.href),At=J.byUrl(St);if((At==null?void 0:At.type)!=="github"&&(At==null?void 0:At.type)!=="gitlab")return ge;const cn=((ke=ge.querySelector("article>h1"))==null?void 0:ke.childNodes[0].textContent)||"",hn=encodeURIComponent(`Documentation Feedback: ${cn}`),ie=encodeURIComponent(`Page source:
${it.href}

Feedback:`),Te=(At==null?void 0:At.type)==="github"?(0,X.Fw)(St.href,"blob"):St.href,We=oe()(Te),Ne=`/${We.organization}/${We.name}`,He=it.cloneNode();switch(At==null?void 0:At.type){case"gitlab":He.href=`${St.origin}${Ne}/issues/new?issue[title]=${hn}&issue[description]=${ie}`;break;case"github":He.href=`${St.origin}${Ne}/issues/new?title=${hn}&body=${ie}`;break;default:return ge}return m(s.createElement(N.A),He),He.style.paddingLeft="5px",He.title="Leave feedback for this page",He.id="git-feedback-link",it==null||it.insertAdjacentElement("beforebegin",He),ge},K=()=>J=>{const ge=J.querySelector('.md-header label[for="__drawer"]'),ke=J.querySelector("article");if(!ge||!ke)return J;const it=ge.cloneNode();return m(s.createElement(re.A),it),it.id="toggle-sidebar",it.title="Toggle Sidebar",it.classList.add("md-content__button"),it.style.setProperty("padding","0 0 0 5px"),it.style.setProperty("margin","0.4rem 0 0.4rem 0.4rem"),ke==null||ke.prepend(it),J},le=()=>J=>(((ke,it)=>{Array.from(ke).filter(St=>St.hasAttribute(it)).forEach(St=>{const At=St.getAttribute(it);if(At){At.match(/^https?:\/\//i)&&St.setAttribute("target","_blank");try{const cn=I(window.location.href);St.setAttribute(it,new URL(At,cn).toString())}catch{St.replaceWith(St.textContent||At)}}})})(Array.from(J.getElementsByTagName("a")),"href"),J);function I(J){const ge=new URL(J);return!ge.pathname.endsWith("/")&&!ge.pathname.endsWith(".html")&&(ge.pathname+="/"),ge.toString()}const U=({baseUrl:J,onClick:ge})=>ke=>(Array.from(ke.getElementsByTagName("a")).forEach(it=>{it.addEventListener("click",St=>{const cn=it.getAttribute("href");cn&&cn.startsWith(J)&&!it.hasAttribute("download")&&(St.preventDefault(),ge(St,cn))})}),ke),Y=(0,pe.A)(J=>({tooltip:{fontSize:"inherit",color:J.palette.text.primary,margin:0,padding:J.spacing(.5),backgroundColor:"transparent",boxShadow:"none"}}))(tt.Ay),we=()=>s.createElement(_e.A,null,s.createElement("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"})),Oe=({text:J})=>{const[ge,ke]=(0,s.useState)(!1),[,it]=(0,Ve.A)(),St=(0,s.useCallback)(()=>{it(J),ke(!0)},[J,it]),At=(0,s.useCallback)(()=>{ke(!1)},[ke]);return s.createElement(Y,{title:"Copied to clipboard",placement:"left",open:ge,onClose:At,leaveDelay:1e3},s.createElement(z.A,{style:{color:"inherit"},className:"md-clipboard md-icon",onClick:St},s.createElement(we,null)))},ot=J=>ge=>{var ke;const it=ge.querySelectorAll("pre > code");for(const St of it){const At=St.textContent||"",cn=document.createElement("div");(ke=St==null?void 0:St.parentElement)==null||ke.prepend(cn),m(s.createElement(_.A,{theme:J},s.createElement(Oe,{text:At})),cn)}return ge},Ot=()=>J=>{var ge;return(ge=J.querySelector(".md-header"))==null||ge.remove(),J},en=()=>J=>{var ge,ke;return(ge=J.querySelector(".md-footer .md-copyright"))==null||ge.remove(),(ke=J.querySelector(".md-footer-copyright"))==null||ke.remove(),J},Zt=({onLoading:J,onLoaded:ge})=>ke=>(J(),ke.addEventListener(A.K$,function it(){ge(),ke.removeEventListener(A.K$,it)}),ke),pn=()=>J=>(setTimeout(()=>{const ge=J==null?void 0:J.querySelectorAll("li.md-nav__item--active");ge.length!==0&&(ge.forEach(it=>{const St=it==null?void 0:it.querySelector("input");St!=null&&St.checked||St==null||St.click()}),ge[ge.length-1].scrollIntoView())},200),J),mn=async(J,ge)=>{let ke;if(typeof J=="string")ke=new DOMParser().parseFromString(J,"text/html").documentElement;else if(J instanceof Element)ke=J;else throw new Error("dom is not a recognized type");for(const it of ge)ke=await it(ke);return ke};function kt(J,ge){const ke=new URL(ge),it=`${ke.origin}${ke.pathname.replace(/\/$/,"")}`,St=J.replace(it,"").replace(/^\/+/,""),At=new URL(`http://localhost/${St}`);return`${At.pathname}${At.search}${At.hash}`}function Sn(){const J=(0,l.Zp)(),ke=(0,w.u)(w.p).getOptionalString("app.baseUrl");return(0,s.useCallback)(St=>{let At=St;if(ke)try{At=kt(St,ke)}catch{}J(At)},[J,ke])}const un="screen and (max-width: 76.1875em)",$n=J=>{const ge=Sn(),ke=(0,t.A)(),it=(0,F.A)(un),St=rt(),At=Pn(),cn=(0,M.st)(),hn=(0,w.u)(A.sm),ie=(0,w.u)(ae.YT),{state:Te,path:We,content:Ne}=et(),[He,zt]=(0,s.useState)(null),_t=(0,A._$)(He),bt=(0,s.useCallback)(()=>{if(!He)return;He.querySelectorAll(".md-sidebar").forEach(Mn=>{var Gn,la,Fn,ea;if(it)Mn.style.top="0px";else{const ca=document==null?void 0:document.querySelector(".techdocs-reader-page"),sa=(Gn=ca==null?void 0:ca.getBoundingClientRect().top)!=null?Gn:0;let Ea=(la=He.getBoundingClientRect().top)!=null?la:0;const ba=He.querySelector(".md-container > .md-tabs"),Ra=(Fn=ba==null?void 0:ba.getBoundingClientRect().height)!=null?Fn:0;Ea<sa&&(Ea=sa);const Ta=Math.max(Ea,0)+Ra;Mn.style.top=`${Ta}px`;const Ha=He.querySelector(".md-container > .md-footer"),Ja=(ea=Ha==null?void 0:Ha.getBoundingClientRect().top)!=null?ea:window.innerHeight;Mn.style.height=`${Ja-Ta}px`}Mn.style.setProperty("opacity","1")})},[He,it]);(0,s.useEffect)(()=>(window.addEventListener("resize",bt),window.addEventListener("scroll",bt,!0),()=>{window.removeEventListener("resize",bt),window.removeEventListener("scroll",bt,!0)}),[He,bt]);const Gt=(0,s.useCallback)(()=>{if(!He)return;const Nn=He.querySelector(".md-footer");Nn&&(Nn.style.width=`${He.getBoundingClientRect().width}px`)},[He]);(0,s.useEffect)(()=>(window.addEventListener("resize",Gt),()=>{window.removeEventListener("resize",Gt)}),[He,Gt]),(0,s.useEffect)(()=>{_t||(Gt(),bt())},[Te,_t,Gt,bt]);const fn=(0,s.useCallback)((Nn,Mn)=>mn(Nn,[St,da({techdocsStorageApi:hn,entityId:J,path:Mn}),le(),K(),Ot(),en(),R(ie),At]),[J,ie,hn,St,At]),rn=(0,s.useCallback)(async Nn=>mn(Nn,[pn(),ot(ke),U({baseUrl:window.location.origin,onClick:(Mn,Gn)=>{var la,Fn;const ea=Mn.ctrlKey||Mn.metaKey,ca=new URL(Gn),sa=((la=Mn.target)==null?void 0:la.innerText)||Gn,Ea=Gn.replace(window.location.origin,"");cn.captureEvent("click",sa,{attributes:{to:Ea}}),ca.hash?ea?window.open(Gn,"_blank"):(ge(Gn),(Fn=Nn==null?void 0:Nn.querySelector(`[id="${ca.hash.slice(1)}"]`))==null||Fn.scrollIntoView()):ea?window.open(Gn,"_blank"):ge(Gn)}}),Zt({onLoading:()=>{},onLoaded:()=>{var Mn;(Mn=Nn.querySelector(".md-nav__title"))==null||Mn.removeAttribute("for")}}),Zt({onLoading:()=>{Array.from(Nn.querySelectorAll(".md-sidebar")).forEach(Gn=>{Gn.style.setProperty("opacity","0")})},onLoaded:()=>{}})]),[ke,ge,cn]);return(0,s.useEffect)(()=>{if(!Ne)return()=>{};let Nn=!0;return fn(Ne,We).then(async Mn=>{if(!(Mn!=null&&Mn.innerHTML)||!Nn)return;window.scroll({top:0});const Gn=await rn(Mn);zt(Gn)}),()=>{Nn=!1}},[Ne,We,fn,rn]),He},qn=()=>{const J=(0,A.YR)(),{shadowRoot:ge}=(0,A.V1)(),ke=ge==null?void 0:ge.querySelector('[data-md-component="content"]'),it=ge==null?void 0:ge.querySelector('div[data-md-component="sidebar"][data-md-type="navigation"], div[data-md-component="navigation"]');let St=it==null?void 0:it.querySelector('[data-techdocs-addons-location="primary sidebar"]');St||(St=document.createElement("div"),St.setAttribute("data-techdocs-addons-location","primary sidebar"),it==null||it.prepend(St));const At=ge==null?void 0:ge.querySelector('div[data-md-component="sidebar"][data-md-type="toc"], div[data-md-component="toc"]');let cn=At==null?void 0:At.querySelector('[data-techdocs-addons-location="secondary sidebar"]');return cn||(cn=document.createElement("div"),cn.setAttribute("data-techdocs-addons-location","secondary sidebar"),At==null||At.prepend(cn)),s.createElement(s.Fragment,null,s.createElement(Ze.A,{container:St},J.renderComponentsByLocation(A.eK.PrimarySidebar)),s.createElement(Ze.A,{container:ke},J.renderComponentsByLocation(A.eK.Content)),s.createElement(Ze.A,{container:cn},J.renderComponentsByLocation(A.eK.SecondarySidebar)))},na=(0,r.A)({search:{width:"100%","@media (min-width: 76.1875em)":{width:"calc(100% - 34.4rem)",margin:"0 auto"},"@media print":{display:"none"}}}),kn=tn(J=>{var ge;const{withSearch:ke=!0,onReady:it}=J,St=na(),{entityMetadata:{value:At,loading:cn},entityRef:hn,setShadowRoot:ie}=(0,A.V1)(),Te=$n(hn),We=window.location.pathname,Ne=window.location.hash,He=(0,A._$)(Te),[zt]=(0,A.$r)([`[id="${Ne.slice(1)}"]`]);(0,s.useEffect)(()=>{var bt;He||(Ne?zt&&zt.scrollIntoView():(bt=document==null?void 0:document.querySelector("header"))==null||bt.scrollIntoView())},[We,Ne,zt,He]);const _t=(0,s.useCallback)(bt=>{ie(bt),it instanceof Function&&it()},[ie,it]);return cn===!1&&!At?s.createElement(b.M,{status:"404",statusMessage:"PAGE NOT FOUND"}):Te?s.createElement(b.UC,null,s.createElement(W.A,{container:!0},s.createElement(W.A,{xs:12,item:!0},s.createElement(Kt,null)),ke&&s.createElement(W.A,{className:St.search,xs:"auto",item:!0},s.createElement(qt,{entityId:hn,entityTitle:(ge=At==null?void 0:At.metadata)==null?void 0:ge.title})),s.createElement(W.A,{xs:12,item:!0},s.createElement(A.eh,{element:Te,onAppend:_t},s.createElement(qn,null))))):s.createElement(b.UC,null,s.createElement(W.A,{container:!0},s.createElement(W.A,{xs:12,item:!0},s.createElement(Kt,null))))}),wn=null,gn=s.createElement(Ge.A,{animation:"wave",variant:"text",height:40}),Jt=J=>{const{children:ge}=J,ke=(0,A.YR)(),it=(0,w.u)(w.p),{title:St,setTitle:At,subtitle:cn,setSubtitle:hn,entityRef:ie,metadata:{value:Te,loading:We},entityMetadata:{value:Ne,loading:He}}=(0,A.V1)();(0,s.useEffect)(()=>{Te&&(At(Te.site_name),hn(()=>{let{site_description:Fn}=Te;return(!Fn||Fn==="None")&&(Fn=""),Fn}))},[Te,At,hn]);const zt=it.getOptional("app.title")||"Backstage",_t=[St,cn,zt].filter(Boolean).join(" | "),{locationMetadata:bt,spec:Gt}=Ne||{},fn=Gt==null?void 0:Gt.lifecycle,rn=Ne?(0,Re.g)(Ne,lt.vv):[],Nn=(0,M.Sf)(wt.r)(),Mn=s.createElement(s.Fragment,null,s.createElement(b.ST,{label:(0,Et.capitalize)((Ne==null?void 0:Ne.kind)||"entity"),value:s.createElement(Le.zI,{color:"inherit",entityRef:ie,title:Ne==null?void 0:Ne.metadata.title,defaultKind:"Component"})}),rn.length>0&&s.createElement(b.ST,{label:"Owner",value:s.createElement(Le.iI,{color:"inherit",entityRefs:rn,defaultKind:"group"})}),fn?s.createElement(b.ST,{label:"Lifecycle",value:String(fn)}):null,bt&&bt.type!=="dir"&&bt.type!=="file"?s.createElement(b.ST,{label:"",value:s.createElement(W.A,{container:!0,direction:"column",alignItems:"center"},s.createElement(W.A,{style:{padding:0},item:!0},s.createElement(Je.A,{style:{marginTop:"-25px"}})),s.createElement(W.A,{style:{padding:0},item:!0},"Source")),url:bt.target}):null);return!He&&Ne===void 0||!We&&Te===void 0?null:s.createElement(b.Y9,{type:"Documentation",typeLink:Nn,title:St||gn,subtitle:cn===""?void 0:cn||gn},s.createElement(nt.A,{titleTemplate:"%s"},s.createElement("title",null,_t)),Mn,ge,ke.renderComponentsByLocation(A.eK.Header))},vn=(0,r.A)(J=>({root:{gridArea:"pageSubheader",flexDirection:"column",minHeight:"auto",padding:J.spacing(3,3,0),"@media print":{display:"none"}}})),_n=J=>{const ge=vn(),[ke,it]=(0,s.useState)(null),St=(0,s.useCallback)(Ne=>{it(Ne.currentTarget)},[]),At=(0,s.useCallback)(()=>{it(null)},[]),{entityMetadata:{value:cn,loading:hn}}=(0,A.V1)(),ie=(0,A.YR)(),Te=ie.renderComponentsByLocation(A.eK.Subheader),We=ie.renderComponentsByLocation(A.eK.Settings);return!Te&&!We||hn===!1&&!cn?null:s.createElement(Qt.A,{classes:ge,...J.toolbarProps},s.createElement(ue.A,{display:"flex",justifyContent:"flex-end",width:"100%",flexWrap:"wrap"},Te,We?s.createElement(s.Fragment,null,s.createElement(tt.Ay,{title:"Settings"},s.createElement(z.A,{"aria-controls":"tech-docs-reader-page-settings","aria-haspopup":"true",onClick:St},s.createElement(gt.A,null))),s.createElement(yt.A,{id:"tech-docs-reader-page-settings",getContentAnchorEl:null,anchorEl:ke,anchorOrigin:{vertical:"bottom",horizontal:"right"},open:!!ke,onClose:At,keepMounted:!0},s.createElement("div",null,We))):null))},Aa=J=>{const{withSearch:ge,withHeader:ke=!0}=J;return s.createElement(b.YW,{themeId:"documentation"},ke&&s.createElement(Jt,null),s.createElement(_n,null),s.createElement(kn,{withSearch:ge}))},Oa=J=>{const{kind:ge,name:ke,namespace:it}=(0,M.KS)(wt.b),{children:St,entityRef:At={kind:ge,name:ke,namespace:it}}=J,cn=(0,l.P1)();if(!St){const Te=(cn?s.Children.toArray(cn.props.children):[]).flatMap(We=>{var Ne,He;return(He=(Ne=We==null?void 0:We.props)==null?void 0:Ne.children)!=null?He:[]}).find(We=>!(0,M.E0)(We,A.AF)&&!(0,M.E0)(We,A.Wm));return s.createElement(Z,{pluginId:"techdocs"},s.createElement(A.R7,{entityRef:At},Te||s.createElement(Aa,null)))}return s.createElement(Z,{pluginId:"techdocs"},s.createElement(A.R7,{entityRef:At},({metadata:hn,entityMetadata:ie,onReady:Te})=>s.createElement("div",{className:"techdocs-reader-page"},s.createElement(b.YW,{themeId:"documentation"},St instanceof Function?St({entityRef:At,techdocsMetadataValue:hn.value,entityMetadataValue:ie.value,onReady:Te}):St))))}},27332:(In,Ct,e)=>{"use strict";e.r(Ct),e.d(Ct,{TechDocsSearchResultListItem:()=>t});var s=e(14041),l=e(46423),b=e(5951),A=e(58837),W=e(72501),r=e(22968),q=e(22299);const Q=(0,A.A)({flexContainer:{flexWrap:"wrap"},itemText:{width:"100%",marginBottom:"1rem"}}),t=pe=>{const{result:_,highlight:de,lineClamp:me=5,asListItem:G=!0,asLink:xe=!0,title:ye,icon:ut}=pe,z=Q(),ee=({children:M})=>xe?s.createElement(r.N_,{noTrack:!0,to:_.location},M):s.createElement(s.Fragment,null,M),D=()=>{const M=de!=null&&de.fields.title?s.createElement(q.b,{text:de.fields.title,preTag:de.preTag,postTag:de.postTag}):_.title,y=de!=null&&de.fields.entityTitle?s.createElement(q.b,{text:de.fields.entityTitle,preTag:de.preTag,postTag:de.postTag}):_.entityTitle,v=de!=null&&de.fields.name?s.createElement(q.b,{text:de.fields.name,preTag:de.preTag,postTag:de.postTag}):_.name;return _?s.createElement(b.A,{className:z.itemText,primaryTypographyProps:{variant:"h6"},primary:s.createElement(ee,null,ye||s.createElement(s.Fragment,null,M," | ",y!=null?y:v," docs")),secondary:s.createElement(W.A,{component:"span",style:{display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:me,overflow:"hidden"},color:"textSecondary",variant:"body2"},de!=null&&de.fields.text?s.createElement(q.b,{text:de.fields.text,preTag:de.preTag,postTag:de.postTag}):_.text)}):null},w=({children:M})=>G?s.createElement(s.Fragment,null,ut&&s.createElement(l.A,null,typeof ut=="function"?ut(_):ut),s.createElement("div",{className:z.flexContainer},M)):s.createElement(s.Fragment,null,M);return s.createElement(w,null,s.createElement(D,null))}},45495:(In,Ct,e)=>{"use strict";e.d(Ct,{T:()=>t,a:()=>Q,b:()=>_,c:()=>de,r:()=>pe});var s=e(3399),l=e(17520),b=e.n(l),A=e(11638),W=Object.defineProperty,r=(me,G,xe)=>G in me?W(me,G,{enumerable:!0,configurable:!0,writable:!0,value:xe}):me[G]=xe,q=(me,G,xe)=>(r(me,typeof G!="symbol"?G+"":G,xe),xe);class Q{constructor(G){q(this,"configApi"),q(this,"discoveryApi"),q(this,"fetchApi"),this.configApi=G.configApi,this.discoveryApi=G.discoveryApi,this.fetchApi=G.fetchApi}async getCookie(){const xe=`${await this.getApiOrigin()}/cookie`,ye=await this.fetchApi.fetch(`${xe}`,{credentials:"include"});if(!ye.ok)throw await s.o3.fromResponse(ye);return await ye.json()}async getApiOrigin(){return await this.discoveryApi.getBaseUrl("techdocs")}async getTechDocsMetadata(G){const{kind:xe,namespace:ye,name:ut}=G,ee=`${await this.getApiOrigin()}/metadata/techdocs/${ye}/${xe}/${ut}`,D=await this.fetchApi.fetch(`${ee}`);if(!D.ok)throw await s.o3.fromResponse(D);return await D.json()}async getEntityMetadata(G){const{kind:xe,namespace:ye,name:ut}=G,ee=`${await this.getApiOrigin()}/metadata/entity/${ye}/${xe}/${ut}`,D=await this.fetchApi.fetch(`${ee}`);if(!D.ok)throw await s.o3.fromResponse(D);return await D.json()}}class t{constructor(G){q(this,"configApi"),q(this,"discoveryApi"),q(this,"identityApi"),q(this,"fetchApi"),this.configApi=G.configApi,this.discoveryApi=G.discoveryApi,this.identityApi=G.identityApi,this.fetchApi=G.fetchApi}async getApiOrigin(){return await this.discoveryApi.getBaseUrl("techdocs")}async getStorageUrl(){var G;return(G=this.configApi.getOptionalString("techdocs.storageUrl"))!=null?G:`${await this.discoveryApi.getBaseUrl("techdocs")}/static/docs`}async getBuilder(){return this.configApi.getString("techdocs.builder")}async getEntityDocs(G,xe){const{kind:ye,namespace:ut,name:z}=G,D=`${await this.getStorageUrl()}/${ut}/${ye}/${z}/${xe}`,w=await this.fetchApi.fetch(`${D.endsWith("/")?D:`${D}/`}index.html`);let M="";switch(w.status){case 404:throw M="Page not found. ",xe||(M+="This could be because there is no index.md file in the root of the docs directory of this repository."),new s.m_(M);case 500:throw M="Could not generate documentation or an error in the TechDocs backend. ",new Error(M)}return w.text()}async syncEntityDocs(G,xe=()=>{}){const{kind:ye,namespace:ut,name:z}=G,D=`${await this.getApiOrigin()}/sync/${ut}/${ye}/${z}`,{token:w}=await this.identityApi.getCredentials();return new Promise((M,y)=>{const v=new l.EventSourcePolyfill(D,{withCredentials:!0,headers:w?{Authorization:`Bearer ${w}`}:{}});v.addEventListener("log",F=>{F.data&&xe(JSON.parse(F.data))}),v.addEventListener("finish",F=>{let ae=!1;F.data&&({updated:ae}=JSON.parse(F.data)),M(ae?"updated":"cached")}),v.onerror=F=>{switch(v.close(),F.status){case 404:y(new s.m_(F.message));return;default:y(new Error(F.data));return}}})}async getBaseUrl(G,xe,ye){const{kind:ut,namespace:z,name:ee}=xe,w=`${await this.getApiOrigin()}/static/docs/${z}/${ut}/${ee}/${ye}`;return new URL(G,w.endsWith("/")?w:`${w}/`).toString()}}const pe=(0,A.HM)({id:"techdocs:index-page"}),_=(0,A.HM)({id:"techdocs:reader-page",params:["namespace","kind","name"]}),de=(0,A.HM)({id:"techdocs:catalog-reader-view"})},70210:(In,Ct,e)=>{"use strict";e.d(Ct,{L:()=>pt,S:()=>Vt,a:()=>sn,e:()=>xt});var s=e(18690),l=e(14041),b=e(58007),A=e(64947),W=e(72501),r=e(22968),q=e(80109),Q=e(42899),t=e(8109),pe=e(46423),_=e(65569),de=e(5951),me=e(71677),G=e(5124),xe=e(11638),ye=e(19087),ut=e(58837),z=e(16249),ee=e(29365),D=e(73643),w=e(64704),M=e(73466),y=e(37757),v=e(26343),F=e(89383),ae=e(71407),Fe=e(11746),Ae=e(93970),X=e(15485),N=e(42247),H=e(59294),oe=e(84095),re=e(92651);const _e=`auth:
  providers:
    google:
      development:
        clientId: \${AUTH_GOOGLE_CLIENT_ID}
        clientSecret: \${AUTH_GOOGLE_CLIENT_SECRET}
`,tt=()=>l.createElement(r.pp,{missing:"content",title:"No Authentication Providers",description:"You can add Authentication Providers to Backstage which allows you to use these providers to authenticate yourself.",action:l.createElement(l.Fragment,null,l.createElement(W.A,{variant:"body1"},"Open ",l.createElement("code",null,"app-config.yaml")," and make the changes as highlighted below:"),l.createElement(r.z7,{text:_e,language:"yaml",showLineNumbers:!0,highlightedNumbers:[3,4,5,6,7,8],customStyle:{background:"inherit",fontSize:"115%"}}),l.createElement(A.A,{variant:"contained",color:"primary",href:"https://backstage.io/docs/auth/add-auth-provider"},"Read More"))}),Ve=(0,ut.A)(Ce=>({avatar:{width:({size:Ye})=>Ye,height:({size:Ye})=>Ye,fontSize:({size:Ye})=>Ye*.7,border:`1px solid ${Ce.palette.textSubtle}`}})),Ze=({size:Ce,picture:Ye})=>{const{iconSize:Kt}=r.hC,jt=Ve(Ce?{size:Ce}:{size:Kt});return l.createElement(ye.A,{src:Ye,className:jt.avatar})},nt={},Ge=Ce=>{const{title:Ye,description:Kt,icon:jt,apiRef:Wt}=Ce,ft=(0,G.u)(Wt),Ln=(0,G.u)(G.r),[dn,Xt]=(0,l.useState)(!1),[An,Xe]=(0,l.useState)(nt);return(0,l.useEffect)(()=>{let mt=!1;const Dt=ft.sessionState$().subscribe(rt=>{rt!==G.S.SignedIn&&(Xe(nt),Xt(!1)),mt||ft.getProfile({optional:!0}).then(qe=>{mt||(rt===G.S.SignedIn&&Xt(!0),qe&&Xe(qe))})});return()=>{mt=!0,Dt.unsubscribe()}},[ft]),l.createElement(t.A,null,l.createElement(pe.A,null,l.createElement(jt,null)),l.createElement(de.A,{primary:Ye,secondary:l.createElement(me.Ay,{placement:"top",arrow:!0,title:Kt},l.createElement(Q.A,{container:!0,spacing:6},l.createElement(Q.A,{item:!0},l.createElement(Ze,{size:48,picture:An.picture})),l.createElement(Q.A,{item:!0,xs:12,sm:!0,container:!0},l.createElement(Q.A,{item:!0,xs:!0,container:!0,direction:"column",spacing:2},l.createElement(Q.A,{item:!0,xs:!0},An.displayName&&l.createElement(W.A,{variant:"subtitle1",color:"textPrimary",gutterBottom:!0},An.displayName),An.email&&l.createElement(W.A,{variant:"body2",color:"textSecondary"},An.email),l.createElement(W.A,{variant:"body2",color:"textSecondary"},Kt)))))),secondaryTypographyProps:{noWrap:!0,style:{width:"80%"}}}),l.createElement(_.A,null,l.createElement(me.Ay,{placement:"top",arrow:!0,title:dn?`Sign out from ${Ye}`:`Sign in to ${Ye}`},l.createElement(A.A,{variant:"outlined",color:"primary",onClick:()=>{(dn?ft.signOut():ft.signIn()).catch(Dt=>Ln.post(Dt))}},dn?"Sign out":"Sign in"))))},Je=Ce=>{const{configuredProviders:Ye}=Ce;return l.createElement(l.Fragment,null,Ye.includes("google")&&l.createElement(Ge,{title:"Google",description:"Provides authentication towards Google APIs and identities",apiRef:G.g,icon:q.A}),Ye.includes("microsoft")&&l.createElement(Ge,{title:"Microsoft",description:"Provides authentication towards Microsoft APIs and identities",apiRef:G.m,icon:q.A}),Ye.includes("github")&&l.createElement(Ge,{title:"GitHub",description:"Provides authentication towards GitHub APIs",apiRef:G.d,icon:q.A}),Ye.includes("gitlab")&&l.createElement(Ge,{title:"GitLab",description:"Provides authentication towards GitLab APIs",apiRef:G.e,icon:q.A}),Ye.includes("okta")&&l.createElement(Ge,{title:"Okta",description:"Provides authentication towards Okta APIs",apiRef:G.o,icon:q.A}),Ye.includes("bitbucket")&&l.createElement(Ge,{title:"Bitbucket",description:"Provides authentication towards Bitbucket APIs",apiRef:G.i,icon:q.A}),Ye.includes("onelogin")&&l.createElement(Ge,{title:"OneLogin",description:"Provides authentication towards OneLogin APIs",apiRef:G.h,icon:q.A}),Ye.includes("atlassian")&&l.createElement(Ge,{title:"Atlassian",description:"Provides authentication towards Atlassian APIs",apiRef:G.k,icon:q.A}),Ye.includes("bitbucketServer")&&l.createElement(Ge,{title:"Bitbucket Server",description:"Provides authentication towards Bitbucket Server APIs",apiRef:G.j,icon:q.A}))},Re=Ce=>{const{providerSettings:Ye}=Ce,jt=(0,G.u)(G.p).getOptionalConfig("auth.providers"),Wt=(jt==null?void 0:jt.keys())||[],ft=Ye!=null?Ye:l.createElement(Je,{configuredProviders:Wt});return!Ye&&!(Wt!=null&&Wt.length)?l.createElement(tt,null):l.createElement(r.nO,{title:"Available Providers"},l.createElement(b.A,{dense:!0},ft))},Le=`import { createPlugin } from '@backstage/core-plugin-api';

export default createPlugin({
  id: 'plugin-name',
  featureFlags: [{ name: 'enable-example-feature' }],
});
`,lt=()=>l.createElement(r.pp,{missing:"content",title:"No Feature Flags",description:"Feature Flags make it possible for plugins to register features in Backstage for users to opt into. You can use this to split out logic in your code for manual A/B testing, etc.",action:l.createElement(l.Fragment,null,l.createElement(W.A,{variant:"body1"},"An example for how to add a feature flag is highlighted below:"),l.createElement(r.z7,{text:Le,language:"typescript",showLineNumbers:!0,highlightedNumbers:[6],customStyle:{background:"inherit",fontSize:"115%"}}),l.createElement(A.A,{variant:"contained",color:"primary",href:"https://backstage.io/docs/api/utility-apis"},"Read More"))}),Et=Ce=>Ce.description?Ce.description:Ce.pluginId?`Registered in ${Ce.pluginId} plugin`:"Registered in the application",wt=({flag:Ce,enabled:Ye,toggleHandler:Kt})=>l.createElement(t.A,{divider:!0,button:!0,onClick:()=>Kt(Ce.name)},l.createElement(pe.A,null,l.createElement(me.Ay,{placement:"top",arrow:!0,title:Ye?"Disable":"Enable"},l.createElement(D.A,{color:"primary",checked:Ye,name:Ce.name}))),l.createElement(de.A,{primary:Ce.name,secondary:Et(Ce)})),Qt=(Ce,Ye)=>{const Kt=Ce.filter(Wt=>Ye.isActive(Wt.name)),jt=Ce.filter(Wt=>!Ye.isActive(Wt.name));return[...Kt,...jt]},yt=()=>{const Ce=(0,G.u)(G.f),Ye=l.useRef(),Kt=Ce.getRegisteredFlags(),jt=Qt(Kt,Ce),[Wt]=(0,l.useState)(jt),ft=Object.fromEntries(Wt.map(({name:qe})=>[qe,Ce.isActive(qe)])),[Ln,dn]=(0,l.useState)(ft),[Xt,An]=(0,l.useState)(""),Xe=(0,l.useCallback)(qe=>{const V=Ce.isActive(qe)?G.F.None:G.F.Active;Ce.save({states:{[qe]:V},merge:!0}),dn(he=>({...he,[qe]:V===G.F.Active}))},[Ce]);if(!Wt.length)return l.createElement(lt,null);const mt=()=>{var qe;An(""),(qe=Ye==null?void 0:Ye.current)==null||qe.focus()},Dt=Wt.filter(qe=>qe.name.toLocaleLowerCase("en-US").includes(Xt.toLocaleLowerCase("en-US"))),rt=()=>l.createElement(Q.A,{container:!0,style:{justifyContent:"space-between"}},l.createElement(Q.A,{item:!0,xs:6,md:8},l.createElement(W.A,{variant:"h5"},"Feature Flags"),l.createElement(W.A,{variant:"subtitle1"},"Please refresh the page when toggling feature flags")),Wt.length>=10&&l.createElement(Q.A,{item:!0,xs:6,md:4},l.createElement(z.A,{label:"Filter",style:{display:"flex",justifyContent:"flex-end"},inputRef:qe=>qe&&qe.focus(),InputProps:{...Xt.length&&{endAdornment:l.createElement(ee.A,{"aria-label":"Clear filter",onClick:mt,edge:"end"},l.createElement(w.A,null))}},onChange:qe=>An(qe.target.value),value:Xt})));return l.createElement(r.nO,{title:l.createElement(rt,null)},l.createElement(b.A,{dense:!0},Dt.map(qe=>{const V=!!Ln[qe.name];return l.createElement(wt,{key:qe.name,flag:qe,enabled:V,toggleHandler:Xe})})))},ue=()=>{var Ce;const Ye=(0,G.u)(G.t),Kt=(0,G.u)(G.l),{value:jt,loading:Wt,error:ft}=(0,M.A)(async()=>({profile:await Ye.getProfileInfo(),identity:await Ye.getBackstageIdentity()}),[]);return(0,l.useEffect)(()=>{ft&&Kt.post({message:`Failed to load user identity: ${ft}`,severity:"error"})},[ft,Kt]),Wt||ft?{profile:{},displayName:"",loading:Wt}:{profile:jt.profile,backstageIdentity:jt.identity,displayName:(Ce=jt.profile.displayName)!=null?Ce:jt.identity.userEntityRef,loading:Wt}},gt=(0,ut.A)(Ce=>({avatar:{width:({size:Ye})=>Ye,height:({size:Ye})=>Ye,fontSize:({size:Ye})=>Ye*.7,border:`1px solid ${Ce.palette.textSubtle}`}})),xt=Ce=>{const{size:Ye}=Ce,{iconSize:Kt}=r.hC,jt=gt(Ye?{size:Ye}:{size:Kt}),{profile:Wt}=ue();return l.createElement(ye.A,{src:Wt.picture,className:jt.avatar,alt:"Profile picture"})},ht=()=>{const Ce=(0,G.u)(G.r),Ye=(0,G.u)(G.t),[Kt,jt]=l.useState(!1),[Wt,ft]=l.useState(void 0),Ln=Xt=>{ft(Xt.currentTarget),jt(!0)},dn=()=>{ft(void 0),jt(!1)};return l.createElement(l.Fragment,null,l.createElement(ee.A,{"data-testid":"user-settings-menu","aria-label":"more",onClick:Ln},l.createElement(ae.A,null)),l.createElement(y.A,{anchorEl:Wt,open:Kt,onClose:dn},l.createElement(v.A,{"data-testid":"sign-out",onClick:()=>Ye.signOut().catch(Xt=>Ce.post(Xt))},l.createElement(pe.A,null,l.createElement(F.A,null)),"Sign Out")))},Ut=()=>{const{profile:Ce,displayName:Ye}=ue();return l.createElement(r.nO,{title:"Profile",variant:"gridItem"},l.createElement(Q.A,{container:!0,spacing:6},l.createElement(Q.A,{item:!0},l.createElement(xt,{size:96})),l.createElement(Q.A,{item:!0,xs:12,sm:!0,container:!0},l.createElement(Q.A,{item:!0,xs:!0,container:!0,direction:"column",spacing:2},l.createElement(Q.A,{item:!0,xs:!0},l.createElement(W.A,{variant:"subtitle1",gutterBottom:!0},Ye),Ce.email&&l.createElement(W.A,{variant:"body2",color:"textSecondary"},Ce.email))),l.createElement(Q.A,{item:!0},l.createElement(ht,null)))))},S=()=>{const{isPinned:Ce,toggleSidebarPinState:Ye}=(0,r.Ut)();return l.createElement(t.A,null,l.createElement(de.A,{primary:"Pin Sidebar",secondary:"Prevent the sidebar from collapsing"}),l.createElement(_.A,null,l.createElement(me.Ay,{placement:"top",arrow:!0,title:`${Ce?"Unpin":"Pin"} Sidebar`},l.createElement(D.A,{color:"primary",checked:Ce,onChange:()=>Ye(),name:"pin",inputProps:{"aria-label":"Pin Sidebar Switch"}}))))},P=({id:Ce,activeId:Ye,icon:Kt})=>Kt?(0,l.cloneElement)(Kt,{color:Ye===Ce?"primary":void 0}):l.createElement(Ae.A,{color:Ye===Ce?"primary":void 0}),j=(0,ut.A)(Ce=>({container:{display:"flex",flexWrap:"wrap",width:"100%",justifyContent:"space-between",alignItems:"center",paddingBottom:8,paddingRight:16},list:{width:"initial",[Ce.breakpoints.down("xs")]:{width:"100%",padding:"0 0 12px"}},listItemText:{paddingRight:0,paddingLeft:0},listItemSecondaryAction:{position:"relative",transform:"unset",top:"auto",right:"auto",paddingLeft:16,[Ce.breakpoints.down("xs")]:{paddingLeft:0}}})),Z=({children:Ce,title:Ye,value:Kt,...jt})=>l.createElement(me.Ay,{placement:"top",arrow:!0,title:Ye},l.createElement(X.A,{value:Kt,...jt},Ce)),Ie=()=>{const Ce=j(),Ye=(0,G.u)(G.n),Kt=(0,Fe.A)(Ye.activeThemeId$(),Ye.getActiveThemeId()),jt=Ye.getInstalledThemes(),{t:Wt}=(0,H.ie)(oe.u),ft=(Ln,dn)=>{jt.some(Xt=>Xt.id===dn)?Ye.setActiveThemeId(dn):Ye.setActiveThemeId(void 0)};return l.createElement(t.A,{className:Ce.list,classes:{container:Ce.container}},l.createElement(de.A,{className:Ce.listItemText,primary:Wt("themeToggle.title"),secondary:Wt("themeToggle.description")}),l.createElement(_.A,{className:Ce.listItemSecondaryAction},l.createElement(N.A,{exclusive:!0,size:"small",value:Kt!=null?Kt:"auto",onChange:ft},jt.map(Ln=>{const dn=Ln.id,Xt=Ln.icon,An=Ln.title||(dn==="light"||dn==="dark"?Wt(`themeToggle.names.${dn}`):dn);return l.createElement(Z,{key:dn,title:Wt("themeToggle.select",{theme:An}),value:dn},l.createElement(l.Fragment,null,An,"\xA0",l.createElement(P,{id:dn,icon:Xt,activeId:Kt})))}),l.createElement(me.Ay,{placement:"top",arrow:!0,title:Wt("themeToggle.selectAuto")},l.createElement(X.A,{value:"auto",selected:Kt===void 0},Wt("themeToggle.names.auto"),"\xA0",l.createElement(Ae.A,{color:Kt===void 0?"primary":void 0}))))))},ze=(0,ut.A)(Ce=>({container:{display:"flex",flexWrap:"wrap",width:"100%",justifyContent:"space-between",alignItems:"center",paddingBottom:8,paddingRight:16},list:{width:"initial",[Ce.breakpoints.down("xs")]:{width:"100%",padding:"0 0 12px"}},listItemText:{paddingRight:0,paddingLeft:0},listItemSecondaryAction:{position:"relative",transform:"unset",top:"auto",right:"auto",paddingLeft:16,[Ce.breakpoints.down("xs")]:{paddingLeft:0}}})),dt=()=>{const Ce=ze(),Ye=(0,G.u)(H.pl),{t:Kt}=(0,H.ie)(oe.u),[jt]=(0,l.useState)(()=>Ye.language$()),{language:Wt}=(0,Fe.A)(jt,Ye.getLanguage()),{languages:ft}=Ye.getAvailableLanguages();if(ft.length<=1)return null;const Ln=Xt=>{Ye.setLanguage(Xt)},dn=Xt=>{try{return new Intl.DisplayNames([Xt],{type:"language"}).of(Xt)||Xt}catch{return Xt}};return l.createElement(t.A,{className:Ce.list,classes:{container:Ce.container}},l.createElement(de.A,{className:Ce.listItemText,primary:Kt("languageToggle.title"),secondary:Kt("languageToggle.description")}),l.createElement(_.A,{className:Ce.listItemSecondaryAction},l.createElement(r.l6,{label:"",selected:Wt,items:ft.map(Xt=>({label:dn(Xt),value:Xt})),onChange:Xt=>Ln(Xt)})))},Qe=()=>{const{isMobile:Ce}=(0,r.Ut)();return l.createElement(r.nO,{title:"Appearance",variant:"gridItem"},l.createElement(b.A,{dense:!0},l.createElement(Ie,null),l.createElement(dt,null),!Ce&&l.createElement(S,null)))},et=()=>{const{backstageIdentity:Ce}=ue();return Ce?l.createElement(Q.A,{container:!0,spacing:1},l.createElement(Q.A,{item:!0,xs:12},l.createElement(W.A,{variant:"subtitle1",gutterBottom:!0},"User Entity:"," ",l.createElement(re.iI,{entityRefs:[Ce.userEntityRef]}))),l.createElement(Q.A,{item:!0,xs:12},l.createElement(W.A,{variant:"subtitle1"},"Ownership Entities:"," ",l.createElement(re.iI,{entityRefs:Ce.ownershipEntityRefs})))):l.createElement(W.A,null,"No Backstage Identity")},$t=()=>l.createElement(r.nO,{title:"Backstage Identity"},l.createElement(et,null)),tn=()=>l.createElement(Q.A,{container:!0,direction:"row",spacing:3},l.createElement(Q.A,{item:!0,xs:12,md:6},l.createElement(Ut,null)),l.createElement(Q.A,{item:!0,xs:12,md:6},l.createElement(Qe,null)),l.createElement(Q.A,{item:!0,xs:12,md:6},l.createElement($t,null))),It="plugin.user-settings.settingsLayout",pt="plugin.user-settings.settingsLayoutRoute",qt=()=>null;(0,xe.h3)(qt,pt,!0),(0,xe.h3)(qt,"core.gatherMountPoints",!0);const sn=Ce=>{const{title:Ye,children:Kt}=Ce,{isMobile:jt}=(0,r.Ut)(),Wt=(0,xe.OJ)(Kt,ft=>ft.selectByComponentData({key:pt,withStrictError:"Child of SettingsLayout must be an SettingsLayout.Route"}).getElements().map(Ln=>Ln.props));return l.createElement(r.YW,{themeId:"home"},!jt&&l.createElement(r.Y9,{title:Ye!=null?Ye:"Settings"}),l.createElement(r.kE,{routes:Wt}))};(0,xe.h3)(sn,It,!0),sn.Route=qt;const an=Ce=>{const{providerSettings:Ye,tabs:Kt}=Ce;return l.createElement(sn,null,l.createElement(sn.Route,{path:"general",title:"General"},l.createElement(tn,null)),l.createElement(sn.Route,{path:"auth-providers",title:"Authentication Providers"},l.createElement(Re,{providerSettings:Ye})),l.createElement(sn.Route,{path:"feature-flags",title:"Feature Flags"},l.createElement(yt,null)),Kt)},Vt=Ce=>{const{providerSettings:Ye}=Ce,Kt=(0,s.P1)(),jt=(0,xe.OJ)(Kt,ft=>ft.selectByComponentData({key:It}).getElements()),Wt=(0,xe.OJ)(Kt,ft=>ft.selectByComponentData({key:pt}).getElements());return l.createElement(l.Fragment,null,jt.length!==0&&jt||l.createElement(an,{tabs:Wt,providerSettings:Ye}))}},84095:(In,Ct,e)=>{"use strict";e.d(Ct,{U:()=>W,s:()=>b,u:()=>r});var s=e(11638),l=e(59294);const b=(0,s.HM)({id:"user-settings"}),W=(0,s.i1)({id:"user-settings",routes:{settingsPage:b}}).provide((0,s.QJ)({name:"UserSettingsPage",component:()=>e.e(7136).then(e.bind(e,37136)).then(q=>q.SettingsPage),mountPoint:b})),r=(0,l.h2)({id:"user-settings",messages:{languageToggle:{title:"Language",description:"Change the language",select:"Select language {{language}}"},themeToggle:{title:"Theme",description:"Change the theme mode",select:"Select theme {{theme}}",selectAuto:"Select Auto Theme",names:{light:"Light",dark:"Dark",auto:"Auto"}}}})},93449:(In,Ct,e)=>{"use strict";e.d(Ct,{wB:()=>xe});var s=e(96403),l=e.n(s),b=e(84095),A=e(14041),W=e(9684),r=e(22968),q=e(11638),Q=e(70210),t=Object.defineProperty,pe=(z,ee,D)=>ee in z?t(z,ee,{enumerable:!0,configurable:!0,writable:!0,value:D}):z[ee]=D,_=(z,ee,D)=>(pe(z,typeof ee!="symbol"?ee+"":ee,D),D);const de={"Content-Type":"application/json; charset=utf-8",Accept:"application/json"},me=new Map;class G{constructor(ee,D,w,M,y,v){this.namespace=ee,this.fetchApi=D,this.discoveryApi=w,this.errorApi=M,this.identityApi=y,this.fallback=v,_(this,"subscribers",new Set),_(this,"observables",new Map)}static create(ee){var D;return new G((D=ee.namespace)!=null?D:"default",ee.fetchApi,ee.discoveryApi,ee.errorApi,ee.identityApi,WebStorage.create({namespace:ee.namespace,errorApi:ee.errorApi}))}forBucket(ee){const D=`${this.namespace}.${ee}`;return me.has(D)||me.set(D,new G(D,this.fetchApi,this.discoveryApi,this.errorApi,this.identityApi,this.fallback)),me.get(D)}async remove(ee){const D=await this.getFetchUrl(ee),w=await this.fetchApi.fetch(D,{method:"DELETE"});if(!w.ok&&w.status!==404)throw await ResponseError.fromResponse(w);this.notifyChanges({key:ee,presence:"absent"})}async set(ee,D){if(!await this.isSignedIn()){await this.fallback.set(ee,D),this.notifyChanges({key:ee,presence:"present",value:D});return}const w=await this.getFetchUrl(ee),M=await this.fetchApi.fetch(w,{method:"PUT",headers:de,body:JSON.stringify({value:D})});if(!M.ok)throw await ResponseError.fromResponse(M);const{value:y}=await M.json();this.notifyChanges({key:ee,value:y,presence:"present"})}observe$(ee){return this.observables.has(ee)||this.observables.set(ee,new ObservableImpl(D=>(this.subscribers.add(D),Promise.resolve().then(()=>this.get(ee)).then(w=>D.next(w)).catch(w=>this.errorApi.post(w)),()=>{this.subscribers.delete(D)})).filter(({key:D})=>D===ee)),this.observables.get(ee)}snapshot(ee){return{key:ee,presence:"unknown"}}async get(ee){if(!await this.isSignedIn())return this.fallback.snapshot(ee);const D=await this.getFetchUrl(ee),w=await this.fetchApi.fetch(D);if(w.status===404)return{key:ee,presence:"absent"};if(!w.ok)throw await ResponseError.fromResponse(w);try{const{value:M}=await w.json(),y=JSON.parse(JSON.stringify(M),(v,F)=>(typeof F=="object"&&F!==null&&Object.freeze(F),F));return{key:ee,presence:"present",value:y}}catch{return{key:ee,presence:"absent"}}}async getFetchUrl(ee){const D=await this.discoveryApi.getBaseUrl("user-settings"),w=encodeURIComponent(this.namespace),M=encodeURIComponent(ee);return`${D}/buckets/${w}/keys/${M}`}async notifyChanges(ee){for(const D of this.subscribers)try{D.next(ee)}catch{}}async isSignedIn(){try{const ee=await this.identityApi.getCredentials();return!!(ee!=null&&ee.token)}catch{return!1}}}const xe=z=>{const ee=(0,q.Sf)(b.s),D=z.icon?z.icon:W.A;return A.createElement(r.uk,{text:"Settings",to:ee(),icon:D})},ye=Q.L,ut=z=>A.createElement(Q.a.Route,{path:z.path,title:z.title},A.createElement(A.Fragment,null,"props.children"));(0,q.h3)(ut,ye,"UserSettingsTab")},97388:(In,Ct,e)=>{"use strict";e.d(Ct,{Bl:()=>r,Q6:()=>W,qO:()=>Q,tK:()=>q});var s=e(14041);function l(){return typeof window!="undefined"&&window.Math===Math?window:typeof self!="undefined"&&self.Math===Math?self:Function("return this")()}const b=l(),A=pe=>`__@backstage/${pe}__`;function W(pe,_){const de=A(pe);let me=b[de];return me||(me=_(),b[de]=me,me)}function r(pe){Object.freeze(pe);const _={atVersion(de){return pe[de]}};return Object.defineProperty(_,"$map",{configurable:!0,enumerable:!0,get(){return pe}}),_}function q(pe){return W(pe,()=>(0,s.createContext)(void 0))}function Q(pe){return(0,s.useContext)(q(pe))}function t(pe){return{set(_){globalThis[`__@backstage/${pe}__`]=createContext(r(_))},reset(){delete globalThis[`__@backstage/${pe}__`]}}}}}]);})();

//# sourceMappingURL=module-backstage.52ef2270.js.map